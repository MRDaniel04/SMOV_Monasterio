Index: .idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59__Changes_.xml	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ /dev/null	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]" date="1763938864071" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 23/11/2025 23:59 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]/shelved.patch	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ /dev/null	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
@@ -1,670 +0,0 @@
-Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            // 1. Leemos el tamaño guardado en preferencias (ej. 1.3f)\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n\r\n            val currentDensity = LocalDensity.current\r\n            val currentConfig = LocalConfiguration.current\r\n\r\n            // 2. Calculamos la nueva Densidad (Para que el texto SE VEA grande)\r\n            // Nota: Si 'appFontScale' ya es el valor absoluto (ej 1.3), úsalo directamente.\r\n            // Si es un multiplicador, se multiplica. Asumo que FontSize devuelve 1.0, 1.3, 1.6...\r\n            val newDensity = Density(\r\n                density = currentDensity.density,\r\n                fontScale = appFontScale\r\n            )\r\n\r\n            // 3. (NUEVO) Actualizamos la Configuración (Para que el RadioButton SEPA que es grande)\r\n            val newConfiguration = android.content.res.Configuration(currentConfig).apply {\r\n                fontScale = appFontScale\r\n            }\r\n\r\n            // 4. Inyectamos AMBOS valores a toda la app\r\n            CompositionLocalProvider(\r\n                LocalDensity provides newDensity,\r\n                LocalConfiguration provides newConfiguration // <--- ESTO FALTABA\r\n            ) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    //ViewModel para tener el estado del usuario autenticado\r\n    val authViewModel: AuthViewModel = viewModel()\r\n    val currentUser by authViewModel.currentUser.collectAsState(initial = null)\r\n    // Estado global para el modo edición\r\n    var isEditing by remember { mutableStateOf(false) }\r\n\r\n    // ... (Tu lógica de idioma se queda igual)\r\n    val stringEspanyol= \"Español\"\r\n    val stringAleman= \"Deutsch\"\r\n    val stringIngles= \"English\"\r\n    var mostrarIdioma by remember { mutableStateOf(false) }\r\n    val configuration = LocalConfiguration.current\r\n    val currentLanguageCode = configuration.locales[0].language\r\n    var idioma by remember { mutableStateOf(currentLanguageCode) }\r\n    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    // ✅ Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n\r\n    // Comprueba si la ruta ES \"virtual_visit\" (esto cubre el mapa Y los pines anidados)\r\n    val isVirtualVisit = currentRoute == AppRoutes.VIRTUAL_VISIT\r\n\r\n    // Comprueba si la ruta EMPIEZA POR \"pin_360\" (la nueva vista 360)\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n\r\n    val isEdicion = currentRoute == AppRoutes.EDICION_PINES\r\n\r\n    // La vista es inmersiva si es CUALQUIERA de las tres\r\n    val isImmersive = isPanorama || isVirtualVisit || isPin360 || isEdicion\r\n\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    // ✅ Actualizar título (Tu lógica se queda igual)\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)\r\n                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)\r\n                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)\r\n                AppRoutes.MODO_EDICION -> context.getString(R.string.edit_mode)\r\n                AppRoutes.PIN_ENTRADA_MONASTERIO -> context.getString(R.string.title_entrada)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    // --- ¡¡2. ESTRUCTURA REFACTORIZADA (UN SOLO NAVHOST)!! ---\r\n    // (Hemos eliminado el 'if (isImmersive)' que duplicaba el NavHost)\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        // Desactivamos gestos en el mapa Y en pantallas inmersivas\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                // Solo mostramos la barra roja si NO estamos en una ruta inmersiva\r\n                if (!isImmersive) {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            // ... (Tu lógica de idioma y Toast se queda igual)\r\n                            Box {\r\n                                OutlinedIconButton(onClick = {\r\n                                    mostrarIdioma = true\r\n                                }) {\r\n                                    val iconRes =\r\n                                        if (idioma == \"es\" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == \"de\" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido\r\n                                    Image(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = if (idioma == \"es\" || idioma == stringEspanyol ) stringEspanyol\r\n                                        else if (idioma == \"de\" || idioma == stringAleman) stringAleman else stringIngles,\r\n                                        contentScale = ContentScale.Crop\r\n                                    )\r\n                                }\r\n                                DropdownMenu(\r\n                                    expanded = mostrarIdioma,\r\n                                    onDismissRequest = { mostrarIdioma = false },\r\n                                    modifier = Modifier.fillMaxWidth(0.8f),\r\n                                ) {\r\n                                    idiomasDisponibles.forEach { idiomaSlot ->\r\n                                        DropdownMenuItem(\r\n                                            text = { Text(idiomaSlot) },\r\n                                            onClick = {\r\n                                                idioma = idiomaSlot\r\n                                                mostrarIdioma = false\r\n                                                if(idiomaSlot == stringEspanyol)\r\n                                                    LanguageHelper.saveLocale(context, \"es\")\r\n                                                else if(idiomaSlot == stringAleman){\r\n                                                    LanguageHelper.saveLocale(context, \"de\")\r\n                                                } else LanguageHelper.saveLocale(context, \"en\")\r\n                                            }\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            // Icono Editar: solo disponible para un usuario autenticado\r\n                            if (currentUser != null) {\r\n                                IconButton(onClick = {\r\n                                    isEditing = !isEditing // Toggle del modo edición\r\n                                    val message = if (isEditing) context.getString(R.string.edit_mode_activate_message) else context.getString(R.string.edit_mode_deactivate_message)\r\n                                    Toast.makeText(context, message, Toast.LENGTH_SHORT).show()\r\n                                }) {\r\n                                    Icon(\r\n                                        painter = painterResource(id = if (isEditing) R.drawable.lapiz else R.drawable.lapiz),\r\n                                        contentDescription = if (isEditing) stringResource(id = R.string.edit_mode_deactivate_icon) else  stringResource(id = R.string.edit_mode_activate_icon)\r\n                                    )\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            // ¡¡UN SOLO AppNavigationHost!!\r\n            // (Si es inmersiva, paddingValues será cero porque no hay TopBar)\r\n            AppNavigationHost(\r\n                authViewModel = authViewModel,\r\n                navController = navController,\r\n                isEditing = isEditing,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
---- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1763938644001)
-@@ -1,5 +1,7 @@
- package com.nextapp.monasterio
- 
-+import android.R.attr.text
-+import android.app.Activity
- import android.os.Bundle
- import android.widget.Toast
- import androidx.activity.compose.setContent
-@@ -19,6 +21,9 @@
- import androidx.appcompat.app.AppCompatDelegate
- import androidx.compose.foundation.Image
- import androidx.compose.foundation.border
-+import androidx.compose.foundation.shape.RoundedCornerShape
-+import androidx.compose.ui.Alignment
-+import androidx.compose.ui.draw.clip
- import androidx.compose.ui.graphics.Color
- import androidx.compose.ui.layout.ContentScale
- import androidx.compose.ui.platform.LocalConfiguration
-@@ -140,6 +145,16 @@
-                 AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)
-                 AppRoutes.MODO_EDICION -> context.getString(R.string.edit_mode)
-                 AppRoutes.PIN_ENTRADA_MONASTERIO -> context.getString(R.string.title_entrada)
-+                AppRoutes.JUEGO_PUZZLE -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.JUEGO_PAREJAS -> context.getString(R.string.memory_screen)
-+                AppRoutes.PUZZLENIVEL1 -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.PUZZLENIVEL2 -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.PUZZLENIVEL3 -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.PUZZLENIVEL4 -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.PAREJASNIVEL1 -> context.getString(R.string.memory_screen)
-+                AppRoutes.PAREJASNIVEL2 -> context.getString(R.string.memory_screen)
-+                AppRoutes.PAREJASNIVEL3 -> context.getString(R.string.memory_screen)
-+                AppRoutes.PAREJASNIVEL4 -> context.getString(R.string.memory_screen)
-                 else -> context.getString(R.string.title_inicio)
-             }
-         }
-@@ -208,17 +223,33 @@
-                                     modifier = Modifier.fillMaxWidth(0.8f),
-                                 ) {
-                                     idiomasDisponibles.forEach { idiomaSlot ->
-+                                        val iconRes =
-+                                            if (idioma == "es" || idioma == stringEspanyol) R.drawable.espanya else if (idiomaSlot == "de" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido
-+                                        val name =
-+                                            if (idioma == "es" || idioma == stringEspanyol) stringResource(R.string.lang_es) else if (idioma == "de" || idioma == stringAleman)stringResource(R.string.lang_de) else stringResource(R.string.lang_en)
-+                                        val context = LocalContext.current
-+                                        val activity = context as Activity
-                                         DropdownMenuItem(
--                                            text = { Text(idiomaSlot) },
-+                                            text = {
-+                                                Row(verticalAlignment = Alignment.CenterVertically) {
-+                                                    Image(
-+                                                        painter = painterResource(id = iconRes),
-+                                                        contentDescription = name,
-+                                                        modifier = Modifier.size(28.dp).clip(RoundedCornerShape(4.dp))
-+                                                    )
-+                                                    Spacer(modifier = Modifier.width(16.dp))
-+                                                    Text(text = name)
-+                                                }
-+                                            },
-                                             onClick = {
--                                                idioma = idiomaSlot
-                                                 mostrarIdioma = false
--                                                if(idiomaSlot == stringEspanyol)
--                                                    LanguageHelper.saveLocale(context, "es")
--                                                else if(idiomaSlot == stringAleman){
--                                                    LanguageHelper.saveLocale(context, "de")
--                                                } else LanguageHelper.saveLocale(context, "en")
-+                                                val currentLanguage = activity.resources.configuration.locales[0].language
-+                                                if (currentLanguage != idioma) {
-+                                                    LanguageHelper.saveLocale(activity, idioma)
-+                                                    activity.recreate()
-+                                                }
-                                             }
-+
-                                         )
-                                     }
-                                 }
-Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PuzzleData\r\nimport com.nextapp.monasterio.models.PuzzleSize\r\nimport com.nextapp.monasterio.ui.screens.* // Asegúrate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.EntradaMonasterioFirestoreScreen\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.HistoriaViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    modifier: Modifier = Modifier,\r\n    authViewModel: AuthViewModel = viewModel(),\r\n    historiaViewModel: HistoriaViewModel = viewModel(),\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    isEditing: Boolean = false,\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen(isEditing = isEditing, viewModel = historiaViewModel) }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNiño(navController = navController) }\r\n        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyosScreen()}\r\n        composable(AppRoutes.PUZZLENIVEL1){PuzzleScreen(navController=navController,tamaño = PuzzleSize(2,2),imagenes= PuzzleData.IMAGENES_NIVEL1,imagenCompleta=R.drawable.p1)}\r\n        composable(AppRoutes.PUZZLENIVEL2){PuzzleScreen(navController=navController,tamaño = PuzzleSize(3,3),imagenes= PuzzleData.IMAGENES_NIVEL2, imagenCompleta = R.drawable.p2)}\r\n        composable(AppRoutes.PUZZLENIVEL3){PuzzleScreen(navController=navController,tamaño = PuzzleSize(4,4),imagenes= PuzzleData.IMAGENES_NIVEL3,imagenCompleta = R.drawable.p3)}\r\n        composable(AppRoutes.PUZZLENIVEL4){PuzzleScreen(navController=navController,tamaño= PuzzleSize(5,5),imagenes= PuzzleData.IMAGENES_NIVEL4,imagenCompleta = R.drawable.p4)}\r\n        composable(AppRoutes.JUEGO_NINYOS){JuegoNinyosScreen(navController=navController)}\r\n        composable(route=AppRoutes.MODO_EDICION) { OpcionesModoEdicion(navController = navController)}\r\n        composable(AppRoutes.EDICION_FONDO_INICIO) {EdicionFondoInicio(navController = navController)}\r\n        composable(AppRoutes.EDICION_PINES) { EdicionPines(navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galería / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // Ruta al Edición Pines Host\r\n        composable(AppRoutes.EDICION_PINES) {\r\n            EdicionPinesHost(navController)\r\n        }\r\n\r\n\r\n        // --- ¡¡AQUÍ ESTÁ LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // --- Pantalla de Entrada del Monasterio (desde Firebase Pin)\r\n        composable(\r\n            route = AppRoutes.PIN_ENTRADA_MONASTERIO + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            EntradaMonasterioFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- FIN DE LA MODIFICACIÓN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aquí, ¡está bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763938687604)
-@@ -18,8 +18,11 @@
- import androidx.navigation.compose.composable
- import com.nextapp.monasterio.AppRoutes
- import com.nextapp.monasterio.R
--import com.nextapp.monasterio.models.PuzzleData
-+import com.nextapp.monasterio.models.ParejasData
-+import com.nextapp.monasterio.models.ParejasSize
-+/*import com.nextapp.monasterio.models.ParejasData*/
- import com.nextapp.monasterio.models.PuzzleSize
-+import com.nextapp.monasterio.models.PuzzleData
- import com.nextapp.monasterio.ui.screens.* // Asegúrate de importar PanoramaScreen y GaleriaScreen
- import com.nextapp.monasterio.ui.theme.MonasteryRed
- import com.nextapp.monasterio.ui.theme.White
-@@ -54,12 +57,18 @@
-         composable(AppRoutes.PUZZLENIVEL2){PuzzleScreen(navController=navController,tamaño = PuzzleSize(3,3),imagenes= PuzzleData.IMAGENES_NIVEL2, imagenCompleta = R.drawable.p2)}
-         composable(AppRoutes.PUZZLENIVEL3){PuzzleScreen(navController=navController,tamaño = PuzzleSize(4,4),imagenes= PuzzleData.IMAGENES_NIVEL3,imagenCompleta = R.drawable.p3)}
-         composable(AppRoutes.PUZZLENIVEL4){PuzzleScreen(navController=navController,tamaño= PuzzleSize(5,5),imagenes= PuzzleData.IMAGENES_NIVEL4,imagenCompleta = R.drawable.p4)}
--        composable(AppRoutes.JUEGO_NINYOS){JuegoNinyosScreen(navController=navController)}
-+        composable(AppRoutes.JUEGO_NINYOS){OpcionesJuegoNinyos(navController=navController)}
-         composable(route=AppRoutes.MODO_EDICION) { OpcionesModoEdicion(navController = navController)}
-         composable(AppRoutes.EDICION_FONDO_INICIO) {EdicionFondoInicio(navController = navController)}
-         composable(AppRoutes.EDICION_PINES) { EdicionPines(navController) }
-         composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }
-         composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }
-+        composable (AppRoutes.JUEGO_PUZZLE) {JuegoPuzzleScreen(navController = navController)}
-+        composable(AppRoutes.JUEGO_PAREJAS) {JuegoParejasScreen(navController = navController)}
-+        composable(AppRoutes.PAREJASNIVEL1){ParejasScreen(navController=navController, size = ParejasSize(3,2),imagenes= ParejasData.IMAGENES_NIVEL1)}
-+        composable(AppRoutes.PAREJASNIVEL2){ParejasScreen(navController=navController,size = ParejasSize(4,2),imagenes= ParejasData.IMAGENES_NIVEL2)}
-+        composable(AppRoutes.PAREJASNIVEL3){ParejasScreen(navController=navController,size = ParejasSize(5,2),imagenes= ParejasData.IMAGENES_NIVEL3)}
-+        composable(AppRoutes.PAREJASNIVEL4){ParejasScreen(navController=navController,size= ParejasSize(4,3),imagenes= ParejasData.IMAGENES_NIVEL4)}
- 
-         // Ruta de Panorama 360 (Inmersiva, desde Galería / res/raw)
-         composable(
-Index: app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt b/app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt
-deleted file mode 100644
---- a/app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ /dev/null	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-@@ -1,87 +0,0 @@
--package com.nextapp.monasterio.viewModels
--
--import androidx.lifecycle.ViewModel
--import androidx.lifecycle.ViewModelProvider
--import com.nextapp.monasterio.models.GridPosicion
--import com.nextapp.monasterio.models.PuzzleManager
--import com.nextapp.monasterio.models.PiezaPuzzle
--import com.nextapp.monasterio.models.PuzzleSize
--import kotlinx.coroutines.flow.MutableStateFlow
--import kotlinx.coroutines.flow.StateFlow
--import kotlinx.coroutines.flow.update
--
--
--
--data class puzzleUiState(
--    val piezas : List<PiezaPuzzle> = emptyList(),
--    val size: PuzzleSize,
--    val solucionado: Boolean = false,
--)
--
--class PuzzleViewModel(
--    private val tamañoPuzzle: PuzzleSize,
--    private val imagenId: List<Int>) : ViewModel() {
--
--    private val piezas = List(25){it}
--
--    private val _uiState = MutableStateFlow(puzzleUiState(size=tamañoPuzzle))
--    val uiState: StateFlow<puzzleUiState> = _uiState
--    private val gameManager = PuzzleManager(tamañoPuzzle)
--
--    init{
--        resetGame()
--    }
--
--    private fun resetGame(){
--        val piezasIniciales = gameManager.inicializarPiezas(imagenId)
--        if (piezasIniciales.isNotEmpty()) {
--            println("DEBUG: Pieza 0 posición inicial: R${piezasIniciales[0].posicionActual.row} C${piezasIniciales[0].posicionActual.column}")
--        }
--        _uiState.value = puzzleUiState(
--            piezas = piezasIniciales,
--            size = tamañoPuzzle,
--            solucionado = false,
--        )
--    }
--
--    fun soltarPieza(piezaId: Int, newGridPosicion: GridPosicion){
--        _uiState.update{currentUiState->
--            val piezasActualizadas = currentUiState.piezas.map{pieza->
--                if(pieza.id == piezaId){
--                    val esCorrecta = newGridPosicion == pieza.posicionCorrecta
--                    val posicionFinal = if (esCorrecta) {
--                        newGridPosicion
--                    }
--                    else {
--                        pieza.posicionActual
--                    }
--                    pieza.copy(
--                        posicionActual = posicionFinal,
--                        encajada = esCorrecta
--                    )
--                }else{
--                    pieza
--                }
--            }
--            val solved = piezasActualizadas.all{it.encajada}
--            currentUiState.copy(
--                piezas=piezasActualizadas,
--                solucionado = solved
--            )
--        }
--    }
--
--}
--
--class PuzzleViewModelFactory(
--    private val tamañoPuzzle: PuzzleSize,
--    private val imagenesIds: List<Int>
--) : ViewModelProvider.Factory{
--    @Suppress("UNCHECKED_CAST")
--    override fun <T : ViewModel> create(modelClass: Class<T>): T {
--        if (modelClass.isAssignableFrom(PuzzleViewModel::class.java)) {
--            return PuzzleViewModel(tamañoPuzzle, imagenesIds) as T
--        }
--        throw IllegalArgumentException("Unknown ViewModel class")
--    }
--}
-\ No newline at end of file
-Index: .idea/deploymentTargetSelector.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DIALOG\" />\r\n        <DropdownSelection timestamp=\"2025-11-23T14:46:27.426713600Z\">\r\n          <Target type=\"DEFAULT_BOOT\">\r\n            <handle>\r\n              <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=R52T40GVQQB\" />\r\n            </handle>\r\n          </Target>\r\n        </DropdownSelection>\r\n        <DialogSelection>\r\n          <targets>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=RZCX7216PCM\" />\r\n              </handle>\r\n            </Target>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=R52T40GVQQB\" />\r\n              </handle>\r\n            </Target>\r\n          </targets>\r\n        </DialogSelection>\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
---- a/.idea/deploymentTargetSelector.xml	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/.idea/deploymentTargetSelector.xml	(date 1763924549556)
-@@ -3,28 +3,7 @@
-   <component name="deploymentTargetSelector">
-     <selectionStates>
-       <SelectionState runConfigName="app">
--        <option name="selectionMode" value="DIALOG" />
--        <DropdownSelection timestamp="2025-11-23T14:46:27.426713600Z">
--          <Target type="DEFAULT_BOOT">
--            <handle>
--              <DeviceId pluginId="PhysicalDevice" identifier="serial=R52T40GVQQB" />
--            </handle>
--          </Target>
--        </DropdownSelection>
--        <DialogSelection>
--          <targets>
--            <Target type="DEFAULT_BOOT">
--              <handle>
--                <DeviceId pluginId="PhysicalDevice" identifier="serial=RZCX7216PCM" />
--              </handle>
--            </Target>
--            <Target type="DEFAULT_BOOT">
--              <handle>
--                <DeviceId pluginId="PhysicalDevice" identifier="serial=R52T40GVQQB" />
--              </handle>
--            </Target>
--          </targets>
--        </DialogSelection>
-+        <option name="selectionMode" value="DROPDOWN" />
-       </SelectionState>
-     </selectionStates>
-   </component>
-Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegación en un solo lugar\r\n * para evitar errores de escritura y centralizar la gestión.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val MODO_NINYOS = \"modo_niños\"\r\n\r\n    const val VIDEO_NINYOS = \"video_modo_niños\"\r\n    const val PUZZLENIVEL1 =\"puzzle_nivel_1\"\r\n    const val PUZZLENIVEL2 =\"puzzle_nivel_2\"\r\n    const val PUZZLENIVEL3 =\"puzzle_nivel_3\"\r\n    const val PUZZLENIVEL4 =\"puzzle_nivel_4\"\r\n\r\n    const val JUEGO_NINYOS = \"juego_modo_niños\"\r\n    const val MODO_EDICION = \"modo_edicion\"\r\n    const val EDICION_FONDO_INICIO = \"edicion_fondo_inicio\"\r\n    const val EDICION_PINES = \"edicion_pines\"\r\n\r\n    const val CREACION_PINES = \"creacion_pines\"\r\n\r\n\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n    const val PIN_ENTRADA_MONASTERIO = \"entrada_monasterio\"\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
---- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763915156576)
-@@ -21,10 +21,18 @@
-     const val MODO_NINYOS = "modo_niños"
- 
-     const val VIDEO_NINYOS = "video_modo_niños"
-+
-+    const val JUEGO_PUZZLE = "juego_puzzle"
-+
-+    const val JUEGO_PAREJAS = "juego_parejas"
-     const val PUZZLENIVEL1 ="puzzle_nivel_1"
-     const val PUZZLENIVEL2 ="puzzle_nivel_2"
-     const val PUZZLENIVEL3 ="puzzle_nivel_3"
-     const val PUZZLENIVEL4 ="puzzle_nivel_4"
-+    const val PAREJASNIVEL1 ="parejas_nivel_1"
-+    const val PAREJASNIVEL2 ="parejas_nivel_2"
-+    const val PAREJASNIVEL3 ="parejas_nivel_3"
-+    const val PAREJASNIVEL4 ="parejas_nivel_4"
- 
-     const val JUEGO_NINYOS = "juego_modo_niños"
-     const val MODO_EDICION = "modo_edicion"
-Index: app/src/main/res/values-de/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa María\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus beenden</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">Änderungen speichern</string>\r\n    <string name=\"profile_login\">Anmelden</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Menü öffnen</string>\r\n    <string name=\"navigation_drawer_close\">Menü schließen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Straße: …</string>\r\n\r\n    <string name=\"history_1328\">1328 \uD83D\uDD25 Brand und Wiederaufbau</string>\r\n    <string name=\"history_1328_body\">Während eines Brandes in Valladolid, ausgelöst durch die Truppen Alfons’ XI., wurde das Kloster in den Palästen von La Magdalena schwer beschädigt. Die Nonnen begannen mit dem Wiederaufbau dank der finanziellen Unterstützung von Álvaro Nuño Pérez de Monroy.</string>\r\n\r\n    <string name=\"history_1579\">1579 \uD83C\uDFF0 Wiederaufbau der Kirche und des Kreuzgangs</string>\r\n    <string name=\"history_579_body\">Die Nonnen errichteten die Kirche nach dem Entwurf des italienischen Meisters Pietro Palladio. Der Altaraufsatz stammte von Gregorio Fernández, und der neue Kreuzgang wurde von Francisco de Praves gebaut. All dies wurde durch die Spenden der Äbtissinnen Ana und Isabel de Mendoza ermöglicht.</string>\r\n\r\n    <string name=\"history_1869\">1869 \uD83C\uDF93 Gründung der Klosterschule</string>\r\n    <string name=\"history_1869_body\">Die Gemeinschaft der Huelgas Reales eröffnete ihre eigene Schule und nahm adlige Mädchen aus Valladolid als Halbinternats\u00ADschülerinnen auf.</string>\r\n\r\n    <string name=\"history_XX\">20.–21. Jahrhundert ✨ Restaurierung und modernes Leben</string>\r\n    <string name=\"history_XX_body\">Das Kloster wurde vollständig restauriert. Der Rückgang der Berufungen führte zur Gründung der Laien-Zisterzienserbruderschaft, die den Geist der Regula Benedicti lebendig hält.</string>\r\n\r\n    <string name=\"history_2007\">Seit 2007 \uD83D\uDC69\u200D\uD83E\uDDB3 Leitung und weibliche Kongregation</string>\r\n    <string name=\"history_2007_body\">Das Kloster gehört zur Kastilischen Kongregation des Zisterzienserordens, die seit 2007 als weibliche Kongregation aktiv ist. Die erste Präsidentin der Äbtissinnen war María del Mar Martínez; nach ihrem Tod im Jahr 2013 übernahm Schwester Isabel Vallés Gallego das Amt. Derzeit leitet Schwester María das Kloster und die Schule.</string>\r\n    <string name=\"info_hours\">Öffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n    <string name=\"title_appointment\">Termin buchen</string>\r\n    <string name=\"option_phone_appointment\">Telefonisch buchen</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Uhrzeit</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollständigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Wählen Sie ein Datum</string>\r\n    <string name=\"placeholderhour_appointment\">Wählen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name ist erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enthält ein ungültiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail ist erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ungültig</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgewählt werden</string>\r\n    <string name=\"hour_no_selected\">Eine Uhrzeit muss ausgewählt werden</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Abbrechen</string>\r\n    <string name=\"confirm_button\">BESTÄTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Bestätigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist bereit. Bitte klicken Sie auf \\'Senden\\' in der gerade geöffneten E-Mail-Anwendung, um Ihre Anfrage abzuschließen. Wir werden auf diese E-Mail antworten, um die Verfügbarkeit zu bestätigen.</string>\r\n    <string name=\"email_subject\">Anfrage für Besuchsreservierung - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nIch möchte eine Reservierung für einen Besuch des Klosters mit den folgenden Details anfordern:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre freundliche Bestätigung.\\n\\nVielen Dank,\\nMit freundlichen Grüßen,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache auswählen</string>\r\n    <string name=\"font_size_select\">Schriftgröße auswählen</string>\r\n    <string name=\"font_extrabig\">Extra Groß</string>\r\n    <string name=\"font_normal\">Mittel</string>\r\n    <string name=\"font_big\">Groß</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"title_entrada\">Klostereingang</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltflächen ausblenden</string>\r\n    <string name=\"close\">Schließen</string>\r\n    <string name=\"go_back\">Zurück</string>\r\n    <string name=\"see_360\">360º ansehen</string>\r\n    <string name=\"contentdescription_image_pin\">Pin-Bild (zum Vergrößern klicken)</string>\r\n    <string name=\"readjust\">Neu anpassen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Erhöhen</string>\r\n    <string name=\"out_interactive_area\">Außerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Ziel nicht definiert</string>\r\n    <string name=\"notdefined_destinyplane\">Zielplan nicht definiert</string>\r\n    <string name=\"plane_loading\">Lade Plan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n    <string name=\"child_mode\">KINDERMODUS</string>\r\n    <string name=\"child_mode_view\">Kindermodus</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Spiel</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">SPIEL</string>\r\n    <string name=\"edit_mode\">BEARBEITUNGSMODUS</string>\r\n    <string name=\"edit_home_background\">Startseiten-Hintergrund bearbeiten</string>\r\n    <string name=\"edit_pins\">Pins bearbeiten</string>\r\n    <string name=\"location_error\">Es wurde keine App gefunden, mit der der Standort geöffnet werden kann.</string>\r\n    <string name=\"contact_data\">Kontaktinformationen</string>\r\n    <string name=\"location_data\">Standort</string>\r\n    <string name=\"email_data\">E-Mail</string>\r\n    <string name=\"phone_data\">Telefon</string>\r\n    <string name=\"visit_schedule\">Öffnungszeiten</string>\r\n    <string name=\"monday_to_friday\">Montag bis Freitag:</string>\r\n    <string name=\"confirm_save_title\">Änderungen speichern?</string>\r\n    <string name=\"confirm_save_message\">Sind Sie sicher, dass Sie die Änderungen speichern möchten?</string>\r\n    <string name=\"confirm_save_button\">Speichern</string>\r\n    <string name=\"confirm_cancel_button\">Abbrechen</string>\r\n    <string name=\"edit_cancel_changes\">Abbrechen</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Bild hinzufügen</string>\r\n    <string name=\"image_delete\">Löschen</string>\r\n    <string name=\"image_delete_confirm_title\">Bild löschen?</string>\r\n    <string name=\"image_delete_confirm_message\">Diese Aktion kann nicht rückgängig gemacht werden</string>\r\n    <string name=\"image_uploading\">Bild wird hochgeladen...</string>\r\n    <string name=\"image_upload_success\">Bild erfolgreich hochgeladen</string>\r\n    <string name=\"image_upload_error\">Fehler beim Hochladen des Bildes</string>\r\n    <string name=\"image_select_error\">Fehler beim Auswählen des Bildes</string>\r\n    <string name=\"four_pieces\">4 Stück</string>\r\n    <string name=\"nine_pieces\">9 Stück</string>\r\n    <string name=\"sixteen_pieces\">16 Stück</string>\r\n    <string name=\"twentyfive_pieces\">25 Stück</string>\r\n    <string name=\"congratulations\">Glückwunsch!</string>\r\n    <string name=\"message_puzzle_completed\">Du hast das Rätsel gelöst! Bereit für die nächste Herausforderung?</string>\r\n    <string name=\"original_image\">Bild ansehen</string>\r\n    <string name=\"ready\">Bereit</string>\r\n    <string name=\"dont_show_again\">Nicht mehr anzeigen</string>\r\n    <string name=\"understand\">Verstanden</string>\r\n    <string name=\"map_tutorial_body\">Dies ist der Inhalt des Tutorials</string>\r\n    <string name=\"map_tutorial_title\">Dies ist der Titel des Tutorials</string>\r\n    <string name=\"map_tutorial_body2\">Dies ist der Inhalt des Kartentutorials 2</string>\r\n    <string name=\"map_tutorial_title2\">Dies ist der Titel des Kartentutorials 2</string>\r\n    <string name=\"pin_tutorial_body\">Dies ist der Inhalt des Pin-Tutorials</string>\r\n    <string name=\"pin_tutorial_title\">Dies ist der Titel des Pin-Tutorials</string>\r\n    <string name=\"next\">Weiter</string>\r\n\r\n    <string name=\"map_tutorial_body1\">Oben links können Sie über das Symbol (←) zum Start zurückkehren.</string>\r\n    <string name=\"map_tutorial_body1_2\">Tippen Sie auf die farbigen Bereiche der Karte, um die verschiedenen Bereiche zu erkunden.</string>\r\n    <string name=\"map_tutorial_body1_3\">Mit den Tasten auf der rechten Seite können Sie die Karte vergrößern, verkleinern oder zurücksetzen.</string>\r\n\r\n    <string name=\"submapa_1\">Tippen Sie auf das Symbol (←), um zur Übersichtskarte zurückzukehren.</string>\r\n    <string name=\"submapa_2\">Tippen Sie auf die verschiedenen Pins, um die Details aufzurufen.</string>\r\n\r\n    <string name=\"pin_1\">Drücken Sie das Symbol (←), um zur Karte zurückzukehren.</string>\r\n    <string name=\"pin_2\">Wischen Sie durch die Bilder oder tippen Sie darauf, um sie zu vergrößern.</string>\r\n    <string name=\"pin_3\">Tippen Sie hier, um den Audioguide anzuhören.</string>\r\n    <string name=\"pin_4\">Drücken Sie diesen Button, um die 360°-Ansicht zu öffnen.</string>\r\n    <string name=\"image_gallery_title\">Bilder</string>\r\n    <string name=\"visible\">sichtbar</string>\r\n    <string name=\"hidden\">versteckt</string>\r\n    <string name=\"lang_en\">English</string>\r\n    <string name=\"lang_es\">Español</string>\r\n    <string name=\"sample_text\">Beispiel</string>\r\n    <string name=\"lang_de\">Deutsch</string>\r\n    <string name=\"font_small\">Klein</string>\r\n    <string name=\"font_medium\">Mittel</string>\r\n    <string name=\"font_large\">Groß</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
---- a/app/src/main/res/values-de/strings.xml	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/res/values-de/strings.xml	(date 1763928810236)
-@@ -99,9 +99,9 @@
-     <string name="child_mode">KINDERMODUS</string>
-     <string name="child_mode_view">Kindermodus</string>
-     <string name="video_view">Video</string>
--    <string name="game_view">Spiel</string>
-+    <string name="game_view">Spiele</string>
-     <string name="video_child">VIDEO</string>
--    <string name="game_child">SPIEL</string>
-+    <string name="game_child">SPIELE</string>
-     <string name="edit_mode">BEARBEITUNGSMODUS</string>
-     <string name="edit_home_background">Startseiten-Hintergrund bearbeiten</string>
-     <string name="edit_pins">Pins bearbeiten</string>
-@@ -130,8 +130,12 @@
-     <string name="nine_pieces">9 Stück</string>
-     <string name="sixteen_pieces">16 Stück</string>
-     <string name="twentyfive_pieces">25 Stück</string>
-+    <string name="three_pairs">3 Paare</string>
-+    <string name="four_pairs">4 Paare</string>
-+    <string name="five_pairs">5 Paare</string>
-+    <string name="six_pairs">6 Paare</string>
-     <string name="congratulations">Glückwunsch!</string>
--    <string name="message_puzzle_completed">Du hast das Rätsel gelöst! Bereit für die nächste Herausforderung?</string>
-+    <string name="message_game_completed">Du hast das Spiel gelöst! Bereit für die nächste Herausforderung?</string>
-     <string name="original_image">Bild ansehen</string>
-     <string name="ready">Bereit</string>
-     <string name="dont_show_again">Nicht mehr anzeigen</string>
-@@ -165,4 +169,9 @@
-     <string name="font_small">Klein</string>
-     <string name="font_medium">Mittel</string>
-     <string name="font_large">Groß</string>
-+    <string name="puzzle_screen">Puzzle</string>
-+    <string name="puzzle_option">PUZZLE</string>
-+    <string name="memory_screen">Memory</string>
-+    <string name="memory_option">MEMORY</string>
-+    <string name="back_piece">Rückseite des Stückes</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.util.Log\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.foundation.gestures.detectDragGestures\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.lazy.LazyRow\r\nimport androidx.compose.foundation.lazy.grid.GridCells\r\nimport androidx.compose.foundation.lazy.grid.LazyVerticalGrid\r\nimport androidx.compose.foundation.lazy.grid.items\r\nimport androidx.compose.foundation.lazy.items\r\nimport androidx.compose.material3.AlertDialog\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.Divider\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.geometry.Offset\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.input.pointer.pointerInput\r\nimport androidx.compose.ui.layout.onGloballyPositioned\r\nimport androidx.compose.ui.layout.positionInWindow\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.Dp\r\nimport androidx.compose.ui.unit.IntOffset\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.zIndex\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavController\r\nimport com.nextapp.monasterio.models.GridPosicion\r\nimport com.nextapp.monasterio.models.PiezaPuzzle\r\nimport com.nextapp.monasterio.models.PuzzleSize\r\nimport com.nextapp.monasterio.viewModels.PuzzleViewModel\r\nimport com.nextapp.monasterio.viewModels.PuzzleViewModelFactory\r\nimport kotlin.math.round\r\nimport com.nextapp.monasterio.R\r\n\r\n@Composable\r\nfun PuzzleScreen(\r\n    navController: NavController,\r\n    tamaño: PuzzleSize,\r\n    imagenes: List<Int>,\r\n    imagenCompleta: Int\r\n) {\r\n    val factory = remember { PuzzleViewModelFactory(tamaño, imagenes) }\r\n    val viewModel: PuzzleViewModel = viewModel(factory = factory)\r\n    val state by viewModel.uiState.collectAsState()\r\n    val density = LocalDensity.current\r\n\r\n    // Estado del Grid y la celda\r\n    var tamañoCelda by remember { mutableStateOf(0.dp) }\r\n    var gridOriginOffset by remember { mutableStateOf(Offset.Zero) }\r\n\r\n    // Estado de Drag and Drop (flotante)\r\n    var piezaArrastradaId by remember { mutableStateOf<Int?>(null) }\r\n    var desplazamientoPiezaArrastrada by remember { mutableStateOf<Offset>(Offset.Zero) }\r\n\r\n    // Mapa de posiciones iniciales de las piezas SUELTAS en la bandeja (llenado por LazyRow)\r\n    val trayPositionsMap = remember { mutableStateMapOf<Int, Offset>() }\r\n    var showImagePreviewDialog by remember { mutableStateOf(false) }\r\n    // El Box principal actúa como la capa de superposición (Overlay) para la pieza arrastrada.\r\n    Box(modifier = Modifier.fillMaxSize()) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // --- 1. PUZZLE GRID (Drop Targets y Piezas Encajadas) ---\r\n            LazyVerticalGrid(\r\n                columns = GridCells.Fixed(tamaño.columns),\r\n                // ... (Arreglos y Paddings)\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .wrapContentWidth(Alignment.CenterHorizontally)\r\n                    .background(Color.LightGray.copy(0.5f))\r\n                    .onGloballyPositioned { coordinates ->\r\n                        val gridWith = coordinates.size.width\r\n                        if (gridWith > 0) {\r\n                            tamañoCelda = with(density) { (gridWith / state.size.columns).toDp() }\r\n                            gridOriginOffset = coordinates.positionInWindow()\r\n                        }\r\n                    },\r\n                userScrollEnabled = false\r\n            ) {\r\n                items(tamaño.rows * tamaño.columns) { index ->\r\n                    val row = index / tamaño.columns\r\n                    val col = index % tamaño.columns\r\n                    val gridPosicion = GridPosicion(row, col)\r\n                    val piezaEnPosicion = state.piezas.find { it.posicionCorrecta == gridPosicion }\r\n                    GridCell(pieza = piezaEnPosicion)\r\n                }\r\n            }\r\n            Button(\r\n                onClick = { showImagePreviewDialog = true }, // Cambia el estado a true\r\n                modifier = Modifier.padding(top = 16.dp, bottom = 8.dp)\r\n            ) {\r\n                Text(text = stringResource(R.string.original_image)) // \"Mostrar Imagen Original\"\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            if (tamañoCelda > 0.dp) {\r\n                val shuffledLoosePieces by remember(state.piezas) { // Clave: Número de piezas sueltas\r\n                    mutableStateOf(state.piezas.filter { !it.encajada }.shuffled())\r\n                }\r\n                PuzzleTray(\r\n                    piezas = shuffledLoosePieces,\r\n                    tamañoPieza = tamañoCelda,\r\n                    isDragInProgress = piezaArrastradaId != null,\r\n                    onPiecePositioned = { id, offset ->\r\n                        // Llenar el mapa de posiciones iniciales para el Drag & Drop\r\n                        trayPositionsMap[id] = offset\r\n                    },\r\n                    onDragStart = { p, _ ->\r\n                        // INICIO DEL DRAG: Activar la pieza flotante\r\n                        piezaArrastradaId = p.id\r\n                        desplazamientoPiezaArrastrada = Offset.Zero\r\n                    }\r\n                )\r\n            }\r\n\r\n            // --- 3. DIÁLOGO DE SOLUCIONADO ---\r\n            if (state.solucionado) {\r\n                PuzzleDialog(onDismiss = {}, onConfirm = { navController.popBackStack() })\r\n            }\r\n            if (showImagePreviewDialog) {\r\n                ImagePreviewDialog(\r\n                    imageResId = imagenCompleta,\r\n                    onDismiss = { showImagePreviewDialog = false }\r\n                )\r\n            }\r\n        } // Fin Column\r\n\r\n        // --- 4. PIEZA ARRASTRADA (OVERLAY) ---\r\n        // Este Box solo dibuja la pieza que se está arrastrando (piezaArrastradaId != null)\r\n        piezaArrastradaId?.let { id ->\r\n            val piezaFlotante = state.piezas.find { it.id == id }!!\r\n            val startOffset = trayPositionsMap[id] ?: Offset.Zero\r\n\r\n            DraggableFloatingPiece(\r\n                pieza = piezaFlotante,\r\n                tamañoCelda = tamañoCelda,\r\n                startOffset = startOffset,\r\n                gridOriginOffset = gridOriginOffset,\r\n                desplazamientoActual = desplazamientoPiezaArrastrada,\r\n                onDrag = { dragAmount ->\r\n                    // MOVIMIENTO: Actualizar el desplazamiento\r\n                    desplazamientoPiezaArrastrada += dragAmount\r\n                },\r\n                onDragEnd = {\r\n                    // FIN DEL DRAG: Calcular la nueva posición y llamar al ViewModel\r\n                    if (piezaArrastradaId != null) {\r\n                        val piezaSize = with(density) { tamañoCelda.toPx() }\r\n                        val piezaActual = state.piezas.find { it.id == piezaArrastradaId }!!\r\n\r\n                        // Calcular la posición final de la pieza respecto al origen del Grid\r\n                        val finalX = startOffset.x + desplazamientoPiezaArrastrada.x\r\n                        val finalY = startOffset.y + desplazamientoPiezaArrastrada.y\r\n\r\n                        val relativeX = finalX - gridOriginOffset.x\r\n                        val relativeY = finalY - gridOriginOffset.y\r\n\r\n                        val centroRelativeX = relativeX + (piezaSize / 2f)\r\n                        val centroRelativeY = relativeY + (piezaSize / 2f)\r\n\r\n                        val Y_Compensado = centroRelativeY + piezaSize * 1.0f\r\n\r\n                        val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tamaño.columns - 1)\r\n                        val newRow = (Y_Compensado / piezaSize).toInt().coerceIn(0, tamaño.rows - 1)\r\n\r\n                        Log.d(\"PUZZLE_DROP\", \"Pieza ${piezaArrastradaId} destino: R$newRow C$newColumn\")\r\n                        Log.d(\"PUZZLE_DROP_2\", \"Pieza ${piezaArrastradaId} posicion correcta: R${piezaActual.posicionCorrecta.row} C${piezaActual.posicionCorrecta.column}\")\r\n                        viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))\r\n                    }\r\n                    piezaArrastradaId = null\r\n                    desplazamientoPiezaArrastrada = Offset.Zero\r\n                }\r\n            )\r\n        }\r\n    } // Fin Box\r\n}\r\n\r\n// ... (El resto de composables en el siguiente bloque)\r\n\r\n// Este Composable dibuja una celda en el Grid (vacía o con pieza encajada)\r\n@Composable\r\nfun GridCell(pieza: PiezaPuzzle?) {\r\n    val isEncajada = pieza?.encajada ?: false\r\n    Box(\r\n        modifier = Modifier\r\n            .aspectRatio(1f)\r\n            .padding(1.dp)\r\n            .background(Color.LightGray.copy(alpha = 0.1f)),\r\n        contentAlignment = Alignment.Center\r\n    ) {\r\n        if (isEncajada) {\r\n            Image(\r\n                painter = painterResource(id = pieza!!.imagen),\r\n                contentDescription = \"Pieza encajada ${pieza.id}\",\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// --- BANDEJA (LAZY ROW) ---\r\n@Composable\r\nfun PuzzleTray(\r\n    piezas: List<PiezaPuzzle>,\r\n    tamañoPieza: Dp,\r\n    isDragInProgress: Boolean,\r\n    onPiecePositioned: (Int, Offset) -> Unit,\r\n    onDragStart: (PiezaPuzzle, Offset) -> Unit\r\n) {\r\n    Column(\r\n        modifier = Modifier.fillMaxWidth(),\r\n        horizontalAlignment = Alignment.CenterHorizontally\r\n    ) {\r\n        Text(\r\n            text = \"Piezas Faltantes (${piezas.size})\",\r\n            style = androidx.compose.material3.MaterialTheme.typography.titleMedium,\r\n            modifier = Modifier.padding(bottom = 8.dp)\r\n        )\r\n        LazyRow(\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .height(tamañoPieza + 16.dp), // Altura fija para el LazyRow\r\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\r\n            contentPadding = PaddingValues(horizontal = 8.dp)\r\n        ) {\r\n            items(piezas, key = { it.id }) { pieza ->\r\n                // Este Box representa la pieza en la bandeja, que inicia el arrastre.\r\n                Box(\r\n                    modifier = Modifier\r\n                        .size(tamañoPieza)\r\n                        .onGloballyPositioned { coordinates ->\r\n                            // 1. CAPTURAR LA POSICIÓN DE INICIO EN LA BANDEJA\r\n                            onPiecePositioned(pieza.id, coordinates.positionInWindow())\r\n                        }\r\n                        .pointerInput(isDragInProgress) {\r\n                            if (isDragInProgress) return@pointerInput\r\n                            detectDragGestures(\r\n                                onDragStart = { offset ->\r\n                                    // 2. INICIAR EL DRAG: Avisar a PuzzleScreen para activar la pieza flotante\r\n                                    onDragStart(pieza, offset)\r\n                                },\r\n                                onDrag = { _, _ -> /* El movimiento lo gestiona la pieza flotante */ },\r\n                                onDragEnd = { /* El fin lo gestiona la pieza flotante */ }\r\n                            )\r\n                        }\r\n                ) {\r\n                    Image(\r\n                        painter = painterResource(id = pieza.imagen),\r\n                        contentDescription = \"Pieza ${pieza.id}\",\r\n                        modifier = Modifier.fillMaxSize()\r\n                    )\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// --- PIEZA FLOTANTE (OVERLAY) ---\r\n// Este componente se dibuja en el Box principal y sigue el dedo.\r\n@Composable\r\nfun DraggableFloatingPiece(\r\n    pieza: PiezaPuzzle,\r\n    tamañoCelda: Dp,\r\n    startOffset: Offset,\r\n    gridOriginOffset: Offset,\r\n    desplazamientoActual: Offset,\r\n    onDrag: (Offset) -> Unit,\r\n    onDragEnd: () -> Unit\r\n) {\r\n    // Calcular la posición absoluta en la pantalla (Base de la Bandeja + Movimiento del dedo)\r\n    val totalOffsetX = startOffset.x + desplazamientoActual.x\r\n    val totalOffsetY = startOffset.y + desplazamientoActual.y\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .offset {\r\n                // Aplicar el desplazamiento total\r\n                IntOffset(\r\n                    x = totalOffsetX.toInt(),\r\n                    y = totalOffsetY.toInt()\r\n                )\r\n            }\r\n            .zIndex(10f) // Asegura que esté por encima de todo\r\n            .size(tamañoCelda)\r\n            .pointerInput(Unit) {\r\n                // DETECCIÓN DE MOVIMIENTO Y FIN DE ARRASTRE\r\n                detectDragGestures(\r\n                    onDragStart = { /* Ya se inició en la bandeja */ },\r\n                    onDrag = { change, dragAmount ->\r\n                        onDrag(dragAmount)\r\n                        change.consume()\r\n                    },\r\n                    onDragEnd = onDragEnd // Llamar al fin para la lógica de soltar\r\n                )\r\n            }\r\n            .border(2.dp, Color.Red) // Indicador visual de que se está arrastrando\r\n    ) {\r\n        Image(\r\n            painter = painterResource(id = pieza.imagen),\r\n            contentDescription = \"Pieza flotante ${pieza.id}\",\r\n            modifier = Modifier.fillMaxSize()\r\n        )\r\n    }\r\n}\r\n\r\n// (Asumimos que PuzzleDialog está definido en tu archivo)\r\n// ...\r\n@Composable\r\nfun PuzzleDialog(\r\n    onDismiss: () -> Unit,\r\n    onConfirm : () -> Unit\r\n){\r\n    AlertDialog(\r\n        onDismissRequest=onDismiss,\r\n        title = {\r\n            Text(stringResource(R.string.congratulations))\r\n        },\r\n        text = {\r\n            Text(stringResource(R.string.message_puzzle_completed))\r\n        },\r\n        confirmButton = {\r\n            Button(\r\n                onClick = onConfirm\r\n            ) {\r\n                Text(stringResource(R.string.ready))\r\n            }\r\n        },\r\n    )\r\n}\r\n\r\n@Composable\r\nfun ImagePreviewDialog(\r\n    imageResId: Int, // Recibe el ID del recurso de la imagen completa\r\n    onDismiss: () -> Unit // Función para cerrar el diálogo\r\n) {\r\n    AlertDialog(\r\n        onDismissRequest = onDismiss,\r\n        text = {\r\n            // Muestra la imagen completa\r\n            Image(\r\n                painter = painterResource(id = imageResId),\r\n                contentDescription = stringResource(R.string.original_image),\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .aspectRatio(1f) // Mantener la proporción de la imagen\r\n            )\r\n        },\r\n        confirmButton = {\r\n            Button(onClick = onDismiss) {\r\n                Text(stringResource(R.string.close)) // \"Cerrar\"\r\n            }\r\n        }\r\n    )\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt	(date 1763937359809)
-@@ -1,5 +1,7 @@
- package com.nextapp.monasterio.ui.screens
- 
-+import android.app.Activity
-+import android.content.pm.ActivityInfo
- import android.util.Log
- import androidx.compose.foundation.Image
- import androidx.compose.foundation.background
-@@ -11,6 +13,7 @@
- import androidx.compose.foundation.lazy.grid.LazyVerticalGrid
- import androidx.compose.foundation.lazy.grid.items
- import androidx.compose.foundation.lazy.items
-+import androidx.compose.foundation.shape.RoundedCornerShape
- import androidx.compose.material3.AlertDialog
- import androidx.compose.material3.Button
- import androidx.compose.material3.Divider
-@@ -23,6 +26,8 @@
- import androidx.compose.ui.input.pointer.pointerInput
- import androidx.compose.ui.layout.onGloballyPositioned
- import androidx.compose.ui.layout.positionInWindow
-+import androidx.compose.ui.platform.LocalConfiguration
-+import androidx.compose.ui.platform.LocalContext
- import androidx.compose.ui.platform.LocalDensity
- import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.res.stringResource
-@@ -52,6 +57,9 @@
-     val state by viewModel.uiState.collectAsState()
-     val density = LocalDensity.current
- 
-+    val context = LocalContext.current
-+    val activity = context as? Activity
-+
-     // Estado del Grid y la celda
-     var tamañoCelda by remember { mutableStateOf(0.dp) }
-     var gridOriginOffset by remember { mutableStateOf(Offset.Zero) }
-@@ -63,6 +71,17 @@
-     // Mapa de posiciones iniciales de las piezas SUELTAS en la bandeja (llenado por LazyRow)
-     val trayPositionsMap = remember { mutableStateMapOf<Int, Offset>() }
-     var showImagePreviewDialog by remember { mutableStateOf(false) }
-+
-+    val screenWidth = LocalConfiguration.current.screenWidthDp
-+    val isTablet = screenWidth > 600
-+
-+    DisposableEffect(Unit) {
-+        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-+        onDispose {
-+
-+        }
-+    }
-+
-     // El Box principal actúa como la capa de superposición (Overlay) para la pieza arrastrada.
-     Box(modifier = Modifier.fillMaxSize()) {
-         Column(
-@@ -74,11 +93,11 @@
-             // --- 1. PUZZLE GRID (Drop Targets y Piezas Encajadas) ---
-             LazyVerticalGrid(
-                 columns = GridCells.Fixed(tamaño.columns),
--                // ... (Arreglos y Paddings)
-                 modifier = Modifier
-                     .fillMaxWidth()
-                     .wrapContentWidth(Alignment.CenterHorizontally)
-                     .background(Color.LightGray.copy(0.5f))
-+                    .border(1.dp,Color.Black)
-                     .onGloballyPositioned { coordinates ->
-                         val gridWith = coordinates.size.width
-                         if (gridWith > 0) {
-@@ -169,14 +188,19 @@
-                         val centroRelativeX = relativeX + (piezaSize / 2f)
-                         val centroRelativeY = relativeY + (piezaSize / 2f)
- 
--                        val Y_Compensado = centroRelativeY + piezaSize * 1.0f
-+
-+                        if((tamaño.columns==2 || tamaño.columns == 3) && isTablet) {
-+                            val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tamaño.columns - 1)
-+                            val newRow = (centroRelativeY / piezaSize).toInt().coerceIn(0, tamaño.rows - 1)
-+                            viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))
-+                        }
-+                        else{
-+                            val Y_Compensado = centroRelativeY + piezaSize * 1.0f
- 
--                        val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tamaño.columns - 1)
--                        val newRow = (Y_Compensado / piezaSize).toInt().coerceIn(0, tamaño.rows - 1)
--
--                        Log.d("PUZZLE_DROP", "Pieza ${piezaArrastradaId} destino: R$newRow C$newColumn")
--                        Log.d("PUZZLE_DROP_2", "Pieza ${piezaArrastradaId} posicion correcta: R${piezaActual.posicionCorrecta.row} C${piezaActual.posicionCorrecta.column}")
--                        viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))
-+                            val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tamaño.columns - 1)
-+                            val newRow = (Y_Compensado / piezaSize).toInt().coerceIn(0, tamaño.rows - 1)
-+                            viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))
-+                        }
-                     }
-                     piezaArrastradaId = null
-                     desplazamientoPiezaArrastrada = Offset.Zero
-@@ -196,6 +220,7 @@
-         modifier = Modifier
-             .aspectRatio(1f)
-             .padding(1.dp)
-+            .border(1.dp, Color.Black)
-             .background(Color.LightGray.copy(alpha = 0.1f)),
-         contentAlignment = Alignment.Center
-     ) {
-@@ -244,7 +269,6 @@
-                             onPiecePositioned(pieza.id, coordinates.positionInWindow())
-                         }
-                         .pointerInput(isDragInProgress) {
--                            if (isDragInProgress) return@pointerInput
-                             detectDragGestures(
-                                 onDragStart = { offset ->
-                                     // 2. INICIAR EL DRAG: Avisar a PuzzleScreen para activar la pieza flotante
-@@ -327,7 +351,7 @@
-             Text(stringResource(R.string.congratulations))
-         },
-         text = {
--            Text(stringResource(R.string.message_puzzle_completed))
-+            Text(stringResource(R.string.message_game_completed))
-         },
-         confirmButton = {
-             Button(
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoPuzzleScreen.kt
-rename from app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt
-rename to app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoPuzzleScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoPuzzleScreen.kt	(date 1763915142931)
-@@ -2,7 +2,6 @@
- 
- import android.app.Activity
- import android.content.pm.ActivityInfo
--import androidx.compose.foundation.Image
- import androidx.compose.foundation.background
- import androidx.compose.foundation.layout.*
- import androidx.compose.foundation.rememberScrollState
-@@ -10,41 +9,35 @@
- import androidx.compose.foundation.verticalScroll
- import androidx.compose.material3.Button
- import androidx.compose.material3.ButtonDefaults
--import androidx.compose.material3.Icon
- import androidx.compose.material3.Text
- import androidx.compose.runtime.Composable
- import androidx.compose.runtime.DisposableEffect
- import androidx.compose.ui.Alignment
- import androidx.compose.ui.Modifier
- import androidx.compose.ui.graphics.Color
--import androidx.compose.ui.layout.ContentScale
--import androidx.compose.ui.platform.LocalConfiguration
- import androidx.compose.ui.platform.LocalContext
--import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.res.stringResource
- import androidx.compose.ui.text.style.TextAlign
--import androidx.compose.ui.tooling.preview.Preview
- import androidx.compose.ui.unit.dp
- import androidx.compose.ui.unit.sp
- import androidx.constraintlayout.compose.ChainStyle
- import androidx.constraintlayout.compose.ConstraintLayout
- import androidx.constraintlayout.compose.Dimension
- import androidx.navigation.NavController
--import androidx.navigation.compose.rememberNavController
- import com.nextapp.monasterio.AppRoutes
- import com.nextapp.monasterio.R
- import com.nextapp.monasterio.ui.theme.MonasteryBlue
--import com.nextapp.monasterio.ui.theme.MonasteryOrange
-+
- 
- 
- @Composable
--fun JuegoNinyosScreen(navController:NavController,modifier: Modifier = Modifier) {
-+fun JuegoPuzzleScreen(navController:NavController,modifier: Modifier = Modifier) {
-     val context = LocalContext.current
- 
-     val activity = (context as? Activity)
- 
-     DisposableEffect(Unit) {
--        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-+        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
- 
-         onDispose {
- 
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">Santa María la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa María\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edición</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edición</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edición activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edición desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesión</string>\r\n    <string name=\"profile_logout\">Cerrar Sesión</string>\r\n    <string name=\"profile_email\">Correo Electrónico</string>\r\n    <string name=\"profile_password\">Contraseña</string>\r\n    <string name=\"navigation_drawer_open\">Abrir menú</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar menú</string>\r\n    <string name=\"menu_info\">Información monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galería</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Información General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galería</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/…</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Información general:</string>\r\n    <string name=\"history_1328\">1328 \uD83D\uDD25 Incendio y reconstrucción</string>\r\n    <string name=\"history_1328_body\">Durante un incendio en Valladolid provocado por tropas de Alfonso XI, el monasterio en los palacios de la Magdalena quedó gravemente dañado. Las monjas comenzaron su reconstrucción gracias a la ayuda económica de Álvaro Nuño Pérez de Monroy.</string>\r\n    <string name=\"history_1579\">1579 \uD83C\uDFF0 Reconstrucción de la iglesia y el claustro</string>\r\n    <string name=\"history_579_body\">Las monjas levantaron la iglesia siguiendo el diseño del maestro italiano Pietro Palladio. El retablo fue obra de Gregorio Fernández y el nuevo claustro, de Francisco de Praves. Todo esto se hizo posible gracias a las donaciones de las abadesas Ana e Isabel de Mendoza.</string>\r\n    <string name=\"history_1869\">1869 \uD83C\uDF93 Nace la escuela del monasterio</string>\r\n    <string name=\"history_1869_body\">La comunidad de las Huelgas Reales abrió su propia escuela, acogiendo a niñas de la nobleza vallisoletana como medio pensionistas.</string>\r\n    <string name=\"history_XX\">Siglo XX-XXI ✨ Restauración y vida moderna</string>\r\n    <string name=\"history_XX_body\">El monasterio fue totalmente restaurado. La disminución de vocaciones impulsó la creación de la Hermandad Laica Cisterciense, que mantiene vivo el espíritu de la Regla de San Benito.</string>\r\n    <string name=\"history_2007\">2007 en adelante \uD83D\uDC69\u200D\uD83E\uDDB3 Liderazgo y Congregación femenina</string>\r\n    <string name=\"history_2007_body\">El monasterio forma parte de la Congregación de Castilla de la Orden del Cister, activa como congregación femenina desde 2007. La primera abadesa presidenta fue María del Mar Martínez; tras su fallecimiento en 2013, Sor Isabel Vallés Gallego asumió el cargo. Actualmente, Sor María dirige el monasterio y el colegio.</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por teléfono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electrónico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electrónico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene algún simbolo no válido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es válido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">¡CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva está preparada. Por favor, pulsa \\'enviar\\' en la aplicación de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustaría solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmación.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontró ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tamaño de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Español</string>\r\n    <string name=\"german_language\">Alemán</string>\r\n    <string name=\"english_language\">Inglés</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegación</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360º</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del área interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIÑOS</string>\r\n    <string name=\"child_mode_view\">Modo Niños</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n    <string name=\"edit_mode\">MODO EDICIÓN</string>\r\n    <string name=\"edit_home_background\">Edición fondo inicio</string>\r\n    <string name=\"edit_pins\">Edición pines</string>\r\n    <string name=\"location_error\">No se encontró una app para abrir la ubicación.</string>\r\n    <string name=\"contact_data\">Datos de contacto</string>\r\n    <string name=\"location_data\">Ubicación</string>\r\n    <string name=\"email_data\">Correo electrónico</string>\r\n    <string name=\"phone_data\">Teléfono</string>\r\n    <string name=\"visit_schedule\">Horarios de Visita</string>\r\n    <string name=\"monday_to_friday\">Lunes a Viernes:</string>\r\n    <string name=\"four_pieces\">4 piezas</string>\r\n    <string name=\"nine_pieces\">9 piezas</string>\r\n    <string name=\"sixteen_pieces\">16 piezas</string>\r\n    <string name=\"twentyfive_pieces\">25 piezas</string>\r\n    <string name=\"dont_show_again\">No volver a mostrar</string>\r\n    <string name=\"understand\">Entendido</string>\r\n    <string name=\"map_tutorial_body\">Este es el cuerpo del tutorial</string>\r\n    <string name=\"map_tutorial_title\">Este es el titulo del tutorial</string>\r\n    <string name=\"map_tutorial_body2\">Este es el cuerpo del tutorial del mapa 2</string>\r\n    <string name=\"map_tutorial_title2\">Este es el titulo del tutorial del mapa 2</string>\r\n    <string name=\"pin_tutorial_body\">Este es el cuerpo del tutorial del pin</string>\r\n    <string name=\"pin_tutorial_title\">Este es el titulo del tutorial del pin</string>\r\n    <string name=\"next\">Siguiente</string>\r\n    <string name=\"map_tutorial_body1\">En la parte superior izquierda, el símbolo (←) permite volver al inicio</string>\r\n    <string name=\"map_tutorial_body1_2\">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>\r\n    <string name=\"map_tutorial_body1_3\">Además, los botones de la parte derecha te permiten ampliar el mapa, reducirlo o volver a su tamaño   original</string>\r\n    <string name=\"submapa_1\">Tocando en el símbolo (←) podemos volver al mapa general</string>\r\n    <string name=\"submapa_2\">Tocando en los distintos pines podemos entrar a los puntos de interés</string>\r\n    <string name=\"pin_1\">Pulsando en el símbolo (←), se puede volver al mapa</string>\r\n    <string name=\"pin_2\">Puedes desplazarte por las imágenes o pulsar en ellas para ampliarlas</string>\r\n    <string name=\"pin_3\">Pulsando aquí puedes escuchar el audio del texto</string>\r\n    <string name=\"pin_4\">Para acceder a la vista 360 pulse este botón</string>\r\n    <string name=\"confirm_save_title\">¿Guardar cambios?</string>\r\n    <string name=\"confirm_save_message\">¿Estás seguro de que quieres guardar los cambios realizados?</string>\r\n    <string name=\"confirm_save_button\">Guardar</string>\r\n    <string name=\"confirm_cancel_button\">Cancelar</string>\r\n    <string name=\"edit_cancel_changes\">Cancelar</string>\r\n    <string name=\"profile_name\">Nombre</string>\r\n    <string name=\"image_add\">Añadir imagen</string>\r\n    <string name=\"image_delete\">Borrar</string>\r\n    <string name=\"image_delete_confirm_title\">¿Borrar imagen?</string>\r\n    <string name=\"image_delete_confirm_message\">¿Seguro que quieres borrar la imagen?</string>\r\n    <string name=\"image_uploading\">Subiendo imagen...</string>\r\n    <string name=\"image_upload_success\">Imagen subida correctamente</string>\r\n    <string name=\"image_upload_error\">Error al subir la imagen</string>\r\n    <string name=\"image_select_error\">Error al cargar la imagen</string>\r\n    <string name=\"congratulations\">¡Felicidades!</string>\r\n    <string name=\"message_puzzle_completed\">¡Has resuelto el puzzle! ¿Listo para el siguiente desafío?</string>\r\n    <string name=\"ready\">Listo</string>\r\n    <string name=\"original_image\">Ver imagen</string>\r\n    <string name=\"image_gallery_title\">Imágenes</string>\r\n    <string name=\"visible\">Visibles</string>\r\n    <string name=\"hidden\">Ocultos</string>\r\n    <string name=\"lang_en\">Engish</string>\r\n    <string name=\"lang_es\">Español</string>\r\n    <string name=\"sample_text\">Ejemplo</string>\r\n    <string name=\"lang_de\">Deutsch</string>\r\n    <string name=\"font_small\">Pequeña</string>\r\n    <string name=\"font_medium\">Mediana</string>\r\n    <string name=\"font_large\">Grande</string>\r\n    <string name=\"play_audio\"></string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/res/values/strings.xml	(date 1763928775861)
-@@ -91,9 +91,9 @@
-     <string name="child_mode">MODO NIÑOS</string>
-     <string name="child_mode_view">Modo Niños</string>
-     <string name="video_view">Video</string>
--    <string name="game_view">Juego</string>
-+    <string name="game_view">Juegos</string>
-     <string name="video_child">VIDEO</string>
--    <string name="game_child">JUEGO</string>
-+    <string name="game_child">JUEGOS</string>
-     <string name="edit_mode">MODO EDICIÓN</string>
-     <string name="edit_home_background">Edición fondo inicio</string>
-     <string name="edit_pins">Edición pines</string>
-@@ -108,6 +108,10 @@
-     <string name="nine_pieces">9 piezas</string>
-     <string name="sixteen_pieces">16 piezas</string>
-     <string name="twentyfive_pieces">25 piezas</string>
-+    <string name="three_pairs">3 Parejas</string>
-+    <string name="four_pairs">4 Parejas</string>
-+    <string name="five_pairs">5 parejas</string>
-+    <string name="six_pairs">6 Parejas</string>
-     <string name="dont_show_again">No volver a mostrar</string>
-     <string name="understand">Entendido</string>
-     <string name="map_tutorial_body">Este es el cuerpo del tutorial</string>
-@@ -115,7 +119,7 @@
-     <string name="map_tutorial_body2">Este es el cuerpo del tutorial del mapa 2</string>
-     <string name="map_tutorial_title2">Este es el titulo del tutorial del mapa 2</string>
-     <string name="pin_tutorial_body">Este es el cuerpo del tutorial del pin</string>
--    <string name="pin_tutorial_title">Este es el titulo del tutorial del pin</string>
-+    <string name="pineºº_tutorial_title">Este es el titulo del tutorial del pin</string>
-     <string name="next">Siguiente</string>
-     <string name="map_tutorial_body1">En la parte superior izquierda, el símbolo (←) permite volver al inicio</string>
-     <string name="map_tutorial_body1_2">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>
-@@ -141,7 +145,7 @@
-     <string name="image_upload_error">Error al subir la imagen</string>
-     <string name="image_select_error">Error al cargar la imagen</string>
-     <string name="congratulations">¡Felicidades!</string>
--    <string name="message_puzzle_completed">¡Has resuelto el puzzle! ¿Listo para el siguiente desafío?</string>
-+    <string name="message_game_completed">¡Has resuelto el juego! ¿Listo para el siguiente desafío?</string>
-     <string name="ready">Listo</string>
-     <string name="original_image">Ver imagen</string>
-     <string name="image_gallery_title">Imágenes</string>
-@@ -154,5 +158,11 @@
-     <string name="font_small">Pequeña</string>
-     <string name="font_medium">Mediana</string>
-     <string name="font_large">Grande</string>
-+    <string name="puzzle_screen">Puzle</string>
-+    <string name="puzzle_option">PUZLE</string>
-+    <string name="memory_screen">Parejas</string>
-+    <string name="memory_option">PAREJAS</string>
-+    <string name="back_piece">Parte de atrás de la pieza</string>
-+
-     <string name="play_audio"></string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/res/values-en/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa María\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: …</string>\r\n    <string name=\"history_1328\">1328 \uD83D\uDD25 Fire and Reconstruction</string>\r\n    <string name=\"history_1328_body\">During a fire in Valladolid caused by the troops of Alfonso XI, the monastery in the Palaces of La Magdalena was severely damaged. The nuns began its reconstruction thanks to the financial support of Álvaro Nuño Pérez de Monroy.</string>\r\n\r\n    <string name=\"history_1579\">1579 \uD83C\uDFF0 Reconstruction of the Church and the Cloister</string>\r\n    <string name=\"history_579_body\">The nuns built the church following the design of the Italian master Pietro Palladio. The altarpiece was the work of Gregorio Fernández, and the new cloister was built by Francisco de Praves. All this was made possible thanks to donations from the abbesses Ana and Isabel de Mendoza.</string>\r\n\r\n    <string name=\"history_1869\">1869 \uD83C\uDF93 The Monastery School Is Founded</string>\r\n    <string name=\"history_1869_body\">The community of Las Huelgas Reales opened its own school, welcoming young noble girls from Valladolid as semi-boarders.</string>\r\n\r\n    <string name=\"history_XX\">20th–21st Centuries ✨ Restoration and Modern Life</string>\r\n    <string name=\"history_XX_body\">The monastery was fully restored. The decline in vocations encouraged the creation of the Lay Cistercian Brotherhood, which keeps alive the spirit of the Rule of Saint Benedict.</string>\r\n\r\n    <string name=\"history_2007\">2007 Onwards \uD83D\uDC69\u200D\uD83E\uDDB3 Leadership and Female Congregation</string>\r\n    <string name=\"history_2007_body\">The monastery is part of the Castile Congregation of the Cistercian Order, active as a female congregation since 2007. The first abbess president was María del Mar Martínez; after her death in 2013, Sister Isabel Vallés Gallego took over the position. Currently, Sister María leads the monastery and the school.</string>\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"title_entrada\">Monastery Entrance</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360º</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n    <string name=\"child_mode\">KIDS MODE</string>\r\n    <string name=\"child_mode_view\">Kids Mode</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Game</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">GAME</string>\r\n    <string name=\"edit_mode\">EDIT MODE</string>\r\n    <string name=\"edit_home_background\">Edit home background</string>\r\n    <string name=\"edit_pins\">Edit pins</string>\r\n    <string name=\"location_error\">No app was found to open the location.</string>\r\n    <string name=\"contact_data\">Contact Information</string>\r\n    <string name=\"location_data\">Location</string>\r\n    <string name=\"email_data\">Email</string>\r\n    <string name=\"phone_data\">Phone</string>\r\n    <string name=\"visit_schedule\">Opening Hours</string>\r\n    <string name=\"monday_to_friday\">Monday to Friday:</string>\r\n    <string name=\"four_pieces\">4 pieces</string>\r\n    <string name=\"nine_pieces\">9 pieces</string>\r\n    <string name=\"sixteen_pieces\">16 pieces</string>\r\n    <string name=\"twentyfive_pieces\">25 pieces</string>\r\n    <string name=\"confirm_save_title\">Save changes?</string>\r\n    <string name=\"confirm_save_message\">Are you sure you want to save the changes?</string>\r\n    <string name=\"confirm_save_button\">Save</string>\r\n    <string name=\"confirm_cancel_button\">Cancel</string>\r\n    <string name=\"edit_cancel_changes\">Cancel</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Add image</string>\r\n    <string name=\"image_delete\">Delete</string>\r\n    <string name=\"image_delete_confirm_title\">Delete image?</string>\r\n    <string name=\"image_delete_confirm_message\">Are you sure you want to delete this image?</string>\r\n    <string name=\"image_uploading\">Uploading image...</string>\r\n    <string name=\"image_upload_success\">Image uploaded successfully</string>\r\n    <string name=\"image_upload_error\">Error uploading image</string>\r\n    <string name=\"image_select_error\">Error selecting image</string>\r\n    <string name=\"image_gallery_title\">Images</string>\r\n    <string name=\"congratulations\">Congratulations!</string>\r\n    <string name=\"message_puzzle_completed\">You\\'ve solved the puzzle! Ready for the next challenge?</string>\r\n    <string name=\"original_image\">View image</string>\r\n    <string name=\"ready\">Ready</string>\r\n    <string name=\"lang_de\">Deutsch</string>\r\n    <string name=\"font_small\">Small</string>\r\n    <string name=\"font_medium\">Medium</string>\r\n    <string name=\"font_large\">Large</string>\r\n    <string name=\"dont_show_again\">Don\\'t show again</string>\r\n    <string name=\"understand\">Got it</string>\r\n    <string name=\"map_tutorial_body\">This is the tutorial body</string>\r\n    <string name=\"map_tutorial_title\">This is the tutorial title</string>\r\n    <string name=\"map_tutorial_body2\">This is the map tutorial body 2</string>\r\n    <string name=\"map_tutorial_title2\">This is the map tutorial title 2</string>\r\n    <string name=\"pin_tutorial_body\">This is the pin tutorial body</string>\r\n    <string name=\"pin_tutorial_title\">This is the pin tutorial title</string>\r\n    <string name=\"next\">Next</string>\r\n\r\n    <string name=\"map_tutorial_body1\">The (←) symbol in the top left allows you to return to the start.</string>\r\n    <string name=\"map_tutorial_body1_2\">Tap the colored zones on the map to enter the different viewable areas.</string>\r\n    <string name=\"map_tutorial_body1_3\">Additionally, the buttons on the right allow you to zoom in, zoom out, or reset the map to its original size.</string>\r\n\r\n    <string name=\"submapa_1\">Tap the (←) symbol to return to the main map.</string>\r\n    <string name=\"submapa_2\">Tap the different pins to access the points of interest.</string>\r\n\r\n    <string name=\"pin_1\">Tap the (←) symbol to return to the map.</string>\r\n    <string name=\"pin_2\">Swipe through the images or tap them to enlarge.</string>\r\n    <string name=\"pin_3\">Tap here to listen to the audio narration.</string>\r\n    <string name=\"pin_4\">Tap this button to access the 360° view.</string>\r\n    <string name=\"visible\">Visible</string>\r\n    <string name=\"hidden\">Hidden</string>\r\n    <string name=\"lang_en\">English</string>\r\n    <string name=\"lang_es\">Español</string>\r\n    <string name=\"sample_text\">Ejemplo</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
---- a/app/src/main/res/values-en/strings.xml	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/res/values-en/strings.xml	(date 1763928819884)
-@@ -97,9 +97,9 @@
-     <string name="child_mode">KIDS MODE</string>
-     <string name="child_mode_view">Kids Mode</string>
-     <string name="video_view">Video</string>
--    <string name="game_view">Game</string>
-+    <string name="game_view">Games</string>
-     <string name="video_child">VIDEO</string>
--    <string name="game_child">GAME</string>
-+    <string name="game_child">GAMES</string>
-     <string name="edit_mode">EDIT MODE</string>
-     <string name="edit_home_background">Edit home background</string>
-     <string name="edit_pins">Edit pins</string>
-@@ -114,6 +114,10 @@
-     <string name="nine_pieces">9 pieces</string>
-     <string name="sixteen_pieces">16 pieces</string>
-     <string name="twentyfive_pieces">25 pieces</string>
-+    <string name="three_pairs">3 Pairs</string>
-+    <string name="four_pairs">4 Pairs</string>
-+    <string name="five_pairs">5 Pairs</string>
-+    <string name="six_pairs">6 Pairs</string>
-     <string name="confirm_save_title">Save changes?</string>
-     <string name="confirm_save_message">Are you sure you want to save the changes?</string>
-     <string name="confirm_save_button">Save</string>
-@@ -130,7 +134,7 @@
-     <string name="image_select_error">Error selecting image</string>
-     <string name="image_gallery_title">Images</string>
-     <string name="congratulations">Congratulations!</string>
--    <string name="message_puzzle_completed">You\'ve solved the puzzle! Ready for the next challenge?</string>
-+    <string name="message_game_completed">You\'ve solved the game! Ready for the next challenge?</string>
-     <string name="original_image">View image</string>
-     <string name="ready">Ready</string>
-     <string name="lang_de">Deutsch</string>
-@@ -163,4 +167,9 @@
-     <string name="lang_en">English</string>
-     <string name="lang_es">Español</string>
-     <string name="sample_text">Ejemplo</string>
-+    <string name="puzzle_screen">Puzzle</string>
-+    <string name="puzzle_option">PUZZLE</string>
-+    <string name="memory_screen">Memory</string>
-+    <string name="memory_option">MEMORY</string>
-+    <string name="back_piece">Back of the piece</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNiño.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun OpcionesModoNiño(navController:NavController,modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().background(Color.White).verticalScroll(rememberScrollState())) {\r\n        val (btnVideo,btnJuego) = createRefs()\r\n        val centerGuide = createGuidelineFromTop(0.5f)\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIDEO_NINYOS)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVideo) {\r\n                    bottom.linkTo(centerGuide, margin = 24.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier\r\n                    .padding(horizontal = 20.dp),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            )  {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.youtube),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 18.dp)\r\n                        .size(48.dp)\r\n                )\r\n                Text(\r\n                    stringResource(id = R.string.video_child),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n            }\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.JUEGO_NINYOS)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnJuego) {\r\n                    top.linkTo(centerGuide, margin = 24.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier\r\n                    .padding(horizontal = 20.dp),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.console),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 16.dp)\r\n                        .size(48.dp)\r\n\r\n                )\r\n                Text(\r\n                    stringResource(id = R.string.game_child),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNiño.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNiño.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNiño.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNiño.kt	(date 1763915214561)
-@@ -43,7 +43,7 @@
-     val activity = (context as? Activity)
- 
-     DisposableEffect(Unit) {
--        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-+        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
- 
-         onDispose {
- 
Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio\r\n\r\nimport android.R.attr.text\r\nimport android.app.Activity\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.animation.AnimatedVisibility\r\nimport androidx.compose.animation.fadeIn\r\nimport androidx.compose.animation.fadeOut\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport com.nextapp.monasterio.ui.screens.pinEdition.components.AppStatus\r\n\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n\r\n        setContent {\r\n            // 1. Leemos el tamaño guardado\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val currentConfig = LocalConfiguration.current\r\n\r\n            // 2. Calculamos la nueva Densidad\r\n            val newDensity = Density(\r\n                density = currentDensity.density,\r\n                fontScale = appFontScale\r\n            )\r\n\r\n            // 3. Actualizamos la Configuración\r\n            val newConfiguration = android.content.res.Configuration(currentConfig).apply {\r\n                fontScale = appFontScale\r\n            }\r\n\r\n            // 4. Inyectamos AMBOS valores\r\n            CompositionLocalProvider(\r\n                LocalDensity provides newDensity,\r\n                LocalConfiguration provides newConfiguration\r\n            ) {\r\n                Smov_monasterioTheme {\r\n                    // \uD83D\uDC47 PASAMOS 'this' (la actividad)\r\n                    MonasteryAppScreen(activity = this@MainActivity)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen(activity: AppCompatActivity) { // \uD83D\uDC48 Recibimos la actividad\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    // ViewModel Auth\r\n    val authViewModel: AuthViewModel = viewModel()\r\n    val currentUser by authViewModel.currentUser.collectAsState(initial = null)\r\n\r\n    // Estado global edición\r\n    var isEditing by remember { mutableStateOf(false) }\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    // Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n    // --- LÓGICA DE MODO INMERSIVO (CORREGIDA) ---\r\n\r\n    // 1. Pantallas de 360 y Edición\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n    val isEdicion = currentRoute == AppRoutes.EDICION_PINES\r\n    val isEdicionFondo = currentRoute == AppRoutes.EDICION_FONDO_INICIO\r\n\r\n    // 2. Visita Virtual (Mapa General, Submapas y Pines)\r\n    // Usamos 'contains' en lugar de '==' para cubrir todas las variaciones\r\n    // y sub-rutas que puedan generarse al navegar.\r\n    val isMapSection = currentRoute?.let { route ->\r\n        route.startsWith(AppRoutes.VIRTUAL_VISIT) || // Cubre la entrada principal\r\n                route.contains(\"pin_detalle\") ||             // Cubre los detalles de los pines\r\n                route.contains(\"plano\")                      // Cubre los submapas (claustro, iglesia...)\r\n    } ?: false\r\n\r\n    // La vista es inmersiva si cumple CUALQUIERA de estas condiciones\r\n    val isImmersive = isPanorama || isPin360 || isEdicion || isEdicionFondo || isMapSection\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)\r\n                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)\r\n                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)\r\n                AppRoutes.MODO_EDICION -> context.getString(R.string.edit_mode)\r\n                AppRoutes.PIN_ENTRADA_MONASTERIO -> context.getString(R.string.title_entrada)\r\n                AppRoutes.JUEGO_PUZZLE -> context.getString(R.string.puzzle_screen)\r\n                AppRoutes.JUEGO_PAREJAS -> context.getString(R.string.memory_screen)\r\n                AppRoutes.PUZZLENIVEL1 -> context.getString(R.string.puzzle_screen)\r\n                AppRoutes.PUZZLENIVEL2 -> context.getString(R.string.puzzle_screen)\r\n                AppRoutes.PUZZLENIVEL3 -> context.getString(R.string.puzzle_screen)\r\n                AppRoutes.PUZZLENIVEL4 -> context.getString(R.string.puzzle_screen)\r\n                AppRoutes.PAREJASNIVEL1 -> context.getString(R.string.memory_screen)\r\n                AppRoutes.PAREJASNIVEL2 -> context.getString(R.string.memory_screen)\r\n                AppRoutes.PAREJASNIVEL3 -> context.getString(R.string.memory_screen)\r\n                AppRoutes.PAREJASNIVEL4 -> context.getString(R.string.memory_screen)\r\n                AppRoutes.EDICION_FONDO_INICIO -> context.getString(R.string.background_edit_screen)\r\n                AppRoutes.EDICION_PINES -> context.getString(R.string.pin_edit_screen)\r\n                AppRoutes.JUEGO_DIFERENCIAS -> context.getString(R.string.differences_screen)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                if (!isImmersive) {\r\n                    Column {\r\n                        CenterAlignedTopAppBar(\r\n                            title = { Text(currentTitle.value) },\r\n                            colors = TopAppBarDefaults.topAppBarColors(\r\n                                containerColor = MonasteryRed,\r\n                                titleContentColor = White,\r\n                                navigationIconContentColor = White,\r\n                                actionIconContentColor = White\r\n                            ),\r\n                            navigationIcon = {\r\n                                IconButton(onClick = {\r\n                                    scope.launch {\r\n                                        if (drawerState.isClosed) drawerState.open() else drawerState.close()\r\n                                    }\r\n                                }) {\r\n                                    val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                    Icon(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                    )\r\n                                }\r\n                            },\r\n                            actions = {\r\n                                // SELECTOR DE IDIOMA\r\n                                MainLanguageSelector(activity)\r\n\r\n                                // Icono Editar (solo si hay usuario)\r\n                                if (currentUser != null) {\r\n                                    IconButton(onClick = {\r\n                                        isEditing = !isEditing\r\n                                        val message = if (isEditing)\r\n                                            context.getString(R.string.edit_mode_activate_message)\r\n                                        else\r\n                                            context.getString(R.string.edit_mode_deactivate_message)\r\n                                        Toast.makeText(context, message, Toast.LENGTH_SHORT).show()\r\n                                    }) {\r\n                                        Icon(\r\n                                            painter = painterResource(id = R.drawable.lapiz),\r\n                                            contentDescription = if (isEditing)\r\n                                                stringResource(id = R.string.edit_mode_deactivate_icon)\r\n                                            else\r\n                                                stringResource(id = R.string.edit_mode_activate_icon),\r\n                                            tint = White\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n                        )\r\n\r\n                        // Barra de progreso global (Subida de imágenes, etc.)\r\n                        val isGlobalLoading by AppStatus.isUploading.collectAsState()\r\n                        AnimatedVisibility(\r\n                            visible = isGlobalLoading,\r\n                            enter = fadeIn(),\r\n                            exit = fadeOut()\r\n                        ) {\r\n                            LinearProgressIndicator(\r\n                                modifier = Modifier.fillMaxWidth(),\r\n                                color = MonasteryBlue\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            AppNavigationHost(\r\n                authViewModel = authViewModel,\r\n                navController = navController,\r\n                isEditing = isEditing,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// --- COMPONENTES DE IDIOMA PARA LA BARRA ---\r\n\r\n@Composable\r\nfun MainLanguageSelector(activity: AppCompatActivity) {\r\n    var expanded by remember { mutableStateOf(false) }\r\n\r\n    // Obtenemos idioma actual\r\n    val currentLanguageCode = activity.resources.configuration.locales[0].language\r\n\r\n    // Determinamos bandera actual\r\n    val currentFlag = when (currentLanguageCode) {\r\n        \"de\" -> R.drawable.alemania\r\n        \"en\" -> R.drawable.reinounido\r\n        \"fr\" -> R.drawable.francia\r\n        else -> R.drawable.espanya\r\n\r\n    }\r\n\r\n    Box {\r\n        // Botón de la bandera\r\n        IconButton(onClick = { expanded = true }) {\r\n            Image(\r\n                painter = painterResource(id = currentFlag),\r\n                contentDescription = \"Cambiar idioma\",\r\n                contentScale = ContentScale.Crop,\r\n                modifier = Modifier\r\n                    .size(28.dp)\r\n                    .clip(RoundedCornerShape(4.dp))\r\n                    .border(1.dp, Color.White.copy(alpha = 0.5f), RoundedCornerShape(4.dp))\r\n            )\r\n        }\r\n\r\n        // Menú desplegable\r\n        DropdownMenu(\r\n            expanded = expanded,\r\n            onDismissRequest = { expanded = false },\r\n            modifier = Modifier.width(150.dp)\r\n        ) {\r\n            MainLanguageItem(activity, \"es\", stringResource(R.string.lang_es), R.drawable.espanya) { expanded = false }\r\n            MainLanguageItem(activity, \"en\", stringResource(R.string.lang_en), R.drawable.reinounido) { expanded = false }\r\n            MainLanguageItem(activity, \"de\", stringResource(R.string.lang_de), R.drawable.alemania) { expanded = false }\r\n            MainLanguageItem(activity, \"fr\", stringResource(R.string.lang_fr), R.drawable.francia) { expanded = false }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun MainLanguageItem(\r\n    activity: AppCompatActivity,\r\n    code: String,\r\n    name: String,\r\n    flagRes: Int,\r\n    onDismiss: () -> Unit\r\n) {\r\n    DropdownMenuItem(\r\n        text = {\r\n            Row(verticalAlignment = Alignment.CenterVertically) {\r\n                Image(\r\n                    painter = painterResource(id = flagRes),\r\n                    contentDescription = null,\r\n                    modifier = Modifier.size(24.dp).clip(RoundedCornerShape(2.dp))\r\n                )\r\n                Spacer(modifier = Modifier.width(12.dp))\r\n                Text(text = name, style = MaterialTheme.typography.bodyMedium)\r\n            }\r\n        },\r\n        onClick = {\r\n            onDismiss()\r\n            val currentLanguage = activity.resources.configuration.locales[0].language\r\n            if (currentLanguage != code) {\r\n                LanguageHelper.saveLocale(activity, code)\r\n                activity.recreate()\r\n            }\r\n        }\r\n    )\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
--- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1764534432341)
@@ -116,7 +116,7 @@
     } ?: false
 
     // La vista es inmersiva si cumple CUALQUIERA de estas condiciones
-    val isImmersive = isPanorama || isPin360 || isEdicion || isEdicionFondo || isMapSection
+    val isImmersive = isPanorama || isPin360 || isEdicion || isMapSection
 
     val gesturesEnabled = when(currentRoute){
         AppRoutes.VIRTUAL_VISIT -> false
@@ -183,41 +183,48 @@
                                 navigationIconContentColor = White,
                                 actionIconContentColor = White
                             ),
+
                             navigationIcon = {
-                                IconButton(onClick = {
-                                    scope.launch {
-                                        if (drawerState.isClosed) drawerState.open() else drawerState.close()
-                                    }
-                                }) {
-                                    val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24
-                                    Icon(
-                                        painter = painterResource(id = iconRes),
-                                        contentDescription = stringResource(id = R.string.navigation_drawer_open)
-                                    )
+                                if(!isEdicionFondo) {
+                                    IconButton(onClick = {
+                                        scope.launch {
+                                            if (drawerState.isClosed) drawerState.open() else drawerState.close()
+                                        }
+                                    }) {
+                                        val iconRes =
+                                            if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24
+                                        Icon(
+                                            painter = painterResource(id = iconRes),
+                                            contentDescription = stringResource(id = R.string.navigation_drawer_open)
+                                        )
+                                    }
                                 }
                             },
                             actions = {
-                                // SELECTOR DE IDIOMA
-                                MainLanguageSelector(activity)
+                                if(!isEdicionFondo) {
+                                    // SELECTOR DE IDIOMA
+                                    MainLanguageSelector(activity)
 
-                                // Icono Editar (solo si hay usuario)
-                                if (currentUser != null) {
-                                    IconButton(onClick = {
-                                        isEditing = !isEditing
-                                        val message = if (isEditing)
-                                            context.getString(R.string.edit_mode_activate_message)
-                                        else
-                                            context.getString(R.string.edit_mode_deactivate_message)
-                                        Toast.makeText(context, message, Toast.LENGTH_SHORT).show()
-                                    }) {
-                                        Icon(
-                                            painter = painterResource(id = R.drawable.lapiz),
-                                            contentDescription = if (isEditing)
-                                                stringResource(id = R.string.edit_mode_deactivate_icon)
-                                            else
-                                                stringResource(id = R.string.edit_mode_activate_icon),
-                                            tint = White
-                                        )
+                                    // Icono Editar (solo si hay usuario)
+                                    if (currentUser != null) {
+                                        IconButton(onClick = {
+                                            isEditing = !isEditing
+                                            val message = if (isEditing)
+                                                context.getString(R.string.edit_mode_activate_message)
+                                            else
+                                                context.getString(R.string.edit_mode_deactivate_message)
+                                            Toast.makeText(context, message, Toast.LENGTH_SHORT)
+                                                .show()
+                                        }) {
+                                            Icon(
+                                                painter = painterResource(id = R.drawable.lapiz),
+                                                contentDescription = if (isEditing)
+                                                    stringResource(id = R.string.edit_mode_deactivate_icon)
+                                                else
+                                                    stringResource(id = R.string.edit_mode_activate_icon),
+                                                tint = White
+                                            )
+                                        }
                                     }
                                 }
                             }
Index: .idea/deploymentTargetSelector.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DROPDOWN\" />\r\n        <DropdownSelection timestamp=\"2025-11-29T18:59:06.843022600Z\">\r\n          <Target type=\"DEFAULT_BOOT\">\r\n            <handle>\r\n              <DeviceId pluginId=\"LocalEmulator\" identifier=\"path=C:\\Users\\frinc\\.android\\avd\\Medium_Tablet.avd\" />\r\n            </handle>\r\n          </Target>\r\n        </DropdownSelection>\r\n        <DialogSelection />\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
--- a/.idea/deploymentTargetSelector.xml	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ b/.idea/deploymentTargetSelector.xml	(date 1764624584263)
@@ -4,10 +4,10 @@
     <selectionStates>
       <SelectionState runConfigName="app">
         <option name="selectionMode" value="DROPDOWN" />
-        <DropdownSelection timestamp="2025-11-29T18:59:06.843022600Z">
+        <DropdownSelection timestamp="2025-12-01T21:28:25.427690600Z">
           <Target type="DEFAULT_BOOT">
             <handle>
-              <DeviceId pluginId="LocalEmulator" identifier="path=C:\Users\frinc\.android\avd\Medium_Tablet.avd" />
+              <DeviceId pluginId="LocalEmulator" identifier="path=C:\Users\frinc\.android\avd\Medium_Phone.avd" />
             </handle>
           </Target>
         </DropdownSelection>
Index: app/src/main/res/values-de/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Santa María la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa María\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus verlassen</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">Änderungen speichern</string>\r\n    <string name=\"profile_login\">Anmelden</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Navigationsmenü öffnen</string>\r\n    <string name=\"navigation_drawer_close\">Navigationsmenü schließen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n    <string name=\"info_location\">Straße…</string>\r\n    <string name=\"info_hours\">Montag-Freitag: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n    <string name=\"history_1328\">1328 \uD83D\uDD25 Brand und Wiederaufbau</string>\r\n    <string name=\"history_1328_body\">Bei einem Brand in Valladolid, der von den Truppen Alfons XI. verursacht wurde, wurde das Kloster der Magdalena-Paläste schwer beschädigt. Die Nonnen begannen den Wiederaufbau dank der finanziellen Hilfe von Álvaro Nuño Pérez de Monroy.</string>\r\n    <string name=\"history_1579\">1579 \uD83C\uDFF0 Wiederaufbau von Kirche und Kreuzgang</string>\r\n    <string name=\"history_579_body\">Die Nonnen bauten die Kirche nach den Plänen des italienischen Meisters Pietro Palladio. Das Altarbild war das Werk von Gregorio Fernández und der neue Kreuzgang von Francisco de Praves. All dies wurde durch die Spenden der Äbtissinnen Ana und Isabel de Mendoza ermöglicht.</string>\r\n    <string name=\"history_1869\">1869 \uD83C\uDF93 Geburt der Klosterschule</string>\r\n    <string name=\"history_1869_body\">Die Gemeinschaft von Huelgas Reales eröffnete eine eigene Schule, in der junge adlige Mädchen aus Valladolid als Tagesschülerinnen aufgenommen wurden.</string>\r\n    <string name=\"history_XX\">20.-21. Jahrhundert ✨ Restaurierung und modernes Leben</string>\r\n    <string name=\"history_XX_body\">Das Kloster wurde vollständig restauriert. Der Rückgang der Berufungen führte zur Gründung der Zisterzienser Laienbruderschaft, die den Geist der Regel des Heiligen Benedikt lebendig hält.</string>\r\n    <string name=\"history_2007\">2007 und darüber hinaus \uD83D\uDC69\u200D\uD83E\uDDB3 Leitung und weibliche Kongregation</string>\r\n    <string name=\"history_2007_body\">Das Kloster ist Teil der Kongregation von Kastilien des Zisterzienserordens, die seit 2007 als weibliche Kongregation aktiv ist. Die erste Präsidentin Äbtissin war María del Mar Martínez; nach ihrem Tod im Jahr 2013 übernahm Schwester Isabel Vallés Gallego. Derzeit leitet Schwester María das Kloster und die Schule.</string>\r\n    <string name=\"title_appointment\">Einen Termin buchen</string>\r\n    <string name=\"option_phone_appointment\">Telefonisch buchen</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Vollständiger Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Uhrzeit</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollständigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Wählen Sie ein Datum</string>\r\n    <string name=\"placeholderhour_appointment\">Wählen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Der Name ist obligatorisch</string>\r\n    <string name=\"valid_name\">Der Name enthält ein ungültiges Symbol</string>\r\n    <string name=\"compulsory_email\">Die E-Mail ist obligatorisch</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ungültig</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgewählt werden</string>\r\n    <string name=\"hour_no_selected\">Eine Uhrzeit muss ausgewählt werden</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Abbrechen</string>\r\n    <string name=\"confirm_button\">BESTÄTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Bestätigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte drücken Sie in der gerade geöffneten Messaging-App auf Senden, um Ihre Anfrage abzuschließen. Wir werden Ihnen auf diese E-Mail antworten, um die Verfügbarkeit zu bestätigen.</string>\r\n    <string name=\"email_subject\">Anfrage zur Besuchsreservierung - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich möchte eine Reservierung für einen Besuch des Klosters mit folgenden Details anfragen:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch erwarte Ihre freundliche Bestätigung.\\n\\nVielen Dank,\\nMit freundlichen Grüßen,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Keine Messaging-Anwendung gefunden</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache auswählen</string>\r\n    <string name=\"font_size_select\">Schriftgröße auswählen</string>\r\n    <string name=\"font_extrabig\">Extra Groß</string>\r\n    <string name=\"font_normal\">Mittel</string>\r\n    <string name=\"font_big\">Groß</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"title_entrada\">Klostereingang</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"lang_fr\">Französisch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltflächen ausblenden</string>\r\n    <string name=\"close\">Schließen</string>\r\n    <string name=\"go_back\">Zurück</string>\r\n    <string name=\"see_360\">360º ansehen</string>\r\n    <string name=\"contentdescription_image_pin\">Pin-Bild (zum Vergrößern klicken)</string>\r\n    <string name=\"readjust\">Neuanpassen</string>\r\n    <string name=\"decrease\">Verkleinern</string>\r\n    <string name=\"increase\">Vergrößern</string>\r\n    <string name=\"out_interactive_area\">Außerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Ziel nicht definiert</string>\r\n    <string name=\"notdefined_destinyplane\">Zielplan nicht definiert</string>\r\n    <string name=\"plane_loading\">Plan wird geladen…</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n    <string name=\"child_mode\">KINDERMODUS</string>\r\n    <string name=\"child_mode_view\">Kindermodus</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Spiele</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">SPIELE</string>\r\n    <string name=\"edit_mode\">BEARBEITUNGSMODUS</string>\r\n    <string name=\"edit_home_background\">Bearbeitung des Home-Hintergrunds</string>\r\n    <string name=\"edit_pins\">Pin-Bearbeitung</string>\r\n    <string name=\"location_error\">Keine Anwendung zum Öffnen des Standorts gefunden.</string>\r\n    <string name=\"contact_data\">Kontaktdaten</string>\r\n    <string name=\"location_data\">Standort</string>\r\n    <string name=\"email_data\">E-Mail</string>\r\n    <string name=\"phone_data\">Telefon</string>\r\n    <string name=\"visit_schedule\">Besuchszeiten</string>\r\n    <string name=\"monday_to_friday\">Montag bis Freitag:</string>\r\n    <string name=\"four_pieces\">4 Teile</string>\r\n    <string name=\"nine_pieces\">9 Teile</string>\r\n    <string name=\"sixteen_pieces\">16 Teile</string>\r\n    <string name=\"twentyfive_pieces\">25 Teile</string>\r\n    <string name=\"three_pairs\">3 Paare</string>\r\n    <string name=\"four_pairs\">4 Paare</string>\r\n    <string name=\"five_pairs\">5 Paare</string>\r\n    <string name=\"six_pairs\">6 Paare</string>\r\n    <string name=\"dont_show_again\">Nicht mehr anzeigen</string>\r\n    <string name=\"understand\">Verstanden</string>\r\n    <string name=\"map_tutorial_body\">Dies ist der Tutorial-Text</string>\r\n    <string name=\"map_tutorial_title\">Dies ist der Tutorial-Titel</string>\r\n    <string name=\"map_tutorial_body2\">Dies ist der Text des Karten-Tutorials 2</string>\r\n    <string name=\"map_tutorial_title2\">Dies ist der Titel des Karten-Tutorials 2</string>\r\n    <string name=\"pin_tutorial_body\">Dies ist der Text des Pin-Tutorials</string>\r\n    <string name=\"pine_tutorial_title\">Dies ist der Titel des Pin-Tutorials</string>\r\n    <string name=\"next\">Weiter</string>\r\n    <string name=\"map_tutorial_body1\">Oben links ermöglicht das Symbol (←) die Rückkehr zum Anfang</string>\r\n    <string name=\"map_tutorial_body1_2\">Durch Berühren der farbigen Bereiche der Karte können wir auf die verschiedenen sichtbaren Teile zugreifen</string>\r\n    <string name=\"map_tutorial_body1_3\">Außerdem ermöglichen Ihnen die Schaltflächen auf der rechten Seite, hinein- oder herauszuzoomen oder zur Originalgröße der Karte zurückzukehren</string>\r\n    <string name=\"submapa_1\">Durch Berühren des Symbols (←) können wir zur allgemeinen Karte zurückkehren</string>\r\n    <string name=\"submapa_2\">Durch Berühren der verschiedenen Pins können wir auf die Sehenswürdigkeiten zugreifen</string>\r\n    <string name=\"pin_1\">Durch Drücken des Symbols (←) können Sie zur Karte zurückkehren</string>\r\n    <string name=\"pin_2\">Sie können die Bilder durchblättern oder zum Vergrößern darauf klicken</string>\r\n    <string name=\"pin_3\">Durch Klicken hier können Sie den Text anhören</string>\r\n    <string name=\"pin_4\">Um zur 360°-Ansicht zu gelangen, drücken Sie diese Taste</string>\r\n    <string name=\"confirm_save_title\">Änderungen speichern?</string>\r\n    <string name=\"confirm_save_message\">Sind Sie sicher, dass Sie die vorgenommenen Änderungen speichern möchten?</string>\r\n    <string name=\"confirm_save_button\">Speichern</string>\r\n    <string name=\"confirm_cancel_button\">Abbrechen</string>\r\n    <string name=\"edit_cancel_changes\">Abbrechen</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Bild hinzufügen</string>\r\n    <string name=\"image_delete\">Löschen</string>\r\n    <string name=\"image_delete_confirm_title\">Bild löschen?</string>\r\n    <string name=\"image_delete_confirm_message\">Sind Sie sicher, dass Sie das Bild löschen möchten?</string>\r\n    <string name=\"image_uploading\">Bild wird hochgeladen...</string>\r\n    <string name=\"image_upload_success\">Bild erfolgreich hochgeladen</string>\r\n    <string name=\"image_upload_error\">Fehler beim Hochladen des Bildes</string>\r\n    <string name=\"image_select_error\">Fehler beim Laden des Bildes</string>\r\n    <string name=\"congratulations\">Herzlichen Glückwunsch!</string>\r\n    <string name=\"message_game_completed\">Sie haben das Spiel gelöst! Bereit für die nächste Herausforderung?</string>\r\n    <string name=\"ready\">Bereit</string>\r\n    <string name=\"original_image\">Bild anzeigen</string>\r\n    <string name=\"image_gallery_title\">Bilder</string>\r\n    <string name=\"visible\">Sichtbar</string>\r\n    <string name=\"hidden\">Versteckt</string>\r\n    <string name=\"lang_en\">Englisch</string>\r\n    <string name=\"lang_es\">Spanisch</string>\r\n    <string name=\"sample_text\">Beispiel</string>\r\n    <string name=\"lang_de\">Deutsch</string>\r\n    <string name=\"font_small\">Klein</string>\r\n    <string name=\"font_medium\">Mittel</string>\r\n    <string name=\"font_large\">Groß</string>\r\n    <string name=\"puzzle_screen\">Puzzle</string>\r\n    <string name=\"puzzle_option\">PUZZLE</string>\r\n    <string name=\"memory_screen\">Paare</string>\r\n    <string name=\"memory_option\">PAARE</string>\r\n    <string name=\"differences_game\">7 UNTERSCHIEDE</string>\r\n    <string name=\"differences_screen\">7 Unterschiede</string>\r\n    <string name=\"title_instructions\">Hallo, superspieler!</string>\r\n    <string name=\"text_instructions_puzzle\">Hallo, superspieler!\\nBist du bereit, dieses unglaubliche Puzzle zusammenzusetzen?\\n\\nDas Spielen ist ganz einfach:\\n\\u2022 Wähle ein Teil unten auf dem Bildschirm aus und halte es einige Sekunden lang gedrückt.\\n\\u2022 Magie! Dieses Teil wird nun schweben und du kannst es mit deinem Finger bewegen.\\n\\u2022 Ziehe das Teil an die Stelle auf dem Brett, wo es deiner Meinung nach hingehört.\\n\\u2022 Wenn du es an der richtigen Stelle platzierst, rastet es ein und bleibt fixiert! Wenn es nicht die richtige Stelle ist, kehrt es zur Kiste zurück.\\nGeben Sie nicht auf, bis das Puzzle fertig ist!\\nViel Glück!</string>\r\n    <string name=\"text_instructions_pairs\">Hallo, superspieler!\\nBist du bereit, alle Paare zu finden?\\n\\nAnleitung:\\nSchauen Sie sich die Bilder genau an, bevor sie versteckt werden, und finden Sie alle Paare. Berühren Sie die Quadrate, um das versteckte Bild aufzudecken, bis Sie zwei identische Paare finden.\\nFahren Sie fort, bis Sie alle Paare gefunden haben.\\nViel Spaß und testen Sie Ihr Gedächtnis!</string>\r\n    <string name=\"differences_counter\">Gefundene Unterschiede: %1$d / %2$d</string>\r\n    <string name=\"back_piece\">Rückseite des Teils</string>\r\n    <string name=\"left_pairs\">Verbleibende Paare: %1$s</string>\r\n    <string name=\"left_pieces\">Verbleibende Teile: %1$s</string>\r\n    <string name=\"background_edit_screen\">HINTERGRUND BEARBEITEN</string>\r\n    <string name=\"pin_edit_screen\">PIN BEARBEITEN</string>\r\n    <string name=\"gallery_type_all\">Alle</string>\r\n    <string name=\"gallery_type_painting\">Gemälde</string>\r\n    <string name=\"gallery_type_sculpture\">Skulpturen</string>\r\n    <string name=\"gallery_type_architecture\">Architektur</string>\r\n    <string name=\"gallery_type_other\">Andere</string>\r\n    <string name=\"play_audio\"></string>\r\n    <string name=\"error_connection_title\">Hoppla! Ein Fehler ist aufgetreten</string>\r\n    <string name=\"error_connection_desc\">Wir konnten die Karte nicht laden. Bitte überprüfen Sie Ihre Internetverbindung und versuchen Sie es erneut.</string>\r\n    <string name=\"retry\">Erneut versuchen</string>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
--- a/app/src/main/res/values-de/strings.xml	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ b/app/src/main/res/values-de/strings.xml	(date 1764543420104)
@@ -167,8 +167,9 @@
     <string name="differences_game">7 UNTERSCHIEDE</string>
     <string name="differences_screen">7 Unterschiede</string>
     <string name="title_instructions">Hallo, superspieler!</string>
-    <string name="text_instructions_puzzle">Hallo, superspieler!\nBist du bereit, dieses unglaubliche Puzzle zusammenzusetzen?\n\nDas Spielen ist ganz einfach:\n\u2022 Wähle ein Teil unten auf dem Bildschirm aus und halte es einige Sekunden lang gedrückt.\n\u2022 Magie! Dieses Teil wird nun schweben und du kannst es mit deinem Finger bewegen.\n\u2022 Ziehe das Teil an die Stelle auf dem Brett, wo es deiner Meinung nach hingehört.\n\u2022 Wenn du es an der richtigen Stelle platzierst, rastet es ein und bleibt fixiert! Wenn es nicht die richtige Stelle ist, kehrt es zur Kiste zurück.\nGeben Sie nicht auf, bis das Puzzle fertig ist!\nViel Glück!</string>
-    <string name="text_instructions_pairs">Hallo, superspieler!\nBist du bereit, alle Paare zu finden?\n\nAnleitung:\nSchauen Sie sich die Bilder genau an, bevor sie versteckt werden, und finden Sie alle Paare. Berühren Sie die Quadrate, um das versteckte Bild aufzudecken, bis Sie zwei identische Paare finden.\nFahren Sie fort, bis Sie alle Paare gefunden haben.\nViel Spaß und testen Sie Ihr Gedächtnis!</string>
+    <string name="text_instructions_puzzle">Bist du bereit, dieses unglaubliche Puzzle zusammenzusetzen?\n\nDas Spielen ist ganz einfach:\n\u2022 Wähle ein Teil unten auf dem Bildschirm aus und halte es einige Sekunden lang gedrückt.\n\u2022 Magie! Dieses Teil wird nun schweben und du kannst es mit deinem Finger bewegen.\n\u2022 Ziehe das Teil an die Stelle auf dem Brett, wo es deiner Meinung nach hingehört.\n\u2022 Wenn du es an der richtigen Stelle platzierst, rastet es ein und bleibt fixiert! Wenn es nicht die richtige Stelle ist, kehrt es zur Kiste zurück.\nGeben Sie nicht auf, bis das Puzzle fertig ist!\nViel Glück!</string>
+    <string name="text_instructions_spot_the_difference">Bist du bereit, die 7 versteckten Unterschiede zu finden?\n\nSo spielst du:\n\u2022 Sieh dir die beiden Bilder, die identisch aussehen, genau an.\n\u2022 Suche nach Details, die in einem der Bilder verändert wurden oder fehlen.\n\u2022 Tippe auf die Stelle im Bild, an der du einen Unterschied gefunden hast.\n\u2022 Großartig! Wenn du richtig liegst, wird der Unterschied markiert und dein Zähler sinkt.\nEs gibt nur 7! Gib nicht auf, bis du sie alle gefunden hast.\nViel Glück!</string>
+    <string name="text_instructions_pairs">Bist du bereit, alle Paare zu finden?\n\nAnleitung:\nSchauen Sie sich die Bilder genau an, bevor sie versteckt werden, und finden Sie alle Paare. Berühren Sie die Quadrate, um das versteckte Bild aufzudecken, bis Sie zwei identische Paare finden.\nFahren Sie fort, bis Sie alle Paare gefunden haben.\nViel Spaß und testen Sie Ihr Gedächtnis!</string>
     <string name="differences_counter">Gefundene Unterschiede: %1$d / %2$d</string>
     <string name="back_piece">Rückseite des Teils</string>
     <string name="left_pairs">Verbleibende Paare: %1$s</string>
Index: app/src/main/res/values-fr/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Santa María la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Accueil</string>\r\n    <string name=\"virtual_visit\">VISITE VIRTUELLE</string>\r\n    <string name=\"book_appointment\">RÉSERVER UN RENDEZ-VOUS</string>\r\n    <string name=\"monastery_name\">Santa María\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Mode d\\'édition</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Quitter le mode d\\'édition</string>\r\n    <string name=\"edit_mode_activate_message\">Mode d\\'édition activé</string>\r\n    <string name=\"edit_mode_deactivate_message\">Mode d\\'édition désactivé</string>\r\n    <string name=\"edit_save_changes\">Sauvegarder les changements</string>\r\n    <string name=\"profile_login\">Se Connecter</string>\r\n    <string name=\"profile_logout\">Se Déconnecter</string>\r\n    <string name=\"profile_email\">Courriel</string>\r\n    <string name=\"profile_password\">Mot de passe</string>\r\n    <string name=\"navigation_drawer_open\">Ouvrir le menu</string>\r\n    <string name=\"navigation_drawer_close\">Fermer le menu</string>\r\n    <string name=\"menu_info\">Informations sur le monastère</string>\r\n    <string name=\"menu_history\">Histoire</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Paramètres</string>\r\n    <string name=\"title_info_general\">Informations Générales</string>\r\n    <string name=\"title_history\">Histoire</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Paramètres</string>\r\n    <string name=\"info_location\">Rue…</string>\r\n    <string name=\"info_hours\">Lundi-Vendredi : XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informations générales :</string>\r\n    <string name=\"history_1328\">1328 \uD83D\uDD25 Incendie et reconstruction</string>\r\n    <string name=\"history_1328_body\">Lors d\\'un incendie à Valladolid provoqué par les troupes d\\'Alfonso XI, le monastère des palais de la Magdalena fut gravement endommagé. Les moniales commencèrent sa reconstruction grâce à l\\'aide financière d\\'Álvaro Nuño Pérez de Monroy.</string>\r\n    <string name=\"history_1579\">1579 \uD83C\uDFF0 Reconstruction de l\\'église et du cloître</string>\r\n    <string name=\"history_579_body\">Les moniales ont construit l\\'église selon les plans du maître italien Pietro Palladio. Le retable fut l\\'œuvre de Gregorio Fernández et le nouveau cloître, de Francisco de Praves. Tout cela fut rendu possible grâce aux dons des abbesses Ana et Isabel de Mendoza.</string>\r\n    <string name=\"history_1869\">1869 \uD83C\uDF93 Naissance de l\\'école du monastère</string>\r\n    <string name=\"history_1869_body\">La communauté de Huelgas Reales a ouvert sa propre école, accueillant des jeunes filles de la noblesse de Valladolid comme demi-pensionnaires.</string>\r\n    <string name=\"history_XX\">XXe-XXIe siècles ✨ Restauration et vie moderne</string>\r\n    <string name=\"history_XX_body\">Le monastère a été entièrement restauré. La diminution des vocations a conduit à la création de la Fraternité Laïque Cistercienne, qui maintient vivant l\\'esprit de la Règle de Saint Benoît.</string>\r\n    <string name=\"history_2007\">2007 et au-delà \uD83D\uDC69\u200D\uD83E\uDDB3 Direction et Congrégation féminine</string>\r\n    <string name=\"history_2007_body\">Le monastère fait partie de la Congrégation de Castille de l\\'Ordre Cistercien, active en tant que congrégation féminine depuis 2007. La première abbesse présidente fut María del Mar Martínez ; après son décès en 2013, Sœur Isabel Vallés Gallego a pris la relève. Actuellement, Sœur María dirige le monastère et l\\'école.</string>\r\n    <string name=\"title_appointment\">Réserver un Rendez-vous</string>\r\n    <string name=\"option_phone_appointment\">Réserver par téléphone</string>\r\n    <string name=\"option_online_appointment\">Réserver en ligne</string>\r\n    <string name=\"name_appointment\">Nom et prénom</string>\r\n    <string name=\"email_appointment\">Courriel</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Heure</string>\r\n    <string name=\"placeholdername_appointment\">Entrez votre nom et prénom</string>\r\n    <string name=\"placeholderemail_appointment\">Entrez votre courriel</string>\r\n    <string name=\"placeholderdate_appointment\">Sélectionnez une date</string>\r\n    <string name=\"placeholderhour_appointment\">Sélectionnez une heure</string>\r\n    <string name=\"compulsory_name\">Le nom est obligatoire</string>\r\n    <string name=\"valid_name\">Le nom contient un symbole non valide</string>\r\n    <string name=\"compulsory_email\">L\\'e-mail est obligatoire</string>\r\n    <string name=\"valid_email\">Le format de l\\'e-mail n\\'est pas valide</string>\r\n    <string name=\"date_no_selected\">Une date doit être sélectionnée</string>\r\n    <string name=\"hour_no_selected\">Une heure doit être sélectionnée</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Annuler</string>\r\n    <string name=\"confirm_button\">CONFIRMER</string>\r\n    <string name=\"contentimage_confirmation\">Confirmé</string>\r\n    <string name=\"confirmation_appointment\">PRESQUE TERMINÉ !</string>\r\n    <string name=\"details_appointment\">Votre demande de réservation est prête. Veuillez appuyer sur envoyer dans l\\'application de messagerie qui vient de s\\'ouvrir pour finaliser votre demande. Nous vous répondrons à cet e-mail pour confirmer la disponibilité.</string>\r\n    <string name=\"email_subject\">Demande de Réservation de Visite - %1$s</string>\r\n    <string name=\"email_message\">Bonjour,\\n\\nJe souhaite demander une réservation pour une visite au monastère avec les détails suivants :\\n\\n* Nom : %1$s\\n* E-mail : %2$s\\n* Date de la visite : %3$s\\n* Heure de la visite : %4$s\\n\\nJ\\'attends votre aimable confirmation.\\n\\nMerci beaucoup,\\nCordialement,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Aucune application de messagerie n\\'a été trouvée</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sélectionner la langue</string>\r\n    <string name=\"font_size_select\">Sélectionnez la taille de la police</string>\r\n    <string name=\"font_extrabig\">Extra Large</string>\r\n    <string name=\"font_normal\">Moyenne</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monastère</string>\r\n    <string name=\"title_entrada\">Entrée du Monastère</string>\r\n    <string name=\"spanish_language\">Espagnol</string>\r\n    <string name=\"german_language\">Allemand</string>\r\n    <string name=\"lang_fr\">Français</string>\r\n    <string name=\"english_language\">Anglais</string>\r\n    <string name=\"navegation_button\">Masquer les boutons de navigation</string>\r\n    <string name=\"close\">Fermer</string>\r\n    <string name=\"go_back\">Retourner</string>\r\n    <string name=\"see_360\">Voir 360º</string>\r\n    <string name=\"contentdescription_image_pin\">Image de la punaise (cliquer pour agrandir)</string>\r\n    <string name=\"readjust\">Réajuster</string>\r\n    <string name=\"decrease\">Diminuer</string>\r\n    <string name=\"increase\">Augmenter</string>\r\n    <string name=\"out_interactive_area\">Hors zone interactive</string>\r\n    <string name=\"notdefined_destiny\">Destination non définie</string>\r\n    <string name=\"notdefined_destinyplane\">Plan de destination non défini</string>\r\n    <string name=\"plane_loading\">Chargement du plan…</string>\r\n    <string name=\"error_loading_plane\">Erreur de chargement des données du plan</string>\r\n    <string name=\"child_mode\">MODE ENFANTS</string>\r\n    <string name=\"child_mode_view\">Mode Enfants</string>\r\n    <string name=\"video_view\">Vidéo</string>\r\n    <string name=\"game_view\">Jeux</string>\r\n    <string name=\"video_child\">VIDÉO</string>\r\n    <string name=\"game_child\">JEUX</string>\r\n    <string name=\"edit_mode\">MODE D\\'ÉDITION</string>\r\n    <string name=\"edit_home_background\">Édition fond d\\'écran d\\'accueil</string>\r\n    <string name=\"edit_pins\">Édition des punaises</string>\r\n    <string name=\"location_error\">Aucune application n\\'a été trouvée pour ouvrir la localisation.</string>\r\n    <string name=\"contact_data\">Coordonnées</string>\r\n    <string name=\"location_data\">Localisation</string>\r\n    <string name=\"email_data\">Courriel</string>\r\n    <string name=\"phone_data\">Téléphone</string>\r\n    <string name=\"visit_schedule\">Horaires de Visite</string>\r\n    <string name=\"monday_to_friday\">Du Lundi au Vendredi :</string>\r\n    <string name=\"four_pieces\">4 pièces</string>\r\n    <string name=\"nine_pieces\">9 pièces</string>\r\n    <string name=\"sixteen_pieces\">16 pièces</string>\r\n    <string name=\"twentyfive_pieces\">25 pièces</string>\r\n    <string name=\"three_pairs\">3 Paires</string>\r\n    <string name=\"four_pairs\">4 Paires</string>\r\n    <string name=\"five_pairs\">5 Paires</string>\r\n    <string name=\"six_pairs\">6 Paires</string>\r\n    <string name=\"dont_show_again\">Ne plus afficher</string>\r\n    <string name=\"understand\">Compris</string>\r\n    <string name=\"map_tutorial_body\">Ceci est le corps du tutoriel</string>\r\n    <string name=\"map_tutorial_title\">Ceci est le titre du tutoriel</string>\r\n    <string name=\"map_tutorial_body2\">Ceci est le corps du tutoriel de la carte 2</string>\r\n    <string name=\"map_tutorial_title2\">Ceci est le titre du tutoriel de la carte 2</string>\r\n    <string name=\"pin_tutorial_body\">Ceci est le corps du tutoriel de la punaise</string>\r\n    <string name=\"pine_tutorial_title\">Ceci est le titre du tutoriel de la punaise</string>\r\n    <string name=\"next\">Suivant</string>\r\n    <string name=\"map_tutorial_body1\">En haut à gauche, le symbole (←) permet de revenir au début</string>\r\n    <string name=\"map_tutorial_body1_2\">En touchant les zones colorées de la carte, nous pouvons accéder aux différentes parties visualisables</string>\r\n    <string name=\"map_tutorial_body1_3\">De plus, les boutons de droite vous permettent d\\'agrandir, de réduire ou de revenir à la taille originale de la carte</string>\r\n    <string name=\"submapa_1\">En touchant le symbole (←), nous pouvons revenir à la carte générale</string>\r\n    <string name=\"submapa_2\">En touchant les différentes punaises, nous pouvons accéder aux points d\\'intérêt</string>\r\n    <string name=\"pin_1\">En appuyant sur le symbole (←), vous pouvez revenir à la carte</string>\r\n    <string name=\"pin_2\">Vous pouvez faire défiler les images ou cliquer dessus pour les agrandir</string>\r\n    <string name=\"pin_3\">En cliquant ici, vous pouvez écouter l\\'audio du texte</string>\r\n    <string name=\"pin_4\">Pour accéder à la vue 360, appuyez sur ce bouton</string>\r\n    <string name=\"confirm_save_title\">Sauvegarder les changements ?</string>\r\n    <string name=\"confirm_save_message\">Êtes-vous sûr de vouloir sauvegarder les changements effectués ?</string>\r\n    <string name=\"confirm_save_button\">Sauvegarder</string>\r\n    <string name=\"confirm_cancel_button\">Annuler</string>\r\n    <string name=\"edit_cancel_changes\">Annuler</string>\r\n    <string name=\"profile_name\">Nom</string>\r\n    <string name=\"image_add\">Ajouter une image</string>\r\n    <string name=\"image_delete\">Supprimer</string>\r\n    <string name=\"image_delete_confirm_title\">Supprimer l\\'image ?</string>\r\n    <string name=\"image_delete_confirm_message\">Êtes-vous sûr de vouloir supprimer l\\'image ?</string>\r\n    <string name=\"image_uploading\">Téléchargement de l\\'image...</string>\r\n    <string name=\"image_upload_success\">Image téléchargée avec succès</string>\r\n    <string name=\"image_upload_error\">Erreur lors du téléchargement de l\\'image</string>\r\n    <string name=\"image_select_error\">Erreur lors du chargement de l\\'image</string>\r\n    <string name=\"congratulations\">Félicitations !</string>\r\n    <string name=\"message_game_completed\">Vous avez résolu le jeu ! Prêt pour le prochain défi ?</string>\r\n    <string name=\"ready\">Prêt</string>\r\n    <string name=\"original_image\">Voir l\\'image</string>\r\n    <string name=\"image_gallery_title\">Images</string>\r\n    <string name=\"visible\">Visibles</string>\r\n    <string name=\"hidden\">Masqués</string>\r\n    <string name=\"lang_en\">English</string>\r\n    <string name=\"lang_es\">Español</string>\r\n    <string name=\"sample_text\">Exemple</string>\r\n    <string name=\"lang_de\">Deutsch</string>\r\n    <string name=\"font_small\">Petite</string>\r\n    <string name=\"font_medium\">Moyenne</string>\r\n    <string name=\"font_large\">Grande</string>\r\n    <string name=\"puzzle_screen\">Puzzle</string>\r\n    <string name=\"puzzle_option\">PUZZLE</string>\r\n    <string name=\"memory_screen\">Paires</string>\r\n    <string name=\"memory_option\">PAIRES</string>\r\n    <string name=\"differences_game\">7 DIFFÉRENCES</string>\r\n    <string name=\"differences_screen\">7 Différences</string>\r\n    <string name=\"title_instructions\">Salut, super joueur !</string>\r\n    <string name=\"text_instructions_puzzle\">Salut, super joueur !\\nEs-tu prêt à assembler cet incroyable puzzle ?\\n\\nPour jouer, c\\'est très facile :\\n\\u2022 Choisis une pièce en bas de l\\'écran et maintiens la pression dessus pendant quelques secondes.\\n\\u2022 Magie ! Cette pièce va maintenant flotter et tu pourras la déplacer avec ton doigt.\\n\\u2022 Fais glisser la pièce à l\\'endroit du plateau où tu penses qu\\'elle va.\\n\\u2022 Si tu la mets au bon endroit, elle s\\'emboîtera et restera fixée ! Si ce n\\'est pas le bon endroit, elle retournera à la boîte.\\nN\\'abandonne pas tant que le puzzle n\\'est pas terminé !\\nBonne chance !</string>\r\n    <string name=\"text_instructions_pairs\">Salut, super joueur!\\nEs-tu prêt à trouver toutes les paires?\\n\\nInstructions:\\nRegarde attentivement les images avant qu\\'elles ne soient cachées y trouve toutes les paires. Touche les carrés pour révéler l\\'image cachée jusqu\\'à trouver deux paires identiques.\\nContinue jusqu\\'à trouver toutes les paires.\\nAmuse-toi bien et teste ta mémoire!</string>\r\n    <string name=\"differences_counter\">Différences trouvées: %1$d / %2$d</string>\r\n    <string name=\"back_piece\">Dos de la pièce</string>\r\n    <string name=\"left_pairs\">Paires restantes : %1$s</string>\r\n    <string name=\"left_pieces\">Pièces restantes : %1$s</string>\r\n    <string name=\"background_edit_screen\">MODIFIER L\\'ARRIÈRE-PLAN</string>\r\n    <string name=\"pin_edit_screen\">MODIFIER LE NIP</string>\r\n    <string name=\"gallery_type_all\">Tous</string>\r\n    <string name=\"gallery_type_painting\">Peintures</string>\r\n    <string name=\"gallery_type_sculpture\">Sculptures</string>\r\n    <string name=\"gallery_type_architecture\">Architecture</string>\r\n    <string name=\"gallery_type_other\">Autres</string>\r\n    <string name=\"play_audio\"></string>\r\n    <string name=\"error_connection_title\">Oups ! Une erreur est survenue</string>\r\n    <string name=\"error_connection_desc\">Nous n\\'avons pas pu charger la carte. Veuillez vérifier votre connexion internet et réessayer.</string>\r\n    <string name=\"retry\">Réessayer</string>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values-fr/strings.xml b/app/src/main/res/values-fr/strings.xml
--- a/app/src/main/res/values-fr/strings.xml	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ b/app/src/main/res/values-fr/strings.xml	(date 1764543420108)
@@ -167,9 +167,10 @@
     <string name="differences_game">7 DIFFÉRENCES</string>
     <string name="differences_screen">7 Différences</string>
     <string name="title_instructions">Salut, super joueur !</string>
-    <string name="text_instructions_puzzle">Salut, super joueur !\nEs-tu prêt à assembler cet incroyable puzzle ?\n\nPour jouer, c\'est très facile :\n\u2022 Choisis une pièce en bas de l\'écran et maintiens la pression dessus pendant quelques secondes.\n\u2022 Magie ! Cette pièce va maintenant flotter et tu pourras la déplacer avec ton doigt.\n\u2022 Fais glisser la pièce à l\'endroit du plateau où tu penses qu\'elle va.\n\u2022 Si tu la mets au bon endroit, elle s\'emboîtera et restera fixée ! Si ce n\'est pas le bon endroit, elle retournera à la boîte.\nN\'abandonne pas tant que le puzzle n\'est pas terminé !\nBonne chance !</string>
-    <string name="text_instructions_pairs">Salut, super joueur!\nEs-tu prêt à trouver toutes les paires?\n\nInstructions:\nRegarde attentivement les images avant qu\'elles ne soient cachées y trouve toutes les paires. Touche les carrés pour révéler l\'image cachée jusqu\'à trouver deux paires identiques.\nContinue jusqu\'à trouver toutes les paires.\nAmuse-toi bien et teste ta mémoire!</string>
-    <string name="differences_counter">Différences trouvées: %1$d / %2$d</string>
+    <string name="text_instructions_puzzle">Es-tu prêt à assembler cet incroyable puzzle ?\n\nPour jouer, c\'est très facile :\n\u2022 Choisis une pièce en bas de l\'écran et maintiens la pression dessus pendant quelques secondes.\n\u2022 Magie ! Cette pièce va maintenant flotter et tu pourras la déplacer avec ton doigt.\n\u2022 Fais glisser la pièce à l\'endroit du plateau où tu penses qu\'elle va.\n\u2022 Si tu la mets au bon endroit, elle s\'emboîtera et restera fixée ! Si ce n\'est pas le bon endroit, elle retournera à la boîte.\nN\'abandonne pas tant que le puzzle n\'est pas terminé !\nBonne chance !</string>
+    <string name="text_instructions_spot_the_difference">Es-tu prêt à trouver les 7 différences cachées ?\n\nPour jouer, c\'est très simple :\n\u2022 Regarde attentivement les deux images qui semblent identiques.\n\u2022 Cherche les détails qui ont été modifiés ou qui manquent dans l\'une d\'elles.\n\u2022 Touche la zone de l\'image où tu as trouvé une différence.\n\u2022 Génial ! Si tu trouves la bonne, la différence sera marquée et ton compteur diminuera.\nIl n\'y en a que 7 ! N\'abandonne pas avant de toutes les avoir trouvées.\nBonne chance !</string>
+    <string name="text_instructions_pairs">Es-tu prêt à trouver toutes les paires ?\n\nInstructions :\n\u2022 Regarde attentivement les images avant qu\'elles ne soient cachées et trouve toutes les paires.\n\u2022 Touche les carrés pour révéler l\'image cachée jusqu\'à trouver deux paires identiques.\n\u2022 Continue jusqu\'à trouver toutes les paires.\nAmuse-toi bien et teste ta mémoire !</string>
+    <string name="differences_counter">Différences trouvées : %1$d / %2$d</string>
     <string name="back_piece">Dos de la pièce</string>
     <string name="left_pairs">Paires restantes : %1$s</string>
     <string name="left_pieces">Pièces restantes : %1$s</string>
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Santa María la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVAR CITA</string>\r\n    <string name=\"monastery_name\">Santa María\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edición</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edición</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edición activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edición desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesión</string>\r\n    <string name=\"profile_logout\">Cerrar Sesión</string>\r\n    <string name=\"profile_email\">Correo Electrónico</string>\r\n    <string name=\"profile_password\">Contraseña</string>\r\n    <string name=\"navigation_drawer_open\">Abrir menú</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar menú</string>\r\n    <string name=\"menu_info\">Información del monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galería</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Información General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galería</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">Calle…</string>\r\n    <string name=\"info_hours\">Lunes-Viernes: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Información general:</string>\r\n    <string name=\"history_1328\">1328 \uD83D\uDD25 Incendio y reconstrucción</string>\r\n    <string name=\"history_1328_body\">Durante un incendio en Valladolid provocado por las tropas de Alfonso XI el monasterio de los palacios de la Magdalena resultó muy dañado. Las monjas comenzaron su reconstrucción gracias a la ayuda económica de Álvaro Nuño Pérez de Monroy.</string>\r\n    <string name=\"history_1579\">1579 \uD83C\uDFF0 Reconstrucción de la iglesia y el claustro</string>\r\n    <string name=\"history_579_body\">Las monjas construyeron la iglesia según los planos del maestro italiano Pietro Palladio. El retablo fue obra de Gregorio Fernández y el nuevo claustro de Francisco de Praves. Todo ello fue posible gracias a las donaciones de las abadesas Ana e Isabel de Mendoza.</string>\r\n    <string name=\"history_1869\">1869 \uD83C\uDF93 Nacimiento de la escuela del monasterio</string>\r\n    <string name=\"history_1869_body\">La comunidad de Huelgas Reales abrió su propia escuela, acogiendo a jóvenes nobles de Valladolid como alumnas externas.</string>\r\n    <string name=\"history_XX\">Siglos XX-XXI ✨ Restauración y vida moderna</string>\r\n    <string name=\"history_XX_body\">El monasterio fue restaurado en su totalidad. La disminución de vocaciones llevó a la creación de la Fraternidad Laica Cisterciense, que mantiene vivo el espíritu de la Regla de San Benito.</string>\r\n    <string name=\"history_2007\">2007 y más allá \uD83D\uDC69\u200D\uD83E\uDDB3 Dirección y Congregación femenina</string>\r\n    <string name=\"history_2007_body\">El monasterio forma parte de la Congregación de Castilla de la Orden Cisterciense, activa como congregación femenina desde 2007. La primera abadesa presidenta fue María del Mar Martínez; tras su fallecimiento en 2013, tomó el relevo Sor Isabel Vallés Gallego. Actualmente Sor María dirige el monasterio y la escuela.</string>\r\n    <string name=\"title_appointment\">Reservar una Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por teléfono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo Electrónico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electrónico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene un símbolo no válido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es válido</string>\r\n    <string name=\"date_no_selected\">Una fecha debe ser seleccionada</string>\r\n    <string name=\"hour_no_selected\">Una hora debe ser seleccionada</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">¡CASI TERMINADO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva está lista. Pulsa enviar en la aplicación de mensajería que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese email para confirmarte la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Visita - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustaría solicitar una reserva para una visita al monasterio con los siguientes detalles:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nEspero su amable confirmación.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se ha encontrado ninguna aplicación de mensajería</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tamaño de la fuente</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Media</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada del Monasterio</string>\r\n    <string name=\"spanish_language\">Español</string>\r\n    <string name=\"german_language\">Alemán</string>\r\n    <string name=\"lang_fr\">Francés</string>\r\n    <string name=\"english_language\">Inglés</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegación</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360º</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen de la chincheta (hacer clic para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera de zona interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano de destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano…</string>\r\n    <string name=\"error_loading_plane\">Error al cargar los datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIÑOS</string>\r\n    <string name=\"child_mode_view\">Modo Niños</string>\r\n    <string name=\"video_view\">Vídeo</string>\r\n    <string name=\"game_view\">Juegos</string>\r\n    <string name=\"video_child\">VÍDEO</string>\r\n    <string name=\"game_child\">JUEGOS</string>\r\n    <string name=\"edit_mode\">MODO EDICIÓN</string>\r\n    <string name=\"edit_home_background\">Edición fondo de pantalla de inicio</string>\r\n    <string name=\"edit_pins\">Edición de chinchetas</string>\r\n    <string name=\"location_error\">No se ha encontrado ninguna aplicación para abrir la ubicación.</string>\r\n    <string name=\"contact_data\">Datos de contacto</string>\r\n    <string name=\"location_data\">Ubicación</string>\r\n    <string name=\"email_data\">Correo Electrónico</string>\r\n    <string name=\"phone_data\">Teléfono</string>\r\n    <string name=\"visit_schedule\">Horarios de Visita</string>\r\n    <string name=\"monday_to_friday\">De Lunes a Viernes:</string>\r\n    <string name=\"four_pieces\">4 piezas</string>\r\n    <string name=\"nine_pieces\">9 piezas</string>\r\n    <string name=\"sixteen_pieces\">16 piezas</string>\r\n    <string name=\"twentyfive_pieces\">25 piezas</string>\r\n    <string name=\"three_pairs\">3 Pares</string>\r\n    <string name=\"four_pairs\">4 Pares</string>\r\n    <string name=\"five_pairs\">5 Pares</string>\r\n    <string name=\"six_pairs\">6 Pares</string>\r\n    <string name=\"dont_show_again\">No volver a mostrar</string>\r\n    <string name=\"understand\">Entendido</string>\r\n    <string name=\"map_tutorial_body\">Este es el cuerpo del tutorial</string>\r\n    <string name=\"map_tutorial_title\">Este es el título del tutorial</string>\r\n    <string name=\"map_tutorial_body2\">Este es el cuerpo del tutorial del mapa 2</string>\r\n    <string name=\"map_tutorial_title2\">Este es el título del tutorial del mapa 2</string>\r\n    <string name=\"pin_tutorial_body\">Este es el cuerpo del tutorial de la chincheta</string>\r\n    <string name=\"pine_tutorial_title\">Este es el título del tutorial de la chincheta</string>\r\n    <string name=\"next\">Siguiente</string>\r\n    <string name=\"map_tutorial_body1\">Arriba a la izquierda, el símbolo (←) permite volver al principio</string>\r\n    <string name=\"map_tutorial_body1_2\">Tocando las zonas de color del mapa, podemos acceder a las distintas partes visualizables</string>\r\n    <string name=\"map_tutorial_body1_3\">Además, los botones de la derecha te permiten acercar, alejar o volver al tamaño original del mapa</string>\r\n    <string name=\"submapa_1\">Tocando el símbolo (←), podemos volver al mapa general</string>\r\n    <string name=\"submapa_2\">Tocando las diferentes chinchetas, podemos acceder a los puntos de interés</string>\r\n    <string name=\"pin_1\">Pulsando el símbolo (←), puedes volver al mapa</string>\r\n    <string name=\"pin_2\">Puedes deslizar las imágenes o hacer clic en ellas para ampliarlas</string>\r\n    <string name=\"pin_3\">Pulsando aquí, puedes escuchar el audio del texto</string>\r\n    <string name=\"pin_4\">Para acceder a la vista 360, pulsa este botón</string>\r\n    <string name=\"confirm_save_title\">¿Guardar cambios?</string>\r\n    <string name=\"confirm_save_message\">¿Estás seguro de querer guardar los cambios realizados?</string>\r\n    <string name=\"confirm_save_button\">Guardar</string>\r\n    <string name=\"confirm_cancel_button\">Cancelar</string>\r\n    <string name=\"edit_cancel_changes\">Cancelar</string>\r\n    <string name=\"profile_name\">Nombre</string>\r\n    <string name=\"image_add\">Añadir imagen</string>\r\n    <string name=\"image_delete\">Eliminar</string>\r\n    <string name=\"image_delete_confirm_title\">¿Eliminar imagen?</string>\r\n    <string name=\"image_delete_confirm_message\">¿Estás seguro de querer eliminar la imagen?</string>\r\n    <string name=\"image_uploading\">Subiendo imagen...</string>\r\n    <string name=\"image_upload_success\">Imagen subida con éxito</string>\r\n    <string name=\"image_upload_error\">Error al subir imagen</string>\r\n    <string name=\"image_select_error\">Error al cargar la imagen</string>\r\n    <string name=\"congratulations\">¡Felicidades!</string>\r\n    <string name=\"message_game_completed\">¡Has resuelto el juego! ¿Listo para el siguiente desafío?</string>\r\n    <string name=\"ready\">Listo</string>\r\n    <string name=\"original_image\">Ver imagen</string>\r\n    <string name=\"image_gallery_title\">Imágenes</string>\r\n    <string name=\"visible\">Visibles</string>\r\n    <string name=\"hidden\">Ocultos</string>\r\n    <string name=\"lang_en\">Inglés</string>\r\n    <string name=\"lang_es\">Español</string>\r\n    <string name=\"sample_text\">Ejemplo</string>\r\n    <string name=\"lang_de\">Alemán</string>\r\n    <string name=\"font_small\">Pequeña</string>\r\n    <string name=\"font_medium\">Media</string>\r\n    <string name=\"font_large\">Grande</string>\r\n    <string name=\"puzzle_screen\">Puzle</string>\r\n    <string name=\"puzzle_option\">PUZLE</string>\r\n    <string name=\"memory_screen\">Pares</string>\r\n    <string name=\"memory_option\">PARES</string>\r\n    <string name=\"differences_game\">7 DIFERENCIAS</string>\r\n    <string name=\"differences_screen\">7 Diferencias</string>\r\n    <string name=\"title_instructions\">¡Hola, super jugador!</string>\r\n    <string name=\"text_instructions_puzzle\">¡Hola, super jugador!\\n¿Estás listo para armar este increíble puzle?\\n\\nPara jugar, es muy fácil:\\n\\u2022 Elige una pieza en la parte inferior de la pantalla y mantén pulsada durante unos segundos.\\n\\u2022 ¡Magia! Esta pieza ahora flotará y podrás moverla con el dedo.\\n\\u2022 Arrastra la pieza al lugar del tablero donde creas que va.\\n\\u2022 Si la colocas en el lugar correcto, encajará y se quedará fija. Si no es el lugar correcto, volverá a la caja.\\n¡No te rindas hasta completar el puzle!\\n¡Buena suerte!</string>\r\n    <string name=\"text_instructions_pairs\">¡Hola, super jugador!\\n¿Estás listo para encontrar todos los pares?\\n\\nInstrucciones:\\nMira atentamente las imágenes antes de que se oculten y encuentra todos los pares. Toca los cuadrados para revelar la imagen oculta hasta que encuentres dos pares idénticos.\\nContinúa hasta encontrar todos los pares.\\n¡Diviértete y pon a prueba tu memoria!</string>\r\n    <string name=\"differences_counter\">Diferencias encontradas: %1$d / %2$d</string>\r\n    <string name=\"back_piece\">Parte trasera de la pieza</string>\r\n    <string name=\"left_pairs\">Pares restantes: %1$s</string>\r\n    <string name=\"left_pieces\">Piezas restantes: %1$s</string>\r\n    <string name=\"background_edit_screen\">EDITAR FONDO</string>\r\n    <string name=\"pin_edit_screen\">EDITAR PIN</string>\r\n    <string name=\"gallery_type_all\">Todos</string>\r\n    <string name=\"gallery_type_painting\">Pinturas</string>\r\n    <string name=\"gallery_type_sculpture\">Esculturas</string>\r\n    <string name=\"gallery_type_architecture\">Arquitectura</string>\r\n    <string name=\"gallery_type_other\">Otros</string>\r\n    <string name=\"play_audio\"></string>\r\n    <string name=\"error_connection_title\">¡Vaya! Ha ocurrido un error</string>\r\n    <string name=\"error_connection_desc\">No hemos podido cargar el mapa. Por favor, comprueba tu conexión a internet y vuelve a intentarlo.</string>\r\n    <string name=\"retry\">Reintentar</string>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
--- a/app/src/main/res/values/strings.xml	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ b/app/src/main/res/values/strings.xml	(date 1764543420117)
@@ -167,8 +167,9 @@
     <string name="differences_game">7 DIFERENCIAS</string>
     <string name="differences_screen">7 Diferencias</string>
     <string name="title_instructions">¡Hola, super jugador!</string>
-    <string name="text_instructions_puzzle">¡Hola, super jugador!\n¿Estás listo para armar este increíble puzle?\n\nPara jugar, es muy fácil:\n\u2022 Elige una pieza en la parte inferior de la pantalla y mantén pulsada durante unos segundos.\n\u2022 ¡Magia! Esta pieza ahora flotará y podrás moverla con el dedo.\n\u2022 Arrastra la pieza al lugar del tablero donde creas que va.\n\u2022 Si la colocas en el lugar correcto, encajará y se quedará fija. Si no es el lugar correcto, volverá a la caja.\n¡No te rindas hasta completar el puzle!\n¡Buena suerte!</string>
-    <string name="text_instructions_pairs">¡Hola, super jugador!\n¿Estás listo para encontrar todos los pares?\n\nInstrucciones:\nMira atentamente las imágenes antes de que se oculten y encuentra todos los pares. Toca los cuadrados para revelar la imagen oculta hasta que encuentres dos pares idénticos.\nContinúa hasta encontrar todos los pares.\n¡Diviértete y pon a prueba tu memoria!</string>
+    <string name="text_instructions_puzzle">¿Estás listo para armar este increíble puzle?\n\nPara jugar, es muy fácil:\n\u2022 Elige una pieza en la parte inferior de la pantalla y mantén pulsada durante unos segundos.\n\u2022 ¡Magia! Esta pieza ahora flotará y podrás moverla con el dedo.\n\u2022 Arrastra la pieza al lugar del tablero donde creas que va.\n\u2022 Si la colocas en el lugar correcto, encajará y se quedará fija. Si no es el lugar correcto, volverá a la caja.\n¡No te rindas hasta completar el puzle!\n¡Buena suerte!</string>
+    <string name="text_instructions_spot_the_difference">¿Estás listo para encontrar las 7 diferencias ocultas?\n\nPara jugar, es muy fácil:\n\u2022 Mira atentamente las dos imágenes que parecen idénticas.\n\u2022 Busca los detalles que han cambiado o que faltan en una de ellas.\n\u2022 Toca la zona de la imagen donde has encontrado una diferencia.\n\u2022 ¡Genial! Si aciertas, la diferencia se marcará y tu contador bajará.\n¡Solo hay 7! No te rindas hasta encontrarlas todas.\n¡Buena suerte!</string>
+    <string name="text_instructions_pairs">¿Estás listo para encontrar todos los pares?\n\nInstrucciones:\n\u2022Mira atentamente las imágenes antes de que se oculten y encuentra todos los pares.\n\u2022 Toca los cuadrados para revelar la imagen oculta hasta que encuentres dos pares idénticos.\n\u2022Continúa hasta encontrar todos los pares.\n¡Diviértete y pon a prueba tu memoria!</string>
     <string name="differences_counter">Diferencias encontradas: %1$d / %2$d</string>
     <string name="back_piece">Parte trasera de la pieza</string>
     <string name="left_pairs">Pares restantes: %1$s</string>
Index: app/src/main/res/values-en/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Santa María la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa María\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Edit mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit edit mode</string>\r\n    <string name=\"edit_mode_activate_message\">Edit mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Edit mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Log In</string>\r\n    <string name=\"profile_logout\">Log Out</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open navigation drawer</string>\r\n    <string name=\"navigation_drawer_close\">Close navigation drawer</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n    <string name=\"info_location\">Street...</string>\r\n    <string name=\"info_hours\">Monday-Friday: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n    <string name=\"history_1328\">1328 \uD83D\uDD25 Fire and reconstruction</string>\r\n    <string name=\"history_1328_body\">During a fire in Valladolid caused by Alfonso XI\\'s troops, the Magdalena Palace monastery was severely damaged. The nuns began its reconstruction thanks to the financial help of Álvaro Nuño Pérez de Monroy.</string>\r\n    <string name=\"history_1579\">1579 \uD83C\uDFF0 Reconstruction of the church and cloister</string>\r\n    <string name=\"history_579_body\">The nuns built the church according to the plans of the Italian master Pietro Palladio. The altarpiece was the work of Gregorio Fernández and the new cloister, of Francisco de Praves. All this was made possible thanks to the donations of abbesses Ana and Isabel de Mendoza.</string>\r\n    <string name=\"history_1869\">1869 \uD83C\uDF93 Birth of the monastery school</string>\r\n    <string name=\"history_1869_body\">The community of Huelgas Reales opened its own school, welcoming young noble girls from Valladolid as day boarders.</string>\r\n    <string name=\"history_XX\">20th-21st centuries ✨ Restoration and modern life</string>\r\n    <string name=\"history_XX_body\">The monastery has been fully restored. The decrease in vocations led to the creation of the Cistercian Lay Fraternity, which keeps the spirit of the Rule of Saint Benedict alive.</string>\r\n    <string name=\"history_2007\">2007 and beyond \uD83D\uDC69\u200D\uD83E\uDDB3 Leadership and female Congregation</string>\r\n    <string name=\"history_2007_body\">The monastery is part of the Congregation of Castile of the Cistercian Order, active as a female congregation since 2007. The first president abbess was María del Mar Martínez; after her death in 2013, Sister Isabel Vallés Gallego took over. Currently, Sister María manages the monastery and the school.</string>\r\n    <string name=\"title_appointment\">Book an Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Full name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select an hour</string>\r\n    <string name=\"compulsory_name\">Name is compulsory</string>\r\n    <string name=\"valid_name\">Name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is compulsory</string>\r\n    <string name=\"valid_email\">Email format is not valid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">An hour must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST DONE!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please press send in the messaging app that just opened to finalize your request. We will reply to that email to confirm availability.</string>\r\n    <string name=\"email_subject\">Visit Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Visit Date: %3$s\\n* Visit Time: %4$s\\n\\nI await your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No messaging application found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select font size</string>\r\n    <string name=\"font_extrabig\">Extra Large</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Large</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"title_entrada\">Monastery Entrance</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"lang_fr\">French</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go back</string>\r\n    <string name=\"see_360\">See 360º</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Out of interactive area</string>\r\n    <string name=\"notdefined_destiny\">Destination not defined</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plan not defined</string>\r\n    <string name=\"plane_loading\">Loading plan…</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n    <string name=\"child_mode\">CHILD MODE</string>\r\n    <string name=\"child_mode_view\">Children\\'s Mode</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Games</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">GAMES</string>\r\n    <string name=\"edit_mode\">EDIT MODE</string>\r\n    <string name=\"edit_home_background\">Edit home background</string>\r\n    <string name=\"edit_pins\">Pin editing</string>\r\n    <string name=\"location_error\">No application found to open location.</string>\r\n    <string name=\"contact_data\">Contact data</string>\r\n    <string name=\"location_data\">Location</string>\r\n    <string name=\"email_data\">Email</string>\r\n    <string name=\"phone_data\">Phone</string>\r\n    <string name=\"visit_schedule\">Visit Schedule</string>\r\n    <string name=\"monday_to_friday\">Monday to Friday:</string>\r\n    <string name=\"four_pieces\">4 pieces</string>\r\n    <string name=\"nine_pieces\">9 pieces</string>\r\n    <string name=\"sixteen_pieces\">16 pieces</string>\r\n    <string name=\"twentyfive_pieces\">25 pieces</string>\r\n    <string name=\"three_pairs\">3 Pairs</string>\r\n    <string name=\"four_pairs\">4 Pairs</string>\r\n    <string name=\"five_pairs\">5 Pairs</string>\r\n    <string name=\"six_pairs\">6 Pairs</string>\r\n    <string name=\"dont_show_again\">Don\\'t show again</string>\r\n    <string name=\"understand\">Understood</string>\r\n    <string name=\"map_tutorial_body\">This is the tutorial body</string>\r\n    <string name=\"map_tutorial_title\">This is the tutorial title</string>\r\n    <string name=\"map_tutorial_body2\">This is map tutorial body 2</string>\r\n    <string name=\"map_tutorial_title2\">This is map tutorial title 2</string>\r\n    <string name=\"pin_tutorial_body\">This is the pin tutorial body</string>\r\n    <string name=\"pine_tutorial_title\">This is the pin tutorial title</string>\r\n    <string name=\"next\">Next</string>\r\n    <string name=\"map_tutorial_body1\">In the top left, the symbol (←) allows you to return to the beginning</string>\r\n    <string name=\"map_tutorial_body1_2\">By touching the colored areas of the map, we can access the different viewable parts</string>\r\n    <string name=\"map_tutorial_body1_3\">Also, the buttons on the right allow you to zoom in, zoom out, or return to the original size of the map</string>\r\n    <string name=\"submapa_1\">By touching the symbol (←), we can return to the general map</string>\r\n    <string name=\"submapa_2\">By touching the different pins, we can access the points of interest</string>\r\n    <string name=\"pin_1\">By pressing the symbol (←), you can return to the map</string>\r\n    <string name=\"pin_2\">You can scroll through the images or click on them to enlarge</string>\r\n    <string name=\"pin_3\">By clicking here, you can listen to the audio of the text</string>\r\n    <string name=\"pin_4\">To access the 360 view, press this button</string>\r\n    <string name=\"confirm_save_title\">Save changes?</string>\r\n    <string name=\"confirm_save_message\">Are you sure you want to save the changes made?</string>\r\n    <string name=\"confirm_save_button\">Save</string>\r\n    <string name=\"confirm_cancel_button\">Cancel</string>\r\n    <string name=\"edit_cancel_changes\">Cancel</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Add image</string>\r\n    <string name=\"image_delete\">Delete</string>\r\n    <string name=\"image_delete_confirm_title\">Delete image?</string>\r\n    <string name=\"image_delete_confirm_message\">Are you sure you want to delete the image?</string>\r\n    <string name=\"image_uploading\">Uploading image...</string>\r\n    <string name=\"image_upload_success\">Image uploaded successfully</string>\r\n    <string name=\"image_upload_error\">Error uploading image</string>\r\n    <string name=\"image_select_error\">Error loading image</string>\r\n    <string name=\"congratulations\">Congratulations!</string>\r\n    <string name=\"message_game_completed\">You have solved the game! Ready for the next challenge?</string>\r\n    <string name=\"ready\">Ready</string>\r\n    <string name=\"original_image\">View image</string>\r\n    <string name=\"image_gallery_title\">Images</string>\r\n    <string name=\"visible\">Visible</string>\r\n    <string name=\"hidden\">Hidden</string>\r\n    <string name=\"lang_en\">English</string>\r\n    <string name=\"lang_es\">Spanish</string>\r\n    <string name=\"sample_text\">Sample</string>\r\n    <string name=\"lang_de\">German</string>\r\n    <string name=\"font_small\">Small</string>\r\n    <string name=\"font_medium\">Medium</string>\r\n    <string name=\"font_large\">Large</string>\r\n    <string name=\"puzzle_screen\">Puzzle</string>\r\n    <string name=\"puzzle_option\">PUZZLE</string>\r\n    <string name=\"memory_screen\">Pairs</string>\r\n    <string name=\"memory_option\">PAIRS</string>\r\n    <string name=\"differences_game\">7 DIFFERENCES</string>\r\n    <string name=\"differences_screen\">7 Differences</string>\r\n    <string name=\"title_instructions\">Hello, super player!</string>\r\n    <string name=\"text_instructions_puzzle\">Hello, super player!\\nAre you ready to assemble this amazing puzzle?\\n\\nTo play, it\\'s very easy:\\n\\u2022 Choose a piece at the bottom of the screen and hold down on it for a few seconds.\\n\\u2022 Magic! This piece will now float and you can move it with your finger.\\n\\u2022 Drag the piece to the spot on the board where you think it goes.\\n\\u2022 If you put it in the right spot, it will snap into place and stay fixed! If it\\'s not the right spot, it will return to the box.\\nDon\\'t give up until the puzzle is complete!\\nGood luck!</string>\r\n    <string name=\"text_instructions_pairs\">Hello, super player!\\nAre you ready to find all the pairs?\\n\\nInstructions:\\nLook carefully at the images before they are hidden and find all the pairs. Touch the squares to reveal the hidden image until you find two identical pairs.\\nContinue until you find all the pairs.\\nHave fun and test your memory!</string>\r\n    <string name=\"differences_counter\">Differences found: %1$d / %2$d</string>\r\n    <string name=\"back_piece\">Back of the piece</string>\r\n    <string name=\"left_pairs\">Pairs remaining: %1$s</string>\r\n    <string name=\"left_pieces\">Pieces remaining: %1$s</string>\r\n    <string name=\"background_edit_screen\">EDIT BACKGROUND</string>\r\n    <string name=\"pin_edit_screen\">EDIT PIN</string>\r\n    <string name=\"gallery_type_all\">All</string>\r\n    <string name=\"gallery_type_painting\">Paintings</string>\r\n    <string name=\"gallery_type_sculpture\">Sculptures</string>\r\n    <string name=\"gallery_type_architecture\">Architecture</string>\r\n    <string name=\"gallery_type_other\">Others</string>\r\n    <string name=\"play_audio\"></string>\r\n    <string name=\"error_connection_title\">Oops! An error occurred</string>\r\n    <string name=\"error_connection_desc\">We couldn\\'t load the map. Please check your internet connection and try again.</string>\r\n    <string name=\"retry\">Retry</string>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
--- a/app/src/main/res/values-en/strings.xml	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ b/app/src/main/res/values-en/strings.xml	(date 1764543420113)
@@ -167,8 +167,9 @@
     <string name="differences_game">7 DIFFERENCES</string>
     <string name="differences_screen">7 Differences</string>
     <string name="title_instructions">Hello, super player!</string>
-    <string name="text_instructions_puzzle">Hello, super player!\nAre you ready to assemble this amazing puzzle?\n\nTo play, it\'s very easy:\n\u2022 Choose a piece at the bottom of the screen and hold down on it for a few seconds.\n\u2022 Magic! This piece will now float and you can move it with your finger.\n\u2022 Drag the piece to the spot on the board where you think it goes.\n\u2022 If you put it in the right spot, it will snap into place and stay fixed! If it\'s not the right spot, it will return to the box.\nDon\'t give up until the puzzle is complete!\nGood luck!</string>
-    <string name="text_instructions_pairs">Hello, super player!\nAre you ready to find all the pairs?\n\nInstructions:\nLook carefully at the images before they are hidden and find all the pairs. Touch the squares to reveal the hidden image until you find two identical pairs.\nContinue until you find all the pairs.\nHave fun and test your memory!</string>
+    <string name="text_instructions_puzzle">Are you ready to assemble this amazing puzzle?\n\nTo play, it\'s very easy:\n\u2022 Choose a piece at the bottom of the screen and hold down on it for a few seconds.\n\u2022 Magic! This piece will now float and you can move it with your finger.\n\u2022 Drag the piece to the spot on the board where you think it goes.\n\u2022 If you put it in the right spot, it will snap into place and stay fixed! If it\'s not the right spot, it will return to the box.\nDon\'t give up until the puzzle is complete!\nGood luck!</string>
+    <string name="text_instructions_spot_the_difference">Are you ready to find the 7 hidden differences?\n\nPlaying is very easy:\n\u2022 Look closely at the two images that seem identical.\n\u2022 Search for details that have been changed or are missing in one of them.\n\u2022 Tap the area of the image where you have found a difference.\n\u2022 Great! If you are correct, the difference will be marked and your counter will go down.\nThere are only 7! Don\'t give up until you find them all.\nGood luck!</string>
+    <string name="text_instructions_pairs">Are you ready to find all the pairs?\n\nInstructions:\n\u2022 Look carefully at the images before they are hidden and find all the pairs.\n\u2022 Touch the squares to reveal the hidden image until you find two identical pairs.\n\u2022 Continue until you find all the pairs.\nHave fun and test your memory!</string>
     <string name="differences_counter">Differences found: %1$d / %2$d</string>
     <string name="back_piece">Back of the piece</string>
     <string name="left_pairs">Pairs remaining: %1$s</string>
Index: app/src/main/java/com/nextapp/monasterio/repository/UserPreferencesRepository.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.repository\r\n\r\nimport android.content.Context\r\nimport androidx.datastore.core.DataStore\r\nimport androidx.datastore.preferences.core.Preferences\r\nimport androidx.datastore.preferences.core.booleanPreferencesKey\r\nimport androidx.datastore.preferences.core.edit\r\nimport androidx.datastore.preferences.preferencesDataStore\r\nimport kotlinx.coroutines.flow.Flow\r\nimport kotlinx.coroutines.flow.map\r\n\r\nprivate val Context.dataStore: DataStore<Preferences> by preferencesDataStore(name = \"settings\")\r\n\r\nclass UserPreferencesRepository private constructor(private val context: Context) {\r\n\r\n    private object PreferencesKeys {\r\n        val TUTORIAL_MAIN_MAP = booleanPreferencesKey(\"tut_main_map\") // Mapa General\r\n        val TUTORIAL_SUB_MAP = booleanPreferencesKey(\"tut_sub_map\")   // Interiores (Claustro, Iglesia...)\r\n        val TUTORIAL_PIN = booleanPreferencesKey(\"tut_pin_detail\")    // Detalle del Pin\r\n\r\n        val INSTRUCTIONS_PUZZLE = booleanPreferencesKey(\"ins_puzzle\") // Instrucciones del Puzle\r\n        val INSTRUCTIONS_PAIRS = booleanPreferencesKey(\"ins_pairs\") // Instrucciones de las parejas\r\n    }\r\n\r\n    // --- FLUJOS DE LECTURA ---\r\n    val isMainMapTutorialDismissed: Flow<Boolean> = context.dataStore.data\r\n        .map { it[PreferencesKeys.TUTORIAL_MAIN_MAP] ?: false }\r\n\r\n    val isSubMapTutorialDismissed: Flow<Boolean> = context.dataStore.data\r\n        .map { it[PreferencesKeys.TUTORIAL_SUB_MAP] ?: false }\r\n\r\n    val isPinTutorialDismissed: Flow<Boolean> = context.dataStore.data\r\n        .map { it[PreferencesKeys.TUTORIAL_PIN] ?: false }\r\n\r\n    val isInstructionsPuzzleDismissed: Flow<Boolean> = context.dataStore.data\r\n        .map { it[PreferencesKeys.INSTRUCTIONS_PUZZLE] ?: false }\r\n\r\n    val isInstructionsPairsDismissed: Flow<Boolean> = context.dataStore.data\r\n        .map { it[PreferencesKeys.INSTRUCTIONS_PAIRS] ?: false }\r\n\r\n    // --- FUNCIONES DE ESCRITURA ---\r\n    suspend fun dismissMainMapTutorial() {\r\n        context.dataStore.edit { it[PreferencesKeys.TUTORIAL_MAIN_MAP] = true }\r\n    }\r\n\r\n    suspend fun dismissSubMapTutorial() {\r\n        context.dataStore.edit { it[PreferencesKeys.TUTORIAL_SUB_MAP] = true }\r\n    }\r\n\r\n    suspend fun dismissPinTutorial() {\r\n        context.dataStore.edit { it[PreferencesKeys.TUTORIAL_PIN] = true }\r\n    }\r\n\r\n    suspend fun dismissInstructionsPuzzle() {\r\n        context.dataStore.edit { it[PreferencesKeys.INSTRUCTIONS_PUZZLE] = true }\r\n    }\r\n\r\n    suspend fun dismissInstructionsPairs() {\r\n        context.dataStore.edit { it[PreferencesKeys.INSTRUCTIONS_PAIRS] = true }\r\n    }\r\n\r\n    companion object {\r\n        @Volatile private var INSTANCE: UserPreferencesRepository? = null\r\n        fun initialize(context: Context) {\r\n            if (INSTANCE == null) {\r\n                synchronized(this) { INSTANCE = UserPreferencesRepository(context.applicationContext) }\r\n            }\r\n        }\r\n        val instance: UserPreferencesRepository\r\n            get() = INSTANCE ?: throw IllegalStateException(\"UserPreferencesRepository no inicializado.\")\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/repository/UserPreferencesRepository.kt b/app/src/main/java/com/nextapp/monasterio/repository/UserPreferencesRepository.kt
--- a/app/src/main/java/com/nextapp/monasterio/repository/UserPreferencesRepository.kt	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ b/app/src/main/java/com/nextapp/monasterio/repository/UserPreferencesRepository.kt	(date 1764543217951)
@@ -20,6 +20,7 @@
 
         val INSTRUCTIONS_PUZZLE = booleanPreferencesKey("ins_puzzle") // Instrucciones del Puzle
         val INSTRUCTIONS_PAIRS = booleanPreferencesKey("ins_pairs") // Instrucciones de las parejas
+        val INSTRUCTIONS_DIFFERENCES = booleanPreferencesKey("ins_differences") // Instrucciones de las parejas
     }
 
     // --- FLUJOS DE LECTURA ---
@@ -38,6 +39,9 @@
     val isInstructionsPairsDismissed: Flow<Boolean> = context.dataStore.data
         .map { it[PreferencesKeys.INSTRUCTIONS_PAIRS] ?: false }
 
+    val isInstructionsDifferencesDismissed: Flow<Boolean> = context.dataStore.data
+        .map { it[PreferencesKeys.INSTRUCTIONS_DIFFERENCES] ?: false }
+
     // --- FUNCIONES DE ESCRITURA ---
     suspend fun dismissMainMapTutorial() {
         context.dataStore.edit { it[PreferencesKeys.TUTORIAL_MAIN_MAP] = true }
@@ -59,6 +63,10 @@
         context.dataStore.edit { it[PreferencesKeys.INSTRUCTIONS_PAIRS] = true }
     }
 
+    suspend fun dismissInstructionsDifferences() {
+        context.dataStore.edit { it[PreferencesKeys.INSTRUCTIONS_DIFFERENCES] = true }
+    }
+
     companion object {
         @Volatile private var INSTANCE: UserPreferencesRepository? = null
         fun initialize(context: Context) {
Index: app/src/main/java/com/nextapp/monasterio/ui/screens/DiferenciasScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.util.Log\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.collectAsState\r\nimport androidx.compose.runtime.getValue\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport com.nextapp.monasterio.viewModels.ImagenConToque\r\nimport com.nextapp.monasterio.viewModels.DiferenciasViewModel\r\nimport com.nextapp.monasterio.R\r\n\r\n@Composable\r\nfun DiferenciasScreen(\r\n    viewModel: DiferenciasViewModel = viewModel()\r\n) {\r\n    val juegoActual by viewModel.juegoActual.collectAsState()\r\n    val contador by viewModel.diferenciasEncontradas.collectAsState()\r\n\r\n    val diferenciasList = juegoActual.diferencias\r\n    val juegoTerminado = contador == diferenciasList.size\r\n\r\n    Column(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .padding(8.dp)\r\n    ) {\r\n       Text(\r\n            text = stringResource(R.string.differences_counter,contador,diferenciasList.size),\r\n            style = MaterialTheme.typography.titleLarge,\r\n            modifier = Modifier\r\n                .padding(vertical = 8.dp)\r\n                .fillMaxWidth()\r\n        )\r\n\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .weight(1f),\r\n            verticalArrangement = Arrangement.spacedBy(8.dp)\r\n        ) {\r\n            ImagenConToque(\r\n                resId = juegoActual.imagenOriginal,\r\n                diferencias = diferenciasList,\r\n                onHit = viewModel::onTouch,\r\n                modifier = Modifier.weight(1f)\r\n            )\r\n\r\n            ImagenConToque(\r\n                resId = juegoActual.imagenModificada,\r\n                diferencias = diferenciasList,\r\n                onHit = viewModel::onTouch,\r\n                modifier = Modifier.weight(1f)\r\n            )\r\n        }\r\n    }\r\n\r\n    if (juegoTerminado) {\r\n        AlertDialog(\r\n            title = { Text(stringResource(R.string.congratulations)) },\r\n            text = { Text(stringResource(R.string.message_game_completed)) },\r\n            confirmButton = {\r\n                Button(onClick = viewModel::reiniciarJuego) {\r\n                    Text(\"Jugar de Nuevo\")\r\n                }\r\n            },\r\n            onDismissRequest = { /* No se puede cerrar sin reiniciar */ }\r\n        )\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/DiferenciasScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/DiferenciasScreen.kt
--- a/app/src/main/java/com/nextapp/monasterio/ui/screens/DiferenciasScreen.kt	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/DiferenciasScreen.kt	(date 1764543037019)
@@ -6,6 +6,7 @@
 import androidx.compose.runtime.Composable
 import androidx.compose.runtime.collectAsState
 import androidx.compose.runtime.getValue
+import androidx.compose.runtime.remember
 import androidx.compose.ui.Modifier
 import androidx.compose.ui.res.stringResource
 import androidx.compose.ui.unit.dp
@@ -13,17 +14,36 @@
 import com.nextapp.monasterio.viewModels.ImagenConToque
 import com.nextapp.monasterio.viewModels.DiferenciasViewModel
 import com.nextapp.monasterio.R
+import com.nextapp.monasterio.repository.UserPreferencesRepository
+import com.nextapp.monasterio.viewModels.PuzzleViewModel
+import com.nextapp.monasterio.viewModels.PuzzleViewModelFactory
 
 @Composable
 fun DiferenciasScreen(
-    viewModel: DiferenciasViewModel = viewModel()
 ) {
+
+    val prefsRepository = remember { UserPreferencesRepository.instance }
+
+    val viewModel: DiferenciasViewModel = viewModel(factory = DiferenciasViewModel.Companion.Factory(prefsRepository))
+
     val juegoActual by viewModel.juegoActual.collectAsState()
     val contador by viewModel.diferenciasEncontradas.collectAsState()
 
     val diferenciasList = juegoActual.diferencias
     val juegoTerminado = contador == diferenciasList.size
 
+    val showInstructionsPreviewDialog by viewModel.showInstructionsDialog.collectAsState()
+
+    if(showInstructionsPreviewDialog){
+        PuzzleDialog(
+            onDismiss = {viewModel.markInstructionsAsShown()},
+            onConfirm = {
+                viewModel.markInstructionsAsShown()},
+            titulo = stringResource(R.string.title_instructions),
+            texto = stringResource(R.string.text_instructions_spot_the_difference)
+        )
+    }
+
     Column(
         modifier = Modifier
             .fillMaxSize()
@@ -65,7 +85,7 @@
             text = { Text(stringResource(R.string.message_game_completed)) },
             confirmButton = {
                 Button(onClick = viewModel::reiniciarJuego) {
-                    Text("Jugar de Nuevo")
+                    Text(stringResource(R.string.ready))
                 }
             },
             onDismissRequest = { /* No se puede cerrar sin reiniciar */ }
Index: app/src/main/java/com/nextapp/monasterio/models/DiferenciasData.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.models\r\n\r\nimport androidx.annotation.DrawableRes\r\nimport androidx.compose.runtime.getValue\r\nimport androidx.compose.runtime.snapshots.SnapshotStateList\r\nimport androidx.compose.runtime.mutableStateListOf\r\nimport androidx.compose.runtime.mutableStateOf\r\nimport androidx.compose.runtime.setValue\r\nimport com.nextapp.monasterio.R\r\n\r\ndata class Diferencia(\r\n    val id: Int,\r\n    val rectX: Int,\r\n    val rectY: Int,\r\n    val width: Int,\r\n    val height: Int,\r\n    private var _encontrada: Boolean = false\r\n){\r\n    var encontrada: Boolean by mutableStateOf(_encontrada)\r\n        private set\r\n\r\n    fun marcarEncontrada() {\r\n        if (!encontrada) {\r\n            encontrada = true\r\n        }\r\n    }\r\n    fun tocoDiferencia(touchX: Float, touchY: Float): Boolean {\r\n        return touchX >= rectX &&\r\n                touchX <= rectX + width &&\r\n                touchY >= rectY &&\r\n                touchY <= rectY + height\r\n    }\r\n}\r\n\r\ndata class NivelJuego(\r\n    val id: Int,\r\n    @DrawableRes val imagenOriginal : Int,\r\n    @DrawableRes val imagenModificada : Int,\r\n    val diferencias : SnapshotStateList<Diferencia>\r\n)\r\n\r\nfun obtenerPares() : List<NivelJuego>{\r\n    return listOf(\r\n        NivelJuego(\r\n            id=1,\r\n            imagenOriginal = R.drawable.d1,\r\n            imagenModificada = R.drawable.d1m,\r\n            diferencias = mutableStateListOf(\r\n                Diferencia(101, 430, 120, 200, 120), // Estandarte\r\n                Diferencia(102, 710, 150, 90, 70),  // Nube/Emoji\r\n                Diferencia(103, 800, 200, 60, 60),  // Pájaro\r\n                Diferencia(104, 150, 620, 250, 180),// Flores izquierda\r\n                Diferencia(105, 770, 800, 70, 70),  // Mariposa\r\n                Diferencia(106, 420, 580, 120, 60),// Manga de la princesa\r\n                Diferencia(107, 390, 400, 180, 180)\r\n            )\r\n        ),\r\n        NivelJuego(\r\n            id=2,\r\n            imagenOriginal = R.drawable.d2,\r\n            imagenModificada = R.drawable.d2m,\r\n            diferencias = mutableStateListOf(\r\n                Diferencia(201, 390, 440, 250, 250), // Símbolo Túnica\r\n                Diferencia(202, 250, 200, 120, 100), // Pájaro\r\n                Diferencia(203, 720, 180, 150, 100), // Nube/Emoji\r\n                Diferencia(204, 400, 660, 100, 70),  // Hebilla/Cinturón\r\n                Diferencia(205, 150, 850, 100, 100), // Flor Inferior\r\n                Diferencia(206, 350, 300, 50, 200),  // Muros del Castillo\r\n                Diferencia(207, 400, 920, 150, 50)\r\n            )\r\n        ),\r\n        NivelJuego(\r\n            id=3,\r\n            imagenOriginal = R.drawable.d3,\r\n            imagenModificada = R.drawable.d3m,\r\n            diferencias = mutableStateListOf(\r\n                Diferencia(301, 350, 120, 300, 100), // Tocado/Velo (Color)\r\n                Diferencia(302, 480, 360, 60, 60),  // Flor en la trenza\r\n                Diferencia(303, 550, 250, 150, 100), // Manga (Color)\r\n                Diferencia(304, 390, 600, 250, 150), // Posición de Manos/Brazos\r\n                Diferencia(305, 100, 280, 200, 180), // Muros del Castillo (Torre izquierda)\r\n                Diferencia(306, 150, 750, 200, 150), // Flores/Pasto Inferior\r\n                Diferencia(307, 400, 200, 80, 70)\r\n            )\r\n        ),\r\n        NivelJuego(\r\n            id=4,\r\n            imagenOriginal = R.drawable.d4,\r\n            imagenModificada = R.drawable.d4m,\r\n            diferencias = mutableStateListOf(\r\n                Diferencia(401, 480, 250, 120, 100), // Corona del Príncipe\r\n                Diferencia(402, 750, 850, 100, 50),  // Zapatos\r\n                Diferencia(403, 280, 850, 80, 70),   // Juguete/Pato\r\n                Diferencia(404, 210, 190, 180, 100), // Corona del Rey\r\n                Diferencia(405, 830, 200, 80, 80),   // Símbolo Ventana\r\n                Diferencia(406, 850, 500, 50, 80),   // Cruz/Símbolo\r\n                Diferencia(407, 480, 400, 80, 100)\r\n            )\r\n        ),\r\n        NivelJuego(\r\n            id=5,\r\n            imagenOriginal = R.drawable.d5,\r\n            imagenModificada = R.drawable.d5m,\r\n            diferencias = mutableStateListOf(\r\n                Diferencia(501, 391, 214, 228, 128), // Tocado del Obispo\r\n                Diferencia(502, 654, 486, 100, 120), // Símbolo en el pecho\r\n                Diferencia(503, 538, 537, 250, 158), // Vestido de la Princesa (Color/Diseño)\r\n                Diferencia(504, 626, 440, 143, 100),  // Collar\r\n                Diferencia(505, 224, 572, 156, 100),   // Hebilla\r\n                Diferencia(506, 0, 0, 1024, 363),  // Confeti\r\n                Diferencia(507, 87, 673, 222, 100)  // Color de la empuñadura de la espada\r\n            )\r\n        ),\r\n        NivelJuego(\r\n            id=6,\r\n            imagenOriginal = R.drawable.d6,\r\n            imagenModificada = R.drawable.d6m,\r\n            diferencias = mutableStateListOf(\r\n                Diferencia(801, 500, 200, 120, 100), // Bandera\r\n                Diferencia(802, 100, 50, 800, 200),  // Nubes/Cielo\r\n                Diferencia(803, 680, 820, 80, 70),   // Hongo\r\n                Diferencia(804, 280, 800, 80, 80),   // Flor\r\n                Diferencia(805, 590, 580, 100, 80),  // Manga\r\n                Diferencia(806, 400, 450, 180, 100), // Símbolo sobre el pecho (Estrellas/Corazones)\r\n                Diferencia(807, 480, 520, 60, 60)\r\n            )\r\n        )\r\n    )\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/models/DiferenciasData.kt b/app/src/main/java/com/nextapp/monasterio/models/DiferenciasData.kt
--- a/app/src/main/java/com/nextapp/monasterio/models/DiferenciasData.kt	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ b/app/src/main/java/com/nextapp/monasterio/models/DiferenciasData.kt	(date 1764539058862)
@@ -17,7 +17,6 @@
     private var _encontrada: Boolean = false
 ){
     var encontrada: Boolean by mutableStateOf(_encontrada)
-        private set
 
     fun marcarEncontrada() {
         if (!encontrada) {
@@ -36,12 +35,12 @@
     val id: Int,
     @DrawableRes val imagenOriginal : Int,
     @DrawableRes val imagenModificada : Int,
-    val diferencias : SnapshotStateList<Diferencia>
+    val diferencias : List<Diferencia>
 )
 
 fun obtenerPares() : List<NivelJuego>{
     return listOf(
-        NivelJuego(
+        /*NivelJuego(
             id=1,
             imagenOriginal = R.drawable.d1,
             imagenModificada = R.drawable.d1m,
@@ -96,7 +95,7 @@
                 Diferencia(406, 850, 500, 50, 80),   // Cruz/Símbolo
                 Diferencia(407, 480, 400, 80, 100)
             )
-        ),
+        ),*/
         NivelJuego(
             id=5,
             imagenOriginal = R.drawable.d5,
@@ -111,7 +110,7 @@
                 Diferencia(507, 87, 673, 222, 100)  // Color de la empuñadura de la espada
             )
         ),
-        NivelJuego(
+        /*NivelJuego(
             id=6,
             imagenOriginal = R.drawable.d6,
             imagenModificada = R.drawable.d6m,
@@ -124,6 +123,6 @@
                 Diferencia(806, 400, 450, 180, 100), // Símbolo sobre el pecho (Estrellas/Corazones)
                 Diferencia(807, 480, 520, 60, 60)
             )
-        )
+        )*/
     )
 }
\ No newline at end of file
Index: app/src/main/java/com/nextapp/monasterio/viewModels/DiferenciasViewModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.viewModels\r\n\r\nimport android.util.Log\r\nimport androidx.lifecycle.ViewModel\r\nimport androidx.lifecycle.viewModelScope\r\nimport com.nextapp.monasterio.models.NivelJuego\r\nimport com.nextapp.monasterio.models.obtenerPares\r\nimport kotlinx.coroutines.flow.MutableStateFlow\r\nimport kotlinx.coroutines.flow.StateFlow\r\nimport kotlinx.coroutines.flow.asStateFlow\r\nimport kotlinx.coroutines.flow.map\r\nimport kotlinx.coroutines.flow.SharingStarted\r\nimport kotlinx.coroutines.flow.stateIn\r\nimport androidx.compose.runtime.mutableStateListOf\r\nimport com.nextapp.monasterio.models.Diferencia\r\n\r\nclass DiferenciasViewModel : ViewModel() {\r\n    private val todosLosPares = obtenerPares()\r\n\r\n    private fun seleccionarParAlAzar(): NivelJuego{\r\n        val parSeleccionado = todosLosPares.random()\r\n\r\n        val diferencias = parSeleccionado.diferencias.map { diff ->\r\n            Diferencia(\r\n                diff.id,\r\n                diff.rectX,\r\n                diff.rectY,\r\n                diff.width,\r\n                diff.height,\r\n                _encontrada = false\r\n            )\r\n        }\r\n\r\n        return parSeleccionado.copy(\r\n            diferencias = mutableStateListOf(*diferencias.toTypedArray())\r\n        )\r\n    }\r\n\r\n    private val _juegoActual = MutableStateFlow(seleccionarParAlAzar())\r\n    val juegoActual: StateFlow<NivelJuego> = _juegoActual.asStateFlow()\r\n\r\n    val diferenciasEncontradas: StateFlow<Int> = juegoActual.map { nivel ->\r\n        nivel.diferencias.count { it.encontrada }\r\n    }.stateIn(viewModelScope, SharingStarted.Lazily, 0)\r\n\r\n    fun onTouch(touchX: Float, touchY: Float) {\r\n        val juego = _juegoActual.value\r\n        if (diferenciasEncontradas.value >= juego.diferencias.size) return\r\n\r\n        val diferenciaEncontrada = juego.diferencias.firstOrNull {\r\n            it.tocoDiferencia(touchX, touchY) && !it.encontrada\r\n        }\r\n\r\n        if (diferenciaEncontrada != null) {\r\n            Log.d(\"DEBUG_VIEWMODEL\",\"id de la diferencia: ${diferenciaEncontrada.id}\")\r\n            diferenciaEncontrada.marcarEncontrada()\r\n            juego.diferencias[juego.diferencias.indexOf(diferenciaEncontrada)] = diferenciaEncontrada\r\n            _juegoActual.value = juego.copy(\r\n                diferencias = juego.diferencias)\r\n        }\r\n    }\r\n\r\n    fun reiniciarJuego() {\r\n        _juegoActual.value = seleccionarParAlAzar()\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/viewModels/DiferenciasViewModel.kt b/app/src/main/java/com/nextapp/monasterio/viewModels/DiferenciasViewModel.kt
--- a/app/src/main/java/com/nextapp/monasterio/viewModels/DiferenciasViewModel.kt	(revision d69ed6da8d28bd1e32ef8cf8e1ec240cbe44a49a)
+++ b/app/src/main/java/com/nextapp/monasterio/viewModels/DiferenciasViewModel.kt	(date 1764543239550)
@@ -12,11 +12,25 @@
 import kotlinx.coroutines.flow.SharingStarted
 import kotlinx.coroutines.flow.stateIn
 import androidx.compose.runtime.mutableStateListOf
+import androidx.lifecycle.ViewModelProvider
+import androidx.lifecycle.viewmodel.CreationExtras
 import com.nextapp.monasterio.models.Diferencia
+import com.nextapp.monasterio.repository.UserPreferencesRepository
+import kotlinx.coroutines.launch
 
-class DiferenciasViewModel : ViewModel() {
+class DiferenciasViewModel(
+    private val prefsRepository: UserPreferencesRepository
+) : ViewModel() {
     private val todosLosPares = obtenerPares()
 
+    val showInstructionsDialog : StateFlow<Boolean> = prefsRepository.isInstructionsDifferencesDismissed
+        .map { isDismissed -> !isDismissed }
+        .stateIn(
+            scope = viewModelScope,
+            started = SharingStarted.WhileSubscribed(5000),
+            initialValue = false
+        )
+
     private fun seleccionarParAlAzar(): NivelJuego{
         val parSeleccionado = todosLosPares.random()
 
@@ -39,9 +53,15 @@
     private val _juegoActual = MutableStateFlow(seleccionarParAlAzar())
     val juegoActual: StateFlow<NivelJuego> = _juegoActual.asStateFlow()
 
-    val diferenciasEncontradas: StateFlow<Int> = juegoActual.map { nivel ->
-        nivel.diferencias.count { it.encontrada }
-    }.stateIn(viewModelScope, SharingStarted.Lazily, 0)
+    private val _diferenciasEncontradas = MutableStateFlow(0)
+    val diferenciasEncontradas: StateFlow<Int> = _diferenciasEncontradas.asStateFlow()
+
+    fun markInstructionsAsShown() {
+        viewModelScope.launch {
+            prefsRepository.dismissInstructionsDifferences()
+        }
+    }
+
 
     fun onTouch(touchX: Float, touchY: Float) {
         val juego = _juegoActual.value
@@ -52,15 +72,31 @@
         }
 
         if (diferenciaEncontrada != null) {
-            Log.d("DEBUG_VIEWMODEL","id de la diferencia: ${diferenciaEncontrada.id}")
-            diferenciaEncontrada.marcarEncontrada()
-            juego.diferencias[juego.diferencias.indexOf(diferenciaEncontrada)] = diferenciaEncontrada
-            _juegoActual.value = juego.copy(
-                diferencias = juego.diferencias)
+            val nuevaDiferencia = diferenciaEncontrada.copy(_encontrada = true)
+
+            val nuevaListaDiferencias = juego.diferencias.toMutableList().apply {
+                val index = indexOf(diferenciaEncontrada) // O encontrar el índice
+                if (index != -1) {
+                    this[index] = nuevaDiferencia
+                }
+            }.toList()
+
+            _juegoActual.value = juego.copy(diferencias = nuevaListaDiferencias)
+            _diferenciasEncontradas.value++
         }
     }
 
     fun reiniciarJuego() {
         _juegoActual.value = seleccionarParAlAzar()
     }
+
+    companion object {
+        fun Factory(prefsRepository: UserPreferencesRepository): ViewModelProvider.Factory =
+            object : ViewModelProvider.Factory {
+                @Suppress("UNCHECKED_CAST")
+                override fun <T : ViewModel> create(modelClass: Class<T>, extras: CreationExtras): T {
+                    return DiferenciasViewModel(prefsRepository) as T
+                }
+            }
+    }
 }
