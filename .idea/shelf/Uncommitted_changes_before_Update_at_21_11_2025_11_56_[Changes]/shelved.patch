Index: app/src/main/java/com/nextapp/monasterio/ui/screens/VirtualVisitScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.*\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\n\r\nobject VirtualVisitRoutes {\r\n    const val PLANO = \"plano\"\r\n    const val DETALLE_GENERICO = \"detalle_generico\"\r\n}\r\n\r\n@Composable\r\nfun VirtualVisitScreen(navController: NavHostController? = null,viewModel: AjustesViewModel) {\r\n    val localNavController = rememberNavController()\r\n\r\n    val context = LocalContext.current\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        onDispose {}\r\n    }\r\n\r\n    // \uD83D\uDD39 ID inicial del plano por defecto (exterior)\r\n    val initialPlanoId = \"monasterio_exterior\"\r\n\r\n    NavHost(\r\n        navController = localNavController,\r\n        // \uD83D\uDC47 Empieza directamente en el plano exterior\r\n        startDestination = \"${VirtualVisitRoutes.PLANO}/$initialPlanoId\"\r\n    ) {\r\n        // --- \uD83D\uDD39 Ruta base sin argumento (por si alguien navega a \"plano\" directamente)\r\n        composable(VirtualVisitRoutes.PLANO) {\r\n            PlanoScreen(\r\n                viewModel=viewModel,\r\n                planoId = initialPlanoId,\r\n                navController = localNavController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- \uD83D\uDD39 Ruta con par√°metro (para navegaci√≥n entre planos)\r\n        composable(\r\n            route = \"${VirtualVisitRoutes.PLANO}/{planoId}\",\r\n            arguments = listOf(navArgument(\"planoId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val planoId = backStackEntry.arguments?.getString(\"planoId\") ?: initialPlanoId\r\n            PlanoScreen(\r\n                viewModel=viewModel,\r\n                planoId = planoId,\r\n                navController = localNavController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- \uD83D\uDD39 Pantalla de detalle de Pin (igual que antes)\r\n        composable(\r\n            route = AppRoutes.PIN_DETALLE + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            PinDetalleFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = localNavController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n\r\n        // --- \uD83D\uDD39 Pantalla gen√©rica de detalle de Figura\r\n        composable(\r\n            route = \"${VirtualVisitRoutes.DETALLE_GENERICO}/{nombre}\",\r\n            arguments = listOf(navArgument(\"nombre\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            DetalleFiguraScreen(\r\n                navController = localNavController,\r\n                nombre = nombre\r\n            )\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/VirtualVisitScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/VirtualVisitScreen.kt
--- a/app/src/main/java/com/nextapp/monasterio/ui/screens/VirtualVisitScreen.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/VirtualVisitScreen.kt	(date 1763638720570)
@@ -21,7 +21,7 @@
 }
 
 @Composable
-fun VirtualVisitScreen(navController: NavHostController? = null,viewModel: AjustesViewModel) {
+fun VirtualVisitScreen(navController: NavHostController? = null, viewModel: AjustesViewModel) {
     val localNavController = rememberNavController()
 
     val context = LocalContext.current
@@ -43,7 +43,7 @@
         // --- üîπ Ruta base sin argumento (por si alguien navega a "plano" directamente)
         composable(VirtualVisitRoutes.PLANO) {
             PlanoScreen(
-                viewModel=viewModel,
+                viewModel = viewModel,
                 planoId = initialPlanoId,
                 navController = localNavController,
                 rootNavController = navController
@@ -57,20 +57,23 @@
         ) { backStackEntry ->
             val planoId = backStackEntry.arguments?.getString("planoId") ?: initialPlanoId
             PlanoScreen(
-                viewModel=viewModel,
+                viewModel = viewModel,
                 planoId = planoId,
                 navController = localNavController,
                 rootNavController = navController
             )
         }
 
-        // --- üîπ Pantalla de detalle de Pin (igual que antes)
+        // --- üîπ Pantalla de detalle de Pin
         composable(
             route = AppRoutes.PIN_DETALLE + "/{pinId}",
             arguments = listOf(navArgument("pinId") { type = NavType.StringType })
         ) { backStackEntry ->
             val pinId = backStackEntry.arguments?.getString("pinId") ?: ""
+
+            // üëá AQU√ç ESTABA EL ERROR: A√ëADIMOS 'viewModel = viewModel'
             PinDetalleFirestoreScreen(
+                viewModel = viewModel, // <--- ¬°CORREGIDO!
                 pinId = pinId,
                 navController = localNavController,
                 rootNavController = navController
@@ -90,4 +93,4 @@
             )
         }
     }
-}
+}
\ No newline at end of file
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n    <string name=\"app_name\">Santa Mar√≠a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar√≠a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici√≥n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici√≥n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici√≥n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici√≥n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi√≥n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi√≥n</string>\r\n    <string name=\"profile_email\">Correo Electr√≥nico</string>\r\n    <string name=\"profile_password\">Contrase√±a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men√∫</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men√∫</string>\r\n    <string name=\"menu_info\">Informaci√≥n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer√≠a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci√≥n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer√≠a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/‚Ä¶</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci√≥n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel√©fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr√≥nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr√≥nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg√∫n simbolo no v√°lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v√°lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">¬°CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est√° preparada. Por favor, pulsa \\'enviar\\' en la aplicaci√≥n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar√≠a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci√≥n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr√≥ ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama√±o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Espa√±ol</string>\r\n    <string name=\"german_language\">Alem√°n</string>\r\n    <string name=\"english_language\">Ingl√©s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci√≥n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360¬∫</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del √°rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NI√ëOS</string>\r\n    <string name=\"child_mode_view\">Modo Ni√±os</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n    <string name=\"location_error\">No se encontr√≥ una app para abrir la ubicaci√≥n.</string>\r\n    <string name=\"contact_data\">Datos de contacto</string>\r\n    <string name=\"location_data\">Ubicaci√≥n</string>\r\n    <string name=\"email_data\">Correo electr√≥nico</string>\r\n    <string name=\"phone_data\">Tel√©fono</string>\r\n    <string name=\"visit_schedule\">Horarios de Visita</string>\r\n    <string name=\"monday_to_friday\">Lunes a Viernes:</string>\r\n    <string name=\"play_audio\" />\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
--- a/app/src/main/res/values/strings.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ b/app/src/main/res/values/strings.xml	(date 1763721534857)
@@ -96,4 +96,22 @@
     <string name="visit_schedule">Horarios de Visita</string>
     <string name="monday_to_friday">Lunes a Viernes:</string>
     <string name="play_audio" />
+    <string name="dont_show_again">No volver a mostrar</string>
+    <string name="understand">Entendido</string>
+    <string name="map_tutorial_body">Este es el cuerpo del tutorial</string>
+    <string name="map_tutorial_title">Este es el titulo del tutorial</string>
+    <string name="map_tutorial_body2">Este es el cuerpo del tutorial del mapa 2</string>
+    <string name="map_tutorial_title2">Este es el titulo del tutorial del mapa 2</string>
+    <string name="pin_tutorial_body">Este es el cuerpo del tutorial del pin</string>
+    <string name="pin_tutorial_title">Este es el titulo del tutorial del pin</string>
+    <string name="next">Siguiente</string>
+    <string name="map_tutorial_body1">En la parte superior izquierda, el s√≠mbolo (‚Üê) permite volver al inicio</string>
+    <string name="map_tutorial_body1_2">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>
+    <string name="map_tutorial_body1_3">Adem√°s de tocando en el mapa se puede interactuar con este a partir de los botones en la parte derecha que permiten ampliar, desampliar y centrar el mapa</string>
+    <string name="submapa_1">Tocando en el s√≠mbolo (‚Üê) podemos volver al mapa general</string>
+    <string name="submapa_2">Tocando en los distintos pines podemos entrar a los puntos de inter√©s</string>
+    <string name="pin_1">Pulsando en el s√≠mbolo (‚Üê), se puede volver al mapa</string>
+    <string name="pin_2">Puedes desplazarte por las im√°genes o pulsar en ellas para ampliarlas</string>
+    <string name="pin_3">Pulsando aqu√≠ puedes escuchar el audio del texto</string>
+    <string name="pin_4">Para acceder a la vista 360 pulse este bot√≥n</string>
 </resources>
\ No newline at end of file
Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleFirestoreScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.NavHostController // <-- ¬°IMPORT A√ëADIDO!\r\nimport com.nextapp.monasterio.repository.PinRepository\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.AppRoutes // <-- ¬°IMPORT A√ëADIDO!\r\nimport android.util.Log\r\n\r\n@Composable\r\nfun PinDetalleFirestoreScreen(\r\n    pinId: String,\r\n    navController: NavController, // Este es el local (para 'onBack')\r\n    rootNavController: NavHostController? = null // <-- 1. ACEPTA EL NAVEGADOR RA√çZ\r\n) {\r\n    var pin by remember { mutableStateOf<PinData?>(null) }\r\n    var isLoading by remember { mutableStateOf(true) }\r\n    var errorMessage by remember { mutableStateOf<String?>(null) }\r\n\r\n    LaunchedEffect(pinId) {\r\n        try {\r\n            val loadedPin = PinRepository.getPinById(pinId)\r\n            if (loadedPin != null) pin = loadedPin\r\n            else errorMessage = \"Pin no encontrado (ID: $pinId)\"\r\n        } catch (e: Exception) {\r\n            errorMessage = \"Error al cargar datos: ${e.message}\"\r\n        } finally {\r\n            isLoading = false\r\n        }\r\n    }\r\n\r\n    when {\r\n        isLoading -> Box(Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {\r\n            CircularProgressIndicator()\r\n        }\r\n\r\n        errorMessage != null -> Box(Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {\r\n            Text(errorMessage ?: \"Error desconocido\", color = MaterialTheme.colorScheme.error)\r\n        }\r\n\r\n        pin != null -> {\r\n            val currentPin = pin\r\n\r\n            // 2. Usamos 'currentPin' para todas las operaciones\r\n            Log.d(\r\n                \"Pin360Debug\",\r\n                \"Pin cargado: '${currentPin?.titulo}'. URL 360: [${currentPin?.vista360Url}]\"\r\n            )\r\n            val onVer360: (() -> Unit)? =\r\n                // Usamos 'vista360Url' (el campo que a√±adimos a PinData.kt)\r\n                if (!pin!!.vista360Url.isNullOrBlank()) {\r\n                    // 3. Si la tiene, creamos la lambda de navegaci√≥n\r\n                    {\r\n                        // Llama al navegador RA√çZ (rootNavController)\r\n                        // y navega a la NUEVA ruta 'PIN_360'\r\n                        rootNavController?.navigate(AppRoutes.PIN_360 + \"/${pin!!.id}\")\r\n                    }\r\n                } else {\r\n                    // 4. Si no la tiene, pasa null\r\n                    null\r\n                }\r\n\r\n            PinDetalleScreen(\r\n                pin = pin!!,\r\n                onBack = { navController.popBackStack() },\r\n                onVer360 = onVer360 // <-- 5. PASAMOS LA LAMBDA (O NULL)\r\n            )\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleFirestoreScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleFirestoreScreen.kt
--- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleFirestoreScreen.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleFirestoreScreen.kt	(date 1763638633519)
@@ -6,17 +6,20 @@
 import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
 import androidx.navigation.NavController
-import androidx.navigation.NavHostController // <-- ¬°IMPORT A√ëADIDO!
+import androidx.navigation.NavHostController
 import com.nextapp.monasterio.repository.PinRepository
 import com.nextapp.monasterio.models.PinData
-import com.nextapp.monasterio.AppRoutes // <-- ¬°IMPORT A√ëADIDO!
+import com.nextapp.monasterio.AppRoutes
 import android.util.Log
+// 1. IMPORTAMOS EL VIEWMODEL
+import com.nextapp.monasterio.viewModels.AjustesViewModel
 
 @Composable
 fun PinDetalleFirestoreScreen(
+    viewModel: AjustesViewModel, // <--- 2. A√ëADIMOS ESTE PAR√ÅMETRO
     pinId: String,
-    navController: NavController, // Este es el local (para 'onBack')
-    rootNavController: NavHostController? = null // <-- 1. ACEPTA EL NAVEGADOR RA√çZ
+    navController: NavController,
+    rootNavController: NavHostController? = null
 ) {
     var pin by remember { mutableStateOf<PinData?>(null) }
     var isLoading by remember { mutableStateOf(true) }
@@ -46,29 +49,25 @@
         pin != null -> {
             val currentPin = pin
 
-            // 2. Usamos 'currentPin' para todas las operaciones
             Log.d(
                 "Pin360Debug",
                 "Pin cargado: '${currentPin?.titulo}'. URL 360: [${currentPin?.vista360Url}]"
             )
             val onVer360: (() -> Unit)? =
-                // Usamos 'vista360Url' (el campo que a√±adimos a PinData.kt)
                 if (!pin!!.vista360Url.isNullOrBlank()) {
-                    // 3. Si la tiene, creamos la lambda de navegaci√≥n
                     {
-                        // Llama al navegador RA√çZ (rootNavController)
-                        // y navega a la NUEVA ruta 'PIN_360'
                         rootNavController?.navigate(AppRoutes.PIN_360 + "/${pin!!.id}")
                     }
                 } else {
-                    // 4. Si no la tiene, pasa null
                     null
                 }
 
+            // AQUI ESTABA EL ERROR:
             PinDetalleScreen(
+                viewModel = viewModel,
                 pin = pin!!,
                 onBack = { navController.popBackStack() },
-                onVer360 = onVer360 // <-- 5. PASAMOS LA LAMBDA (O NULL)
+                onVer360 = onVer360
             )
         }
     }
Index: app/build.gradle.kts
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    implementation(libs.google.firebase.firestore)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"io.github.chrisbanes:PhotoView:2.3.0\")\r\n    implementation(\"com.github.bumptech.glide:glide:4.16.0\")\r\n\r\n    // Panoramica\r\n    implementation(\"com.github.hannesa2:panoramagl:1.14\")\r\n    // Cloudinary\r\n    implementation(\"io.coil-kt:coil-compose:2.7.0\")\r\n\r\n    //media\r\n    implementation(libs.androidx.media3.exoplayer)\r\n\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/build.gradle.kts b/app/build.gradle.kts
--- a/app/build.gradle.kts	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ b/app/build.gradle.kts	(date 1763458281732)
@@ -86,6 +86,9 @@
     //media
     implementation(libs.androidx.media3.exoplayer)
 
+    //Datastore
+    implementation("androidx.datastore:datastore-preferences:1.0.0")
+
 
 
 }
Index: app/src/main/java/com/nextapp/monasterio/viewModels/AjustesViewModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.viewModels\r\n\r\nimport androidx.lifecycle.ViewModel\r\nimport kotlinx.coroutines.flow.MutableStateFlow\r\nimport kotlinx.coroutines.flow.StateFlow\r\nimport kotlinx.coroutines.flow.asStateFlow\r\n\r\nclass AjustesViewModel : ViewModel(){\r\n    private val _botonesVisibles = MutableStateFlow(true)\r\n\r\n    val botonesVisibles: StateFlow<Boolean> = _botonesVisibles\r\n\r\n    fun setBotonesVisibles(valor: Boolean){\r\n        _botonesVisibles.value = valor\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/viewModels/AjustesViewModel.kt b/app/src/main/java/com/nextapp/monasterio/viewModels/AjustesViewModel.kt
--- a/app/src/main/java/com/nextapp/monasterio/viewModels/AjustesViewModel.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ b/app/src/main/java/com/nextapp/monasterio/viewModels/AjustesViewModel.kt	(date 1763462027810)
@@ -1,16 +1,38 @@
 package com.nextapp.monasterio.viewModels
 
 import androidx.lifecycle.ViewModel
+import androidx.lifecycle.viewModelScope
+import com.nextapp.monasterio.repository.UserPreferencesRepository // 1. Importar
 import kotlinx.coroutines.flow.MutableStateFlow
+import kotlinx.coroutines.flow.SharingStarted
 import kotlinx.coroutines.flow.StateFlow
 import kotlinx.coroutines.flow.asStateFlow
+import kotlinx.coroutines.flow.stateIn
+import kotlinx.coroutines.launch
 
-class AjustesViewModel : ViewModel(){
+class AjustesViewModel : ViewModel() {
+    // 2. Obtener la instancia del repositorio
+    private val prefsRepository = UserPreferencesRepository.instance
+
+    // --- L√≥gica existente de botones ---
     private val _botonesVisibles = MutableStateFlow(true)
-
     val botonesVisibles: StateFlow<Boolean> = _botonesVisibles
-
-    fun setBotonesVisibles(valor: Boolean){
+    fun setBotonesVisibles(valor: Boolean) {
         _botonesVisibles.value = valor
     }
+
+    val isMainMapDismissed = prefsRepository.isMainMapTutorialDismissed
+        .stateIn(viewModelScope, SharingStarted.Lazily, false)
+
+    val isSubMapDismissed = prefsRepository.isSubMapTutorialDismissed
+        .stateIn(viewModelScope, SharingStarted.Lazily, false)
+
+    val isPinDismissed = prefsRepository.isPinTutorialDismissed
+        .stateIn(viewModelScope, SharingStarted.Lazily, false)
+
+    // --- FUNCIONES PARA OCULTAR ---
+
+    fun dismissMainMap() = viewModelScope.launch { prefsRepository.dismissMainMapTutorial() }
+    fun dismissSubMap() = viewModelScope.launch { prefsRepository.dismissSubMapTutorial() }
+    fun dismissPin() = viewModelScope.launch { prefsRepository.dismissPinTutorial() }
 }
\ No newline at end of file
Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.*\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.pager.HorizontalPager\r\nimport androidx.compose.foundation.pager.rememberPagerState\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalContext // <-- ¬°NUEVO IMPORT!\r\nimport androidx.compose.ui.platform.LocalView\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.compose.ui.window.Dialog\r\nimport androidx.compose.ui.window.DialogProperties\r\nimport androidx.core.view.WindowCompat\r\nimport coil.compose.AsyncImage\r\nimport coil.load\r\nimport com.github.chrisbanes.photoview.PhotoView\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.models.Ubicacion\r\nimport java.util.Locale\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.res.stringResource\r\n// Imports de Media3 (ExoPlayer)\r\nimport androidx.media3.common.MediaItem\r\nimport androidx.media3.common.Player\r\nimport androidx.media3.exoplayer.ExoPlayer\r\nimport android.util.Log\r\nimport androidx.compose.foundation.layout.Arrangement\r\n\r\n@OptIn(ExperimentalFoundationApi::class)\r\n@Composable\r\nfun PinDetalleScreen(\r\n    pin: PinData,\r\n    onBack: () -> Unit,\r\n    onVer360: (() -> Unit)? = null\r\n) {\r\n    val view = LocalView.current\r\n    LaunchedEffect(Unit) {\r\n        val window = (view.context as? Activity)?.window\r\n        window?.let { WindowCompat.setDecorFitsSystemWindows(it, false) }\r\n    }\r\n\r\n    val activity = view.context as? Activity\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n            activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        }\r\n    }\r\n\r\n    val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()\r\n\r\n    val pagerState = rememberPagerState(pageCount = { imagenes.size })\r\n    var selectedImageUrl by remember { mutableStateOf<String?>(null) }\r\n    var selectedImageTitle by remember { mutableStateOf<String?>(null) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val locale: Locale = configuration.locales[0]\r\n    val language = locale.language\r\n\r\n    // --- L√≥gica de Texto Multiling√ºe (Tu c√≥digo) ---\r\n    val titulo_pin: String\r\n    val descripcion_pin: String?\r\n    val ubicacion_pin: Ubicacion?\r\n\r\n    when (language) {\r\n        \"es\" -> {\r\n            titulo_pin = pin.titulo\r\n            descripcion_pin = pin.descripcion\r\n            ubicacion_pin = pin.ubicacion\r\n        }\r\n        \"de\" -> {\r\n            titulo_pin = pin.tituloAleman\r\n            descripcion_pin = pin.descripcionAleman\r\n            ubicacion_pin = pin.ubicacionAleman\r\n        }\r\n        else -> {\r\n            titulo_pin = pin.tituloIngles\r\n            descripcion_pin = pin.descripcionIngles\r\n            ubicacion_pin = pin.ubicacionIngles\r\n        }\r\n    }\r\n\r\n    // --- ¬°¬°NUEVA L√ìGICA DE AUDIO!! ---\r\n    val context = LocalContext.current\r\n\r\n    // 1. Selecciona la URL de audio correcta\r\n    val audioUrl = when (language) {\r\n        \"es\" -> pin.audioUrl_es\r\n        \"en\" -> pin.audioUrl_en\r\n        \"de\" -> pin.audioUrl_ge\r\n        else -> pin.audioUrl_es\r\n    }\r\n\r\n    Log.d(\r\n        \"AudioDebug\",\r\n        \"Pin: '${pin.titulo}', Idioma: $language, URL de Audio Seleccionada: [$audioUrl]\"\r\n    )\r\n\r\n    // 2. Configura el ExoPlayer\r\n    val exoPlayer = remember { ExoPlayer.Builder(context).build() }\r\n    var isPlaying by remember { mutableStateOf(false) }\r\n    var playbackState by remember { mutableStateOf(Player.STATE_IDLE) }\r\n    var hasUserInteracted by remember { mutableStateOf(false) }\r\n\r\n    // 3. Prepara el player si la URL cambia (y no es nula)\r\n    DisposableEffect(audioUrl) {\r\n        if (!audioUrl.isNullOrBlank()) {\r\n            val mediaItem = MediaItem.fromUri(audioUrl)\r\n            exoPlayer.setMediaItem(mediaItem)\r\n            exoPlayer.prepare()\r\n        }\r\n        // (No necesitamos onDispose aqu√≠, se libera abajo)\r\n        onDispose { }\r\n    }\r\n\r\n    // 4. Listener para actualizar el bot√≥n Play/Pause y rebobinar\r\n    LaunchedEffect(exoPlayer) {\r\n        exoPlayer.addListener(object : Player.Listener {\r\n            override fun onIsPlayingChanged(isPlayingValue: Boolean) {\r\n                isPlaying = isPlayingValue\r\n            }\r\n            override fun onPlaybackStateChanged(state: Int) {\r\n                playbackState = state\r\n\r\n                if (state == Player.STATE_ENDED) {\r\n                    isPlaying = false\r\n                    exoPlayer.seekTo(0)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    // 5. Libera el player al salir de la pantalla\r\n    DisposableEffect(Unit) {\r\n        onDispose {\r\n            exoPlayer.release()\r\n        }\r\n    }\r\n    // --- FIN L√ìGICA DE AUDIO ---\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.White)\r\n            .statusBarsPadding()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(horizontal = 16.dp)\r\n                .padding(bottom = 40.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // \uD83D\uDD19 Bot√≥n atr√°s\r\n            Box(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 16.dp),\r\n                contentAlignment = Alignment.CenterStart\r\n            ) {\r\n                Image(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.go_back),\r\n                    modifier = Modifier\r\n                        .size(28.dp)\r\n                        .clickable { onBack() }\r\n                )\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(8.dp))\r\n\r\n            Text(\r\n                text = buildString {\r\n                    append(titulo_pin)\r\n                    ubicacion_pin?.let { append(\" (${it.displayName})\") }\r\n                },\r\n                fontSize = 26.sp,\r\n                fontWeight = FontWeight.Bold,\r\n                color = Color.Black,\r\n                textAlign = TextAlign.Center,\r\n                modifier = Modifier.fillMaxWidth()\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            // \uD83D\uDDBC\uFE0F Carrusel con etiqueta (se queda igual)\r\n            if (imagenes.isNotEmpty()) {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(250.dp)\r\n                        .clip(RoundedCornerShape(16.dp))\r\n                        .border(3.dp, Color.Black, RoundedCornerShape(16.dp))\r\n                ) {\r\n                    HorizontalPager(state = pagerState) { page ->\r\n\r\n                        val imagen = imagenes[page]\r\n\r\n                        Box(modifier = Modifier.fillMaxSize()) {\r\n\r\n                            AsyncImage(\r\n\r\n                                model = imagen.url,\r\n\r\n                                contentDescription = imagen.etiqueta,\r\n\r\n                                contentScale = ContentScale.Crop,\r\n\r\n                                modifier = Modifier\r\n\r\n                                    .fillMaxSize()\r\n\r\n                                    .clickable {\r\n\r\n                                        selectedImageUrl = imagen.url\r\n\r\n// \uD83D\uDC47 t√≠tulo seg√∫n idioma actual\r\n\r\n                                        selectedImageTitle = when (language) {\r\n\r\n                                            \"es\" -> imagen.titulo\r\n\r\n                                            \"de\" -> imagen.tituloAleman\r\n\r\n                                            else -> imagen.tituloIngles\r\n\r\n                                        }\r\n\r\n                                    }\r\n\r\n                            )\r\n                            Text(\r\n\r\n                                text = imagen.etiqueta,\r\n\r\n                                color = Color.White,\r\n\r\n                                fontSize = 14.sp,\r\n\r\n                                modifier = Modifier\r\n\r\n                                    .align(Alignment.BottomStart)\r\n\r\n                                    .background(Color.Black.copy(alpha = 0.6f))\r\n\r\n                                    .padding(horizontal = 10.dp, vertical = 6.dp)\r\n\r\n                            )\r\n\r\n                        }\r\n\r\n                    }\r\n                    Row(\r\n                        Modifier\r\n                            .align(Alignment.BottomCenter)\r\n                            .padding(bottom = 6.dp)\r\n                    ) {\r\n                        repeat(imagenes.size) { index ->\r\n\r\n                            val selected = pagerState.currentPage == index\r\n\r\n                            Box(\r\n\r\n                                Modifier\r\n\r\n                                    .padding(3.dp)\r\n\r\n                                    .size(if (selected) 8.dp else 6.dp)\r\n\r\n                                    .background(\r\n\r\n                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),\r\n\r\n                                        shape = CircleShape\r\n\r\n                                    )\r\n\r\n                            )\r\n\r\n                        }\r\n                    }\r\n                }\r\n                Spacer(modifier = Modifier.height(12.dp))\r\n            }\r\n\r\n\r\n            Row(\r\n                modifier = Modifier.fillMaxWidth(),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            ) {\r\n                // Bot√≥n de Audio (solo si hay URL)\r\n                if (!audioUrl.isNullOrBlank()) {\r\n                    // 1. Determina el icono correcto\r\n                    val iconRes = when {\r\n                        isPlaying -> R.drawable.pause\r\n                        !hasUserInteracted -> R.drawable.microphone\r\n                        else -> R.drawable.play_arrow\r\n                    }\r\n\r\n                    // 2. Bot√≥n de audio con redondel, alineado a la derecha del t√≠tulo\r\n                    Row(\r\n                        modifier = Modifier\r\n                            .fillMaxWidth()\r\n                            .padding(top = 8.dp), // Espacio entre el t√≠tulo y el bot√≥n\r\n                        horizontalArrangement = Arrangement.Start // Alinea a la derecha\r\n                    ) {\r\n                        IconButton(onClick = {\r\n                            hasUserInteracted = true\r\n                            if (isPlaying) exoPlayer.pause() else exoPlayer.play()\r\n                        }) {\r\n                            Box(\r\n                                modifier = Modifier\r\n                                    .size(48.dp) // Tama√±o del redondel\r\n                                    .clip(CircleShape) // Forma redonda\r\n                                    .background(Color.Gray.copy(alpha = 0.3f)), // Color de fondo del redondel (ej. gris suave)\r\n                                contentAlignment = Alignment.Center // Centra el icono dentro del redondel\r\n                            ) {\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(R.string.play_audio),\r\n                                    tint = Color.Black, // Color del icono\r\n                                    modifier = Modifier.size(28.dp) // Tama√±o del icono dentro del redondel\r\n                                )\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // \uD83D\uDCDD Descripci√≥n (se queda igual)\r\n            val descripcion = descripcion_pin ?: \"\"\r\n            if (descripcion.isNotBlank()) {\r\n                val textScrollState = rememberScrollState()\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .weight(1f)\r\n                        .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))\r\n                        .clip(RoundedCornerShape(8.dp))\r\n                ) {\r\n                    Text(\r\n                        text = descripcion,\r\n                        fontSize = 16.sp,\r\n                        color = Color.DarkGray,\r\n                        lineHeight = 22.sp,\r\n                        modifier = Modifier\r\n                            .fillMaxSize()\r\n                            .padding(horizontal = 12.dp, vertical = 8.dp)\r\n                            .verticalScroll(textScrollState)\r\n                    )\r\n                }\r\n            }\r\n\r\n            Spacer(modifier=Modifier.height(24.dp))\r\n\r\n            // \uD83D\uDD18 Bot√≥n 360 (se queda igual)\r\n            onVer360?.let {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .background(Color.White)\r\n                        .navigationBarsPadding()\r\n                        .padding(horizontal = 16.dp, vertical = 2.dp)\r\n                ) {\r\n                    Button(\r\n                        onClick = it,\r\n                        modifier = Modifier\r\n                            .fillMaxWidth()\r\n                            .height(56.dp),\r\n                        colors = ButtonDefaults.buttonColors(containerColor = Color.Black),\r\n                        shape = RoundedCornerShape(12.dp)\r\n                    ) {\r\n                        Text(\r\n                            text = stringResource(R.string.see_360),\r\n                            color = Color.White,\r\n                            fontSize = 18.sp,\r\n                            fontWeight = FontWeight.Bold,\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD0D Zoom con t√≠tulo traducido (se queda igual)\r\n        if (selectedImageUrl != null) {\r\n            ZoomableImageDialog(\r\n                imageUrl = selectedImageUrl!!,\r\n                label = selectedImageTitle ?: \"\",\r\n                onDismiss = {\r\n                    selectedImageUrl = null\r\n                    selectedImageTitle = null\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// \uD83D\uDD0D Di√°logo de zoom (se queda igual)\r\n@Composable\r\nprivate fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {\r\n\r\n    val view =LocalView.current\r\n    val activity = view.context as? Activity\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_SENSOR\r\n\r\n        onDispose {\r\n            activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n        }\r\n    }\r\n\r\n    Dialog(\r\n        onDismissRequest = onDismiss,\r\n        properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)\r\n    ) {\r\n        Box(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .background(Color.Black.copy(alpha = 0.95f))\r\n        ) {\r\n            AndroidView(\r\n                factory = { context ->\r\n                    PhotoView(context).apply {\r\n                        load(imageUrl) { crossfade(true) }\r\n                    }\r\n                },\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n\r\n            // \uD83D\uDD39 T√≠tulo (ya traducido seg√∫n idioma)\r\n            Text(\r\n                text = label,\r\n                color = Color.White,\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Medium,\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomStart)\r\n                    .background(Color.Black.copy(alpha = 0.7f))\r\n                    .padding(horizontal = 12.dp, vertical = 8.dp)\r\n            )\r\n\r\n            // ‚ùå Bot√≥n cerrar\r\n            IconButton(\r\n                onClick = onDismiss,\r\n                modifier = Modifier\r\n                    .align(Alignment.TopEnd)\r\n                    .statusBarsPadding()\r\n                    .padding(16.dp)\r\n                    .background(Color.Black.copy(alpha = 0.5f), CircleShape)\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.close),\r\n                    tint = Color.White\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
--- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(date 1763721534656)
@@ -15,7 +15,7 @@
 import androidx.compose.ui.draw.clip
 import androidx.compose.ui.graphics.Color
 import androidx.compose.ui.layout.ContentScale
-import androidx.compose.ui.platform.LocalContext // <-- ¬°NUEVO IMPORT!
+import androidx.compose.ui.platform.LocalContext
 import androidx.compose.ui.platform.LocalView
 import androidx.compose.ui.res.painterResource
 import androidx.compose.ui.text.font.FontWeight
@@ -43,10 +43,25 @@
 import androidx.media3.exoplayer.ExoPlayer
 import android.util.Log
 import androidx.compose.foundation.layout.Arrangement
+import com.nextapp.monasterio.viewModels.AjustesViewModel
+import com.nextapp.monasterio.ui.virtualvisit.components.GenericTutorialOverlay
+import androidx.compose.ui.platform.LocalDensity
+import androidx.compose.ui.geometry.Offset
+import androidx.compose.ui.geometry.Size // Importante para el foco cuadrado
+
+// Clase privada para definir los pasos del tutorial del Pin
+private data class PinTutorialStep(
+    val description: String,
+    val focusCenter: Offset,
+    val focusRadius: Float = 0f,      // Para c√≠rculos
+    val rectSize: Size? = null,       // Para cuadrados/rect√°ngulos
+    val alignment: Alignment = Alignment.BottomCenter // D√≥nde poner el cuadro de texto
+)
 
 @OptIn(ExperimentalFoundationApi::class)
 @Composable
 fun PinDetalleScreen(
+    viewModel: AjustesViewModel,
     pin: PinData,
     onBack: () -> Unit,
     onVer360: (() -> Unit)? = null
@@ -61,12 +76,17 @@
 
     DisposableEffect(Unit) {
         activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-
         onDispose {
             activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
         }
     }
 
+    // --- L√ìGICA DE ESTADO DEL TUTORIAL ---
+    val isPinDismissed by viewModel.isPinDismissed.collectAsState()
+    var showTutorialSession by remember { mutableStateOf(true) }
+    // √çndice para recorrer los pasos (Atr√°s -> Imagen -> Audio -> 360)
+    var currentStepIndex by remember { mutableIntStateOf(0) }
+
     val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()
 
     val pagerState = rememberPagerState(pageCount = { imagenes.size })
@@ -77,7 +97,7 @@
     val locale: Locale = configuration.locales[0]
     val language = locale.language
 
-    // --- L√≥gica de Texto Multiling√ºe (Tu c√≥digo) ---
+    // --- Textos Multiling√ºes ---
     val titulo_pin: String
     val descripcion_pin: String?
     val ubicacion_pin: Ubicacion?
@@ -100,10 +120,8 @@
         }
     }
 
-    // --- ¬°¬°NUEVA L√ìGICA DE AUDIO!! ---
+    // --- AUDIO ---
     val context = LocalContext.current
-
-    // 1. Selecciona la URL de audio correcta
     val audioUrl = when (language) {
         "es" -> pin.audioUrl_es
         "en" -> pin.audioUrl_en
@@ -111,37 +129,27 @@
         else -> pin.audioUrl_es
     }
 
-    Log.d(
-        "AudioDebug",
-        "Pin: '${pin.titulo}', Idioma: $language, URL de Audio Seleccionada: [$audioUrl]"
-    )
+    Log.d("AudioDebug", "Pin: '${pin.titulo}', URL Audio: [$audioUrl]")
 
-    // 2. Configura el ExoPlayer
     val exoPlayer = remember { ExoPlayer.Builder(context).build() }
     var isPlaying by remember { mutableStateOf(false) }
-    var playbackState by remember { mutableStateOf(Player.STATE_IDLE) }
     var hasUserInteracted by remember { mutableStateOf(false) }
 
-    // 3. Prepara el player si la URL cambia (y no es nula)
     DisposableEffect(audioUrl) {
         if (!audioUrl.isNullOrBlank()) {
             val mediaItem = MediaItem.fromUri(audioUrl)
             exoPlayer.setMediaItem(mediaItem)
             exoPlayer.prepare()
         }
-        // (No necesitamos onDispose aqu√≠, se libera abajo)
         onDispose { }
     }
 
-    // 4. Listener para actualizar el bot√≥n Play/Pause y rebobinar
     LaunchedEffect(exoPlayer) {
         exoPlayer.addListener(object : Player.Listener {
             override fun onIsPlayingChanged(isPlayingValue: Boolean) {
                 isPlaying = isPlayingValue
             }
             override fun onPlaybackStateChanged(state: Int) {
-                playbackState = state
-
                 if (state == Player.STATE_ENDED) {
                     isPlaying = false
                     exoPlayer.seekTo(0)
@@ -150,13 +158,45 @@
         })
     }
 
-    // 5. Libera el player al salir de la pantalla
     DisposableEffect(Unit) {
-        onDispose {
-            exoPlayer.release()
-        }
+        onDispose { exoPlayer.release() }
+    }
+
+    // =====================================================================
+    // C√ÅLCULO DE COORDENADAS PARA EL TUTORIAL
+    // =====================================================================
+    val density = LocalDensity.current
+    val screenWidthPx = with(density) { configuration.screenWidthDp.dp.toPx() }
+    val screenHeightPx = with(density) { configuration.screenHeightDp.dp.toPx() }
+
+    // 1. Bot√≥n Atr√°s (Aprox Top-Left)
+    val backButtonPos = remember(density) {
+        with(density) { Offset(30.dp.toPx(), 85.dp.toPx()) }
     }
-    // --- FIN L√ìGICA DE AUDIO ---
+
+    // 2. Imagen Principal (Carrusel) - Aprox Centro-Superior
+    // T√≠tulo(~100dp) + Imagen(250dp). Centro aprox en Y=240dp
+    val imageCenterPos = remember(density) {
+        with(density) { Offset(screenWidthPx / 2, 280.dp.toPx()) }
+    }
+    val imageRectSize = remember(density, screenWidthPx) {
+        with(density) { Size(screenWidthPx - 32.dp.toPx(), 250.dp.toPx()) }
+    }
+
+    // 3. Bot√≥n Audio - Debajo de la imagen, izquierda.
+    // Aprox Y = 100(titulo) + 250(img) + 20(pads) + 24(mitad btn) ‚âà 400dp
+    val audioBtnPos = remember(density) {
+        with(density) { Offset(40.dp.toPx(), 450.dp.toPx()) }
+    }
+
+    // 4. Bot√≥n 360 - Abajo del todo
+    val btn360Pos = remember(density, screenHeightPx) {
+        with(density) { Offset(screenWidthPx / 2, screenHeightPx - 100.dp.toPx()) }
+    }
+    val btn360Size = remember(density, screenWidthPx) {
+        with(density) { Size(screenWidthPx - 32.dp.toPx(), 60.dp.toPx()) }
+    }
+
 
     Box(
         modifier = Modifier
@@ -203,7 +243,7 @@
 
             Spacer(modifier = Modifier.height(16.dp))
 
-            // üñºÔ∏è Carrusel con etiqueta (se queda igual)
+            // üñºÔ∏è Carrusel
             if (imagenes.isNotEmpty()) {
                 Box(
                     modifier = Modifier
@@ -213,116 +253,65 @@
                         .border(3.dp, Color.Black, RoundedCornerShape(16.dp))
                 ) {
                     HorizontalPager(state = pagerState) { page ->
-
                         val imagen = imagenes[page]
-
                         Box(modifier = Modifier.fillMaxSize()) {
-
                             AsyncImage(
-
                                 model = imagen.url,
-
                                 contentDescription = imagen.etiqueta,
-
                                 contentScale = ContentScale.Crop,
-
                                 modifier = Modifier
-
                                     .fillMaxSize()
-
                                     .clickable {
-
                                         selectedImageUrl = imagen.url
-
-// üëá t√≠tulo seg√∫n idioma actual
-
                                         selectedImageTitle = when (language) {
-
                                             "es" -> imagen.titulo
-
                                             "de" -> imagen.tituloAleman
-
                                             else -> imagen.tituloIngles
-
                                         }
-
                                     }
-
                             )
                             Text(
-
                                 text = imagen.etiqueta,
-
                                 color = Color.White,
-
                                 fontSize = 14.sp,
-
                                 modifier = Modifier
-
                                     .align(Alignment.BottomStart)
-
                                     .background(Color.Black.copy(alpha = 0.6f))
-
                                     .padding(horizontal = 10.dp, vertical = 6.dp)
-
                             )
-
                         }
-
                     }
                     Row(
-                        Modifier
-                            .align(Alignment.BottomCenter)
-                            .padding(bottom = 6.dp)
+                        Modifier.align(Alignment.BottomCenter).padding(bottom = 6.dp)
                     ) {
                         repeat(imagenes.size) { index ->
-
                             val selected = pagerState.currentPage == index
-
                             Box(
-
                                 Modifier
-
                                     .padding(3.dp)
-
                                     .size(if (selected) 8.dp else 6.dp)
-
-                                    .background(
-
-                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),
-
-                                        shape = CircleShape
-
-                                    )
-
+                                    .background(Color.White.copy(alpha = if (selected) 1f else 0.6f), CircleShape)
                             )
-
                         }
                     }
                 }
                 Spacer(modifier = Modifier.height(12.dp))
             }
 
-
+            // üîä Bot√≥n Audio
             Row(
                 modifier = Modifier.fillMaxWidth(),
                 verticalAlignment = Alignment.CenterVertically
             ) {
-                // Bot√≥n de Audio (solo si hay URL)
                 if (!audioUrl.isNullOrBlank()) {
-                    // 1. Determina el icono correcto
                     val iconRes = when {
                         isPlaying -> R.drawable.pause
                         !hasUserInteracted -> R.drawable.microphone
                         else -> R.drawable.play_arrow
                     }
-
-                    // 2. Bot√≥n de audio con redondel, alineado a la derecha del t√≠tulo
                     Row(
-                        modifier = Modifier
-                            .fillMaxWidth()
-                            .padding(top = 8.dp), // Espacio entre el t√≠tulo y el bot√≥n
-                        horizontalArrangement = Arrangement.Start // Alinea a la derecha
+                        modifier = Modifier.fillMaxWidth().padding(top = 8.dp),
+                        horizontalArrangement = Arrangement.Start
                     ) {
                         IconButton(onClick = {
                             hasUserInteracted = true
@@ -330,16 +319,16 @@
                         }) {
                             Box(
                                 modifier = Modifier
-                                    .size(48.dp) // Tama√±o del redondel
-                                    .clip(CircleShape) // Forma redonda
-                                    .background(Color.Gray.copy(alpha = 0.3f)), // Color de fondo del redondel (ej. gris suave)
-                                contentAlignment = Alignment.Center // Centra el icono dentro del redondel
+                                    .size(48.dp)
+                                    .clip(CircleShape)
+                                    .background(Color.Gray.copy(alpha = 0.3f)),
+                                contentAlignment = Alignment.Center
                             ) {
                                 Icon(
                                     painter = painterResource(id = iconRes),
                                     contentDescription = stringResource(R.string.play_audio),
-                                    tint = Color.Black, // Color del icono
-                                    modifier = Modifier.size(28.dp) // Tama√±o del icono dentro del redondel
+                                    tint = Color.Black,
+                                    modifier = Modifier.size(28.dp)
                                 )
                             }
                         }
@@ -347,7 +336,7 @@
                 }
             }
 
-            // üìù Descripci√≥n (se queda igual)
+            // üìù Descripci√≥n
             val descripcion = descripcion_pin ?: ""
             if (descripcion.isNotBlank()) {
                 val textScrollState = rememberScrollState()
@@ -373,7 +362,7 @@
 
             Spacer(modifier=Modifier.height(24.dp))
 
-            // üîò Bot√≥n 360 (se queda igual)
+            // üîò Bot√≥n 360
             onVer360?.let {
                 Box(
                     modifier = Modifier
@@ -383,9 +372,7 @@
                 ) {
                     Button(
                         onClick = it,
-                        modifier = Modifier
-                            .fillMaxWidth()
-                            .height(56.dp),
+                        modifier = Modifier.fillMaxWidth().height(56.dp),
                         colors = ButtonDefaults.buttonColors(containerColor = Color.Black),
                         shape = RoundedCornerShape(12.dp)
                     ) {
@@ -400,7 +387,90 @@
             }
         }
 
-        // üîç Zoom con t√≠tulo traducido (se queda igual)
+        // ====================================================================
+        // LOGICA VISUAL DEL TUTORIAL
+        // ====================================================================
+
+        if (!isPinDismissed && showTutorialSession) {
+            // Construimos la lista de pasos din√°micamente
+            // (Solo mostramos el paso de audio si hay audio, y el de 360 si hay 360)
+            val steps = remember(audioUrl, onVer360) {
+                val list = mutableListOf<PinTutorialStep>()
+
+                // PASO 1: Volver (C√≠rculo, Texto Abajo)
+                list.add(
+                    PinTutorialStep(
+                        description = activity?.getString(R.string.pin_1) ?: "Volver",
+                        focusCenter = backButtonPos,
+                        focusRadius = 70f,
+                        alignment = Alignment.BottomCenter
+                    )
+                )
+
+                // PASO 2: Im√°genes (Cuadrado, Texto Abajo)
+                list.add(
+                    PinTutorialStep(
+                        description = activity?.getString(R.string.pin_2) ?: "Volver",
+                        focusCenter = imageCenterPos,
+                        rectSize = imageRectSize,
+                        alignment = Alignment.BottomCenter
+                    )
+                )
+
+                // PASO 3: Audio (Solo si existe) (C√≠rculo, Texto Abajo)
+                if (!audioUrl.isNullOrBlank()) {
+                    list.add(
+                        PinTutorialStep(
+                            description = activity?.getString(R.string.pin_3) ?: "Volver",
+                            focusCenter = audioBtnPos,
+                            focusRadius = 80f,
+                            alignment = Alignment.BottomCenter
+                        )
+                    )
+                }
+
+                // PASO 4: Bot√≥n 360 (Solo si existe) (Rect√°ngulo, Texto ARRIBA)
+                if (onVer360 != null) {
+                    list.add(
+                        PinTutorialStep(
+                            description = activity?.getString(R.string.pin_4) ?: "Volver",
+                            focusCenter = btn360Pos,
+                            rectSize = btn360Size,
+                            alignment = Alignment.TopCenter // üëà EL CAMBIO CLAVE: Texto arriba
+                        )
+                    )
+                }
+                list
+            }
+
+            if (currentStepIndex < steps.size) {
+                val step = steps[currentStepIndex]
+                val isLastStep = currentStepIndex == steps.size - 1
+                val btnText = if (isLastStep) stringResource(R.string.understand) else stringResource(R.string.next)
+
+                GenericTutorialOverlay(
+                    description = step.description,
+                    highlightCenter = step.focusCenter,
+                    highlightRadius = step.focusRadius,
+                    highlightRectSize = step.rectSize,
+                    buttonText = btnText,
+                    dialogAlignment = step.alignment, // üëà Pasamos la alineaci√≥n
+
+                    onCloseClicked = { permanent ->
+                        if (isLastStep) {
+                            showTutorialSession = false
+                            if (permanent) viewModel.dismissPin()
+                        } else {
+                            currentStepIndex++
+                            if (permanent) viewModel.dismissPin()
+                        }
+                    }
+                )
+            }
+        }
+
+
+        // üîç Zoom Dialog
         if (selectedImageUrl != null) {
             ZoomableImageDialog(
                 imageUrl = selectedImageUrl!!,
@@ -414,16 +484,13 @@
     }
 }
 
-// üîç Di√°logo de zoom (se queda igual)
 @Composable
 private fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {
-
-    val view =LocalView.current
+    val view = LocalView.current
     val activity = view.context as? Activity
 
     DisposableEffect(Unit) {
         activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_SENSOR
-
         onDispose {
             activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
         }
@@ -434,20 +501,12 @@
         properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)
     ) {
         Box(
-            modifier = Modifier
-                .fillMaxSize()
-                .background(Color.Black.copy(alpha = 0.95f))
+            modifier = Modifier.fillMaxSize().background(Color.Black.copy(alpha = 0.95f))
         ) {
             AndroidView(
-                factory = { context ->
-                    PhotoView(context).apply {
-                        load(imageUrl) { crossfade(true) }
-                    }
-                },
+                factory = { context -> PhotoView(context).apply { load(imageUrl) { crossfade(true) } } },
                 modifier = Modifier.fillMaxSize()
             )
-
-            // üîπ T√≠tulo (ya traducido seg√∫n idioma)
             Text(
                 text = label,
                 color = Color.White,
@@ -458,8 +517,6 @@
                     .background(Color.Black.copy(alpha = 0.7f))
                     .padding(horizontal = 12.dp, vertical = 8.dp)
             )
-
-            // ‚ùå Bot√≥n cerrar
             IconButton(
                 onClick = onDismiss,
                 modifier = Modifier
Index: app/src/main/java/com/nextapp/monasterio/MonasteryApplication.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio\r\n\r\nimport android.app.Application\r\n\r\n/**\r\n * Esta clase se ejecuta ANTES que cualquier Activity.\r\n * Es el lugar perfecto para configurar cosas de toda la app, como el idioma.\r\n */\r\nclass MonasteryApplication : Application() {\r\n\r\n    override fun onCreate() {\r\n        super.onCreate()\r\n\r\n        // 1. Carga el idioma guardado en el momento en que la app arranca.\r\n        // Esto garantiza que CUALQUIER activity que se inicie ya tenga el idioma correcto.\r\n        LanguageHelper.loadLocale(this)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/MonasteryApplication.kt b/app/src/main/java/com/nextapp/monasterio/MonasteryApplication.kt
--- a/app/src/main/java/com/nextapp/monasterio/MonasteryApplication.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ b/app/src/main/java/com/nextapp/monasterio/MonasteryApplication.kt	(date 1763458435685)
@@ -1,18 +1,13 @@
 package com.nextapp.monasterio
 
 import android.app.Application
+import com.nextapp.monasterio.repository.UserPreferencesRepository // 1. Importar
 
-/**
- * Esta clase se ejecuta ANTES que cualquier Activity.
- * Es el lugar perfecto para configurar cosas de toda la app, como el idioma.
- */
 class MonasteryApplication : Application() {
-
     override fun onCreate() {
         super.onCreate()
 
-        // 1. Carga el idioma guardado en el momento en que la app arranca.
-        // Esto garantiza que CUALQUIER activity que se inicie ya tenga el idioma correcto.
-        LanguageHelper.loadLocale(this)
+        // 2. A√±ade esta l√≠nea para inicializar el repositorio
+        UserPreferencesRepository.initialize(this)
     }
 }
\ No newline at end of file
Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PlanoScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport android.os.Handler\r\nimport android.os.Looper\r\nimport android.widget.FrameLayout\r\nimport android.widget.Toast\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.animation.core.*\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.graphics.toArgb\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.NavHostController\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.models.*\r\nimport com.nextapp.monasterio.repository.*\r\nimport com.nextapp.monasterio.ui.virtualvisit.components.DebugPhotoView\r\nimport com.nextapp.monasterio.ui.virtualvisit.utils.isPointInPath\r\nimport com.nextapp.monasterio.ui.virtualvisit.utils.isPointInPinArea\r\nimport com.nextapp.monasterio.ui.screens.VirtualVisitRoutes\r\nimport kotlinx.coroutines.launch\r\nimport android.graphics.Matrix\r\nimport android.graphics.Path\r\nimport android.util.Log\r\nimport androidx.compose.runtime.snapshots.toInt\r\nimport androidx.compose.ui.res.stringResource\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\n\r\n@Composable\r\nfun PlanoScreen(\r\n    viewModel: AjustesViewModel,\r\n    planoId: String, // ‚Üê id del documento de Firestore (p.ej. \"monasterio_exterior\")\r\n    navController: NavController,\r\n    rootNavController: NavHostController? = null\r\n) {\r\n    val context = LocalContext.current\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        onDispose {}\r\n    }\r\n\r\n    val scope = rememberCoroutineScope()\r\n\r\n    // --- Estados ---\r\n    var plano by remember { mutableStateOf<PlanoData?>(null) }\r\n    var figuras by remember { mutableStateOf<List<FiguraData>>(emptyList()) }\r\n    var pines by remember { mutableStateOf<List<PinData>>(emptyList()) }\r\n    var isLoading by remember { mutableStateOf(true) }\r\n\r\n    // --- Estados visuales ---\r\n    var activePath by remember { mutableStateOf<Path?>(null) }\r\n    var activeHighlight by remember { mutableStateOf<Color?>(null) }\r\n    var isPinPressed by remember { mutableStateOf(false) }\r\n\r\n    val initialZoom = 1.5f\r\n    val planoBackgroundColor = Color(0xFFF5F5F5)\r\n\r\n    val botonesVisibles by viewModel.botonesVisibles.collectAsState()\r\n\r\n    // --- Efecto de parpadeo (blink) ---\r\n    val infiniteTransition = rememberInfiniteTransition(label = \"BlinkTransition\")\r\n    val blinkAlpha by infiniteTransition.animateFloat(\r\n        initialValue = 0f,\r\n        targetValue = 1f,\r\n        animationSpec = infiniteRepeatable(\r\n            animation = tween(1500, easing = LinearEasing),\r\n            repeatMode = RepeatMode.Reverse\r\n        )\r\n    )\r\n\r\n    // --- Carga inicial del plano + figuras + pines ---\r\n    LaunchedEffect(planoId) {\r\n        isLoading = true\r\n        try {\r\n            plano = PlanoRepository.getPlanoById(planoId)\r\n\r\n            if (plano != null) {\r\n                Log.d(\"PlanoUniversal\", \"‚úÖ Plano cargado: ${plano!!.nombre}\")\r\n                // Cargar figuras\r\n                val figuraRefs = plano!!.figuras.map { it.substringAfterLast(\"/\") }\r\n                figuras = FiguraRepository.getAllFiguras().filter { figuraRefs.contains(it.id) }\r\n\r\n                // Cargar pines\r\n                val pinRefs = plano!!.pines.map { it.substringAfterLast(\"/\") }\r\n                pines = PinRepository.getAllPins().filter { pinRefs.contains(it.id) }\r\n\r\n                Log.d(\"PlanoUniversal\", \"\uD83D\uDFE2 Figuras: ${figuras.size}, Pines: ${pines.size}\")\r\n            } else {\r\n                Log.e(\"PlanoUniversal\", \"‚ö†\uFE0F Plano no encontrado con id=$planoId\")\r\n            }\r\n        } catch (e: Exception) {\r\n            Log.e(\"PlanoUniversal\", \"‚ùå Error cargando plano\", e)\r\n            Toast.makeText(context, context.getString(R.string.error_loading_plane), Toast.LENGTH_SHORT).show()\r\n        } finally {\r\n            isLoading = false\r\n        }\r\n    }\r\n\r\n    // --- UI principal ---\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(planoBackgroundColor)\r\n    ) {\r\n        if (isLoading) {\r\n            Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {\r\n                Text(stringResource(R.string.plane_loading))\r\n            }\r\n            return@Box\r\n        }\r\n\r\n        var photoViewRef by remember { mutableStateOf<DebugPhotoView?>(null) }\r\n\r\n        AndroidView(\r\n            modifier = Modifier.fillMaxSize(),\r\n            factory = { ctx ->\r\n                DebugPhotoView(ctx).apply {\r\n                    layoutParams = FrameLayout.LayoutParams(\r\n                        FrameLayout.LayoutParams.MATCH_PARENT,\r\n                        FrameLayout.LayoutParams.MATCH_PARENT\r\n                    )\r\n\r\n                    // \uD83D\uDD39 Cargar imagen del plano (URL)\r\n                    plano?.let { p ->\r\n                        setImageFromUrl(p.plano)\r\n                    }\r\n\r\n                    post { setScale(initialZoom, true) }\r\n                    this.pins = emptyList()\r\n                }\r\n            },\r\n            update = { photoView ->\r\n                // \uD83D\uDD39 Actualizar zonas interactivas de figuras\r\n                photoView.staticZones = figuras.map { figura ->\r\n                    DebugPhotoView.StaticZoneData(\r\n                        path = createPathFromFirebase(figura),\r\n                        color = figura.colorResaltado.toUInt().toInt()\r\n                    )\r\n                }\r\n\r\n                // \uD83D\uDD39 Actualizar pines\r\n                photoView.pins = pines.map {\r\n                    DebugPhotoView.PinData(\r\n                        x = it.x,\r\n                        y = it.y,\r\n                        iconId = R.drawable.pin3,\r\n                        isPressed = isPinPressed\r\n                    )\r\n                }\r\n\r\n                // \uD83D\uDD39 Actualizar estado din√°mico\r\n                photoView.blinkingAlpha = blinkAlpha\r\n                photoView.interactivePath = activePath\r\n                photoView.highlightColor = activeHighlight?.toArgb() ?: Color.Transparent.toArgb()\r\n\r\n                photoView.invalidate()\r\n\r\n                // \uD83D\uDC46 Listener de tap\r\n                photoView.setOnPhotoTapListener { _, x, y ->\r\n                    val figura = figuras.find { isPointInPath(x, y, createPathFromFirebase(it)) }\r\n                    val pin = pines.find { isPointInPinArea(x, y, it.x, it.y, it.tapRadius) }\r\n\r\n                    when {\r\n                        figura != null -> {\r\n                            activePath = createPathFromFirebase(figura)\r\n                            activeHighlight = Color(figura.colorResaltado.toUInt().toInt())\r\n                            Handler(Looper.getMainLooper()).postDelayed({\r\n                                activeHighlight = null\r\n                                when (figura.tipoDestino) {\r\n                                    \"detalle\" -> {\r\n                                        navController.navigate(\"${VirtualVisitRoutes.DETALLE_GENERICO}/${figura.valorDestino}\")\r\n                                    }\r\n\r\n                                    \"plano\" -> {\r\n                                        val destinoId = figura.valorDestino\r\n                                        if (destinoId.isNotBlank()) {\r\n                                            // \uD83D\uDE80 Usar el navController local (no el root)\r\n                                            navController.navigate(\"${VirtualVisitRoutes.PLANO}/$destinoId\")\r\n                                        } else {\r\n                                            Toast.makeText(context, context.getString(R.string.notdefined_destinyplane), Toast.LENGTH_SHORT).show()\r\n                                        }\r\n                                    }\r\n\r\n\r\n                                    else -> {\r\n                                        Toast.makeText(context, context.getString(R.string.notdefined_destiny), Toast.LENGTH_SHORT).show()\r\n                                    }\r\n                                }\r\n\r\n                            }, 200)\r\n                        }\r\n\r\n                        pin != null -> {\r\n                            isPinPressed = true\r\n                            Log.d(\"PlanoScreen\", \"\uD83D\uDFE1 Pin pulsado ‚Üí ${pin.id}, tipoDestino=${pin.tipoDestino}, valorDestino=${pin.valorDestino}\")\r\n                            try {\r\n                                Handler(Looper.getMainLooper()).postDelayed({\r\n                                    try {\r\n                                        isPinPressed = false\r\n                                        val tipo = pin.tipoDestino?.lowercase()\r\n                                        val destino = pin.valorDestino\r\n                                        Log.d(\"PlanoScreen\", \"\uD83D\uDD39 Dentro del handler ‚Üí tipo=$tipo, destino=$destino\")\r\n\r\n                                        when (tipo) {\r\n                                            \"ruta\" -> {\r\n                                                val destino = pin.valorDestino ?: return@postDelayed\r\n                                                Log.d(\"PlanoScreen\", \"‚û° Navegando (root) a: $destino con pinId=${pin.id}\")\r\n                                                rootNavController?.navigate(\"${AppRoutes.PIN_ENTRADA_MONASTERIO}/${pin.id}\")\r\n                                            }\r\n\r\n                                            \"detalle\" -> {\r\n                                                Log.d(\"PlanoScreen\", \"‚û° Navegando a detalle: ${pin.id}\")\r\n                                                navController.navigate(AppRoutes.PIN_DETALLE + \"/${pin.id}\")\r\n                                            }\r\n                                            else -> {\r\n                                                Log.w(\"PlanoScreen\", \"‚ö†\uFE0F tipoDestino desconocido: $tipo\")\r\n                                            }\r\n                                        }\r\n                                    } catch (e: Exception) {\r\n                                        Log.e(\"PlanoScreen\", \"‚ùå Error dentro del Handler al navegar (interno)\", e)\r\n                                    }\r\n                                }, 200)\r\n                            } catch (e: Exception) {\r\n                                Log.e(\"PlanoScreen\", \"‚ùå Error al iniciar el Handler (externo)\", e)\r\n                            }\r\n                        }\r\n\r\n\r\n\r\n                        else -> Toast.makeText(context, context.getString(R.string.out_interactive_area), Toast.LENGTH_SHORT).show()\r\n                    }\r\n                }\r\n\r\n                photoViewRef = photoView\r\n            }\r\n        )\r\n\r\n        // --- Controles de zoom ---\r\n        Column(\r\n            modifier = Modifier\r\n                .align(Alignment.CenterEnd)\r\n                .padding(end = 16.dp, bottom = 80.dp),\r\n            verticalArrangement = Arrangement.spacedBy(12.dp)\r\n        ) {\r\n            if(botonesVisibles) {\r\n                FloatingActionButton(onClick = {\r\n                    photoViewRef?.let {\r\n                        val newScale = (it.scale + 0.2f).coerceAtMost(it.maximumScale)\r\n                        it.setScale(newScale, true)\r\n                    }\r\n                }) {\r\n                    Box(\r\n                        modifier = Modifier\r\n                            .size(48.dp)\r\n                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),\r\n                        contentAlignment = Alignment.Center\r\n                    ) {\r\n                        Icon(\r\n                            painter = painterResource(id = R.drawable.aumentar_zoom),\r\n                            contentDescription = stringResource(R.string.increase),\r\n                            tint = Color.Unspecified\r\n                        )\r\n                    }\r\n                }\r\n\r\n                FloatingActionButton(onClick = {\r\n                    photoViewRef?.let {\r\n                        val newScale = (it.scale - 0.2f).coerceAtLeast(it.minimumScale)\r\n                        it.setScale(newScale, true)\r\n                    }\r\n                }) {\r\n                    Box(\r\n                        modifier = Modifier\r\n                            .size(48.dp)\r\n                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),\r\n                        contentAlignment = Alignment.Center\r\n                    ) {\r\n                        Icon(\r\n                            painter = painterResource(id = R.drawable.disminuir_zoom),\r\n                            contentDescription = stringResource(R.string.decrease),\r\n                            tint = Color.Unspecified\r\n                        )\r\n                    }\r\n                }\r\n\r\n                FloatingActionButton(onClick = {\r\n                    photoViewRef?.apply {\r\n                        setScale(initialZoom, true)\r\n                        setTranslationX(0f)\r\n                        setTranslationY(0f)\r\n                    }\r\n                }) {\r\n                    Box(\r\n                        modifier = Modifier\r\n                            .size(48.dp)\r\n                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),\r\n                        contentAlignment = Alignment.Center\r\n                    ) {\r\n                        Icon(\r\n                            painter = painterResource(id = R.drawable.reajustar),\r\n                            contentDescription = stringResource(R.string.readjust),\r\n                            tint = Color.Unspecified\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // --- Bot√≥n \"Atr√°s\" ---\r\n        IconButton(\r\n            onClick = {\r\n                if (!navController.popBackStack()) {\r\n                    if (planoId == \"monasterio_exterior\") {\r\n                        // Si estamos en el plano ra√≠z, volver al inicio de la app\r\n                        rootNavController?.popBackStack()\r\n                        // o si prefieres ir expl√≠citamente:\r\n                        // rootNavController?.navigate(AppRoutes.INICIO)\r\n                    } else {\r\n                        // Si no es el exterior, volver al exterior como fallback\r\n                        navController.navigate(\"${VirtualVisitRoutes.PLANO}/monasterio_exterior\") {\r\n                            popUpTo(\"${VirtualVisitRoutes.PLANO}/monasterio_exterior\") { inclusive = false }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            modifier = Modifier\r\n                .align(Alignment.TopStart)\r\n                .statusBarsPadding()\r\n                .padding(16.dp)\r\n                .background(Color.Black.copy(alpha = 0.5f), shape = RoundedCornerShape(12.dp))\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.arrow_back),\r\n                contentDescription = stringResource(R.string.go_back),\r\n                tint = Color.White\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n\r\n// --- Helper para crear Paths de Firebase ---\r\nprivate fun createPathFromFirebase(figura: FiguraData): Path {\r\n    val path = Path()\r\n    if (figura.path.isEmpty()) return path\r\n\r\n    path.moveTo(figura.path[0].x, figura.path[0].y)\r\n    for (i in 1 until figura.path.size) {\r\n        path.lineTo(figura.path[i].x, figura.path[i].y)\r\n    }\r\n    path.close()\r\n\r\n    val matrix = Matrix().apply {\r\n        setScale(figura.scale, figura.scale)\r\n        postTranslate(figura.offsetX, figura.offsetY)\r\n    }\r\n    path.transform(matrix)\r\n    return path\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PlanoScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PlanoScreen.kt
--- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PlanoScreen.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PlanoScreen.kt	(date 1763717710414)
@@ -6,23 +6,30 @@
 import android.os.Looper
 import android.widget.FrameLayout
 import android.widget.Toast
+import androidx.compose.animation.core.*
 import androidx.compose.foundation.background
 import androidx.compose.foundation.layout.*
-import androidx.compose.animation.core.*
 import androidx.compose.foundation.shape.CircleShape
 import androidx.compose.foundation.shape.RoundedCornerShape
 import androidx.compose.material3.*
 import androidx.compose.runtime.*
 import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
+import androidx.compose.ui.geometry.Offset
 import androidx.compose.ui.graphics.Color
 import androidx.compose.ui.graphics.toArgb
+import androidx.compose.ui.platform.LocalConfiguration
 import androidx.compose.ui.platform.LocalContext
+import androidx.compose.ui.platform.LocalDensity
 import androidx.compose.ui.res.painterResource
+import androidx.compose.ui.res.stringResource
 import androidx.compose.ui.unit.dp
 import androidx.compose.ui.viewinterop.AndroidView
 import androidx.navigation.NavController
 import androidx.navigation.NavHostController
+import android.graphics.Matrix
+import android.graphics.Path
+import android.util.Log
 import com.nextapp.monasterio.R
 import com.nextapp.monasterio.AppRoutes
 import com.nextapp.monasterio.models.*
@@ -31,19 +38,21 @@
 import com.nextapp.monasterio.ui.virtualvisit.utils.isPointInPath
 import com.nextapp.monasterio.ui.virtualvisit.utils.isPointInPinArea
 import com.nextapp.monasterio.ui.screens.VirtualVisitRoutes
-import kotlinx.coroutines.launch
-import android.graphics.Matrix
-import android.graphics.Path
-import android.util.Log
-import androidx.compose.runtime.snapshots.toInt
-import androidx.compose.ui.res.stringResource
 import com.nextapp.monasterio.viewModels.AjustesViewModel
-import com.nextapp.monasterio.viewModels.AuthViewModel
+import com.nextapp.monasterio.ui.virtualvisit.components.GenericTutorialOverlay
+
+// Clase auxiliar para definir los pasos del tutorial
+private data class TutorialStep(
+    val title: String? = null,
+    val description: String,
+    val focusCenter: Offset,
+    val focusRadius: Float
+)
 
 @Composable
 fun PlanoScreen(
     viewModel: AjustesViewModel,
-    planoId: String, // ‚Üê id del documento de Firestore (p.ej. "monasterio_exterior")
+    planoId: String,
     navController: NavController,
     rootNavController: NavHostController? = null
 ) {
@@ -55,64 +64,102 @@
         onDispose {}
     }
 
+    // -----------------------------------------------------------
+    // 1. C√ÅLCULOS DE COORDENADAS PARA LOS FOCOS DEL TUTORIAL
+    // -----------------------------------------------------------
+    val configuration = LocalConfiguration.current
+    val density = LocalDensity.current
+    val screenWidthPx = with(density) { configuration.screenWidthDp.dp.toPx() }
+    val screenHeightPx = with(density) { configuration.screenHeightDp.dp.toPx() }
+
+    // A. Centro de la pantalla (Para el Mapa / Bienvenida)
+    val centerOffset = remember(configuration) {
+        Offset(screenWidthPx / 3.5f, screenHeightPx / 2.1f)
+    }
+
+    val backButtonOffset = remember(density) {
+        Offset(screenWidthPx / 9.5f, screenHeightPx / 8.6f)
+    }
+
+    val rightbuttons = remember(density) {
+        Offset(screenWidthPx / 1f, screenHeightPx / 2.2f)
+    }
+
+    val pins = remember(density) {
+        Offset(screenWidthPx / 2.5f, screenHeightPx / 6f)
+    }
+
+    // C. Controles de Zoom (Abajo Derecha)
+    val zoomControlsOffset = remember(density, configuration) {
+        with(density) {
+            Offset(
+                x = screenWidthPx - 40.dp.toPx(),
+                y = screenHeightPx - 160.dp.toPx()
+            )
+        }
+    }
+
     val scope = rememberCoroutineScope()
 
-    // --- Estados ---
+    // --- Estados de Datos ---
     var plano by remember { mutableStateOf<PlanoData?>(null) }
     var figuras by remember { mutableStateOf<List<FiguraData>>(emptyList()) }
     var pines by remember { mutableStateOf<List<PinData>>(emptyList()) }
     var isLoading by remember { mutableStateOf(true) }
 
-    // --- Estados visuales ---
+    // --- Estados Visuales ---
     var activePath by remember { mutableStateOf<Path?>(null) }
     var activeHighlight by remember { mutableStateOf<Color?>(null) }
     var isPinPressed by remember { mutableStateOf(false) }
 
-    val initialZoom = 1.5f
+    // --- LOGICA DE TUTORIAL ---
+    val isMainDismissed by viewModel.isMainMapDismissed.collectAsState()
+    val isSubDismissed by viewModel.isSubMapDismissed.collectAsState()
+    var showTutorialSession by remember { mutableStateOf(true) }
+
+    // Estado para saber en qu√© paso del tutorial estamos (0, 1, 2...)
+    var currentStepIndex by remember { mutableIntStateOf(0) }
+
+    val initialZoom = 1f
     val planoBackgroundColor = Color(0xFFF5F5F5)
-
     val botonesVisibles by viewModel.botonesVisibles.collectAsState()
 
-    // --- Efecto de parpadeo (blink) ---
+    // --- Efecto de parpadeo ---
     val infiniteTransition = rememberInfiniteTransition(label = "BlinkTransition")
     val blinkAlpha by infiniteTransition.animateFloat(
-        initialValue = 0f,
-        targetValue = 1f,
-        animationSpec = infiniteRepeatable(
-            animation = tween(1500, easing = LinearEasing),
-            repeatMode = RepeatMode.Reverse
-        )
+        initialValue = 0f, targetValue = 1f,
+        animationSpec = infiniteRepeatable(tween(1500), RepeatMode.Reverse)
     )
 
-    // --- Carga inicial del plano + figuras + pines ---
+    // --- Carga inicial ---
     LaunchedEffect(planoId) {
         isLoading = true
+        showTutorialSession = true
+        currentStepIndex = 0 // Reiniciamos los pasos al cambiar de plano
         try {
             plano = PlanoRepository.getPlanoById(planoId)
-
             if (plano != null) {
                 Log.d("PlanoUniversal", "‚úÖ Plano cargado: ${plano!!.nombre}")
-                // Cargar figuras
                 val figuraRefs = plano!!.figuras.map { it.substringAfterLast("/") }
                 figuras = FiguraRepository.getAllFiguras().filter { figuraRefs.contains(it.id) }
-
-                // Cargar pines
                 val pinRefs = plano!!.pines.map { it.substringAfterLast("/") }
                 pines = PinRepository.getAllPins().filter { pinRefs.contains(it.id) }
-
-                Log.d("PlanoUniversal", "üü¢ Figuras: ${figuras.size}, Pines: ${pines.size}")
             } else {
                 Log.e("PlanoUniversal", "‚ö†Ô∏è Plano no encontrado con id=$planoId")
             }
         } catch (e: Exception) {
             Log.e("PlanoUniversal", "‚ùå Error cargando plano", e)
-            Toast.makeText(context, context.getString(R.string.error_loading_plane), Toast.LENGTH_SHORT).show()
+            Toast.makeText(
+                context,
+                context.getString(R.string.error_loading_plane),
+                Toast.LENGTH_SHORT
+            ).show()
         } finally {
             isLoading = false
         }
     }
 
-    // --- UI principal ---
+    // --- UI Principal ---
     Box(
         modifier = Modifier
             .fillMaxSize()
@@ -127,6 +174,7 @@
 
         var photoViewRef by remember { mutableStateOf<DebugPhotoView?>(null) }
 
+        // 1. Capa del Mapa Interactivo
         AndroidView(
             modifier = Modifier.fillMaxSize(),
             factory = { ctx ->
@@ -135,47 +183,28 @@
                         FrameLayout.LayoutParams.MATCH_PARENT,
                         FrameLayout.LayoutParams.MATCH_PARENT
                     )
-
-                    // üîπ Cargar imagen del plano (URL)
-                    plano?.let { p ->
-                        setImageFromUrl(p.plano)
-                    }
-
+                    plano?.let { p -> setImageFromUrl(p.plano) }
                     post { setScale(initialZoom, true) }
                     this.pins = emptyList()
                 }
             },
             update = { photoView ->
-                // üîπ Actualizar zonas interactivas de figuras
-                photoView.staticZones = figuras.map { figura ->
+                photoView.staticZones = figuras.map {
                     DebugPhotoView.StaticZoneData(
-                        path = createPathFromFirebase(figura),
-                        color = figura.colorResaltado.toUInt().toInt()
-                    )
-                }
-
-                // üîπ Actualizar pines
-                photoView.pins = pines.map {
-                    DebugPhotoView.PinData(
-                        x = it.x,
-                        y = it.y,
-                        iconId = R.drawable.pin3,
-                        isPressed = isPinPressed
+                        createPathFromFirebase(it), // Ahora s√≠ encontrar√° la funci√≥n
+                        it.colorResaltado.toUInt().toInt()
                     )
                 }
-
-                // üîπ Actualizar estado din√°mico
+                photoView.pins =
+                    pines.map { DebugPhotoView.PinData(it.x, it.y, R.drawable.pin3, isPinPressed) }
                 photoView.blinkingAlpha = blinkAlpha
                 photoView.interactivePath = activePath
                 photoView.highlightColor = activeHighlight?.toArgb() ?: Color.Transparent.toArgb()
-
                 photoView.invalidate()
 
-                // üëÜ Listener de tap
                 photoView.setOnPhotoTapListener { _, x, y ->
                     val figura = figuras.find { isPointInPath(x, y, createPathFromFirebase(it)) }
                     val pin = pines.find { isPointInPinArea(x, y, it.x, it.y, it.tapRadius) }
-
                     when {
                         figura != null -> {
                             activePath = createPathFromFirebase(figura)
@@ -183,92 +212,69 @@
                             Handler(Looper.getMainLooper()).postDelayed({
                                 activeHighlight = null
                                 when (figura.tipoDestino) {
-                                    "detalle" -> {
-                                        navController.navigate("${VirtualVisitRoutes.DETALLE_GENERICO}/${figura.valorDestino}")
-                                    }
-
+                                    "detalle" -> navController.navigate("${VirtualVisitRoutes.DETALLE_GENERICO}/${figura.valorDestino}")
                                     "plano" -> {
                                         val destinoId = figura.valorDestino
-                                        if (destinoId.isNotBlank()) {
-                                            // üöÄ Usar el navController local (no el root)
-                                            navController.navigate("${VirtualVisitRoutes.PLANO}/$destinoId")
-                                        } else {
-                                            Toast.makeText(context, context.getString(R.string.notdefined_destinyplane), Toast.LENGTH_SHORT).show()
-                                        }
+                                        if (destinoId.isNotBlank()) navController.navigate("${VirtualVisitRoutes.PLANO}/$destinoId")
+                                        else Toast.makeText(
+                                            context,
+                                            context.getString(R.string.notdefined_destinyplane),
+                                            Toast.LENGTH_SHORT
+                                        ).show()
                                     }
-
-
-                                    else -> {
-                                        Toast.makeText(context, context.getString(R.string.notdefined_destiny), Toast.LENGTH_SHORT).show()
-                                    }
+                                    else -> Toast.makeText(
+                                        context,
+                                        context.getString(R.string.notdefined_destiny),
+                                        Toast.LENGTH_SHORT
+                                    ).show()
                                 }
-
                             }, 200)
                         }
 
                         pin != null -> {
                             isPinPressed = true
-                            Log.d("PlanoScreen", "üü° Pin pulsado ‚Üí ${pin.id}, tipoDestino=${pin.tipoDestino}, valorDestino=${pin.valorDestino}")
-                            try {
-                                Handler(Looper.getMainLooper()).postDelayed({
-                                    try {
-                                        isPinPressed = false
-                                        val tipo = pin.tipoDestino?.lowercase()
-                                        val destino = pin.valorDestino
-                                        Log.d("PlanoScreen", "üîπ Dentro del handler ‚Üí tipo=$tipo, destino=$destino")
-
-                                        when (tipo) {
-                                            "ruta" -> {
-                                                val destino = pin.valorDestino ?: return@postDelayed
-                                                Log.d("PlanoScreen", "‚û° Navegando (root) a: $destino con pinId=${pin.id}")
-                                                rootNavController?.navigate("${AppRoutes.PIN_ENTRADA_MONASTERIO}/${pin.id}")
-                                            }
-
-                                            "detalle" -> {
-                                                Log.d("PlanoScreen", "‚û° Navegando a detalle: ${pin.id}")
-                                                navController.navigate(AppRoutes.PIN_DETALLE + "/${pin.id}")
-                                            }
-                                            else -> {
-                                                Log.w("PlanoScreen", "‚ö†Ô∏è tipoDestino desconocido: $tipo")
-                                            }
-                                        }
-                                    } catch (e: Exception) {
-                                        Log.e("PlanoScreen", "‚ùå Error dentro del Handler al navegar (interno)", e)
-                                    }
-                                }, 200)
-                            } catch (e: Exception) {
-                                Log.e("PlanoScreen", "‚ùå Error al iniciar el Handler (externo)", e)
-                            }
+                            Handler(Looper.getMainLooper()).postDelayed({
+                                isPinPressed = false
+                                when (pin.tipoDestino?.lowercase()) {
+                                    "ruta" -> if (pin.valorDestino != null) rootNavController?.navigate(
+                                        "${AppRoutes.PIN_ENTRADA_MONASTERIO}/${pin.id}"
+                                    )
+                                    "detalle" -> navController.navigate(AppRoutes.PIN_DETALLE + "/${pin.id}")
+                                }
+                            }, 200)
                         }
 
-
-
-                        else -> Toast.makeText(context, context.getString(R.string.out_interactive_area), Toast.LENGTH_SHORT).show()
+                        else -> Toast.makeText(
+                            context,
+                            context.getString(R.string.out_interactive_area),
+                            Toast.LENGTH_SHORT
+                        ).show()
                     }
                 }
-
                 photoViewRef = photoView
             }
         )
 
-        // --- Controles de zoom ---
+        // 2. Controles de Zoom
         Column(
             modifier = Modifier
                 .align(Alignment.CenterEnd)
                 .padding(end = 16.dp, bottom = 80.dp),
             verticalArrangement = Arrangement.spacedBy(12.dp)
         ) {
-            if(botonesVisibles) {
+            if (botonesVisibles) {
                 FloatingActionButton(onClick = {
                     photoViewRef?.let {
-                        val newScale = (it.scale + 0.2f).coerceAtMost(it.maximumScale)
-                        it.setScale(newScale, true)
+                        it.setScale(
+                            (it.scale + 0.2f).coerceAtMost(
+                                it.maximumScale
+                            ), true
+                        )
                     }
                 }) {
                     Box(
-                        modifier = Modifier
-                            .size(48.dp)
-                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),
+                        modifier = Modifier.size(48.dp)
+                            .background(Color.White.copy(alpha = 0.7f), CircleShape),
                         contentAlignment = Alignment.Center
                     ) {
                         Icon(
@@ -278,17 +284,18 @@
                         )
                     }
                 }
-
                 FloatingActionButton(onClick = {
                     photoViewRef?.let {
-                        val newScale = (it.scale - 0.2f).coerceAtLeast(it.minimumScale)
-                        it.setScale(newScale, true)
+                        it.setScale(
+                            (it.scale - 0.2f).coerceAtLeast(
+                                it.minimumScale
+                            ), true
+                        )
                     }
                 }) {
                     Box(
-                        modifier = Modifier
-                            .size(48.dp)
-                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),
+                        modifier = Modifier.size(48.dp)
+                            .background(Color.White.copy(alpha = 0.7f), CircleShape),
                         contentAlignment = Alignment.Center
                     ) {
                         Icon(
@@ -298,18 +305,17 @@
                         )
                     }
                 }
-
                 FloatingActionButton(onClick = {
                     photoViewRef?.apply {
-                        setScale(initialZoom, true)
-                        setTranslationX(0f)
-                        setTranslationY(0f)
+                        setScale(
+                            initialZoom,
+                            true
+                        ); setTranslationX(0f); setTranslationY(0f)
                     }
                 }) {
                     Box(
-                        modifier = Modifier
-                            .size(48.dp)
-                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),
+                        modifier = Modifier.size(48.dp)
+                            .background(Color.White.copy(alpha = 0.7f), CircleShape),
                         contentAlignment = Alignment.Center
                     ) {
                         Icon(
@@ -322,19 +328,17 @@
             }
         }
 
-        // --- Bot√≥n "Atr√°s" ---
+        // 3. Bot√≥n Atr√°s
         IconButton(
             onClick = {
                 if (!navController.popBackStack()) {
                     if (planoId == "monasterio_exterior") {
-                        // Si estamos en el plano ra√≠z, volver al inicio de la app
                         rootNavController?.popBackStack()
-                        // o si prefieres ir expl√≠citamente:
-                        // rootNavController?.navigate(AppRoutes.INICIO)
                     } else {
-                        // Si no es el exterior, volver al exterior como fallback
                         navController.navigate("${VirtualVisitRoutes.PLANO}/monasterio_exterior") {
-                            popUpTo("${VirtualVisitRoutes.PLANO}/monasterio_exterior") { inclusive = false }
+                            popUpTo("${VirtualVisitRoutes.PLANO}/monasterio_exterior") {
+                                inclusive = false
+                            }
                         }
                     }
                 }
@@ -352,20 +356,115 @@
             )
         }
 
-    }
-}
+        // 4. TUTORIALES (L√≥gica Step-by-Step)
+        val isMainMap = (planoId == "monasterio_exterior")
+
+        if (showTutorialSession) {
+            if (isMainMap && !isMainDismissed) {
+                // --- TUTORIAL MAPA PRINCIPAL (3 Pasos) ---
+                val steps = listOf(
+                    // Paso 0: Bienvenida -> Foco Centro
+                    TutorialStep(
+                        description = stringResource(R.string.map_tutorial_body1),
+                        focusCenter = backButtonOffset,
+                        focusRadius = 120f
+                    ),
+                    // Paso 1: Zoom -> Foco Abajo Derecha
+                    TutorialStep(
+                        description = stringResource(R.string.map_tutorial_body1_2),
+                        focusCenter = centerOffset,
+                        focusRadius = 220f
+                    ),
+                    // Paso 2: Atr√°s -> Foco Arriba Izquierda
+                    TutorialStep(
+                        description = stringResource(R.string.map_tutorial_body1_3),
+                        focusCenter = rightbuttons,
+                        focusRadius = 400f
+                    )
+                )
+
+                if (currentStepIndex < steps.size) {
+                    val step = steps[currentStepIndex]
+                    val isLastStep = currentStepIndex == steps.size - 1
+                    val btnText =
+                        if (isLastStep) stringResource(R.string.understand) else stringResource(R.string.next)
+
+                    GenericTutorialOverlay(
+                        title = step.title,
+                        description = step.description,
+                        highlightCenter = step.focusCenter,
+                        highlightRadius = step.focusRadius,
+                        buttonText = btnText, // Pasamos el texto din√°mico
+                        onCloseClicked = { permanent ->
+                            if (isLastStep) {
+                                // Fin del tutorial
+                                showTutorialSession = false
+                                if (permanent) viewModel.dismissMainMap()
+                            } else {
+                                // Siguiente paso
+                                currentStepIndex++
+                                if (permanent) viewModel.dismissMainMap() // Guardar preferencia si marca
+                            }
+                        }
+                    )
+                }
 
-// --- Helper para crear Paths de Firebase ---
+            } else if (!isMainMap && !isSubDismissed) {
+                // --- TUTORIAL SUB-MAPA (2 Pasos) ---
+
+                val subSteps = listOf(
+                    // PASO 1: Bienvenida a la sala (Foco Circular en el centro)
+                    TutorialStep(
+                        description = stringResource(R.string.submapa_1),
+                        focusCenter = backButtonOffset,
+                        focusRadius = 120f
+                    ),
+
+                    // PASO 2: C√≥mo salir (Foco Cuadrado en el bot√≥n atr√°s)
+                    TutorialStep(
+                        description = stringResource(R.string.submapa_2),
+                        focusCenter = pins,
+                        focusRadius = 300f,
+                    )
+                )
+
+                // L√≥gica de control de pasos
+                if (currentStepIndex < subSteps.size) {
+                    val step = subSteps[currentStepIndex]
+                    val isLastStep = currentStepIndex == subSteps.size - 1
+                    val btnText =
+                        if (isLastStep) stringResource(R.string.understand) else stringResource(R.string.next)
+
+                    GenericTutorialOverlay(
+                        description = step.description,
+                        highlightCenter = step.focusCenter,
+                        highlightRadius = step.focusRadius,
+                        buttonText = btnText,
+                        onCloseClicked = { permanent ->
+                            if (isLastStep) {
+                                showTutorialSession = false
+                                if (permanent) viewModel.dismissSubMap()
+                            } else {
+                                currentStepIndex++
+                                if (permanent) viewModel.dismissSubMap()
+                            }
+                        }
+                    )
+                }
+            }
+        }
+    }
+} // <--- AQU√ç TERMINA LA FUNCI√ìN PlanoScreen
+
+// --- Helper para crear Paths (AHORA EST√Å FUERA, COMO DEBE SER) ---
 private fun createPathFromFirebase(figura: FiguraData): Path {
     val path = Path()
     if (figura.path.isEmpty()) return path
-
     path.moveTo(figura.path[0].x, figura.path[0].y)
     for (i in 1 until figura.path.size) {
         path.lineTo(figura.path[i].x, figura.path[i].y)
     }
     path.close()
-
     val matrix = Matrix().apply {
         setScale(figura.scale, figura.scale)
         postTranslate(figura.offsetX, figura.offsetY)
Index: .idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]" date="1763075316945" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 14/11/2025 0:07 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]" date="1762634936332" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 21:48 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]" date="1762638861779" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 22:54 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,17 +0,0 @@
-Index: .idea/gradle.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/gradle.xml b/.idea/gradle.xml
---- a/.idea/gradle.xml	(revision 1c0bfc618ece38c61714e2813735e3a928424a11)
-+++ b/.idea/gradle.xml	(date 1762636134357)
-@@ -1,5 +1,6 @@
- <?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-+  <component name="GradleMigrationSettings" migrationVersion="1" />
-   <component name="GradleSettings">
-     <option name="linkedExternalProjectsSettings">
-       <GradleProjectSettings>
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,76 +0,0 @@
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml	(revision 749e348327723e32182d8232c1f468717dd07de8)
-+++ /dev/null	(revision 749e348327723e32182d8232c1f468717dd07de8)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]" date="1762203554276" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 03/11/2025 21:59 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch	(revision 749e348327723e32182d8232c1f468717dd07de8)
-+++ /dev/null	(revision 749e348327723e32182d8232c1f468717dd07de8)
-@@ -1,40 +0,0 @@
--Index: app/build.gradle.kts
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"com.github.chrisbanes:PhotoView:2.3.0\")\r\n\r\n\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/build.gradle.kts b/app/build.gradle.kts
----- a/app/build.gradle.kts	(revision 5de2861fc1fa7434418f05b9799750836a56e25d)
--+++ b/app/build.gradle.kts	(date 1762107218284)
--@@ -74,7 +74,7 @@
--     implementation("com.google.android.material:material:1.10.0")
-- 
--     // Plano Interactivo
---    implementation("com.github.chrisbanes:PhotoView:2.3.0")
--+    implementation("io.github.chrisbanes:PhotoView:2.3.0")
-- 
-- 
-- }
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.nextapp.monasterio\"> <application\r\n    android:name=\".MonasteryApplication\"\r\n    android:allowBackup=\"true\"\r\n    android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n    android:fullBackupContent=\"@xml/backup_rules\"\r\n    android:icon=\"@drawable/escudo\"\r\n    android:label=\"@string/app_name\"\r\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n    android:supportsRtl=\"true\"\r\n    android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n    <activity\r\n        android:name=\".MainActivity\"\r\n        android:exported=\"true\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n        <intent-filter>\r\n            <action android:name=\"android.intent.action.MAIN\" />\r\n            <category android:name=\"android.intent.category.LAUNCHER\" />\r\n        </intent-filter>\r\n    </activity>\r\n    <activity\r\n        android:name=\"com.nextapp.monasterio.ui.virtualvisit.VirtualVisitActivity\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\" />\r\n</application>\r\n\r\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
----- a/app/src/main/AndroidManifest.xml	(revision 5de2861fc1fa7434418f05b9799750836a56e25d)
--+++ b/app/src/main/AndroidManifest.xml	(date 1762106092917)
--@@ -19,9 +19,6 @@
--             <category android:name="android.intent.category.LAUNCHER" />
--         </intent-filter>
--     </activity>
---    <activity
---        android:name="com.nextapp.monasterio.ui.virtualvisit.VirtualVisitActivity"
---        android:theme="@style/Theme.SMOV_Monasterio" />
-- </application>
-- 
-- </manifest>
--\ No newline at end of file
-Index: .idea/gradle.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/gradle.xml b/.idea/gradle.xml
---- a/.idea/gradle.xml	(revision 749e348327723e32182d8232c1f468717dd07de8)
-+++ b/.idea/gradle.xml	(date 1762878195656)
-@@ -1,5 +1,6 @@
- <?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-+  <component name="GradleMigrationSettings" migrationVersion="1" />
-   <component name="GradleSettings">
-     <option name="linkedExternalProjectsSettings">
-       <GradleProjectSettings>
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,258 +0,0 @@
-Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.ComponentActivity\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val newDensity= Density(\r\n                density= currentDensity.density,\r\n                fontScale = currentDensity.fontScale*appFontScale\r\n            )\r\n            CompositionLocalProvider(LocalDensity provides newDensity) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    // ‚úÖ Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n    // ‚úÖ Rutas inmersivas\r\n    val immersiveRoutes = listOf(AppRoutes.PIN_DETALLE)\r\n    val isImmersive = currentRoute in immersiveRoutes\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    // ‚úÖ Actualizar t√≠tulo\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            currentTitle.value = when (route) {\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    if (isImmersive) {\r\n        // \uD83C\uDF0C Vista inmersiva sin barra ni men√∫\r\n        AppNavigationHost(\r\n            navController = navController,\r\n            modifier = Modifier.fillMaxSize()\r\n        )\r\n    } else {\r\n        // \uD83E\uDDF1 Vista normal con barra y men√∫\r\n        ModalNavigationDrawer(\r\n            drawerState = drawerState,\r\n            drawerContent = {\r\n                AppDrawerContent(\r\n                    navController = navController,\r\n                    scope = scope,\r\n                    drawerState = drawerState\r\n                )\r\n            },\r\n            gesturesEnabled = gesturesEnabled\r\n        ) {\r\n            Scaffold(\r\n                topBar = {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            IconButton(onClick = {\r\n                                Toast.makeText(context, \"Modo edici√≥n (pr√≥ximamente)\", Toast.LENGTH_SHORT).show()\r\n                            }) {\r\n                                Icon(\r\n                                    painter = painterResource(id = R.drawable.lapiz),\r\n                                    contentDescription = stringResource(id = R.string.edit_mode)\r\n                                )\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            ) { paddingValues ->\r\n                AppNavigationHost(\r\n                    navController = navController,\r\n                    modifier = Modifier.padding(paddingValues)\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
---- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
-+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1762637290372)
-@@ -1,8 +1,8 @@
- package com.nextapp.monasterio
- 
-+
- import android.os.Bundle
- import android.widget.Toast
--import androidx.activity.ComponentActivity
- import androidx.activity.compose.setContent
- import androidx.compose.foundation.layout.*
- import androidx.compose.material3.*
-@@ -18,8 +18,14 @@
- import kotlinx.coroutines.launch
- import androidx.appcompat.app.AppCompatActivity
- import androidx.appcompat.app.AppCompatDelegate
-+import androidx.compose.foundation.Image
-+import androidx.compose.foundation.border
-+import androidx.compose.ui.graphics.Color
-+import androidx.compose.ui.layout.ContentScale
-+import androidx.compose.ui.platform.LocalConfiguration
- import androidx.compose.ui.platform.LocalDensity
- import androidx.compose.ui.unit.Density
-+import androidx.compose.ui.unit.dp
- import androidx.navigation.compose.currentBackStackEntryAsState
- import com.nextapp.monasterio.utils.FontSize
- 
-@@ -52,15 +58,39 @@
-     val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)
-     val scope = rememberCoroutineScope()
- 
-+    val stringEspanyol= "Espa√±ol"
-+    val stringAleman= "Deutsch"
-+    val stringIngles= "English"
-+
-+
-+    var mostrarIdioma by remember { mutableStateOf(false) }
-+
-+    val configuration = LocalConfiguration.current
-+    val currentLanguageCode = configuration.locales[0].language
-+
-+    var idioma by remember { mutableStateOf(currentLanguageCode) }
-+
-+    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)
-+
-     val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }
- 
-     // ‚úÖ Detectar ruta actual
-     val currentBackStackEntry by navController.currentBackStackEntryAsState()
-     val currentRoute = currentBackStackEntry?.destination?.route
- 
--    // ‚úÖ Rutas inmersivas
--    val immersiveRoutes = listOf(AppRoutes.PIN_DETALLE)
--    val isImmersive = currentRoute in immersiveRoutes
-+    // --- ¬°AQU√ç EST√Å LA CORRECCI√ìN! ---
-+    // En lugar de una lista, comprobamos si la ruta "empieza por" la ruta base,
-+    // ya que ahora tiene argumentos (ej: "panorama/monastery_1")
-+
-+    // Comprueba si la ruta actual empieza por "panorama"
-+    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true
-+    // Comprueba si la ruta actual es exactamente "pin_detalle"
-+    val isPinDetalle = currentRoute == AppRoutes.PIN_DETALLE
-+
-+    // La vista es inmersiva si CUALQUIERA de las dos es verdadera
-+    val isImmersive = isPanorama || isPinDetalle
-+    // --- FIN DE LA CORRECCI√ìN ---
-+
- 
-     val gesturesEnabled = when(currentRoute){
-         AppRoutes.VIRTUAL_VISIT -> false
-@@ -71,7 +101,11 @@
-     LaunchedEffect(navController) {
-         navController.currentBackStackEntryFlow.collect { backStackEntry ->
-             val route = backStackEntry.destination.route
--            currentTitle.value = when (route) {
-+            // --- MODIFICACI√ìN SUGERIDA ---
-+            // A√±adimos esto para que no intente buscar un t√≠tulo para la ruta con argumento
-+            val routeBase = route?.split("/")?.firstOrNull() ?: route
-+
-+            currentTitle.value = when (routeBase) { // <-- Usamos routeBase
-                 AppRoutes.INFO -> context.getString(R.string.title_info_general)
-                 AppRoutes.HISTORIA -> context.getString(R.string.title_history)
-                 AppRoutes.GALERIA -> context.getString(R.string.title_gallery)
-@@ -81,6 +115,7 @@
-                 AppRoutes.RESERVA,
-                 AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)
-                 AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)
-+                // (No es necesario a√±adir PANORAMA aqu√≠, ya que ser√° inmersiva y no mostrar√° t√≠tulo)
-                 else -> context.getString(R.string.title_inicio)
-             }
-         }
-@@ -131,8 +166,46 @@
-                             }
-                         },
-                         actions = {
-+                            Box {
-+                                OutlinedIconButton(onClick = {
-+                                    mostrarIdioma = true
-+                                }) {
-+                                    val iconRes =
-+                                        if (idioma == "es" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == "de" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido
-+                                    Image(
-+                                        painter = painterResource(id = iconRes),
-+                                        contentDescription = if (idioma == "es" || idioma == stringEspanyol ) stringEspanyol
-+                                        else if (idioma == "de" || idioma == stringAleman) stringAleman else stringIngles,
-+                                        contentScale = ContentScale.Crop
-+                                    )
-+                                }
-+                                DropdownMenu(
-+                                    expanded = mostrarIdioma,
-+                                    onDismissRequest = { mostrarIdioma = false },
-+                                    modifier = Modifier.fillMaxWidth(0.8f),
-+                                ) {
-+                                    idiomasDisponibles.forEach { idiomaSlot ->
-+                                        DropdownMenuItem(
-+                                            text = { Text(idiomaSlot) },
-+                                            onClick = {
-+                                                idioma = idiomaSlot
-+                                                mostrarIdioma = false
-+                                                if(idiomaSlot == stringEspanyol)
-+                                                    LanguageHelper.saveLocale(context, "es")
-+                                                else if(idiomaSlot == stringAleman){
-+                                                    LanguageHelper.saveLocale(context, "de")
-+                                                } else LanguageHelper.saveLocale(context, "en")
-+                                            }
-+                                        )
-+                                    }
-+                                }
-+                            }
-                             IconButton(onClick = {
--                                Toast.makeText(context, "Modo edici√≥n (pr√≥ximamente)", Toast.LENGTH_SHORT).show()
-+                                Toast.makeText(
-+                                    context,
-+                                    "Modo edici√≥n (pr√≥ximamente)",
-+                                    Toast.LENGTH_SHORT
-+                                ).show()
-                             }) {
-                                 Icon(
-                                     painter = painterResource(id = R.drawable.lapiz),
-Index: settings.gradle.kts
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>pluginManagement {\r\n    repositories {\r\n        google {\r\n            content {\r\n                includeGroupByRegex(\"com\\\\.android.*\")\r\n                includeGroupByRegex(\"com\\\\.google.*\")\r\n                includeGroupByRegex(\"androidx.*\")\r\n            }\r\n        }\r\n        mavenCentral()\r\n        gradlePluginPortal()\r\n    }\r\n}\r\ndependencyResolutionManagement {\r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n    repositories {\r\n        google()\r\n        mavenCentral( )\r\n        maven { url = uri(\"https://www.jitpack.io\") }\r\n    }\r\n}\r\n\r\nrootProject.name = \"SMOV_Monasterio\"\r\ninclude(\":app\")\r\n 
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/settings.gradle.kts b/settings.gradle.kts
---- a/settings.gradle.kts	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
-+++ b/settings.gradle.kts	(date 1762637928480)
-@@ -16,7 +16,7 @@
-     repositories {
-         google()
-         mavenCentral( )
--        maven { url = uri("https://www.jitpack.io") }
-+        maven { url = uri("https://jitpack.io") }
-     }
- }
- 
-Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.*\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.*\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    navController: NavHostController,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen() }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen() }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen() }\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n\r\n        // \uD83E\uDDED M√≥dulo de visita virtual\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController)\r\n        }\r\n\r\n        composable(\r\n            route = \"pin_detalle/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            PinDetalleFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController\r\n            )\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1762638506592)
-@@ -40,9 +40,27 @@
-         composable(AppRoutes.GALERIA)  { GaleriaScreen() }
-         composable(AppRoutes.PERFIL)   { ProfileScreen() }
-         composable(AppRoutes.AJUSTES)  { AjustesScreen() }
-+
-+        composable(
-+            route = AppRoutes.PANORAMA + "/{vistaId}", // Define la ruta con argumento
-+            arguments = listOf(navArgument("vistaId") { type = NavType.StringType })
-+        ) { backStackEntry ->
-+            // Recoge el argumento
-+            val vistaId = backStackEntry.arguments?.getString("vistaId")
-+
-+            // Llama a PanoramaScreen con el ID y el NavController
-+            if (vistaId != null) {
-+                PanoramaScreen(
-+                    vistaId = vistaId,
-+                    navController = navController
-+                )
-+            }
-+        }
-+
-         composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }
-         composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }
- 
-+
-         composable(
-             route = AppRoutes.CONFIRMACION_RESERVA + "/{nombre}/{email}/{fecha}/{hora}",
-             arguments = listOf(
-Index: app/build.gradle.kts
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    implementation(libs.google.firebase.firestore)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"io.github.chrisbanes:PhotoView:2.3.0\")\r\n\r\n    // Cloudinary\r\n    implementation(\"io.coil-kt:coil-compose:2.7.0\")\r\n\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/build.gradle.kts b/app/build.gradle.kts
---- a/app/build.gradle.kts	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
-+++ b/app/build.gradle.kts	(date 1762638050671)
-@@ -80,6 +80,8 @@
-     // Cloudinary
-     implementation("io.coil-kt:coil-compose:2.7.0")
- 
-+    implementation("com.github.hannesa2:panoramagl:1.14")
-+
- 
- 
- }
-Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci√≥n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti√≥n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
---- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
-+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1762638506598)
-@@ -16,4 +16,6 @@
-     const val CONFIRMACION_RESERVA = "confirmacion_reserva"
-     const val VIRTUAL_VISIT = "virtual_visit"
-     const val PIN_DETALLE = "pin_detalle"
-+
-+    const val PANORAMA = "panorama"
- }
-Index: gradle/libs.versions.toml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>[versions]\r\nagp = \"8.11.1\" #no cambiar de la 8.11.1\r\nkotlin = \"2.0.21\"\r\ncoreKtx = \"1.17.0\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nlifecycleRuntimeKtx = \"2.9.4\"\r\nactivityCompose = \"1.11.0\"\r\ncomposeBom = \"2025.10.01\"\r\n#Practica\r\nconstraintlayoutCompose = \"1.1.1\"\r\nnavigationCompose = \"2.9.5\"\r\nfoundation = \"1.9.4\"\r\nappcompat = \"1.7.0\"\r\nmaterial = \"1.12.0\"\r\nfirebase-gservices = \"4.4.4\"\r\nfirebase-bom = \"33.1.0\"\r\nfirebaseFirestore = \"26.0.2\"\r\n\r\n[libraries]\r\nandroidx-core-ktx = { group = \"androidx.core\", name = \"core-ktx\", version.ref = \"coreKtx\" }\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\nandroidx-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nandroidx-espresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nandroidx-lifecycle-runtime-ktx = { group = \"androidx.lifecycle\", name = \"lifecycle-runtime-ktx\", version.ref = \"lifecycleRuntimeKtx\" }\r\nandroidx-activity-compose = { group = \"androidx.activity\", name = \"activity-compose\", version.ref = \"activityCompose\" }\r\nandroidx-compose-bom = { group = \"androidx.compose\", name = \"compose-bom\", version.ref = \"composeBom\" }\r\nandroidx-ui = { group = \"androidx.compose.ui\", name = \"ui\" }\r\nandroidx-ui-graphics = { group = \"androidx.compose.ui\", name = \"ui-graphics\" }\r\nandroidx-ui-tooling = { group = \"androidx.compose.ui\", name = \"ui-tooling\" }\r\nandroidx-ui-tooling-preview = { group = \"androidx.compose.ui\", name = \"ui-tooling-preview\" }\r\nandroidx-ui-test-manifest = { group = \"androidx.compose.ui\", name = \"ui-test-manifest\" }\r\nandroidx-ui-test-junit4 = { group = \"androidx.compose.ui\", name = \"ui-test-junit4\" }\r\nandroidx-material3 = { group = \"androidx.compose.material3\", name = \"material3\" }\r\n#Practica\r\nconstraintlayout-compose = { module = \"androidx.constraintlayout:constraintlayout-compose\", version.ref = \"constraintlayoutCompose\" }\r\nnavigation-compose = { module = \"androidx.navigation:navigation-compose\", version.ref = \"navigationCompose\" }\r\nandroidx-compose-foundation = { group = \"androidx.compose.foundation\", name = \"foundation\", version.ref = \"foundation\" }\r\nandroidx-appcompat = { module = \"androidx.appcompat:appcompat\", version.ref = \"appcompat\" }\r\ngoogle-material = { module = \"com.google.android.material:material\", version.ref = \"material\" }\r\nfirebase-bom = { module = \"com.google.firebase:firebase-bom\", version.ref = \"firebase-bom\" }\r\nfirebase-firestore = { module = \"com.google.firebase:firebase-firestore-ktx\" }\r\ngoogle-firebase-firestore = { group = \"com.google.firebase\", name = \"firebase-firestore\", version.ref = \"firebaseFirestore\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\nkotlin-android = { id = \"org.jetbrains.kotlin.android\", version.ref = \"kotlin\" }\r\nkotlin-compose = { id = \"org.jetbrains.kotlin.plugin.compose\", version.ref = \"kotlin\" }\r\nfirebase-gservices = { id = \"com.google.gms.google-services\", version.ref = \"firebase-gservices\" }\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
---- a/gradle/libs.versions.toml	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
-+++ b/gradle/libs.versions.toml	(date 1762638710995)
-@@ -1,6 +1,6 @@
- [versions]
- agp = "8.11.1" #no cambiar de la 8.11.1
--kotlin = "2.0.21"
-+kotlin = "2.2.0"
- coreKtx = "1.17.0"
- junit = "4.13.2"
- junitVersion = "1.3.0"
Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]" date="1763066246225" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 13/11/2025 21:35 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,17 +0,0 @@
-Index: .idea/gradle.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/gradle.xml b/.idea/gradle.xml
---- a/.idea/gradle.xml	(revision 1c0bfc618ece38c61714e2813735e3a928424a11)
-+++ b/.idea/gradle.xml	(date 1762635811330)
-@@ -1,5 +1,6 @@
- <?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-+  <component name="GradleMigrationSettings" migrationVersion="1" />
-   <component name="GradleSettings">
-     <option name="linkedExternalProjectsSettings">
-       <GradleProjectSettings>
Index: .idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,470 +0,0 @@
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun HomeScreenContent(navController:NavController, modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {\r\n        val (background, crest, title, btnVisit, btnBook) = createRefs()\r\n        Image(\r\n            painter = painterResource(id = R.drawable.monastery_background),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop,\r\n            modifier = Modifier.constrainAs(background) {\r\n                top.linkTo(parent.top)\r\n                bottom.linkTo(parent.bottom)\r\n                start.linkTo(parent.start)\r\n                end.linkTo(parent.end)\r\n                width = Dimension.fillToConstraints\r\n                height = Dimension.fillToConstraints\r\n\r\n                centerVerticallyTo(parent)\r\n            }\r\n        )\r\n        Image(\r\n            painter = painterResource(id = R.drawable.huelgas_inicio),\r\n            contentDescription = \"Escudo\",\r\n            contentScale = ContentScale.FillWidth,\r\n            modifier = Modifier\r\n                .constrainAs(crest) {\r\n                    top.linkTo(parent.top, margin = 24.dp)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.wrapContent\r\n                }\r\n        )\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIRTUAL_VISIT)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVisit) {\r\n                    bottom.linkTo(btnBook.top, margin = 72.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_map_24),\r\n                contentDescription = null,\r\n                modifier = Modifier\r\n                    .padding(end = 16.dp)\r\n                    .size(48.dp)\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.virtual_visit),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.OPCIONES_RESERVA)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnBook) {\r\n                    bottom.linkTo(parent.bottom, margin = 186.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_time_24),\r\n                contentDescription = null,\r\n                modifier = Modifier.padding(end = 16.dp).size(48.dp)\r\n\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.book_appointment),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(date 1763074982128)
-@@ -13,12 +13,15 @@
- import androidx.compose.material3.Text
- import androidx.compose.runtime.Composable
- import androidx.compose.runtime.DisposableEffect
-+import androidx.compose.ui.Alignment
- import androidx.compose.ui.Modifier
-+import androidx.compose.ui.graphics.Color
- import androidx.compose.ui.layout.ContentScale
- import androidx.compose.ui.platform.LocalConfiguration
- import androidx.compose.ui.platform.LocalContext
- import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.res.stringResource
-+import androidx.compose.ui.text.style.TextAlign
- import androidx.compose.ui.tooling.preview.Preview
- import androidx.compose.ui.unit.dp
- import androidx.compose.ui.unit.sp
-@@ -47,7 +50,7 @@
-     }
- 
-     ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {
--        val (background, crest, title, btnVisit, btnBook) = createRefs()
-+        val (background, crest, title, btnVisit, btnChild,btnBook) = createRefs()
-         Image(
-             painter = painterResource(id = R.drawable.monastery_background),
-             contentDescription = null,
-@@ -84,24 +87,63 @@
-             shape = RoundedCornerShape(20.dp),
-             modifier = Modifier
-                 .constrainAs(btnVisit) {
--                    bottom.linkTo(btnBook.top, margin = 72.dp)
--                    start.linkTo(parent.start, margin = 40.dp)
--                    end.linkTo(parent.end, margin = 40.dp)
--                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
-+                    bottom.linkTo(btnChild.top, margin = 48.dp)
-+                    start.linkTo(parent.start, margin = 20.dp)
-+                    end.linkTo(parent.end, margin = 20.dp)
-+                    width = Dimension.fillToConstraints
-                 }
--                .height(60.dp)
-         ) {
--            Icon(
--                painter = painterResource(id = R.drawable.ic_map_24),
--                contentDescription = null,
--                modifier = Modifier
--                    .padding(end = 16.dp)
--                    .size(48.dp)
--            )
--            Text(
--                stringResource(id = R.string.virtual_visit),
--                fontSize = 22.sp
--            )
-+            Row(
-+                modifier=Modifier
-+                    .padding(horizontal = 20.dp),
-+                verticalAlignment = Alignment.CenterVertically
-+            )  {
-+                Icon(
-+                    painter = painterResource(id = R.drawable.ic_map_24),
-+                    contentDescription = null,
-+                    modifier = Modifier
-+                        .padding(end = 16.dp)
-+                        .size(48.dp)
-+                )
-+                Text(
-+                    stringResource(id = R.string.virtual_visit),
-+                    fontSize = 22.sp,
-+                    textAlign = TextAlign.Center
-+                )
-+            }
-+        }
-+        Button(
-+            onClick = {
-+                navController.navigate(AppRoutes.MODO_NINYOS)
-+            },
-+            colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF6EB017)),
-+            shape = RoundedCornerShape(20.dp),
-+            modifier = Modifier
-+                .constrainAs(btnChild) {
-+                    bottom.linkTo(btnBook.top, margin = 48.dp)
-+                    start.linkTo(parent.start, margin = 20.dp)
-+                    end.linkTo(parent.end, margin = 20.dp)
-+                    width = Dimension.fillToConstraints
-+                }
-+        ) {
-+            Row(
-+                modifier=Modifier
-+                    .padding(horizontal = 20.dp),
-+                verticalAlignment = Alignment.CenterVertically
-+            )  {
-+                Icon(
-+                    painter = painterResource(id = R.drawable.outline_account_child_invert_24),
-+                    contentDescription = null,
-+                    modifier = Modifier
-+                        .padding(end = 16.dp)
-+                        .size(48.dp)
-+                )
-+                Text(
-+                    stringResource(id = R.string.child_mode),
-+                    fontSize = 22.sp,
-+                    textAlign = TextAlign.Center
-+                )
-+            }
-         }
-         Button(
-             onClick = {
-@@ -112,22 +154,30 @@
-             modifier = Modifier
-                 .constrainAs(btnBook) {
-                     bottom.linkTo(parent.bottom, margin = 186.dp)
--                    start.linkTo(parent.start, margin = 40.dp)
--                    end.linkTo(parent.end, margin = 40.dp)
--                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
-+                    start.linkTo(parent.start, margin = 20.dp)
-+                    end.linkTo(parent.end, margin = 20.dp)
-+                    width = Dimension.fillToConstraints
-                 }
--                .height(60.dp)
-         ) {
--            Icon(
--                painter = painterResource(id = R.drawable.ic_time_24),
--                contentDescription = null,
--                modifier = Modifier.padding(end = 16.dp).size(48.dp)
-+            Row(
-+                modifier=Modifier
-+                    .padding(horizontal = 20.dp),
-+                verticalAlignment = Alignment.CenterVertically
-+            ) {
-+                Icon(
-+                    painter = painterResource(id = R.drawable.ic_time_24),
-+                    contentDescription = null,
-+                    modifier = Modifier
-+                        .padding(end = 16.dp)
-+                        .size(48.dp)
- 
--            )
--            Text(
--                stringResource(id = R.string.book_appointment),
--                fontSize = 22.sp
--            )
-+                )
-+                Text(
-+                    stringResource(id = R.string.book_appointment),
-+                    fontSize = 22.sp,
-+                    textAlign = TextAlign.Center,
-+                )
-+            }
-         }
-     }
- }
-Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport androidx.compose.foundation.*\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.pager.HorizontalPager\r\nimport androidx.compose.foundation.pager.rememberPagerState\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalView\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.compose.ui.window.Dialog\r\nimport androidx.compose.ui.window.DialogProperties\r\nimport androidx.core.view.WindowCompat\r\nimport coil.compose.AsyncImage\r\nimport coil.load\r\nimport com.github.chrisbanes.photoview.PhotoView\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.models.Ubicacion\r\nimport java.util.Locale\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.res.stringResource\r\n\r\n@OptIn(ExperimentalFoundationApi::class)\r\n@Composable\r\nfun PinDetalleScreen(\r\n    pin: PinData,\r\n    onBack: () -> Unit,\r\n    onVer360: (() -> Unit)? = null\r\n) {\r\n    val view = LocalView.current\r\n    LaunchedEffect(Unit) {\r\n        val window = (view.context as? Activity)?.window\r\n        window?.let { WindowCompat.setDecorFitsSystemWindows(it, false) }\r\n    }\r\n\r\n    val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()\r\n\r\n    val pagerState = rememberPagerState(pageCount = { imagenes.size })\r\n    var selectedImageUrl by remember { mutableStateOf<String?>(null) }\r\n    var selectedImageTitle by remember { mutableStateOf<String?>(null) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val locale: Locale = configuration.locales[0]\r\n    val language = locale.language\r\n\r\n    val titulo_pin: String\r\n    val descripcion_pin: String?\r\n    val ubicacion_pin: Ubicacion?\r\n\r\n    when (language) {\r\n        \"es\" -> {\r\n            titulo_pin = pin.titulo\r\n            descripcion_pin = pin.descripcion\r\n            ubicacion_pin = pin.ubicacion\r\n        }\r\n        \"de\" -> {\r\n            titulo_pin = pin.tituloAleman\r\n            descripcion_pin = pin.descripcionAleman\r\n            ubicacion_pin = pin.ubicacionAleman\r\n        }\r\n        else -> {\r\n            titulo_pin = pin.tituloIngles\r\n            descripcion_pin = pin.descripcionIngles\r\n            ubicacion_pin = pin.ubicacionIngles\r\n        }\r\n    }\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.White)\r\n            .statusBarsPadding()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(horizontal = 16.dp)\r\n                .padding(bottom = 90.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // \uD83D\uDD19 Bot√≥n atr√°s\r\n            Box(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 16.dp),\r\n                contentAlignment = Alignment.CenterStart\r\n            ) {\r\n                Image(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.go_back),\r\n                    modifier = Modifier\r\n                        .size(28.dp)\r\n                        .clickable { onBack() }\r\n                )\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            // \uD83C\uDFF7\uFE0F T√≠tulo principal\r\n            Text(\r\n                text = buildString {\r\n                    append(titulo_pin)\r\n                    ubicacion_pin?.let { append(\" (${it.displayName})\") }\r\n                },\r\n                fontSize = 26.sp,\r\n                fontWeight = FontWeight.Bold,\r\n                color = Color.Black,\r\n                textAlign = TextAlign.Center,\r\n                modifier = Modifier.fillMaxWidth()\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(20.dp))\r\n\r\n            // \uD83D\uDDBC\uFE0F Carrusel con etiqueta (solo aqu√≠)\r\n            if (imagenes.isNotEmpty()) {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(250.dp)\r\n                        .clip(RoundedCornerShape(16.dp))\r\n                        .border(3.dp, Color.Black, RoundedCornerShape(16.dp))\r\n                ) {\r\n                    HorizontalPager(state = pagerState) { page ->\r\n                        val imagen = imagenes[page]\r\n                        Box(modifier = Modifier.fillMaxSize()) {\r\n                            AsyncImage(\r\n                                model = imagen.url,\r\n                                contentDescription = imagen.etiqueta,\r\n                                contentScale = ContentScale.Crop,\r\n                                modifier = Modifier\r\n                                    .fillMaxSize()\r\n                                    .clickable {\r\n                                        selectedImageUrl = imagen.url\r\n                                        // \uD83D\uDC47 t√≠tulo seg√∫n idioma actual\r\n                                        selectedImageTitle = when (language) {\r\n                                            \"es\" -> imagen.titulo\r\n                                            \"de\" -> imagen.tituloAleman\r\n                                            else -> imagen.tituloIngles\r\n                                        }\r\n                                    }\r\n                            )\r\n\r\n                            // \uD83D\uDD39 Etiqueta abajo a la izquierda (solo carrusel)\r\n                            Text(\r\n                                text = imagen.etiqueta,\r\n                                color = Color.White,\r\n                                fontSize = 14.sp,\r\n                                modifier = Modifier\r\n                                    .align(Alignment.BottomStart)\r\n                                    .background(Color.Black.copy(alpha = 0.6f))\r\n                                    .padding(horizontal = 10.dp, vertical = 6.dp)\r\n                            )\r\n                        }\r\n                    }\r\n\r\n                    // \uD83D\uDD38 Indicadores inferiores\r\n                    Row(\r\n                        Modifier\r\n                            .align(Alignment.BottomCenter)\r\n                            .padding(bottom = 6.dp)\r\n                    ) {\r\n                        repeat(imagenes.size) { index ->\r\n                            val selected = pagerState.currentPage == index\r\n                            Box(\r\n                                Modifier\r\n                                    .padding(3.dp)\r\n                                    .size(if (selected) 8.dp else 6.dp)\r\n                                    .background(\r\n                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),\r\n                                        shape = CircleShape\r\n                                    )\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n                Spacer(modifier = Modifier.height(24.dp))\r\n            }\r\n\r\n            // \uD83D\uDCDD Descripci√≥n\r\n            val descripcion = descripcion_pin ?: \"\"\r\n            if (descripcion.isNotBlank()) {\r\n                val textScrollState = rememberScrollState()\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .weight(1f)\r\n                        .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))\r\n                        .clip(RoundedCornerShape(8.dp))\r\n                ) {\r\n                    Text(\r\n                        text = descripcion,\r\n                        fontSize = 16.sp,\r\n                        color = Color.DarkGray,\r\n                        lineHeight = 22.sp,\r\n                        modifier = Modifier\r\n                            .fillMaxSize()\r\n                            .padding(horizontal = 12.dp, vertical = 8.dp)\r\n                            .verticalScroll(textScrollState)\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD18 Bot√≥n 360\r\n        onVer360?.let {\r\n            Box(\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomCenter)\r\n                    .fillMaxWidth()\r\n                    .background(Color.White)\r\n                    .navigationBarsPadding()\r\n                    .padding(horizontal = 16.dp, vertical = 12.dp)\r\n            ) {\r\n                Button(\r\n                    onClick = it,\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(56.dp),\r\n                    colors = ButtonDefaults.buttonColors(containerColor = Color.Black),\r\n                    shape = RoundedCornerShape(12.dp)\r\n                ) {\r\n                    Text(\r\n                        text = stringResource(R.string.see_360),\r\n                        color = Color.White,\r\n                        fontSize = 18.sp,\r\n                        fontWeight = FontWeight.Bold,\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD0D Zoom con t√≠tulo traducido\r\n        if (selectedImageUrl != null) {\r\n            ZoomableImageDialog(\r\n                imageUrl = selectedImageUrl!!,\r\n                label = selectedImageTitle ?: \"\",\r\n                onDismiss = {\r\n                    selectedImageUrl = null\r\n                    selectedImageTitle = null\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// \uD83D\uDD0D Di√°logo de zoom\r\n@Composable\r\nprivate fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {\r\n    Dialog(\r\n        onDismissRequest = onDismiss,\r\n        properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)\r\n    ) {\r\n        Box(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .background(Color.Black.copy(alpha = 0.95f))\r\n        ) {\r\n            AndroidView(\r\n                factory = { context ->\r\n                    PhotoView(context).apply {\r\n                        load(imageUrl) { crossfade(true) }\r\n                    }\r\n                },\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n\r\n            // \uD83D\uDD39 T√≠tulo (ya traducido seg√∫n idioma)\r\n            Text(\r\n                text = label,\r\n                color = Color.White,\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Medium,\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomStart)\r\n                    .background(Color.Black.copy(alpha = 0.7f))\r\n                    .padding(horizontal = 12.dp, vertical = 8.dp)\r\n            )\r\n\r\n            // ‚ùå Bot√≥n cerrar\r\n            IconButton(\r\n                onClick = onDismiss,\r\n                modifier = Modifier\r\n                    .align(Alignment.TopEnd)\r\n                    .statusBarsPadding()\r\n                    .padding(16.dp)\r\n                    .background(Color.Black.copy(alpha = 0.5f), CircleShape)\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.close),\r\n                    tint = Color.White\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(date 1763075243695)
-@@ -89,25 +89,31 @@
-     ) {
-         Column(
-             modifier = Modifier
--                .fillMaxSize()
--                .padding(horizontal = 16.dp)
--                .padding(bottom = 90.dp),
-+                .fillMaxWidth()
-+                .verticalScroll(rememberScrollState())
-+                .padding(horizontal = 16.dp),
-             horizontalAlignment = Alignment.CenterHorizontally
-         ) {
--            // üîô Bot√≥n atr√°s
--            Box(
--                modifier = Modifier
--                    .fillMaxWidth()
--                    .padding(top = 16.dp),
--                contentAlignment = Alignment.CenterStart
--            ) {
--                Image(
--                    painter = painterResource(id = R.drawable.arrow_back),
--                    contentDescription = stringResource(R.string.go_back),
--                    modifier = Modifier
--                        .size(28.dp)
--                        .clickable { onBack() }
--                )
-+            Column(
-+                modifier = Modifier
-+                    .padding(horizontal = 16.dp),
-+                horizontalAlignment = Alignment.CenterHorizontally
-+            ) {
-+                // üîô Bot√≥n atr√°s
-+                Box(
-+                    modifier = Modifier
-+                        .fillMaxWidth()
-+                        .padding(top = 16.dp),
-+                    contentAlignment = Alignment.CenterStart
-+                ) {
-+                    Image(
-+                        painter = painterResource(id = R.drawable.arrow_back),
-+                        contentDescription = stringResource(R.string.go_back),
-+                        modifier = Modifier
-+                            .size(28.dp)
-+                            .clickable { onBack() }
-+                    )
-+                }
-             }
- 
-             Spacer(modifier = Modifier.height(16.dp))
-@@ -189,8 +195,9 @@
-                         }
-                     }
-                 }
--                Spacer(modifier = Modifier.height(24.dp))
--            }
-+            }
-+
-+            Spacer(modifier = Modifier.height(24.dp))
- 
-             // üìù Descripci√≥n
-             val descripcion = descripcion_pin ?: ""
-@@ -199,7 +206,6 @@
-                 Box(
-                     modifier = Modifier
-                         .fillMaxWidth()
--                        .weight(1f)
-                         .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))
-                         .clip(RoundedCornerShape(8.dp))
-                 ) {
-@@ -215,32 +221,32 @@
-                     )
-                 }
-             }
--        }
-+
- 
--        // üîò Bot√≥n 360
--        onVer360?.let {
--            Box(
--                modifier = Modifier
--                    .align(Alignment.BottomCenter)
--                    .fillMaxWidth()
--                    .background(Color.White)
--                    .navigationBarsPadding()
--                    .padding(horizontal = 16.dp, vertical = 12.dp)
--            ) {
--                Button(
--                    onClick = it,
--                    modifier = Modifier
--                        .fillMaxWidth()
--                        .height(56.dp),
--                    colors = ButtonDefaults.buttonColors(containerColor = Color.Black),
--                    shape = RoundedCornerShape(12.dp)
--                ) {
--                    Text(
--                        text = stringResource(R.string.see_360),
--                        color = Color.White,
--                        fontSize = 18.sp,
--                        fontWeight = FontWeight.Bold,
--                    )
-+            // üîò Bot√≥n 360
-+            onVer360?.let {
-+                Box(
-+                    modifier = Modifier
-+                        .fillMaxWidth()
-+                        .background(Color.White)
-+                        .navigationBarsPadding()
-+                        .padding(horizontal = 16.dp, vertical = 12.dp)
-+                ) {
-+                    Button(
-+                        onClick = it,
-+                        modifier = Modifier
-+                            .fillMaxWidth()
-+                            .height(56.dp),
-+                        colors = ButtonDefaults.buttonColors(containerColor = Color.Black),
-+                        shape = RoundedCornerShape(12.dp)
-+                    ) {
-+                        Text(
-+                            text = stringResource(R.string.see_360),
-+                            color = Color.White,
-+                            fontSize = 18.sp,
-+                            fontWeight = FontWeight.Bold,
-+                        )
-+                    }
-                 }
-             }
-         }
-Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val newDensity= Density(\r\n                density= currentDensity.density,\r\n                fontScale = currentDensity.fontScale*appFontScale\r\n            )\r\n            CompositionLocalProvider(LocalDensity provides newDensity) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    //ViewModel para tener el estado del usuario autenticado\r\n    val authViewModel: AuthViewModel = viewModel()\r\n    val currentUser by authViewModel.currentUser.collectAsState(initial = null)\r\n    // Estado global para el modo edici√≥n\r\n    var isEditing by remember { mutableStateOf(false) }\r\n\r\n    // ... (Tu l√≥gica de idioma se queda igual)\r\n    val stringEspanyol= \"Espa√±ol\"\r\n    val stringAleman= \"Deutsch\"\r\n    val stringIngles= \"English\"\r\n    var mostrarIdioma by remember { mutableStateOf(false) }\r\n    val configuration = LocalConfiguration.current\r\n    val currentLanguageCode = configuration.locales[0].language\r\n    var idioma by remember { mutableStateOf(currentLanguageCode) }\r\n    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    // ‚úÖ Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n\r\n    // Comprueba si la ruta ES \"virtual_visit\" (esto cubre el mapa Y los pines anidados)\r\n    val isVirtualVisit = currentRoute == AppRoutes.VIRTUAL_VISIT\r\n\r\n    // Comprueba si la ruta EMPIEZA POR \"pin_360\" (la nueva vista 360)\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n\r\n    // La vista es inmersiva si es CUALQUIERA de las tres\r\n    val isImmersive = isPanorama || isVirtualVisit || isPin360\r\n\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    // ‚úÖ Actualizar t√≠tulo (Tu l√≥gica se queda igual)\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    // --- ¬°¬°2. ESTRUCTURA REFACTORIZADA (UN SOLO NAVHOST)!! ---\r\n    // (Hemos eliminado el 'if (isImmersive)' que duplicaba el NavHost)\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        // Desactivamos gestos en el mapa Y en pantallas inmersivas\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                // Solo mostramos la barra roja si NO estamos en una ruta inmersiva\r\n                if (!isImmersive) {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            // ... (Tu l√≥gica de idioma y Toast se queda igual)\r\n                            Box {\r\n                                OutlinedIconButton(onClick = {\r\n                                    mostrarIdioma = true\r\n                                }) {\r\n                                    val iconRes =\r\n                                        if (idioma == \"es\" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == \"de\" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido\r\n                                    Image(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = if (idioma == \"es\" || idioma == stringEspanyol ) stringEspanyol\r\n                                        else if (idioma == \"de\" || idioma == stringAleman) stringAleman else stringIngles,\r\n                                        contentScale = ContentScale.Crop\r\n                                    )\r\n                                }\r\n                                DropdownMenu(\r\n                                    expanded = mostrarIdioma,\r\n                                    onDismissRequest = { mostrarIdioma = false },\r\n                                    modifier = Modifier.fillMaxWidth(0.8f),\r\n                                ) {\r\n                                    idiomasDisponibles.forEach { idiomaSlot ->\r\n                                        DropdownMenuItem(\r\n                                            text = { Text(idiomaSlot) },\r\n                                            onClick = {\r\n                                                idioma = idiomaSlot\r\n                                                mostrarIdioma = false\r\n                                                if(idiomaSlot == stringEspanyol)\r\n                                                    LanguageHelper.saveLocale(context, \"es\")\r\n                                                else if(idiomaSlot == stringAleman){\r\n                                                    LanguageHelper.saveLocale(context, \"de\")\r\n                                                } else LanguageHelper.saveLocale(context, \"en\")\r\n                                            }\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            // Icono Editar: solo disponible para un usuario autenticado\r\n                            if (currentUser != null) {\r\n                                IconButton(onClick = {\r\n                                    isEditing = !isEditing // Toggle del modo edici√≥n\r\n                                    val message = if (isEditing) context.getString(R.string.edit_mode_activate_message) else context.getString(R.string.edit_mode_deactivate_message)\r\n                                    Toast.makeText(context, message, Toast.LENGTH_SHORT).show()\r\n                                }) {\r\n                                    Icon(\r\n                                        painter = painterResource(id = if (isEditing) R.drawable.baseline_done_24 else R.drawable.lapiz),\r\n                                        contentDescription = if (isEditing) stringResource(id = R.string.edit_mode_deactivate_icon) else  stringResource(id = R.string.edit_mode_activate_icon)\r\n                                    )\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            // ¬°¬°UN SOLO AppNavigationHost!!\r\n            // (Si es inmersiva, paddingValues ser√° cero porque no hay TopBar)\r\n            AppNavigationHost(\r\n                authViewModel = authViewModel,\r\n                navController = navController,\r\n                isEditing = isEditing,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
---- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
-+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1763070828153)
-@@ -116,6 +116,9 @@
-                 AppRoutes.RESERVA,
-                 AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)
-                 AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)
-+                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)
-+                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)
-+                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)
-                 else -> context.getString(R.string.title_inicio)
-             }
-         }
-@@ -208,7 +211,7 @@
-                                     Toast.makeText(context, message, Toast.LENGTH_SHORT).show()
-                                 }) {
-                                     Icon(
--                                        painter = painterResource(id = if (isEditing) R.drawable.baseline_done_24 else R.drawable.lapiz),
-+                                        painter = painterResource(id = if (isEditing) R.drawable.lapiz else R.drawable.lapiz),
-                                         contentDescription = if (isEditing) stringResource(id = R.string.edit_mode_deactivate_icon) else  stringResource(id = R.string.edit_mode_activate_icon)
-                                     )
-                                 }
-Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg√∫rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.EntradaMonasterioFirestoreScreen\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    authViewModel: AuthViewModel = viewModel(),\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    isEditing: Boolean = false,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer√≠a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // --- ¬°¬°AQU√ç EST√Å LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // --- Pantalla de Entrada del Monasterio (desde Firebase Pin)\r\n        composable(\r\n            route = AppRoutes.PIN_ENTRADA_MONASTERIO + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            EntradaMonasterioFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- FIN DE LA MODIFICACI√ìN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu√≠, ¬°est√° bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763066246026)
-@@ -44,6 +44,8 @@
-         composable(AppRoutes.INFO)     { InfoScreen() }
-         composable(AppRoutes.HISTORIA) { HistoriaScreen() }
-         composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
-+        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi√±o(navController = navController) }
-+        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyos()}
-         composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }
-         composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }
- 
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">Santa Mar√≠a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar√≠a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici√≥n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici√≥n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici√≥n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici√≥n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi√≥n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi√≥n</string>\r\n    <string name=\"profile_email\">Correo Electr√≥nico</string>\r\n    <string name=\"profile_password\">Contrase√±a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men√∫</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men√∫</string>\r\n    <string name=\"menu_info\">Informaci√≥n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer√≠a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci√≥n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer√≠a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/‚Ä¶</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci√≥n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel√©fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr√≥nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr√≥nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg√∫n simbolo no v√°lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v√°lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">¬°CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est√° preparada. Por favor, pulsa \\'enviar\\' en la aplicaci√≥n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar√≠a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci√≥n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr√≥ ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama√±o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"spanish_language\">Espa√±ol</string>\r\n    <string name=\"german_language\">Alem√°n</string>\r\n    <string name=\"english_language\">Ingl√©s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci√≥n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360¬∫</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del √°rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
-+++ b/app/src/main/res/values/strings.xml	(date 1763066246062)
-@@ -81,4 +81,10 @@
-     <string name="notdefined_destinyplane">Plano destino no definido</string>
-     <string name="plane_loading">Cargando plano...</string>
-     <string name="error_loading_plane">Error cargando datos del plano</string>
-+    <string name="child_mode">MODO NI√ëOS</string>
-+    <string name="child_mode_view">Modo Ni√±os</string>
-+    <string name="video_view">Video</string>
-+    <string name="game_view">Juego</string>
-+    <string name="video_child">VIDEO</string>
-+    <string name="game_child">JUEGO</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci√≥n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti√≥n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n    const val PIN_ENTRADA_MONASTERIO = \"entrada_monasterio\"\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
---- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
-+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763066246086)
-@@ -18,6 +18,12 @@
-     const val PIN_DETALLE = "pin_detalle"
-     const val PANORAMA = "panorama"
- 
-+    const val MODO_NINYOS = "modo_ni√±os"
-+
-+    const val VIDEO_NINYOS = "video_modo_ni√±os"
-+
-+    const val JUEGO_NINYOS = "juego_modo_ni√±os"
-+
-     const val PIN_360 = "pin_360"
-     const val PIN_ENTRADA_MONASTERIO = "entrada_monasterio"
- }
-Index: app/src/main/res/values-de/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar√≠a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus verlassen</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">√Ñnderungen speichern</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men√º √∂ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men√º schlie√üen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Stra√üe: ‚Ä¶</string>\r\n\r\n    <string name=\"info_hours\">√ñffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Heute</string>\r\n    <string name=\"title_appointment\">Termin vereinbaren</string>\r\n    <string name=\"option_phone_appointment\">Buchen Sie telefonisch</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Stunde</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst√§ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Datum ausw√§hlen</string>\r\n    <string name=\"placeholderhour_appointment\">W√§hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth√§lt ein ung√ºltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail-Adresse erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung√ºltig.</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew√§hlt werden.</string>\r\n    <string name=\"hour_no_selected\">Es muss ein Zeitpunkt ausgew√§hlt werden.</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Stornieren</string>\r\n    <string name=\"confirm_button\">BEST√ÑTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best√§tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte klicken Sie in der soeben ge√∂ffneten E-Mail-Anwendung auf ‚ÄûSenden‚Äú, um Ihre Anfrage abzuschlie√üen. Wir werden Ihnen die Verf√ºgbarkeit per E-Mail best√§tigen..</string>\r\n    <string name=\"email_subject\">Reservierungsanfrage ansehen - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich m√∂chte hiermit eine Reservierung f√ºr einen Besuch im Kloster anfragen. Bitte geben Sie folgende Daten an:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre Best√§tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr√º√üen,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden.</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw√§hlen</string>\r\n    <string name=\"font_size_select\">W√§hlen Sie die Schriftgr√∂√üe aus</string>\r\n    <string name=\"font_extrabig\">Extra gro√ü</string>\r\n    <string name=\"font_normal\">Mittlere</string>\r\n    <string name=\"font_big\">Gro√ü</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl√§chen ausblenden</string>\r\n    <string name=\"close\">Schlie√üen</string>\r\n    <string name=\"go_back\">Geh zur√ºck</string>\r\n    <string name=\"see_360\">360¬∫-Ansicht</string>\r\n    <string name=\"contentdescription_image_pin\">Bild anpinnen (zum Vergr√∂√üern anklicken)</string>\r\n    <string name=\"readjust\">Zur√ºcksetzen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Zunahme</string>\r\n    <string name=\"out_interactive_area\">Au√üerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Undefiniertes Ziel</string>\r\n    <string name=\"notdefined_destinyplane\">Zielebene nicht definiert</string>\r\n    <string name=\"plane_loading\">Ladeplan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
---- a/app/src/main/res/values-de/strings.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
-+++ b/app/src/main/res/values-de/strings.xml	(date 1763066246094)
-@@ -86,4 +86,10 @@
-     <string name="notdefined_destinyplane">Zielebene nicht definiert</string>
-     <string name="plane_loading">Ladeplan...</string>
-     <string name="error_loading_plane">Fehler beim Laden der Plandaten</string>
-+    <string name="child_mode">KINDERMODUS</string>
-+    <string name="child_mode_view">Kindermodus</string>
-+    <string name="video_view">Video</string>
-+    <string name="game_view">Spiel</string>
-+    <string name="video_child">VIDEO</string>
-+    <string name="game_child">SPIEL</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/res/values-en/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar√≠a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: ‚Ä¶</string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360¬∫</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
---- a/app/src/main/res/values-en/strings.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
-+++ b/app/src/main/res/values-en/strings.xml	(date 1763066246105)
-@@ -85,5 +85,11 @@
-     <string name="notdefined_destinyplane">Destination plane not defined</string>
-     <string name="plane_loading">Loading plane...</string>
-     <string name="error_loading_plane">Error loading plan data</string>
-+    <string name="child_mode">KIDS MODE</string>
-+    <string name="child_mode_view">Kids Mode</string>
-+    <string name="video_view">Video</string>
-+    <string name="game_view">Game</string>
-+    <string name="video_child">VIDEO</string>
-+    <string name="game_child">GAME</string>
- 
- </resources>
-\ No newline at end of file
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.nextapp.monasterio\"> <application\r\n    android:name=\".MonasteryApplication\"\r\n    android:allowBackup=\"true\"\r\n    android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n    android:fullBackupContent=\"@xml/backup_rules\"\r\n    android:icon=\"@drawable/escudo\"\r\n    android:label=\"@string/app_name\"\r\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n    android:supportsRtl=\"true\"\r\n    android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n    <activity\r\n        android:name=\".MainActivity\"\r\n        android:exported=\"true\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n        <intent-filter>\r\n            <action android:name=\"android.intent.action.MAIN\" />\r\n            <category android:name=\"android.intent.category.LAUNCHER\" />\r\n        </intent-filter>\r\n    </activity>\r\n</application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
---- a/app/src/main/AndroidManifest.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
-+++ b/app/src/main/AndroidManifest.xml	(date 1763071551234)
-@@ -1,6 +1,8 @@
- <?xml version="1.0" encoding="utf-8"?>
- <manifest xmlns:android="http://schemas.android.com/apk/res/android"
--    package="com.nextapp.monasterio"> <application
-+    package="com.nextapp.monasterio">
-+    <uses-permission android:name="android.permission.INTERNET"/>
-+    <application
-     android:name=".MonasteryApplication"
-     android:allowBackup="true"
-     android:dataExtractionRules="@xml/data_extraction_rules"
-@@ -9,11 +11,13 @@
-     android:label="@string/app_name"
-     android:roundIcon="@mipmap/ic_launcher_round"
-     android:supportsRtl="true"
--    android:theme="@style/Theme.SMOV_Monasterio">
-+    android:theme="@style/Theme.SMOV_Monasterio"
-+        android:usesCleartextTraffic="true">
-     <activity
-         android:name=".MainActivity"
-         android:exported="true"
--        android:theme="@style/Theme.SMOV_Monasterio">
-+        android:theme="@style/Theme.SMOV_Monasterio"
-+        android:configChanges="orientation|screenSize|keyboardHidden">
-         <intent-filter>
-             <action android:name="android.intent.action.MAIN" />
-             <category android:name="android.intent.category.LAUNCHER" />
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,17 +0,0 @@
-Index: .idea/gradle.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/gradle.xml b/.idea/gradle.xml
---- a/.idea/gradle.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ b/.idea/gradle.xml	(date 1762631053346)
-@@ -1,5 +1,6 @@
- <?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-+  <component name="GradleMigrationSettings" migrationVersion="1" />
-   <component name="GradleSettings">
-     <option name="linkedExternalProjectsSettings">
-       <GradleProjectSettings>
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]" date="1762878199117" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/11/2025 17:23 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]" date="1762639210614" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 08/11/2025 23:00 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]" date="1762636073541" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 22:07 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_1.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_1.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_1.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_1.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1" date="1762636134377" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 22:08 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]" date="1762636094033" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 22:08 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,17 +0,0 @@
-Index: .idea/gradle.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/gradle.xml b/.idea/gradle.xml
---- a/.idea/gradle.xml	(revision 1c0bfc618ece38c61714e2813735e3a928424a11)
-+++ b/.idea/gradle.xml	(date 1762636073534)
-@@ -1,5 +1,6 @@
- <?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-+  <component name="GradleMigrationSettings" migrationVersion="1" />
-   <component name="GradleSettings">
-     <option name="linkedExternalProjectsSettings">
-       <GradleProjectSettings>
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,17 +0,0 @@
-Index: .idea/gradle.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/gradle.xml b/.idea/gradle.xml
---- a/.idea/gradle.xml	(revision 1c0bfc618ece38c61714e2813735e3a928424a11)
-+++ b/.idea/gradle.xml	(date 1762636093999)
-@@ -1,5 +1,6 @@
- <?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-+  <component name="GradleMigrationSettings" migrationVersion="1" />
-   <component name="GradleSettings">
-     <option name="linkedExternalProjectsSettings">
-       <GradleProjectSettings>
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]" date="1762636735672" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 22:18 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,401 +0,0 @@
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.nextapp.monasterio\"> <application\r\n    android:name=\".MonasteryApplication\"\r\n    android:allowBackup=\"true\"\r\n    android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n    android:fullBackupContent=\"@xml/backup_rules\"\r\n    android:icon=\"@drawable/escudo\"\r\n    android:label=\"@string/app_name\"\r\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n    android:supportsRtl=\"true\"\r\n    android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n    <activity\r\n        android:name=\".MainActivity\"\r\n        android:exported=\"true\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n        <intent-filter>\r\n            <action android:name=\"android.intent.action.MAIN\" />\r\n            <category android:name=\"android.intent.category.LAUNCHER\" />\r\n        </intent-filter>\r\n    </activity>\r\n</application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
---- a/app/src/main/AndroidManifest.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
-+++ b/app/src/main/AndroidManifest.xml	(date 1763063995443)
-@@ -1,6 +1,8 @@
- <?xml version="1.0" encoding="utf-8"?>
- <manifest xmlns:android="http://schemas.android.com/apk/res/android"
--    package="com.nextapp.monasterio"> <application
-+    package="com.nextapp.monasterio">
-+    <uses-permission android:name="android.permission.INTERNET"/>
-+    <application
-     android:name=".MonasteryApplication"
-     android:allowBackup="true"
-     android:dataExtractionRules="@xml/data_extraction_rules"
-@@ -9,7 +11,8 @@
-     android:label="@string/app_name"
-     android:roundIcon="@mipmap/ic_launcher_round"
-     android:supportsRtl="true"
--    android:theme="@style/Theme.SMOV_Monasterio">
-+    android:theme="@style/Theme.SMOV_Monasterio"
-+        android:usesCleartextTraffic="true">
-     <activity
-         android:name=".MainActivity"
-         android:exported="true"
-Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val newDensity= Density(\r\n                density= currentDensity.density,\r\n                fontScale = currentDensity.fontScale*appFontScale\r\n            )\r\n            CompositionLocalProvider(LocalDensity provides newDensity) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    // ... (Tu l√≥gica de idioma se queda igual)\r\n    val stringEspanyol= \"Espa√±ol\"\r\n    val stringAleman= \"Deutsch\"\r\n    val stringIngles= \"English\"\r\n    var mostrarIdioma by remember { mutableStateOf(false) }\r\n    val configuration = LocalConfiguration.current\r\n    val currentLanguageCode = configuration.locales[0].language\r\n    var idioma by remember { mutableStateOf(currentLanguageCode) }\r\n    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    // ‚úÖ Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n\r\n    // Comprueba si la ruta ES \"virtual_visit\" (esto cubre el mapa Y los pines anidados)\r\n    val isVirtualVisit = currentRoute == AppRoutes.VIRTUAL_VISIT\r\n\r\n    // Comprueba si la ruta EMPIEZA POR \"pin_360\" (la nueva vista 360)\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n\r\n    // La vista es inmersiva si es CUALQUIERA de las tres\r\n    val isImmersive = isPanorama || isVirtualVisit || isPin360\r\n\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    // ‚úÖ Actualizar t√≠tulo (Tu l√≥gica se queda igual)\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    // --- ¬°¬°2. ESTRUCTURA REFACTORIZADA (UN SOLO NAVHOST)!! ---\r\n    // (Hemos eliminado el 'if (isImmersive)' que duplicaba el NavHost)\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        // Desactivamos gestos en el mapa Y en pantallas inmersivas\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                // Solo mostramos la barra roja si NO estamos en una ruta inmersiva\r\n                if (!isImmersive) {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            // ... (Tu l√≥gica de idioma y Toast se queda igual)\r\n                            Box {\r\n                                OutlinedIconButton(onClick = {\r\n                                    mostrarIdioma = true\r\n                                }) {\r\n                                    val iconRes =\r\n                                        if (idioma == \"es\" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == \"de\" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido\r\n                                    Image(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = if (idioma == \"es\" || idioma == stringEspanyol ) stringEspanyol\r\n                                        else if (idioma == \"de\" || idioma == stringAleman) stringAleman else stringIngles,\r\n                                        contentScale = ContentScale.Crop\r\n                                    )\r\n                                }\r\n                                DropdownMenu(\r\n                                    expanded = mostrarIdioma,\r\n                                    onDismissRequest = { mostrarIdioma = false },\r\n                                    modifier = Modifier.fillMaxWidth(0.8f),\r\n                                ) {\r\n                                    idiomasDisponibles.forEach { idiomaSlot ->\r\n                                        DropdownMenuItem(\r\n                                            text = { Text(idiomaSlot) },\r\n                                            onClick = {\r\n                                                idioma = idiomaSlot\r\n                                                mostrarIdioma = false\r\n                                                if(idiomaSlot == stringEspanyol)\r\n                                                    LanguageHelper.saveLocale(context, \"es\")\r\n                                                else if(idiomaSlot == stringAleman){\r\n                                                    LanguageHelper.saveLocale(context, \"de\")\r\n                                                } else LanguageHelper.saveLocale(context, \"en\")\r\n                                            }\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n                            IconButton(onClick = {\r\n                                Toast.makeText(\r\n                                    context,\r\n                                    \"Modo edici√≥n (pr√≥ximamente)\",\r\n                                    Toast.LENGTH_SHORT\r\n                                ).show()\r\n                            }) {\r\n                                Icon(\r\n                                    painter = painterResource(id = R.drawable.lapiz),\r\n                                    contentDescription = stringResource(id = R.string.edit_mode)\r\n                                )\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            // ¬°¬°UN SOLO AppNavigationHost!!\r\n            // (Si es inmersiva, paddingValues ser√° cero porque no hay TopBar)\r\n            AppNavigationHost(\r\n                navController = navController,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
---- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
-+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1763062898144)
-@@ -110,6 +110,9 @@
-                 AppRoutes.RESERVA,
-                 AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)
-                 AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)
-+                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)
-+                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)
-+                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)
-                 else -> context.getString(R.string.title_inicio)
-             }
-         }
-Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg√∫rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen() }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer√≠a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // --- ¬°¬°AQU√ç EST√Å LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n        // --- FIN DE LA MODIFICACI√ìN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu√≠, ¬°est√° bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763062855767)
-@@ -41,6 +41,8 @@
-         composable(AppRoutes.HISTORIA) { HistoriaScreen() }
-         composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
-         composable(AppRoutes.PERFIL)   { ProfileScreen() }
-+        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi√±o(navController = navController) }
-+        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyos()}
-         composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }
- 
-         // Ruta de Panorama 360 (Inmersiva, desde Galer√≠a / res/raw)
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">Santa Mar√≠a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar√≠a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode\">Modo edici√≥n</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men√∫</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men√∫</string>\r\n    <string name=\"menu_info\">Informaci√≥n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer√≠a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci√≥n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer√≠a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/‚Ä¶</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci√≥n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel√©fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr√≥nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr√≥nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg√∫n simbolo no v√°lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v√°lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">¬°CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est√° preparada. Por favor, pulsa \\'enviar\\' en la aplicaci√≥n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar√≠a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci√≥n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr√≥ ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama√±o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"spanish_language\">Espa√±ol</string>\r\n    <string name=\"german_language\">Alem√°n</string>\r\n    <string name=\"english_language\">Ingl√©s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci√≥n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360¬∫</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del √°rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
-+++ b/app/src/main/res/values/strings.xml	(date 1763060335813)
-@@ -73,4 +73,10 @@
-     <string name="notdefined_destinyplane">Plano destino no definido</string>
-     <string name="plane_loading">Cargando plano...</string>
-     <string name="error_loading_plane">Error cargando datos del plano</string>
-+    <string name="child_mode">MODO NI√ëOS</string>
-+    <string name="child_mode_view">Modo Ni√±os</string>
-+    <string name="video_view">Video</string>
-+    <string name="game_view">Juego</string>
-+    <string name="video_child">VIDEO</string>
-+    <string name="game_child">JUEGO</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun HomeScreenContent(navController:NavController, modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {\r\n        val (background, crest, title, btnVisit, btnBook) = createRefs()\r\n        Image(\r\n            painter = painterResource(id = R.drawable.monastery_background),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop,\r\n            modifier = Modifier.constrainAs(background) {\r\n                top.linkTo(parent.top)\r\n                bottom.linkTo(parent.bottom)\r\n                start.linkTo(parent.start)\r\n                end.linkTo(parent.end)\r\n                width = Dimension.fillToConstraints\r\n                height = Dimension.fillToConstraints\r\n\r\n                centerVerticallyTo(parent)\r\n            }\r\n        )\r\n        Image(\r\n            painter = painterResource(id = R.drawable.huelgas_inicio),\r\n            contentDescription = \"Escudo\",\r\n            contentScale = ContentScale.FillWidth,\r\n            modifier = Modifier\r\n                .constrainAs(crest) {\r\n                    top.linkTo(parent.top, margin = 24.dp)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.wrapContent\r\n                }\r\n        )\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIRTUAL_VISIT)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVisit) {\r\n                    bottom.linkTo(btnBook.top, margin = 72.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_map_24),\r\n                contentDescription = null,\r\n                modifier = Modifier\r\n                    .padding(end = 16.dp)\r\n                    .size(48.dp)\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.virtual_visit),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.OPCIONES_RESERVA)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnBook) {\r\n                    bottom.linkTo(parent.bottom, margin = 186.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_time_24),\r\n                contentDescription = null,\r\n                modifier = Modifier.padding(end = 16.dp).size(48.dp)\r\n\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.book_appointment),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(date 1763059354437)
-@@ -13,12 +13,15 @@
- import androidx.compose.material3.Text
- import androidx.compose.runtime.Composable
- import androidx.compose.runtime.DisposableEffect
-+import androidx.compose.ui.Alignment
- import androidx.compose.ui.Modifier
-+import androidx.compose.ui.graphics.Color
- import androidx.compose.ui.layout.ContentScale
- import androidx.compose.ui.platform.LocalConfiguration
- import androidx.compose.ui.platform.LocalContext
- import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.res.stringResource
-+import androidx.compose.ui.text.style.TextAlign
- import androidx.compose.ui.tooling.preview.Preview
- import androidx.compose.ui.unit.dp
- import androidx.compose.ui.unit.sp
-@@ -47,7 +50,7 @@
-     }
- 
-     ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {
--        val (background, crest, title, btnVisit, btnBook) = createRefs()
-+        val (background, crest, title, btnVisit, btnChild,btnBook) = createRefs()
-         Image(
-             painter = painterResource(id = R.drawable.monastery_background),
-             contentDescription = null,
-@@ -84,24 +87,63 @@
-             shape = RoundedCornerShape(20.dp),
-             modifier = Modifier
-                 .constrainAs(btnVisit) {
--                    bottom.linkTo(btnBook.top, margin = 72.dp)
-+                    bottom.linkTo(btnChild.top, margin = 48.dp)
-                     start.linkTo(parent.start, margin = 40.dp)
-                     end.linkTo(parent.end, margin = 40.dp)
--                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
-+                    width = Dimension.fillToConstraints
-                 }
--                .height(60.dp)
-         ) {
--            Icon(
--                painter = painterResource(id = R.drawable.ic_map_24),
--                contentDescription = null,
--                modifier = Modifier
--                    .padding(end = 16.dp)
--                    .size(48.dp)
--            )
--            Text(
--                stringResource(id = R.string.virtual_visit),
--                fontSize = 22.sp
--            )
-+            Row(
-+                modifier=Modifier
-+                    .padding(horizontal = 20.dp),
-+                verticalAlignment = Alignment.CenterVertically
-+            )  {
-+                Icon(
-+                    painter = painterResource(id = R.drawable.ic_map_24),
-+                    contentDescription = null,
-+                    modifier = Modifier
-+                        .padding(end = 16.dp)
-+                        .size(48.dp)
-+                )
-+                Text(
-+                    stringResource(id = R.string.virtual_visit),
-+                    fontSize = 22.sp,
-+                    textAlign = TextAlign.Center
-+                )
-+            }
-+        }
-+        Button(
-+            onClick = {
-+                navController.navigate(AppRoutes.MODO_NINYOS)
-+            },
-+            colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF6EB017)),
-+            shape = RoundedCornerShape(20.dp),
-+            modifier = Modifier
-+                .constrainAs(btnChild) {
-+                    bottom.linkTo(btnBook.top, margin = 48.dp)
-+                    start.linkTo(parent.start, margin = 40.dp)
-+                    end.linkTo(parent.end, margin = 40.dp)
-+                    width = Dimension.fillToConstraints
-+                }
-+        ) {
-+            Row(
-+                modifier=Modifier
-+                    .padding(horizontal = 20.dp),
-+                verticalAlignment = Alignment.CenterVertically
-+            )  {
-+                Icon(
-+                    painter = painterResource(id = R.drawable.outline_account_child_invert_24),
-+                    contentDescription = null,
-+                    modifier = Modifier
-+                        .padding(end = 16.dp)
-+                        .size(48.dp)
-+                )
-+                Text(
-+                    stringResource(id = R.string.child_mode),
-+                    fontSize = 22.sp,
-+                    textAlign = TextAlign.Center
-+                )
-+            }
-         }
-         Button(
-             onClick = {
-@@ -114,20 +156,28 @@
-                     bottom.linkTo(parent.bottom, margin = 186.dp)
-                     start.linkTo(parent.start, margin = 40.dp)
-                     end.linkTo(parent.end, margin = 40.dp)
--                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
-+                    width = Dimension.fillToConstraints
-                 }
--                .height(60.dp)
-         ) {
--            Icon(
--                painter = painterResource(id = R.drawable.ic_time_24),
--                contentDescription = null,
--                modifier = Modifier.padding(end = 16.dp).size(48.dp)
-+            Row(
-+                modifier=Modifier
-+                    .padding(horizontal = 20.dp),
-+                verticalAlignment = Alignment.CenterVertically
-+            ) {
-+                Icon(
-+                    painter = painterResource(id = R.drawable.ic_time_24),
-+                    contentDescription = null,
-+                    modifier = Modifier
-+                        .padding(end = 16.dp)
-+                        .size(48.dp)
- 
--            )
--            Text(
--                stringResource(id = R.string.book_appointment),
--                fontSize = 22.sp
--            )
-+                )
-+                Text(
-+                    stringResource(id = R.string.book_appointment),
-+                    fontSize = 22.sp,
-+                    textAlign = TextAlign.Center
-+                )
-+            }
-         }
-     }
- }
-Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport androidx.compose.foundation.*\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.pager.HorizontalPager\r\nimport androidx.compose.foundation.pager.rememberPagerState\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalView\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.compose.ui.window.Dialog\r\nimport androidx.compose.ui.window.DialogProperties\r\nimport androidx.core.view.WindowCompat\r\nimport coil.compose.AsyncImage\r\nimport coil.load\r\nimport com.github.chrisbanes.photoview.PhotoView\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.models.Ubicacion\r\nimport java.util.Locale\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.res.stringResource\r\n\r\n@OptIn(ExperimentalFoundationApi::class)\r\n@Composable\r\nfun PinDetalleScreen(\r\n    pin: PinData,\r\n    onBack: () -> Unit,\r\n    onVer360: (() -> Unit)? = null\r\n) {\r\n    val view = LocalView.current\r\n    LaunchedEffect(Unit) {\r\n        val window = (view.context as? Activity)?.window\r\n        window?.let { WindowCompat.setDecorFitsSystemWindows(it, false) }\r\n    }\r\n\r\n    val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()\r\n\r\n    val pagerState = rememberPagerState(pageCount = { imagenes.size })\r\n    var selectedImageUrl by remember { mutableStateOf<String?>(null) }\r\n    var selectedImageTitle by remember { mutableStateOf<String?>(null) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val locale: Locale = configuration.locales[0]\r\n    val language = locale.language\r\n\r\n    val titulo_pin: String\r\n    val descripcion_pin: String?\r\n    val ubicacion_pin: Ubicacion?\r\n\r\n    when (language) {\r\n        \"es\" -> {\r\n            titulo_pin = pin.titulo\r\n            descripcion_pin = pin.descripcion\r\n            ubicacion_pin = pin.ubicacion\r\n        }\r\n        \"de\" -> {\r\n            titulo_pin = pin.tituloAleman\r\n            descripcion_pin = pin.descripcionAleman\r\n            ubicacion_pin = pin.ubicacionAleman\r\n        }\r\n        else -> {\r\n            titulo_pin = pin.tituloIngles\r\n            descripcion_pin = pin.descripcionIngles\r\n            ubicacion_pin = pin.ubicacionIngles\r\n        }\r\n    }\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.White)\r\n            .statusBarsPadding()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(horizontal = 16.dp)\r\n                .padding(bottom = 90.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // \uD83D\uDD19 Bot√≥n atr√°s\r\n            Box(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 16.dp),\r\n                contentAlignment = Alignment.CenterStart\r\n            ) {\r\n                Image(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.go_back),\r\n                    modifier = Modifier\r\n                        .size(28.dp)\r\n                        .clickable { onBack() }\r\n                )\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            // \uD83C\uDFF7\uFE0F T√≠tulo principal\r\n            Text(\r\n                text = buildString {\r\n                    append(titulo_pin)\r\n                    ubicacion_pin?.let { append(\" (${it.displayName})\") }\r\n                },\r\n                fontSize = 26.sp,\r\n                fontWeight = FontWeight.Bold,\r\n                color = Color.Black,\r\n                textAlign = TextAlign.Center,\r\n                modifier = Modifier.fillMaxWidth()\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(20.dp))\r\n\r\n            // \uD83D\uDDBC\uFE0F Carrusel con etiqueta (solo aqu√≠)\r\n            if (imagenes.isNotEmpty()) {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(250.dp)\r\n                        .clip(RoundedCornerShape(16.dp))\r\n                        .border(3.dp, Color.Black, RoundedCornerShape(16.dp))\r\n                ) {\r\n                    HorizontalPager(state = pagerState) { page ->\r\n                        val imagen = imagenes[page]\r\n                        Box(modifier = Modifier.fillMaxSize()) {\r\n                            AsyncImage(\r\n                                model = imagen.url,\r\n                                contentDescription = imagen.etiqueta,\r\n                                contentScale = ContentScale.Crop,\r\n                                modifier = Modifier\r\n                                    .fillMaxSize()\r\n                                    .clickable {\r\n                                        selectedImageUrl = imagen.url\r\n                                        // \uD83D\uDC47 t√≠tulo seg√∫n idioma actual\r\n                                        selectedImageTitle = when (language) {\r\n                                            \"es\" -> imagen.titulo\r\n                                            \"de\" -> imagen.tituloAleman\r\n                                            else -> imagen.tituloIngles\r\n                                        }\r\n                                    }\r\n                            )\r\n\r\n                            // \uD83D\uDD39 Etiqueta abajo a la izquierda (solo carrusel)\r\n                            Text(\r\n                                text = imagen.etiqueta,\r\n                                color = Color.White,\r\n                                fontSize = 14.sp,\r\n                                modifier = Modifier\r\n                                    .align(Alignment.BottomStart)\r\n                                    .background(Color.Black.copy(alpha = 0.6f))\r\n                                    .padding(horizontal = 10.dp, vertical = 6.dp)\r\n                            )\r\n                        }\r\n                    }\r\n\r\n                    // \uD83D\uDD38 Indicadores inferiores\r\n                    Row(\r\n                        Modifier\r\n                            .align(Alignment.BottomCenter)\r\n                            .padding(bottom = 6.dp)\r\n                    ) {\r\n                        repeat(imagenes.size) { index ->\r\n                            val selected = pagerState.currentPage == index\r\n                            Box(\r\n                                Modifier\r\n                                    .padding(3.dp)\r\n                                    .size(if (selected) 8.dp else 6.dp)\r\n                                    .background(\r\n                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),\r\n                                        shape = CircleShape\r\n                                    )\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n                Spacer(modifier = Modifier.height(24.dp))\r\n            }\r\n\r\n            // \uD83D\uDCDD Descripci√≥n\r\n            val descripcion = descripcion_pin ?: \"\"\r\n            if (descripcion.isNotBlank()) {\r\n                val textScrollState = rememberScrollState()\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .weight(1f)\r\n                        .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))\r\n                        .clip(RoundedCornerShape(8.dp))\r\n                ) {\r\n                    Text(\r\n                        text = descripcion,\r\n                        fontSize = 16.sp,\r\n                        color = Color.DarkGray,\r\n                        lineHeight = 22.sp,\r\n                        modifier = Modifier\r\n                            .fillMaxSize()\r\n                            .padding(horizontal = 12.dp, vertical = 8.dp)\r\n                            .verticalScroll(textScrollState)\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD18 Bot√≥n 360\r\n        onVer360?.let {\r\n            Box(\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomCenter)\r\n                    .fillMaxWidth()\r\n                    .background(Color.White)\r\n                    .navigationBarsPadding()\r\n                    .padding(horizontal = 16.dp, vertical = 12.dp)\r\n            ) {\r\n                Button(\r\n                    onClick = it,\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(56.dp),\r\n                    colors = ButtonDefaults.buttonColors(containerColor = Color.Black),\r\n                    shape = RoundedCornerShape(12.dp)\r\n                ) {\r\n                    Text(\r\n                        text = stringResource(R.string.see_360),\r\n                        color = Color.White,\r\n                        fontSize = 18.sp,\r\n                        fontWeight = FontWeight.Bold,\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD0D Zoom con t√≠tulo traducido\r\n        if (selectedImageUrl != null) {\r\n            ZoomableImageDialog(\r\n                imageUrl = selectedImageUrl!!,\r\n                label = selectedImageTitle ?: \"\",\r\n                onDismiss = {\r\n                    selectedImageUrl = null\r\n                    selectedImageTitle = null\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// \uD83D\uDD0D Di√°logo de zoom\r\n@Composable\r\nprivate fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {\r\n    Dialog(\r\n        onDismissRequest = onDismiss,\r\n        properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)\r\n    ) {\r\n        Box(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .background(Color.Black.copy(alpha = 0.95f))\r\n        ) {\r\n            AndroidView(\r\n                factory = { context ->\r\n                    PhotoView(context).apply {\r\n                        load(imageUrl) { crossfade(true) }\r\n                    }\r\n                },\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n\r\n            // \uD83D\uDD39 T√≠tulo (ya traducido seg√∫n idioma)\r\n            Text(\r\n                text = label,\r\n                color = Color.White,\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Medium,\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomStart)\r\n                    .background(Color.Black.copy(alpha = 0.7f))\r\n                    .padding(horizontal = 12.dp, vertical = 8.dp)\r\n            )\r\n\r\n            // ‚ùå Bot√≥n cerrar\r\n            IconButton(\r\n                onClick = onDismiss,\r\n                modifier = Modifier\r\n                    .align(Alignment.TopEnd)\r\n                    .statusBarsPadding()\r\n                    .padding(16.dp)\r\n                    .background(Color.Black.copy(alpha = 0.5f), CircleShape)\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.close),\r\n                    tint = Color.White\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(date 1763054038537)
-@@ -189,7 +189,6 @@
-                         }
-                     }
-                 }
--                Spacer(modifier = Modifier.height(24.dp))
-             }
- 
-             // üìù Descripci√≥n
-@@ -216,7 +215,7 @@
-                 }
-             }
-         }
--
-+        Spacer(modifier = Modifier.height(24.dp))
-         // üîò Bot√≥n 360
-         onVer360?.let {
-             Box(
-Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci√≥n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti√≥n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
---- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
-+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763058434043)
-@@ -18,5 +18,11 @@
-     const val PIN_DETALLE = "pin_detalle"
-     const val PANORAMA = "panorama"
- 
-+    const val MODO_NINYOS = "modo_ni√±os"
-+
-+    const val VIDEO_NINYOS = "video_modo_ni√±os"
-+
-+    const val JUEGO_NINYOS = "juego_modo_ni√±os"
-+
-     const val PIN_360 = "pin_360"
- }
-Index: app/src/main/res/values-de/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar√≠a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode\">Bearbeiten</string>\r\n    <string name=\"navigation_drawer_open\">Men√º √∂ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men√º schlie√üen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Stra√üe: ‚Ä¶</string>\r\n\r\n    <string name=\"info_hours\">√ñffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Heute</string>\r\n    <string name=\"title_appointment\">Termin vereinbaren</string>\r\n    <string name=\"option_phone_appointment\">Buchen Sie telefonisch</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Stunde</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst√§ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Datum ausw√§hlen</string>\r\n    <string name=\"placeholderhour_appointment\">W√§hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth√§lt ein ung√ºltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail-Adresse erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung√ºltig.</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew√§hlt werden.</string>\r\n    <string name=\"hour_no_selected\">Es muss ein Zeitpunkt ausgew√§hlt werden.</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Stornieren</string>\r\n    <string name=\"confirm_button\">BEST√ÑTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best√§tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte klicken Sie in der soeben ge√∂ffneten E-Mail-Anwendung auf ‚ÄûSenden‚Äú, um Ihre Anfrage abzuschlie√üen. Wir werden Ihnen die Verf√ºgbarkeit per E-Mail best√§tigen..</string>\r\n    <string name=\"email_subject\">Reservierungsanfrage ansehen - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich m√∂chte hiermit eine Reservierung f√ºr einen Besuch im Kloster anfragen. Bitte geben Sie folgende Daten an:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre Best√§tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr√º√üen,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden.</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw√§hlen</string>\r\n    <string name=\"font_size_select\">W√§hlen Sie die Schriftgr√∂√üe aus</string>\r\n    <string name=\"font_extrabig\">Extra gro√ü</string>\r\n    <string name=\"font_normal\">Mittlere</string>\r\n    <string name=\"font_big\">Gro√ü</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl√§chen ausblenden</string>\r\n    <string name=\"close\">Schlie√üen</string>\r\n    <string name=\"go_back\">Geh zur√ºck</string>\r\n    <string name=\"see_360\">360¬∫-Ansicht</string>\r\n    <string name=\"contentdescription_image_pin\">Bild anpinnen (zum Vergr√∂√üern anklicken)</string>\r\n    <string name=\"readjust\">Zur√ºcksetzen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Zunahme</string>\r\n    <string name=\"out_interactive_area\">Au√üerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Undefiniertes Ziel</string>\r\n    <string name=\"notdefined_destinyplane\">Zielebene nicht definiert</string>\r\n    <string name=\"plane_loading\">Ladeplan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
---- a/app/src/main/res/values-de/strings.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
-+++ b/app/src/main/res/values-de/strings.xml	(date 1763060335818)
-@@ -78,4 +78,10 @@
-     <string name="notdefined_destinyplane">Zielebene nicht definiert</string>
-     <string name="plane_loading">Ladeplan...</string>
-     <string name="error_loading_plane">Fehler beim Laden der Plandaten</string>
-+    <string name="child_mode">KINDERMODUS</string>
-+    <string name="child_mode_view">Kindermodus</string>
-+    <string name="video_view">Video</string>
-+    <string name="game_view">Spiel</string>
-+    <string name="video_child">VIDEO</string>
-+    <string name="game_child">SPIEL</string>
- </resources>
-\ No newline at end of file
-Index: .idea/inspectionProfiles/Project_Default.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><component name=\"InspectionProjectProfileManager\">\r\n  <profile version=\"1.0\">\r\n    <option name=\"myName\" value=\"Project Default\" />\r\n    <inspection_tool class=\"ComposePreviewDimensionRespectsLimit\" enabled=\"true\" level=\"WARNING\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"ComposePreviewMustBeTopLevelFunction\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"ComposePreviewNeedsComposableAnnotation\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"ComposePreviewNotSupportedInUnitTestFiles\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewDimensionRespectsLimit\" enabled=\"true\" level=\"WARNING\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewMustBeTopLevelFunction\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewNeedsComposableAnnotation\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewNotSupportedInUnitTestFiles\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewAnnotationInFunctionWithParameters\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewApiLevelMustBeValid\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewDeviceShouldUseNewSpec\" enabled=\"true\" level=\"WEAK WARNING\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewFontScaleMustBeGreaterThanZero\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewMultipleParameterProviders\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewParameterProviderOnFirstParameter\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewPickerAnnotation\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n  </profile>\r\n</component>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/inspectionProfiles/Project_Default.xml b/.idea/inspectionProfiles/Project_Default.xml
---- a/.idea/inspectionProfiles/Project_Default.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
-+++ b/.idea/inspectionProfiles/Project_Default.xml	(date 1763052230945)
-@@ -3,15 +3,19 @@
-     <option name="myName" value="Project Default" />
-     <inspection_tool class="ComposePreviewDimensionRespectsLimit" enabled="true" level="WARNING" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-     <inspection_tool class="ComposePreviewMustBeTopLevelFunction" enabled="true" level="ERROR" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-     <inspection_tool class="ComposePreviewNeedsComposableAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-     <inspection_tool class="ComposePreviewNotSupportedInUnitTestFiles" enabled="true" level="ERROR" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-     <inspection_tool class="GlancePreviewDimensionRespectsLimit" enabled="true" level="WARNING" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-@@ -27,24 +31,31 @@
-     </inspection_tool>
-     <inspection_tool class="PreviewAnnotationInFunctionWithParameters" enabled="true" level="ERROR" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-     <inspection_tool class="PreviewApiLevelMustBeValid" enabled="true" level="ERROR" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-     <inspection_tool class="PreviewDeviceShouldUseNewSpec" enabled="true" level="WEAK WARNING" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-     <inspection_tool class="PreviewFontScaleMustBeGreaterThanZero" enabled="true" level="ERROR" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-     <inspection_tool class="PreviewMultipleParameterProviders" enabled="true" level="ERROR" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-     <inspection_tool class="PreviewParameterProviderOnFirstParameter" enabled="true" level="ERROR" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-     <inspection_tool class="PreviewPickerAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
-       <option name="composableFile" value="true" />
-+      <option name="previewFile" value="true" />
-     </inspection_tool>
-   </profile>
- </component>
-\ No newline at end of file
-Index: app/src/main/res/values-en/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar√≠a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode\">Edit mode</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: ‚Ä¶</string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360¬∫</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
---- a/app/src/main/res/values-en/strings.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
-+++ b/app/src/main/res/values-en/strings.xml	(date 1763060335806)
-@@ -77,5 +77,11 @@
-     <string name="notdefined_destinyplane">Destination plane not defined</string>
-     <string name="plane_loading">Loading plane...</string>
-     <string name="error_loading_plane">Error loading plan data</string>
-+    <string name="child_mode">KIDS MODE</string>
-+    <string name="child_mode_view">Kids Mode</string>
-+    <string name="video_view">Video</string>
-+    <string name="game_view">Game</string>
-+    <string name="video_child">VIDEO</string>
-+    <string name="game_child">GAME</string>
- 
- </resources>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
@@ -1,872 +0,0 @@
-Index: gradle.properties
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+># Project-wide Gradle settings.\r\n# IDE (e.g. Android Studio) users:\r\n# Gradle settings configured through the IDE *will override*\r\n# any settings specified in this file.\r\n# For more details on how to configure your build environment visit\r\n# http://www.gradle.org/docs/current/userguide/build_environment.html\r\n# Specifies the JVM arguments used for the daemon process.\r\n# The setting is particularly useful for tweaking memory settings.\r\norg.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8\r\n# When configured, Gradle will run in incubating parallel mode.\r\n# This option should only be used with decoupled projects. For more details, visit\r\n# https://developer.android.com/r/tools/gradle-multi-project-decoupled-projects\r\n# org.gradle.parallel=true\r\n# AndroidX package structure to make it clearer which packages are bundled with the\r\n# Android operating system, and which are packaged with your app's APK\r\n# https://developer.android.com/topic/libraries/support-library/androidx-rn\r\nandroid.useAndroidX=true\r\n# Kotlin code style for this project: \"official\" or \"obsolete\":\r\nkotlin.code.style=official\r\n# Enables namespacing of each library's R class so that its R class includes only the\r\n# resources declared in the library itself and none from the library's dependencies,\r\n# thereby reducing the size of the R class for that library\r\nandroid.nonTransitiveRClass=true
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>ISO-8859-1
-===================================================================
-diff --git a/gradle.properties b/gradle.properties
---- a/gradle.properties	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ b/gradle.properties	(date 1762631081582)
-@@ -20,4 +20,5 @@
- # Enables namespacing of each library's R class so that its R class includes only the
- # resources declared in the library itself and none from the library's dependencies,
- # thereby reducing the size of the R class for that library
--android.nonTransitiveRClass=true
-\ No newline at end of file
-+android.nonTransitiveRClass=true
-+kotlin.compiler.force.k1=true
-\ No newline at end of file
-Index: gradle/libs.versions.toml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>[versions]\r\nagp = \"8.11.1\" #no cambiar de la 8.11.1\r\nkotlin = \"2.0.21\"\r\ncoreKtx = \"1.17.0\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nlifecycleRuntimeKtx = \"2.9.4\"\r\nactivityCompose = \"1.11.0\"\r\ncomposeBom = \"2025.10.01\"\r\n#Practica\r\nconstraintlayoutCompose = \"1.1.1\"\r\nnavigationCompose = \"2.9.5\"\r\nfoundation = \"1.9.4\"\r\nappcompat = \"1.7.0\"\r\nmaterial = \"1.12.0\"\r\nfirebase-gservices = \"4.4.4\"\r\nfirebase-bom = \"33.1.0\"\r\n#panoramicas\r\npanoramaGL = \"1.11.0\"\r\nfirebaseFirestore = \"26.0.2\"\r\n\r\n[libraries]\r\nandroidx-core-ktx = { group = \"androidx.core\", name = \"core-ktx\", version.ref = \"coreKtx\" }\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\nandroidx-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nandroidx-espresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nandroidx-lifecycle-runtime-ktx = { group = \"androidx.lifecycle\", name = \"lifecycle-runtime-ktx\", version.ref = \"lifecycleRuntimeKtx\" }\r\nandroidx-activity-compose = { group = \"androidx.activity\", name = \"activity-compose\", version.ref = \"activityCompose\" }\r\nandroidx-compose-bom = { group = \"androidx.compose\", name = \"compose-bom\", version.ref = \"composeBom\" }\r\nandroidx-ui = { group = \"androidx.compose.ui\", name = \"ui\" }\r\nandroidx-ui-graphics = { group = \"androidx.compose.ui\", name = \"ui-graphics\" }\r\nandroidx-ui-tooling = { group = \"androidx.compose.ui\", name = \"ui-tooling\" }\r\nandroidx-ui-tooling-preview = { group = \"androidx.compose.ui\", name = \"ui-tooling-preview\" }\r\nandroidx-ui-test-manifest = { group = \"androidx.compose.ui\", name = \"ui-test-manifest\" }\r\nandroidx-ui-test-junit4 = { group = \"androidx.compose.ui\", name = \"ui-test-junit4\" }\r\nandroidx-material3 = { group = \"androidx.compose.material3\", name = \"material3\" }\r\n#Practica\r\nconstraintlayout-compose = { module = \"androidx.constraintlayout:constraintlayout-compose\", version.ref = \"constraintlayoutCompose\" }\r\nnavigation-compose = { module = \"androidx.navigation:navigation-compose\", version.ref = \"navigationCompose\" }\r\nandroidx-compose-foundation = { group = \"androidx.compose.foundation\", name = \"foundation\", version.ref = \"foundation\" }\r\nandroidx-appcompat = { module = \"androidx.appcompat:appcompat\", version.ref = \"appcompat\" }\r\ngoogle-material = { module = \"com.google.android.material:material\", version.ref = \"material\" }\r\nfirebase-bom = { module = \"com.google.firebase:firebase-bom\", version.ref = \"firebase-bom\" }\r\nfirebase-firestore = { module = \"com.google.firebase:firebase-firestore-ktx\" }\r\n#Panoramicas\r\npanoramaGL = { module = \"com.github.hannesa2:panoramaGL\", version.ref = \"panoramaGL\" }\r\ngoogle-firebase-firestore = { group = \"com.google.firebase\", name = \"firebase-firestore\", version.ref = \"firebaseFirestore\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\nkotlin-android = { id = \"org.jetbrains.kotlin.android\", version.ref = \"kotlin\" }\r\nkotlin-compose = { id = \"org.jetbrains.kotlin.plugin.compose\", version.ref = \"kotlin\" }\r\nfirebase-gservices = { id = \"com.google.gms.google-services\", version.ref = \"firebase-gservices\" }\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
---- a/gradle/libs.versions.toml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ b/gradle/libs.versions.toml	(date 1762638917078)
-@@ -1,6 +1,6 @@
- [versions]
- agp = "8.11.1" #no cambiar de la 8.11.1
--kotlin = "2.0.21"
-+kotlin = "2.2.0"
- coreKtx = "1.17.0"
- junit = "4.13.2"
- junitVersion = "1.3.0"
-Index: app/src/main/java/com/nextapp/monasterio/LanguageHelper.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\nimport android.content.Context\r\nimport android.content.SharedPreferences\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.core.os.LocaleListCompat\r\n\r\nobject LanguageHelper {\r\n\r\n    private const val PREFS_NAME = \"language_prefs\"\r\n    private const val PREF_KEY_LANGUAGE = \"language_code\"\r\n\r\n    private fun getPrefs(context: Context): SharedPreferences {\r\n        // --- INICIO DE LA CORRECCI√ìN ---\r\n        // Usa SIEMPRE el contexto de la aplicaci√≥n para evitar inconsistencias\r\n        return context.applicationContext.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)\r\n        // --- FIN DE LA CORRECCI√ìN ---\r\n    }\r\n\r\n    // 1. Carga el idioma guardado al iniciar la app\r\n    fun loadLocale(context: Context) {\r\n        val language = getPrefs(context).getString(PREF_KEY_LANGUAGE, null)\r\n        if (language != null) {\r\n            val appLocale = LocaleListCompat.forLanguageTags(language)\r\n            AppCompatDelegate.setApplicationLocales(appLocale)\r\n        }\r\n    }\r\n\r\n    // 2. Guarda el nuevo idioma cuando el usuario lo cambia\r\n    fun saveLocale(context: Context, language: String) {\r\n        getPrefs(context).edit().putString(PREF_KEY_LANGUAGE, language).commit()\r\n        val appLocale = LocaleListCompat.forLanguageTags(language)\r\n        AppCompatDelegate.setApplicationLocales(appLocale)\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/LanguageHelper.kt b/app/src/main/java/com/nextapp/monasterio/LanguageHelper.kt
---- a/app/src/main/java/com/nextapp/monasterio/LanguageHelper.kt	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ b/app/src/main/java/com/nextapp/monasterio/LanguageHelper.kt	(date 1762633262572)
-@@ -4,6 +4,7 @@
- import android.content.SharedPreferences
- import androidx.appcompat.app.AppCompatDelegate
- import androidx.core.os.LocaleListCompat
-+import androidx.core.content.edit
- 
- object LanguageHelper {
- 
-@@ -17,7 +18,6 @@
-         // --- FIN DE LA CORRECCI√ìN ---
-     }
- 
--    // 1. Carga el idioma guardado al iniciar la app
-     fun loadLocale(context: Context) {
-         val language = getPrefs(context).getString(PREF_KEY_LANGUAGE, null)
-         if (language != null) {
-@@ -29,6 +29,7 @@
-     // 2. Guarda el nuevo idioma cuando el usuario lo cambia
-     fun saveLocale(context: Context, language: String) {
-         getPrefs(context).edit().putString(PREF_KEY_LANGUAGE, language).commit()
-+
-         val appLocale = LocaleListCompat.forLanguageTags(language)
-         AppCompatDelegate.setApplicationLocales(appLocale)
-     }
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]/shelved.patch	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ /dev/null	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-@@ -1,639 +0,0 @@
--Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.ComponentActivity\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val newDensity= Density(\r\n                density= currentDensity.density,\r\n                fontScale = currentDensity.fontScale*appFontScale\r\n            )\r\n            CompositionLocalProvider(LocalDensity provides newDensity) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    // ‚úÖ Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n    // ‚úÖ Rutas inmersivas\r\n    val immersiveRoutes = listOf(AppRoutes.PIN_DETALLE)\r\n    val isImmersive = currentRoute in immersiveRoutes\r\n\r\n    // ‚úÖ Actualizar t√≠tulo\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            currentTitle.value = when (route) {\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    if (isImmersive) {\r\n        // \uD83C\uDF0C Vista inmersiva sin barra ni men√∫\r\n        AppNavigationHost(\r\n            navController = navController,\r\n            modifier = Modifier.fillMaxSize()\r\n        )\r\n    } else {\r\n        // \uD83E\uDDF1 Vista normal con barra y men√∫\r\n        ModalNavigationDrawer(\r\n            drawerState = drawerState,\r\n            drawerContent = {\r\n                AppDrawerContent(\r\n                    navController = navController,\r\n                    scope = scope,\r\n                    drawerState = drawerState\r\n                )\r\n            }\r\n        ) {\r\n            Scaffold(\r\n                topBar = {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            IconButton(onClick = {\r\n                                Toast.makeText(context, \"Modo edici√≥n (pr√≥ximamente)\", Toast.LENGTH_SHORT).show()\r\n                            }) {\r\n                                Icon(\r\n                                    painter = painterResource(id = R.drawable.lapiz),\r\n                                    contentDescription = stringResource(id = R.string.edit_mode)\r\n                                )\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            ) { paddingValues ->\r\n                AppNavigationHost(\r\n                    navController = navController,\r\n                    modifier = Modifier.padding(paddingValues)\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
----- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1762358031493)
--@@ -59,7 +59,7 @@
--     val currentRoute = currentBackStackEntry?.destination?.route
-- 
--     // ‚úÖ Rutas inmersivas
---    val immersiveRoutes = listOf(AppRoutes.PIN_DETALLE)
--+    val immersiveRoutes = listOf(AppRoutes.PIN_DETALLE, AppRoutes.PANORAMA)
--     val isImmersive = currentRoute in immersiveRoutes
-- 
--     // ‚úÖ Actualizar t√≠tulo
--Index: settings.gradle.kts
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>pluginManagement {\r\n    repositories {\r\n        google {\r\n            content {\r\n                includeGroupByRegex(\"com\\\\.android.*\")\r\n                includeGroupByRegex(\"com\\\\.google.*\")\r\n                includeGroupByRegex(\"androidx.*\")\r\n            }\r\n        }\r\n        mavenCentral()\r\n        gradlePluginPortal()\r\n    }\r\n}\r\ndependencyResolutionManagement {\r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n    repositories {\r\n        google()\r\n        mavenCentral( )\r\n        maven { url = uri(\"https://www.jitpack.io\") }\r\n    }\r\n}\r\n\r\nrootProject.name = \"SMOV_Monasterio\"\r\ninclude(\":app\")\r\n 
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/settings.gradle.kts b/settings.gradle.kts
----- a/settings.gradle.kts	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/settings.gradle.kts	(date 1762358031452)
--@@ -9,6 +9,7 @@
--         }
--         mavenCentral()
--         gradlePluginPortal()
--+        maven { url = uri("https://www.jitpack.io") }
--     }
-- }
-- dependencyResolutionManagement {
--Index: gradle/libs.versions.toml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>[versions]\r\nagp = \"8.11.1\" #no cambiar de la 8.11.1\r\nkotlin = \"2.0.21\"\r\ncoreKtx = \"1.17.0\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nlifecycleRuntimeKtx = \"2.9.4\"\r\nactivityCompose = \"1.11.0\"\r\ncomposeBom = \"2025.10.01\"\r\n#Practica\r\nconstraintlayoutCompose = \"1.1.1\"\r\nnavigationCompose = \"2.9.5\"\r\nfoundation = \"1.9.4\"\r\nappcompat = \"1.7.0\"\r\nmaterial = \"1.12.0\"\r\nfirebase-gservices = \"4.4.4\"\r\nfirebase-bom = \"33.1.0\"\r\n\r\n[libraries]\r\nandroidx-core-ktx = { group = \"androidx.core\", name = \"core-ktx\", version.ref = \"coreKtx\" }\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\nandroidx-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nandroidx-espresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nandroidx-lifecycle-runtime-ktx = { group = \"androidx.lifecycle\", name = \"lifecycle-runtime-ktx\", version.ref = \"lifecycleRuntimeKtx\" }\r\nandroidx-activity-compose = { group = \"androidx.activity\", name = \"activity-compose\", version.ref = \"activityCompose\" }\r\nandroidx-compose-bom = { group = \"androidx.compose\", name = \"compose-bom\", version.ref = \"composeBom\" }\r\nandroidx-ui = { group = \"androidx.compose.ui\", name = \"ui\" }\r\nandroidx-ui-graphics = { group = \"androidx.compose.ui\", name = \"ui-graphics\" }\r\nandroidx-ui-tooling = { group = \"androidx.compose.ui\", name = \"ui-tooling\" }\r\nandroidx-ui-tooling-preview = { group = \"androidx.compose.ui\", name = \"ui-tooling-preview\" }\r\nandroidx-ui-test-manifest = { group = \"androidx.compose.ui\", name = \"ui-test-manifest\" }\r\nandroidx-ui-test-junit4 = { group = \"androidx.compose.ui\", name = \"ui-test-junit4\" }\r\nandroidx-material3 = { group = \"androidx.compose.material3\", name = \"material3\" }\r\n#Practica\r\nconstraintlayout-compose = { module = \"androidx.constraintlayout:constraintlayout-compose\", version.ref = \"constraintlayoutCompose\" }\r\nnavigation-compose = { module = \"androidx.navigation:navigation-compose\", version.ref = \"navigationCompose\" }\r\nandroidx-compose-foundation = { group = \"androidx.compose.foundation\", name = \"foundation\", version.ref = \"foundation\" }\r\nandroidx-appcompat = { module = \"androidx.appcompat:appcompat\", version.ref = \"appcompat\" }\r\ngoogle-material = { module = \"com.google.android.material:material\", version.ref = \"material\" }\r\nfirebase-bom = { module = \"com.google.firebase:firebase-bom\", version.ref = \"firebase-bom\" }\r\nfirebase-firestore = { module = \"com.google.firebase:firebase-firestore-ktx\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\nkotlin-android = { id = \"org.jetbrains.kotlin.android\", version.ref = \"kotlin\" }\r\nkotlin-compose = { id = \"org.jetbrains.kotlin.plugin.compose\", version.ref = \"kotlin\" }\r\nfirebase-gservices = { id = \"com.google.gms.google-services\", version.ref = \"firebase-gservices\" }\r\n\r\n\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
----- a/gradle/libs.versions.toml	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/gradle/libs.versions.toml	(date 1762366234772)
--@@ -1,6 +1,6 @@
-- [versions]
-- agp = "8.11.1" #no cambiar de la 8.11.1
---kotlin = "2.0.21"
--+kotlin = "2.2.21"
-- coreKtx = "1.17.0"
-- junit = "4.13.2"
-- junitVersion = "1.3.0"
--@@ -16,6 +16,8 @@
-- material = "1.12.0"
-- firebase-gservices = "4.4.4"
-- firebase-bom = "33.1.0"
--+#panoramicas
--+panoramaGL = "1.11.0"
-- 
-- [libraries]
-- androidx-core-ktx = { group = "androidx.core", name = "core-ktx", version.ref = "coreKtx" }
--@@ -40,7 +42,8 @@
-- google-material = { module = "com.google.android.material:material", version.ref = "material" }
-- firebase-bom = { module = "com.google.firebase:firebase-bom", version.ref = "firebase-bom" }
-- firebase-firestore = { module = "com.google.firebase:firebase-firestore-ktx" }
---
--+#Panoramicas
--+panoramaGL = { module = "com.github.hannesa2:panoramaGL", version.ref = "panoramaGL" }
-- [plugins]
-- android-application = { id = "com.android.application", version.ref = "agp" }
-- kotlin-android = { id = "org.jetbrains.kotlin.android", version.ref = "kotlin" }
--Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.*\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.PinDetalleScreen\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    navController: NavHostController,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen() }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen() }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen() }\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n\r\n        // ‚úÖ Correcci√≥n aqu√≠: pasamos el navController principal\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController)\r\n        }\r\n\r\n        // \uD83D\uDC47 Ruta inmersiva\r\n        composable(AppRoutes.PIN_DETALLE) {\r\n            PinDetalleScreen(navController = navController)\r\n\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.title_inicio),\r\n                onClick = { navigateTo(AppRoutes.INICIO) }\r\n            )\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.menu_info),\r\n                onClick = { navigateTo(AppRoutes.INFO) }\r\n            )\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.menu_history),\r\n                onClick = { navigateTo(AppRoutes.HISTORIA) }\r\n            )\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.menu_gallery),\r\n                onClick = { navigateTo(AppRoutes.GALERIA) }\r\n            )\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.menu_profile),\r\n                onClick = { navigateTo(AppRoutes.PERFIL) }\r\n            )\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.menu_settings),\r\n                onClick = { navigateTo(AppRoutes.AJUSTES) }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(\r\n    text: String,\r\n    onClick: () -> Unit\r\n) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(\r\n            text = text,\r\n            color = White,\r\n            style = MaterialTheme.typography.bodyMedium\r\n        )\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1762358031480)
--@@ -11,13 +11,13 @@
-- import androidx.compose.ui.unit.dp
-- import androidx.navigation.NavGraph.Companion.findStartDestination
-- import androidx.navigation.NavHostController
---import androidx.navigation.NavType
---import androidx.navigation.navArgument
--+import androidx.navigation.NavType // <-- Aseg√∫rate de que este import existe
--+import androidx.navigation.navArgument // <-- Aseg√∫rate de que este import existe
-- import androidx.navigation.compose.NavHost
-- import androidx.navigation.compose.composable
-- import com.nextapp.monasterio.AppRoutes
-- import com.nextapp.monasterio.R
---import com.nextapp.monasterio.ui.screens.*
--+import com.nextapp.monasterio.ui.screens.* // <-- Aseg√∫rate de importar PanoramaScreen
-- import com.nextapp.monasterio.ui.theme.MonasteryRed
-- import com.nextapp.monasterio.ui.theme.White
-- import kotlinx.coroutines.CoroutineScope
--@@ -37,9 +37,33 @@
--         composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }
--         composable(AppRoutes.INFO)     { InfoScreen() }
--         composable(AppRoutes.HISTORIA) { HistoriaScreen() }
---        composable(AppRoutes.GALERIA)  { GaleriaScreen() }
--+
--+        // --- ESTA L√çNEA EST√Å CORRECTA ---
--+        // Pasa el NavController a GaleriaScreen para que su bot√≥n funcione
--+        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
--+
--         composable(AppRoutes.PERFIL)   { ProfileScreen() }
--         composable(AppRoutes.AJUSTES)  { AjustesScreen() }
--+
--+        // --- ESTA ES LA MODIFICACI√ìN FINAL ---
--+        // Reemplazamos la l√≠nea simple de 'PANORAMA' por esta con argumentos
--+        composable(
--+            route = AppRoutes.PANORAMA + "/{vistaId}", // 1. La ruta espera un ID
--+            arguments = listOf(navArgument("vistaId") { type = NavType.StringType }) // 2. Definimos el ID
--+        ) { backStackEntry ->
--+            // 3. Recogemos el ID de la URL
--+            val vistaId = backStackEntry.arguments?.getString("vistaId")
--+
--+            // 4. Se lo pasamos a PanoramaScreen
--+            if (vistaId != null) {
--+                PanoramaScreen(
--+                    vistaId = vistaId,
--+                    navController = navController
--+                )
--+            }
--+        }
--+
--+        // --- RESTO DE TUS RUTAS (sin cambios) ---
--         composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }
--         composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }
--         composable(
--@@ -64,19 +88,19 @@
--             )
--         }
-- 
---        // ‚úÖ Correcci√≥n aqu√≠: pasamos el navController principal
--         composable(AppRoutes.VIRTUAL_VISIT) {
--             VirtualVisitScreen(navController = navController)
--         }
-- 
---        // üëá Ruta inmersiva
--         composable(AppRoutes.PIN_DETALLE) {
--             PinDetalleScreen(navController = navController)
---
--         }
--     }
-- }
-- 
--+//
--+// --- EL RESTO DEL ARCHIVO SE QUEDA EXACTAMENTE IGUAL ---
--+//
-- @OptIn(ExperimentalMaterial3Api::class)
-- @Composable
-- fun AppDrawerContent(
--Index: app/build.gradle.kts
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"io.github.chrisbanes:PhotoView:2.3.0\")\r\n\r\n\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/build.gradle.kts b/app/build.gradle.kts
----- a/app/build.gradle.kts	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/app/build.gradle.kts	(date 1762361761297)
--@@ -76,5 +76,7 @@
--     // Plano Interactivo
--     implementation("io.github.chrisbanes:PhotoView:2.3.0")
-- 
--+    // Panoramica
--+    implementation("com.github.hannesa2:panoramagl:1.14")
-- 
-- }
--Index: app/src/main/java/com/nextapp/monasterio/ui/screens/PlaceHolderScreens.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport androidx.compose.foundation.layout.Box\r\nimport androidx.compose.foundation.layout.fillMaxSize\r\nimport androidx.compose.material3.MaterialTheme\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\n\r\n//Pantallas aun vacias, borrar archivo cuando las pantallas tengan contenido\r\n\r\n@Composable\r\nfun GaleriaScreen() {\r\n    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {\r\n        Text(text = \"Contenido de Galer√≠a\", style = MaterialTheme.typography.headlineMedium)\r\n    }\r\n}\r\n\r\n/*@Composable\r\nfun PerfilScreen() {\r\n    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {\r\n        Text(text = \"Contenido de Perfil\", style = MaterialTheme.typography.headlineMedium)\r\n    }\r\n}*/
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/PlaceHolderScreens.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/PlaceHolderScreens.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/screens/PlaceHolderScreens.kt	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/PlaceHolderScreens.kt	(date 1762358031411)
--@@ -1,25 +1,56 @@
--+// En: ui/screens/PlaceholderScreens.kt (o donde est√© GaleriaScreen)
--+
-- package com.nextapp.monasterio.ui.screens
-- 
---import androidx.compose.foundation.layout.Box
--+import androidx.compose.foundation.layout.fillMaxWidth
--+import androidx.compose.foundation.layout.Arrangement
--+import androidx.compose.foundation.layout.Column
--+import androidx.compose.foundation.layout.Spacer
-- import androidx.compose.foundation.layout.fillMaxSize
---import androidx.compose.material3.MaterialTheme
--+import androidx.compose.foundation.layout.height
--+import androidx.compose.foundation.layout.padding
--+import androidx.compose.foundation.lazy.LazyColumn // ¬°Importante!
--+import androidx.compose.material3.Button
-- import androidx.compose.material3.Text
-- import androidx.compose.runtime.Composable
-- import androidx.compose.ui.Alignment
-- import androidx.compose.ui.Modifier
---
---//Pantallas aun vacias, borrar archivo cuando las pantallas tengan contenido
--+import androidx.compose.ui.unit.dp
--+import androidx.navigation.NavController
--+import com.nextapp.monasterio.AppRoutes
--+import com.nextapp.monasterio.data.MonasterioMapRepository // ¬°Importante!
-- 
-- @Composable
---fun GaleriaScreen() {
---    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {
---        Text(text = "Contenido de Galer√≠a", style = MaterialTheme.typography.headlineMedium)
--+fun GaleriaScreen(navController: NavController) { // Recuerda que recibe NavController
--+
--+    // 1. Obtenemos la lista completa de vistas del repositorio
--+    val vistas = MonasterioMapRepository.getVistas()
--+
--+    // 2. Usamos LazyColumn para mostrar eficientemente la lista de botones
--+    LazyColumn(
--+        modifier = Modifier
--+            .fillMaxSize()
--+            .padding(horizontal = 32.dp), // A√±adimos padding
--+        verticalArrangement = Arrangement.Center,
--+        horizontalAlignment = Alignment.CenterHorizontally
--+    ) {
--+        // 3. Creamos un item (un bot√≥n) por cada vista en la lista
--+        items(vistas.size) { index ->
--+            val vista = vistas[index]
--+
--+            Button(
--+                onClick = {
--+                    // 4. Al hacer clic, navega a PanoramaScreen con el ID de la vista
--+                    navController.navigate(AppRoutes.PANORAMA + "/${vista.id}")
--+                },
--+                modifier = Modifier.fillMaxWidth() // Hacemos que los botones sean anchos
--+            ) {
--+                Text(text = vista.nombre) // Mostramos el nombre descriptivo
--+            }
--+
--+            Spacer(modifier = Modifier.height(16.dp))
--+        }
--     }
-- }
-- 
---/*@Composable
---fun PerfilScreen() {
---    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {
---        Text(text = "Contenido de Perfil", style = MaterialTheme.typography.headlineMedium)
---    }
---}*/
--\ No newline at end of file
--+// ... (tus otros PlaceholderScreens como PerfilScreen, etc.)
--\ No newline at end of file
--Index: .idea/inspectionProfiles/Project_Default.xml
--===================================================================
--diff --git a/.idea/inspectionProfiles/Project_Default.xml b/.idea/inspectionProfiles/Project_Default.xml
--deleted file mode 100644
----- a/.idea/inspectionProfiles/Project_Default.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
--@@ -1,61 +0,0 @@
---<component name="InspectionProjectProfileManager">
---  <profile version="1.0">
---    <option name="myName" value="Project Default" />
---    <inspection_tool class="ComposePreviewDimensionRespectsLimit" enabled="true" level="WARNING" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="ComposePreviewMustBeTopLevelFunction" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="ComposePreviewNeedsComposableAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="ComposePreviewNotSupportedInUnitTestFiles" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="GlancePreviewDimensionRespectsLimit" enabled="true" level="WARNING" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="GlancePreviewMustBeTopLevelFunction" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="GlancePreviewNeedsComposableAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="GlancePreviewNotSupportedInUnitTestFiles" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="PreviewAnnotationInFunctionWithParameters" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="PreviewApiLevelMustBeValid" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="PreviewDeviceShouldUseNewSpec" enabled="true" level="WEAK WARNING" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="PreviewFontScaleMustBeGreaterThanZero" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="PreviewMultipleParameterProviders" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="PreviewParameterProviderOnFirstParameter" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---    <inspection_tool class="PreviewPickerAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
---      <option name="composableFile" value="true" />
---      <option name="previewFile" value="true" />
---    </inspection_tool>
---  </profile>
---</component>
--\ No newline at end of file
--Index: .idea/studiobot.xml
--===================================================================
--diff --git a/.idea/studiobot.xml b/.idea/studiobot.xml
--deleted file mode 100644
----- a/.idea/studiobot.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
--@@ -1,6 +0,0 @@
---<?xml version="1.0" encoding="UTF-8"?>
---<project version="4">
---  <component name="StudioBotProjectSettings">
---    <option name="shareContext" value="OptedIn" />
---  </component>
---</project>
--\ No newline at end of file
--Index: .idea/codeStyles/codeStyleConfig.xml
--===================================================================
--diff --git a/.idea/codeStyles/codeStyleConfig.xml b/.idea/codeStyles/codeStyleConfig.xml
--deleted file mode 100644
----- a/.idea/codeStyles/codeStyleConfig.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
--@@ -1,5 +0,0 @@
---<component name="ProjectCodeStyleConfiguration">
---  <state>
---    <option name="USE_PER_PROJECT_SETTINGS" value="true" />
---  </state>
---</component>
--\ No newline at end of file
--Index: .idea/androidTestResultsUserPreferences.xml
--===================================================================
--diff --git a/.idea/androidTestResultsUserPreferences.xml b/.idea/androidTestResultsUserPreferences.xml
--deleted file mode 100644
----- a/.idea/androidTestResultsUserPreferences.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
--@@ -1,22 +0,0 @@
---<?xml version="1.0" encoding="UTF-8"?>
---<project version="4">
---  <component name="AndroidTestResultsUserPreferences">
---    <option name="androidTestResultsTableState">
---      <map>
---        <entry key="28629151">
---          <value>
---            <AndroidTestResultsTableState>
---              <option name="preferredColumnWidths">
---                <map>
---                  <entry key="Duration" value="90" />
---                  <entry key="Medium_Phone_API_36.0" value="120" />
---                  <entry key="Tests" value="360" />
---                </map>
---              </option>
---            </AndroidTestResultsTableState>
---          </value>
---        </entry>
---      </map>
---    </option>
---  </component>
---</project>
--\ No newline at end of file
--Index: .idea/codeStyles/Project.xml
--===================================================================
--diff --git a/.idea/codeStyles/Project.xml b/.idea/codeStyles/Project.xml
--deleted file mode 100644
----- a/.idea/codeStyles/Project.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
--@@ -1,123 +0,0 @@
---<component name="ProjectCodeStyleConfiguration">
---  <code_scheme name="Project" version="173">
---    <JetCodeStyleSettings>
---      <option name="CODE_STYLE_DEFAULTS" value="KOTLIN_OFFICIAL" />
---    </JetCodeStyleSettings>
---    <codeStyleSettings language="XML">
---      <option name="FORCE_REARRANGE_MODE" value="1" />
---      <indentOptions>
---        <option name="CONTINUATION_INDENT_SIZE" value="4" />
---      </indentOptions>
---      <arrangement>
---        <rules>
---          <section>
---            <rule>
---              <match>
---                <AND>
---                  <NAME>xmlns:android</NAME>
---                  <XML_ATTRIBUTE />
---                  <XML_NAMESPACE>^$</XML_NAMESPACE>
---                </AND>
---              </match>
---            </rule>
---          </section>
---          <section>
---            <rule>
---              <match>
---                <AND>
---                  <NAME>xmlns:.*</NAME>
---                  <XML_ATTRIBUTE />
---                  <XML_NAMESPACE>^$</XML_NAMESPACE>
---                </AND>
---              </match>
---              <order>BY_NAME</order>
---            </rule>
---          </section>
---          <section>
---            <rule>
---              <match>
---                <AND>
---                  <NAME>.*:id</NAME>
---                  <XML_ATTRIBUTE />
---                  <XML_NAMESPACE>http://schemas.android.com/apk/res/android</XML_NAMESPACE>
---                </AND>
---              </match>
---            </rule>
---          </section>
---          <section>
---            <rule>
---              <match>
---                <AND>
---                  <NAME>.*:name</NAME>
---                  <XML_ATTRIBUTE />
---                  <XML_NAMESPACE>http://schemas.android.com/apk/res/android</XML_NAMESPACE>
---                </AND>
---              </match>
---            </rule>
---          </section>
---          <section>
---            <rule>
---              <match>
---                <AND>
---                  <NAME>name</NAME>
---                  <XML_ATTRIBUTE />
---                  <XML_NAMESPACE>^$</XML_NAMESPACE>
---                </AND>
---              </match>
---            </rule>
---          </section>
---          <section>
---            <rule>
---              <match>
---                <AND>
---                  <NAME>style</NAME>
---                  <XML_ATTRIBUTE />
---                  <XML_NAMESPACE>^$</XML_NAMESPACE>
---                </AND>
---              </match>
---            </rule>
---          </section>
---          <section>
---            <rule>
---              <match>
---                <AND>
---                  <NAME>.*</NAME>
---                  <XML_ATTRIBUTE />
---                  <XML_NAMESPACE>^$</XML_NAMESPACE>
---                </AND>
---              </match>
---              <order>BY_NAME</order>
---            </rule>
---          </section>
---          <section>
---            <rule>
---              <match>
---                <AND>
---                  <NAME>.*</NAME>
---                  <XML_ATTRIBUTE />
---                  <XML_NAMESPACE>http://schemas.android.com/apk/res/android</XML_NAMESPACE>
---                </AND>
---              </match>
---              <order>ANDROID_ATTRIBUTE_ORDER</order>
---            </rule>
---          </section>
---          <section>
---            <rule>
---              <match>
---                <AND>
---                  <NAME>.*</NAME>
---                  <XML_ATTRIBUTE />
---                  <XML_NAMESPACE>.*</XML_NAMESPACE>
---                </AND>
---              </match>
---              <order>BY_NAME</order>
---            </rule>
---          </section>
---        </rules>
---      </arrangement>
---    </codeStyleSettings>
---    <codeStyleSettings language="kotlin">
---      <option name="CODE_STYLE_DEFAULTS" value="KOTLIN_OFFICIAL" />
---    </codeStyleSettings>
---  </code_scheme>
---</component>
--\ No newline at end of file
--Index: .idea/.gitignore
--===================================================================
--diff --git a/.idea/.gitignore b/.idea/.gitignore
--deleted file mode 100644
----- a/.idea/.gitignore	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
--@@ -1,3 +0,0 @@
---# Default ignored files
---/shelf/
---/workspace.xml
--Index: .idea/misc.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_21\" default=\"true\" project-jdk-name=\"jbr-21\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/misc.xml b/.idea/misc.xml
----- a/.idea/misc.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/.idea/misc.xml	(date 1762365946520)
--@@ -1,9 +1,5 @@
--+<?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--   <component name="ExternalStorageConfigurationManager" enabled="true" />
---  <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="jbr-21" project-jdk-type="JavaSDK">
---    <output url="file://$PROJECT_DIR$/build/classes" />
---  </component>
---  <component name="ProjectType">
---    <option name="id" value="Android" />
---  </component>
--+  <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="jbr-21" project-jdk-type="JavaSDK" />
-- </project>
--\ No newline at end of file
--Index: .idea/gradle.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/gradle.xml b/.idea/gradle.xml
----- a/.idea/gradle.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/.idea/gradle.xml	(date 1762365946571)
--@@ -1,6 +1,5 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
---  <component name="GradleMigrationSettings" migrationVersion="1" />
--   <component name="GradleSettings">
--     <option name="linkedExternalProjectsSettings">
--       <GradleProjectSettings>
--Index: .idea/vcs.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"VcsDirectoryMappings\">\r\n    <mapping directory=\"$PROJECT_DIR$\" vcs=\"Git\" />\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/vcs.xml b/.idea/vcs.xml
----- a/.idea/vcs.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/.idea/vcs.xml	(date 1762365792809)
--@@ -1,6 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--   <component name="VcsDirectoryMappings">
---    <mapping directory="$PROJECT_DIR$" vcs="Git" />
--+    <mapping directory="" vcs="Git" />
--   </component>
-- </project>
--\ No newline at end of file
--Index: .idea/deploymentTargetSelector.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DROPDOWN\" />\r\n        <DropdownSelection timestamp=\"2025-11-02T21:37:26.652388500Z\">\r\n          <Target type=\"DEFAULT_BOOT\">\r\n            <handle>\r\n              <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=R52T40GVQQB\" />\r\n            </handle>\r\n          </Target>\r\n        </DropdownSelection>\r\n        <DialogSelection>\r\n          <targets>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=RZCX7216PCM\" />\r\n              </handle>\r\n            </Target>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=R52T40GVQQB\" />\r\n              </handle>\r\n            </Target>\r\n          </targets>\r\n        </DialogSelection>\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
----- a/.idea/deploymentTargetSelector.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/.idea/deploymentTargetSelector.xml	(date 1762365792841)
--@@ -4,27 +4,6 @@
--     <selectionStates>
--       <SelectionState runConfigName="app">
--         <option name="selectionMode" value="DROPDOWN" />
---        <DropdownSelection timestamp="2025-11-02T21:37:26.652388500Z">
---          <Target type="DEFAULT_BOOT">
---            <handle>
---              <DeviceId pluginId="PhysicalDevice" identifier="serial=R52T40GVQQB" />
---            </handle>
---          </Target>
---        </DropdownSelection>
---        <DialogSelection>
---          <targets>
---            <Target type="DEFAULT_BOOT">
---              <handle>
---                <DeviceId pluginId="PhysicalDevice" identifier="serial=RZCX7216PCM" />
---              </handle>
---            </Target>
---            <Target type="DEFAULT_BOOT">
---              <handle>
---                <DeviceId pluginId="PhysicalDevice" identifier="serial=R52T40GVQQB" />
---              </handle>
---            </Target>
---          </targets>
---        </DialogSelection>
--       </SelectionState>
--     </selectionStates>
--   </component>
--Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci√≥n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti√≥n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
----- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision 908520697335b64df4dc786e407d3b983b76a621)
--+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1762358031507)
--@@ -16,4 +16,5 @@
--     const val CONFIRMACION_RESERVA = "confirmacion_reserva"
--     const val VIRTUAL_VISIT = "virtual_visit"
--     const val PIN_DETALLE = "pin_detalle"
--+    const val PANORAMA = "panorama"
-- }
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15__Changes_.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ /dev/null	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-@@ -1,7 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]" date="1762366521209" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 05/11/2025 19:15 [Changes]" />
--  <binary>
--    <option name="BEFORE_PATH" value=".idea/.name" />
--  </binary>
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]/shelved.patch	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ /dev/null	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-@@ -1,32 +0,0 @@
--Index: .idea/misc.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_21\" default=\"true\" project-jdk-name=\"jbr-21\" project-jdk-type=\"JavaSDK\" />\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/misc.xml b/.idea/misc.xml
----- a/.idea/misc.xml	(revision 708c6a78c122aaa13d5546fe078947800d0c3b61)
--+++ b/.idea/misc.xml	(date 1762598797154)
--@@ -1,4 +1,3 @@
---<?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--   <component name="ExternalStorageConfigurationManager" enabled="true" />
--   <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="jbr-21" project-jdk-type="JavaSDK" />
--Index: .idea/gradle.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/gradle.xml b/.idea/gradle.xml
----- a/.idea/gradle.xml	(revision 708c6a78c122aaa13d5546fe078947800d0c3b61)
--+++ b/.idea/gradle.xml	(date 1762598845132)
--@@ -1,5 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--+  <component name="GradleMigrationSettings" migrationVersion="1" />
--   <component name="GradleSettings">
--     <option name="linkedExternalProjectsSettings">
--       <GradleProjectSettings>
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47__Changes_.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ /dev/null	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]" date="1762598854800" recycled="false" toDelete="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 08/11/2025 11:47 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/vcs.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"VcsDirectoryMappings\">\r\n    <mapping directory=\"\" vcs=\"Git\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/vcs.xml b/.idea/vcs.xml
---- a/.idea/vcs.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ b/.idea/vcs.xml	(date 1762631952646)
-@@ -1,6 +1,6 @@
- <?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-   <component name="VcsDirectoryMappings">
--    <mapping directory="" vcs="Git" />
-+    <mapping directory="$PROJECT_DIR$" vcs="Git" />
-   </component>
- </project>
-\ No newline at end of file
-Index: .idea/misc.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_21\" default=\"true\" project-jdk-name=\"jbr-21\" project-jdk-type=\"JavaSDK\" />\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/misc.xml b/.idea/misc.xml
---- a/.idea/misc.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ b/.idea/misc.xml	(date 1762637952730)
-@@ -1,4 +1,3 @@
--<?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-   <component name="ExternalStorageConfigurationManager" enabled="true" />
-   <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="jbr-21" project-jdk-type="JavaSDK" />
-Index: .idea/deploymentTargetSelector.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DROPDOWN\" />\r\n        <DropdownSelection timestamp=\"2025-11-07T14:58:50.699472400Z\">\r\n          <Target type=\"DEFAULT_BOOT\">\r\n            <template>\r\n              <DeviceId pluginId=\"FirebaseDirectAccess\" type=\"TEMPLATE\" identifier=\"model_id=akita/34\" />\r\n            </template>\r\n          </Target>\r\n        </DropdownSelection>\r\n        <DialogSelection>\r\n          <targets>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=RZCX7216PCM\" />\r\n              </handle>\r\n            </Target>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=R52T40GVQQB\" />\r\n              </handle>\r\n            </Target>\r\n          </targets>\r\n        </DialogSelection>\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
---- a/.idea/deploymentTargetSelector.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ b/.idea/deploymentTargetSelector.xml	(date 1762631952663)
-@@ -4,27 +4,6 @@
-     <selectionStates>
-       <SelectionState runConfigName="app">
-         <option name="selectionMode" value="DROPDOWN" />
--        <DropdownSelection timestamp="2025-11-07T14:58:50.699472400Z">
--          <Target type="DEFAULT_BOOT">
--            <template>
--              <DeviceId pluginId="FirebaseDirectAccess" type="TEMPLATE" identifier="model_id=akita/34" />
--            </template>
--          </Target>
--        </DropdownSelection>
--        <DialogSelection>
--          <targets>
--            <Target type="DEFAULT_BOOT">
--              <handle>
--                <DeviceId pluginId="PhysicalDevice" identifier="serial=RZCX7216PCM" />
--              </handle>
--            </Target>
--            <Target type="DEFAULT_BOOT">
--              <handle>
--                <DeviceId pluginId="PhysicalDevice" identifier="serial=R52T40GVQQB" />
--              </handle>
--            </Target>
--          </targets>
--        </DialogSelection>
-       </SelectionState>
-     </selectionStates>
-   </component>
-Index: .idea/gradle.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/gradle.xml b/.idea/gradle.xml
---- a/.idea/gradle.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
-+++ b/.idea/gradle.xml	(date 1762632722244)
-@@ -1,5 +1,6 @@
- <?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-+  <component name="GradleMigrationSettings" migrationVersion="1" />
-   <component name="GradleSettings">
-     <option name="linkedExternalProjectsSettings">
-       <GradleProjectSettings>
