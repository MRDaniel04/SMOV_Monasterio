Index: app/src/main/java/com/nextapp/monasterio/ui/screens/InfoScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.components.EditableText\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.viewModels.InfoViewModel\r\n\r\n@Composable\r\nfun InfoScreen(\r\n    isEditing: Boolean = false,\r\n    viewModel: InfoViewModel = viewModel()\r\n) {\r\n    val context = LocalContext.current\r\n    val activity = (context as? Activity)\r\n    val infoState by viewModel.infoState.collectAsState()\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        onDispose { }\r\n    }\r\n\r\n    Column(\r\n        modifier = Modifier.fillMaxSize()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .weight(1f)\r\n                .padding(16.dp)\r\n                .verticalScroll(rememberScrollState())\r\n        ) {\r\n            Text(\r\n                text = \"Informaci贸n General\",\r\n                style = MaterialTheme.typography.headlineMedium\r\n            )\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n            \r\n            EditableText(\r\n                textMap = infoState.mainContent,\r\n                isEditing = isEditing,\r\n                onTextMapChange = { viewModel.updateMainContent(it) },\r\n                readOnlyStyle = MaterialTheme.typography.bodyLarge\r\n            )\r\n        }\r\n\r\n        Card(\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .padding(horizontal = 8.dp, vertical = 16.dp),\r\n            shape = RoundedCornerShape(8.dp),\r\n            colors = CardDefaults.cardColors(\r\n                containerColor = MonasteryRed\r\n            ),\r\n            elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)\r\n        ) {\r\n            Column(\r\n                modifier = Modifier.padding(16.dp)\r\n            ) {\r\n                Text(\r\n                    text = stringResource(id = R.string.general_info),\r\n                    style = MaterialTheme.typography.titleLarge,\r\n                    color = White,\r\n                    fontWeight = FontWeight.Bold\r\n                )\r\n                Spacer(modifier = Modifier.height(16.dp))\r\n                \r\n                InfoRow(\r\n                    iconResId = R.drawable.location,\r\n                    textMap = infoState.location,\r\n                    isEditing = isEditing,\r\n                    onUpdate = { viewModel.updateLocation(it) },\r\n                    defaultLabel = stringResource(id = R.string.info_location)\r\n                )\r\n                \r\n                Spacer(modifier = Modifier.height(8.dp))\r\n                \r\n                InfoRow(\r\n                    iconResId = R.drawable.ic_time_24,\r\n                    textMap = infoState.hours,\r\n                    isEditing = isEditing,\r\n                    onUpdate = { viewModel.updateHours(it) },\r\n                    defaultLabel = stringResource(id = R.string.info_hours)\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun InfoRow(\r\n    iconResId: Int,\r\n    textMap: Map<String, String>,\r\n    isEditing: Boolean,\r\n    onUpdate: (Map<String, String>) -> Unit,\r\n    defaultLabel: String\r\n) {\r\n    Row(\r\n        verticalAlignment = Alignment.CenterVertically,\r\n        modifier = Modifier.fillMaxWidth()\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = iconResId),\r\n            contentDescription = null,\r\n            tint = White,\r\n            modifier = Modifier.size(24.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        \r\n        // Usamos Box para que el EditableText ocupe el espacio restante\r\n        Box(modifier = Modifier.weight(1f)) {\r\n             EditableText(\r\n                textMap = textMap,\r\n                isEditing = isEditing,\r\n                onTextMapChange = onUpdate,\r\n                readOnlyStyle = MaterialTheme.typography.bodyLarge.copy(color = White),\r\n                editTextColor = White,\r\n                label = defaultLabel\r\n            )\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/InfoScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/InfoScreen.kt
--- a/app/src/main/java/com/nextapp/monasterio/ui/screens/InfoScreen.kt	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/InfoScreen.kt	(date 1764534514158)
@@ -2,6 +2,7 @@
 
 import android.app.Activity
 import android.content.pm.ActivityInfo
+import android.content.res.Configuration
 import androidx.compose.foundation.layout.*
 import androidx.compose.foundation.rememberScrollState
 import androidx.compose.foundation.shape.RoundedCornerShape
@@ -10,6 +11,7 @@
 import androidx.compose.runtime.*
 import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
+import androidx.compose.ui.platform.LocalConfiguration
 import androidx.compose.ui.platform.LocalContext
 import androidx.compose.ui.res.painterResource
 import androidx.compose.ui.res.stringResource
@@ -17,6 +19,7 @@
 import androidx.compose.ui.unit.dp
 import androidx.lifecycle.viewmodel.compose.viewModel
 import com.nextapp.monasterio.R
+import com.nextapp.monasterio.models.InfoModel //  IMPORTANTE: Usamos tu modelo real
 import com.nextapp.monasterio.ui.components.EditableText
 import com.nextapp.monasterio.ui.theme.MonasteryRed
 import com.nextapp.monasterio.ui.theme.White
@@ -29,75 +32,163 @@
 ) {
     val context = LocalContext.current
     val activity = (context as? Activity)
-    val infoState by viewModel.infoState.collectAsState()
+
+    // Obtenemos el estado (que es de tipo InfoModel seg煤n tu ViewModel)
+    val infoData by viewModel.infoState.collectAsState()
 
+    // Detectar orientaci贸n
+    val configuration = LocalConfiguration.current
+    val isLandscape = configuration.orientation == Configuration.ORIENTATION_LANDSCAPE
+
+    // Permitir rotaci贸n
     DisposableEffect(Unit) {
         activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
         onDispose { }
     }
 
-    Column(
-        modifier = Modifier.fillMaxSize()
-    ) {
-        Column(
-            modifier = Modifier
-                .weight(1f)
-                .padding(16.dp)
-                .verticalScroll(rememberScrollState())
-        ) {
-            Text(
-                text = "Informaci贸n General",
-                style = MaterialTheme.typography.headlineMedium
-            )
-            Spacer(modifier = Modifier.height(16.dp))
-            
-            EditableText(
-                textMap = infoState.mainContent,
-                isEditing = isEditing,
-                onTextMapChange = { viewModel.updateMainContent(it) },
-                readOnlyStyle = MaterialTheme.typography.bodyLarge
-            )
-        }
+    // --- CONTENEDOR PRINCIPAL ---
+    Box(
+        modifier = Modifier
+            .fillMaxSize()
+            .padding(16.dp)
+    ) {
+        if (isLandscape) {
+            // --- DISEO HORIZONTAL ---
+            Row(
+                modifier = Modifier.fillMaxSize(),
+                horizontalArrangement = Arrangement.spacedBy(24.dp)
+            ) {
+                // IZQUIERDA: Texto Principal
+                Box(
+                    modifier = Modifier
+                        .weight(0.6f)
+                        .fillMaxHeight()
+                ) {
+                    InfoMainContent(
+                        infoData = infoData,
+                        isEditing = isEditing,
+                        viewModel = viewModel
+                    )
+                }
+
+                // DERECHA: Tarjeta Roja
+                Box(
+                    modifier = Modifier
+                        .weight(0.4f)
+                        .fillMaxHeight(),
+                    contentAlignment = Alignment.Center
+                ) {
+                    // Scroll vertical por si la pantalla es bajita
+                    Column(modifier = Modifier.verticalScroll(rememberScrollState())) {
+                        InfoDetailsCard(
+                            infoData = infoData,
+                            isEditing = isEditing,
+                            viewModel = viewModel
+                        )
+                    }
+                }
+            }
+        } else {
+            // --- DISEO VERTICAL (Tu original) ---
+            Column(
+                modifier = Modifier.fillMaxSize()
+            ) {
+                // ARRIBA: Texto Principal
+                Box(
+                    modifier = Modifier
+                        .weight(1f)
+                        .fillMaxWidth()
+                ) {
+                    InfoMainContent(
+                        infoData = infoData,
+                        isEditing = isEditing,
+                        viewModel = viewModel
+                    )
+                }
+
+                // ABAJO: Tarjeta Roja
+                Box(modifier = Modifier.padding(top = 16.dp)) {
+                    InfoDetailsCard(
+                        infoData = infoData,
+                        isEditing = isEditing,
+                        viewModel = viewModel
+                    )
+                }
+            }
+        }
+    }
+}
+
+// -----------------------------------------------------------
+// COMPONENTES REUTILIZABLES
+// -----------------------------------------------------------
+
+@Composable
+fun InfoMainContent(
+    infoData: InfoModel, //  Usamos InfoModel
+    isEditing: Boolean,
+    viewModel: InfoViewModel
+) {
+    Column(
+        modifier = Modifier
+            .fillMaxSize()
+            .verticalScroll(rememberScrollState())
+    ) {
+        Text(
+            text = "Informaci贸n General",
+            style = MaterialTheme.typography.headlineMedium
+        )
+        Spacer(modifier = Modifier.height(16.dp))
+
+        EditableText(
+            textMap = infoData.mainContent,
+            isEditing = isEditing,
+            onTextMapChange = { viewModel.updateMainContent(it) },
+            readOnlyStyle = MaterialTheme.typography.bodyLarge
+        )
+    }
+}
 
-        Card(
-            modifier = Modifier
-                .fillMaxWidth()
-                .padding(horizontal = 8.dp, vertical = 16.dp),
-            shape = RoundedCornerShape(8.dp),
-            colors = CardDefaults.cardColors(
-                containerColor = MonasteryRed
-            ),
-            elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)
-        ) {
-            Column(
-                modifier = Modifier.padding(16.dp)
-            ) {
-                Text(
-                    text = stringResource(id = R.string.general_info),
-                    style = MaterialTheme.typography.titleLarge,
-                    color = White,
-                    fontWeight = FontWeight.Bold
-                )
-                Spacer(modifier = Modifier.height(16.dp))
-                
-                InfoRow(
-                    iconResId = R.drawable.location,
-                    textMap = infoState.location,
-                    isEditing = isEditing,
-                    onUpdate = { viewModel.updateLocation(it) },
-                    defaultLabel = stringResource(id = R.string.info_location)
-                )
-                
-                Spacer(modifier = Modifier.height(8.dp))
-                
-                InfoRow(
-                    iconResId = R.drawable.ic_time_24,
-                    textMap = infoState.hours,
-                    isEditing = isEditing,
-                    onUpdate = { viewModel.updateHours(it) },
-                    defaultLabel = stringResource(id = R.string.info_hours)
-                )
-            }
+@Composable
+fun InfoDetailsCard(
+    infoData: InfoModel, //  Usamos InfoModel
+    isEditing: Boolean,
+    viewModel: InfoViewModel
+) {
+    Card(
+        modifier = Modifier.fillMaxWidth(),
+        shape = RoundedCornerShape(8.dp),
+        colors = CardDefaults.cardColors(
+            containerColor = MonasteryRed
+        ),
+        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)
+    ) {
+        Column(
+            modifier = Modifier.padding(16.dp)
+        ) {
+            Text(
+                text = stringResource(id = R.string.general_info),
+                style = MaterialTheme.typography.titleLarge,
+                color = White,
+                fontWeight = FontWeight.Bold
+            )
+            Spacer(modifier = Modifier.height(16.dp))
+
+            InfoRow(
+                iconResId = R.drawable.location,
+                textMap = infoData.location,
+                isEditing = isEditing,
+                onUpdate = { viewModel.updateLocation(it) }
+            )
+
+            Spacer(modifier = Modifier.height(8.dp))
+
+            InfoRow(
+                iconResId = R.drawable.ic_time_24,
+                textMap = infoData.hours,
+                isEditing = isEditing,
+                onUpdate = { viewModel.updateHours(it) }
+            )
         }
     }
 }
@@ -108,7 +199,6 @@
     textMap: Map<String, String>,
     isEditing: Boolean,
     onUpdate: (Map<String, String>) -> Unit,
-    defaultLabel: String
 ) {
     Row(
         verticalAlignment = Alignment.CenterVertically,
@@ -121,16 +211,15 @@
             modifier = Modifier.size(24.dp)
         )
         Spacer(modifier = Modifier.width(16.dp))
-        
-        // Usamos Box para que el EditableText ocupe el espacio restante
+
+        // Contenido editable
         Box(modifier = Modifier.weight(1f)) {
-             EditableText(
+            EditableText(
                 textMap = textMap,
                 isEditing = isEditing,
                 onTextMapChange = onUpdate,
                 readOnlyStyle = MaterialTheme.typography.bodyLarge.copy(color = White),
-                editTextColor = White,
-                label = defaultLabel
+                editTextColor = White
             )
         }
     }
Index: app/src/main/java/com/nextapp/monasterio/ui/screens/ProfileScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.text.input.PasswordVisualTransformation\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport com.nextapp.monasterio.ui.components.EditableText\r\nimport com.nextapp.monasterio.ui.components.EditableContent\r\n\r\n@Composable\r\nfun ProfileScreen(\r\n    isEditing: Boolean,\r\n    viewModel: AuthViewModel = viewModel(),\r\n) {\r\n\r\n    val userState by viewModel.currentUser.collectAsState()\r\n    val user = userState\r\n    val isLoading by viewModel.isLoading.collectAsState()\r\n    val error by viewModel.error.collectAsState()\r\n\r\n    // campos para iniciar sesion\r\n    var email by remember { mutableStateOf(\"\") }\r\n    var password by remember { mutableStateOf(\"\") }\r\n\r\n    // campos editables de usuario - inicializar con los valores actuales\r\n    var editableName by remember(user) { mutableStateOf(user?.name ?: \"\") }\r\n    var editableEmail by remember(user) { mutableStateOf(user?.email ?: \"\") }\r\n\r\n    // Detectar si hay cambios no guardados\r\n    val hasChanges = remember(editableName, editableEmail, user) {\r\n        editableName != (user?.name ?: \"\") || editableEmail != (user?.email ?: \"\")\r\n    }\r\n\r\n    // Funci贸n para cancelar cambios\r\n    val cancelChanges = {\r\n        editableName = user?.name ?: \"\"\r\n        editableEmail = user?.email ?: \"\"\r\n    }\r\n\r\n    // Funci贸n para guardar cambios\r\n    val saveChanges = {\r\n        viewModel.updateUser(name = editableName, email = editableEmail)\r\n    }\r\n\r\n    if (isLoading) { // Vista de carga del estado\r\n        // TODO mover a un componente para usar en otras paginas?\r\n        Box(\r\n            modifier = Modifier.fillMaxSize(),\r\n            contentAlignment = Alignment.Center\r\n        ) {\r\n            Column(horizontalAlignment = Alignment.CenterHorizontally) {\r\n                CircularProgressIndicator()\r\n                Spacer(modifier = Modifier.height(8.dp))\r\n                Text(\"Cargando...\", style = MaterialTheme.typography.bodyMedium)\r\n            }\r\n        }\r\n    } else if (user == null) { // Si el usuario no esta autenticado\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp),\r\n            verticalArrangement = Arrangement.Center,\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            Text(text = stringResource(id = R.string.profile_login), style = MaterialTheme.typography.titleLarge)\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            OutlinedTextField(\r\n                value = email,\r\n                onValueChange = { email = it },\r\n                label = { Text(stringResource(id = R.string.profile_email)) },\r\n                singleLine = true\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(8.dp))\r\n\r\n            OutlinedTextField(\r\n                value = password,\r\n                onValueChange = { password = it },\r\n                label = { Text(stringResource(id = R.string.profile_password)) },\r\n                visualTransformation = PasswordVisualTransformation(),\r\n                singleLine = true\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            Button(onClick = { viewModel.login(email, password) }) {\r\n                Text(stringResource(id = R.string.profile_login))\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(12.dp))\r\n\r\n            error?.let { Text(text = it, color = MaterialTheme.colorScheme.error) }\r\n        }\r\n    } else { // Si el usuario esta autenticado\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(24.dp),\r\n            verticalArrangement = Arrangement.Center,\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            if (isEditing) {\r\n                // Usar EditableContent para gestionar el estado de edici贸n\r\n                EditableContent(\r\n                    isEditing = isEditing,\r\n                    hasChanges = hasChanges,\r\n                    onSave = saveChanges,\r\n                    onCancel = cancelChanges,\r\n                    modifier = Modifier.fillMaxWidth()\r\n                ) {\r\n                    Column(\r\n                        modifier = Modifier.fillMaxWidth(),\r\n                        verticalArrangement = Arrangement.spacedBy(16.dp)\r\n                    ) {\r\n                        Text(\r\n                            text = stringResource(id = R.string.title_profile),\r\n                            style = MaterialTheme.typography.titleLarge\r\n                        )\r\n\r\n                        // Campo de nombre editable\r\n                        Column {\r\n                            Text(\r\n                                text = stringResource(id = R.string.profile_name),\r\n                                style = MaterialTheme.typography.labelMedium,\r\n                                color = MaterialTheme.colorScheme.onSurfaceVariant\r\n                            )\r\n                            Spacer(modifier = Modifier.height(4.dp))\r\n                            EditableText(\r\n                                text = editableName,\r\n                                isEditing = isEditing,\r\n                                onTextChange = { editableName = it },\r\n                                label = stringResource(id = R.string.profile_name),\r\n                                modifier = Modifier.fillMaxWidth()\r\n                            )\r\n                        }\r\n\r\n                        // Campo de email editable\r\n                        Column {\r\n                            Text(\r\n                                text = stringResource(id = R.string.profile_email),\r\n                                style = MaterialTheme.typography.labelMedium,\r\n                                color = MaterialTheme.colorScheme.onSurfaceVariant\r\n                            )\r\n                            Spacer(modifier = Modifier.height(4.dp))\r\n                            EditableText(\r\n                                text = editableEmail,\r\n                                isEditing = isEditing,\r\n                                onTextChange = { editableEmail = it },\r\n                                label = stringResource(id = R.string.profile_email),\r\n                                modifier = Modifier.fillMaxWidth()\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                // Vista de solo lectura\r\n                // Avatar / Icono de perfil\r\n                Icon(\r\n                    painter = androidx.compose.ui.res.painterResource(id = R.drawable.escudo),\r\n                    contentDescription = null,\r\n                    modifier = Modifier.size(120.dp),\r\n                    tint = androidx.compose.ui.graphics.Color.Unspecified // Usar color original de la imagen\r\n                )\r\n\r\n                Spacer(modifier = Modifier.height(24.dp))\r\n\r\n                Text(\r\n                    text = \"Bienvenido, ${user.name}\",\r\n                    style = MaterialTheme.typography.headlineMedium,\r\n                    color = MaterialTheme.colorScheme.onBackground\r\n                )\r\n\r\n                Spacer(modifier = Modifier.height(32.dp))\r\n\r\n                // Tarjeta de informaci贸n del usuario\r\n                Card(\r\n                    modifier = Modifier.fillMaxWidth(),\r\n                    elevation = CardDefaults.cardElevation(defaultElevation = 4.dp),\r\n                    colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surface)\r\n                ) {\r\n                    Column(\r\n                        modifier = Modifier.padding(20.dp),\r\n                        verticalArrangement = Arrangement.spacedBy(20.dp)\r\n                    ) {\r\n                        // Nombre\r\n                        Row(verticalAlignment = Alignment.CenterVertically) {\r\n                            Icon(\r\n                                painter = androidx.compose.ui.res.painterResource(id = R.drawable.outline_account_child_invert_24),\r\n                                contentDescription = null,\r\n                                tint = MaterialTheme.colorScheme.primary,\r\n                                modifier = Modifier.size(24.dp)\r\n                            )\r\n                            Spacer(modifier = Modifier.width(16.dp))\r\n                            Column {\r\n                                Text(\r\n                                    text = stringResource(id = R.string.profile_name),\r\n                                    style = MaterialTheme.typography.labelMedium,\r\n                                    color = MaterialTheme.colorScheme.onSurfaceVariant\r\n                                )\r\n                                Text(\r\n                                    text = user.name ?: \"\",\r\n                                    style = MaterialTheme.typography.bodyLarge,\r\n                                    color = MaterialTheme.colorScheme.onSurface\r\n                                )\r\n                            }\r\n                        }\r\n\r\n                        HorizontalDivider(color = MaterialTheme.colorScheme.outlineVariant)\r\n\r\n                        // Email\r\n                        Row(verticalAlignment = Alignment.CenterVertically) {\r\n                            Icon(\r\n                                painter = androidx.compose.ui.res.painterResource(id = R.drawable.mail),\r\n                                contentDescription = null,\r\n                                tint = MaterialTheme.colorScheme.primary,\r\n                                modifier = Modifier.size(24.dp)\r\n                            )\r\n                            Spacer(modifier = Modifier.width(16.dp))\r\n                            Column {\r\n                                Text(\r\n                                    text = stringResource(id = R.string.profile_email),\r\n                                    style = MaterialTheme.typography.labelMedium,\r\n                                    color = MaterialTheme.colorScheme.onSurfaceVariant\r\n                                )\r\n                                Text(\r\n                                    text = user.email ?: \"\",\r\n                                    style = MaterialTheme.typography.bodyLarge,\r\n                                    color = MaterialTheme.colorScheme.onSurface\r\n                                )\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                Spacer(modifier = Modifier.height(48.dp))\r\n\r\n                Button(\r\n                    onClick = { viewModel.logout() },\r\n                    colors = ButtonDefaults.buttonColors(containerColor = MaterialTheme.colorScheme.error),\r\n                    modifier = Modifier.fillMaxWidth(0.6f)\r\n                ) {\r\n                    Icon(\r\n                        painter = androidx.compose.ui.res.painterResource(id = R.drawable.ic_close_24),\r\n                        contentDescription = null,\r\n                        modifier = Modifier.size(18.dp)\r\n                    )\r\n                    Spacer(modifier = Modifier.width(8.dp))\r\n                    Text(stringResource(id = R.string.profile_logout))\r\n                }\r\n            }\r\n\r\n            // Mostrar errores si los hay\r\n            error?.let {\r\n                Spacer(modifier = Modifier.height(16.dp))\r\n                Text(text = it, color = MaterialTheme.colorScheme.error)\r\n            }\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/ProfileScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/ProfileScreen.kt
--- a/app/src/main/java/com/nextapp/monasterio/ui/screens/ProfileScreen.kt	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/ProfileScreen.kt	(date 1764536263263)
@@ -1,267 +1,440 @@
 package com.nextapp.monasterio.ui.screens
 
+import android.content.res.Configuration
 import androidx.compose.foundation.layout.*
+import androidx.compose.foundation.rememberScrollState
+import androidx.compose.foundation.shape.RoundedCornerShape
+import androidx.compose.foundation.verticalScroll
 import androidx.compose.material3.*
 import androidx.compose.runtime.*
 import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
+import androidx.compose.ui.platform.LocalConfiguration
+import androidx.compose.ui.res.painterResource
 import androidx.compose.ui.res.stringResource
 import androidx.compose.ui.text.input.PasswordVisualTransformation
 import androidx.compose.ui.unit.dp
 import androidx.lifecycle.viewmodel.compose.viewModel
 import com.nextapp.monasterio.R
+import com.nextapp.monasterio.ui.components.EditableContent
+import com.nextapp.monasterio.ui.components.EditableText
 import com.nextapp.monasterio.viewModels.AuthViewModel
-import com.nextapp.monasterio.ui.components.EditableText
-import com.nextapp.monasterio.ui.components.EditableContent
 
 @Composable
 fun ProfileScreen(
     isEditing: Boolean,
     viewModel: AuthViewModel = viewModel(),
 ) {
-
     val userState by viewModel.currentUser.collectAsState()
     val user = userState
     val isLoading by viewModel.isLoading.collectAsState()
     val error by viewModel.error.collectAsState()
 
-    // campos para iniciar sesion
+    // Detectar orientaci贸n
+    val configuration = LocalConfiguration.current
+    val isLandscape = configuration.orientation == Configuration.ORIENTATION_LANDSCAPE
+
+    if (isLoading) {
+        Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {
+            CircularProgressIndicator()
+        }
+    } else if (user == null) {
+        // --- PANTALLA DE LOGIN ---
+        if (isLandscape) {
+            LoginScreenLandscape(viewModel, error)
+        } else {
+            LoginScreenPortrait(viewModel, error)
+        }
+    } else {
+        // --- PANTALLA DE PERFIL (AUTENTICADO) ---
+        // L贸gica de edici贸n (com煤n para ambas orientaciones)
+        var editableName by remember(user) { mutableStateOf(user.name ?: "") }
+        var editableEmail by remember(user) { mutableStateOf(user.email ?: "") }
+
+        val hasChanges = remember(editableName, editableEmail, user) {
+            editableName != (user.name ?: "") || editableEmail != (user.email ?: "")
+        }
+
+        val saveChanges = { viewModel.updateUser(name = editableName, email = editableEmail) }
+        val cancelChanges = {
+            editableName = user.name ?: ""
+            editableEmail = user.email ?: ""
+        }
+
+        if (isEditing) {
+            // MODO EDICIN (Lo mantenemos simple en vertical con scroll para no complicar)
+            EditableProfileView(
+                isEditing = true,
+                hasChanges = hasChanges,
+                onSave = saveChanges,
+                onCancel = cancelChanges,
+                name = editableName,
+                email = editableEmail,
+                onNameChange = { editableName = it },
+                onEmailChange = { editableEmail = it }
+            )
+        } else {
+            // MODO LECTURA (Aqu铆 aplicamos el cambio de dise帽o radical)
+            if (isLandscape) {
+                ProfileViewLandscape(user, viewModel)
+            } else {
+                ProfileViewPortrait(user, viewModel)
+            }
+        }
+    }
+}
+
+// =============================================================================
+// COMPONENTES DE LOGIN
+// =============================================================================
+
+@Composable
+fun LoginScreenPortrait(viewModel: AuthViewModel, error: String?) {
     var email by remember { mutableStateOf("") }
     var password by remember { mutableStateOf("") }
 
-    // campos editables de usuario - inicializar con los valores actuales
-    var editableName by remember(user) { mutableStateOf(user?.name ?: "") }
-    var editableEmail by remember(user) { mutableStateOf(user?.email ?: "") }
-
-    // Detectar si hay cambios no guardados
-    val hasChanges = remember(editableName, editableEmail, user) {
-        editableName != (user?.name ?: "") || editableEmail != (user?.email ?: "")
-    }
-
-    // Funci贸n para cancelar cambios
-    val cancelChanges = {
-        editableName = user?.name ?: ""
-        editableEmail = user?.email ?: ""
-    }
-
-    // Funci贸n para guardar cambios
-    val saveChanges = {
-        viewModel.updateUser(name = editableName, email = editableEmail)
-    }
-
-    if (isLoading) { // Vista de carga del estado
-        // TODO mover a un componente para usar en otras paginas?
-        Box(
-            modifier = Modifier.fillMaxSize(),
-            contentAlignment = Alignment.Center
-        ) {
-            Column(horizontalAlignment = Alignment.CenterHorizontally) {
-                CircularProgressIndicator()
-                Spacer(modifier = Modifier.height(8.dp))
-                Text("Cargando...", style = MaterialTheme.typography.bodyMedium)
-            }
-        }
-    } else if (user == null) { // Si el usuario no esta autenticado
-        Column(
-            modifier = Modifier
-                .fillMaxSize()
-                .padding(16.dp),
-            verticalArrangement = Arrangement.Center,
-            horizontalAlignment = Alignment.CenterHorizontally
+    Column(
+        modifier = Modifier
+            .fillMaxSize()
+            .padding(16.dp),
+        verticalArrangement = Arrangement.Center,
+        horizontalAlignment = Alignment.CenterHorizontally
+    ) {
+        Text(text = stringResource(id = R.string.profile_login), style = MaterialTheme.typography.headlineMedium)
+        Spacer(modifier = Modifier.height(32.dp))
+
+        LoginForm(email, { email = it }, password, { password = it })
+
+        Spacer(modifier = Modifier.height(24.dp))
+
+        Button(
+            onClick = { viewModel.login(email, password) },
+            modifier = Modifier.fillMaxWidth()
         ) {
-            Text(text = stringResource(id = R.string.profile_login), style = MaterialTheme.typography.titleLarge)
+            Text(stringResource(id = R.string.profile_login))
+        }
+
+        if (error != null) {
             Spacer(modifier = Modifier.height(16.dp))
+            Text(text = error, color = MaterialTheme.colorScheme.error)
+        }
+    }
+}
+
+@Composable
+fun LoginScreenLandscape(viewModel: AuthViewModel, error: String?) {
+    var email by remember { mutableStateOf("") }
+    var password by remember { mutableStateOf("") }
+
+    Row(
+        modifier = Modifier
+            .fillMaxSize()
+            .padding(16.dp), // Un poco m谩s de margen para que respire
+        verticalAlignment = Alignment.CenterVertically, // Centrado vertical general
+        horizontalArrangement = Arrangement.spacedBy(32.dp) // Separaci贸n entre la zona de escribir y la de pulsar
+    ) {
+        // --- IZQUIERDA: FORMULARIO (Campos de texto) ---
+        Column(
+            modifier = Modifier
+                .weight(1f)
+                .fillMaxHeight(), // Para centrar verticalmente el contenido
+            verticalArrangement = Arrangement.Center,
+            horizontalAlignment = Alignment.CenterHorizontally
+        ) {
+            Text(
+                text = stringResource(id = R.string.profile_login),
+                style = MaterialTheme.typography.headlineSmall,
+                color = MaterialTheme.colorScheme.primary
+            )
+
+            Spacer(modifier = Modifier.height(10.dp))
+
+            // Campos de Email y Contrase帽a
+            LoginForm(email, { email = it }, password, { password = it })
+        }
 
-            OutlinedTextField(
-                value = email,
-                onValueChange = { email = it },
-                label = { Text(stringResource(id = R.string.profile_email)) },
-                singleLine = true
-            )
-
-            Spacer(modifier = Modifier.height(8.dp))
-
-            OutlinedTextField(
-                value = password,
-                onValueChange = { password = it },
-                label = { Text(stringResource(id = R.string.profile_password)) },
-                visualTransformation = PasswordVisualTransformation(),
-                singleLine = true
-            )
-
-            Spacer(modifier = Modifier.height(16.dp))
-
-            Button(onClick = { viewModel.login(email, password) }) {
-                Text(stringResource(id = R.string.profile_login))
-            }
+        // --- DERECHA: BOTN DE ACCIN Y ERRORES ---
+        Column(
+            modifier = Modifier
+                .weight(1f)
+                .fillMaxHeight(),
+            verticalArrangement = Arrangement.Center,
+            horizontalAlignment = Alignment.CenterHorizontally
+        ) {
+            // Bot贸n grande y llamativo
+            Button(
+                onClick = { viewModel.login(email, password) },
+                modifier = Modifier.fillMaxWidth(),
+                shape = RoundedCornerShape(12.dp) // Bordes redondeados
+            ) {
+                Text(
+                    text = stringResource(id = R.string.profile_login),
+                    modifier = Modifier.padding(vertical = 8.dp) // M谩s alto para facilitar el toque
+                )
+            }
+
+            // Mensaje de error debajo del bot贸n
+            if (error != null) {
+                Spacer(modifier = Modifier.height(16.dp))
+                Text(
+                    text = error,
+                    color = MaterialTheme.colorScheme.error,
+                    style = MaterialTheme.typography.bodyMedium,
+                    textAlign = androidx.compose.ui.text.style.TextAlign.Center
+                )
+            }
+        }
+    }
+}
+
+@Composable
+fun LoginForm(email: String, onEmailChange: (String) -> Unit, pass: String, onPassChange: (String) -> Unit) {
+    OutlinedTextField(
+        value = email,
+        onValueChange = onEmailChange,
+        label = { Text(stringResource(id = R.string.profile_email)) },
+        singleLine = true,
+        modifier = Modifier.fillMaxWidth()
+    )
+    Spacer(modifier = Modifier.height(8.dp))
+    OutlinedTextField(
+        value = pass,
+        onValueChange = onPassChange,
+        label = { Text(stringResource(id = R.string.profile_password)) },
+        visualTransformation = PasswordVisualTransformation(),
+        singleLine = true,
+        modifier = Modifier.fillMaxWidth()
+    )
+}
 
-            Spacer(modifier = Modifier.height(12.dp))
+// =============================================================================
+// COMPONENTES DE PERFIL (LECTURA)
+// =============================================================================
 
-            error?.let { Text(text = it, color = MaterialTheme.colorScheme.error) }
-        }
-    } else { // Si el usuario esta autenticado
-        Column(
-            modifier = Modifier
-                .fillMaxSize()
-                .padding(24.dp),
-            verticalArrangement = Arrangement.Center,
-            horizontalAlignment = Alignment.CenterHorizontally
-        ) {
-            if (isEditing) {
-                // Usar EditableContent para gestionar el estado de edici贸n
-                EditableContent(
-                    isEditing = isEditing,
-                    hasChanges = hasChanges,
-                    onSave = saveChanges,
-                    onCancel = cancelChanges,
-                    modifier = Modifier.fillMaxWidth()
-                ) {
-                    Column(
-                        modifier = Modifier.fillMaxWidth(),
-                        verticalArrangement = Arrangement.spacedBy(16.dp)
-                    ) {
-                        Text(
-                            text = stringResource(id = R.string.title_profile),
-                            style = MaterialTheme.typography.titleLarge
-                        )
-
-                        // Campo de nombre editable
-                        Column {
-                            Text(
-                                text = stringResource(id = R.string.profile_name),
-                                style = MaterialTheme.typography.labelMedium,
-                                color = MaterialTheme.colorScheme.onSurfaceVariant
-                            )
-                            Spacer(modifier = Modifier.height(4.dp))
-                            EditableText(
-                                text = editableName,
-                                isEditing = isEditing,
-                                onTextChange = { editableName = it },
-                                label = stringResource(id = R.string.profile_name),
-                                modifier = Modifier.fillMaxWidth()
-                            )
-                        }
-
-                        // Campo de email editable
-                        Column {
-                            Text(
-                                text = stringResource(id = R.string.profile_email),
-                                style = MaterialTheme.typography.labelMedium,
-                                color = MaterialTheme.colorScheme.onSurfaceVariant
-                            )
-                            Spacer(modifier = Modifier.height(4.dp))
-                            EditableText(
-                                text = editableEmail,
-                                isEditing = isEditing,
-                                onTextChange = { editableEmail = it },
-                                label = stringResource(id = R.string.profile_email),
-                                modifier = Modifier.fillMaxWidth()
-                            )
-                        }
-                    }
-                }
-            } else {
-                // Vista de solo lectura
-                // Avatar / Icono de perfil
-                Icon(
-                    painter = androidx.compose.ui.res.painterResource(id = R.drawable.escudo),
-                    contentDescription = null,
-                    modifier = Modifier.size(120.dp),
-                    tint = androidx.compose.ui.graphics.Color.Unspecified // Usar color original de la imagen
-                )
-
-                Spacer(modifier = Modifier.height(24.dp))
+@Composable
+fun ProfileViewPortrait(user: com.nextapp.monasterio.models.User, viewModel: AuthViewModel) {
+    Column(
+        modifier = Modifier
+            .fillMaxSize()
+            .padding(24.dp)
+            .verticalScroll(rememberScrollState()), // Scroll por si acaso
+        horizontalAlignment = Alignment.CenterHorizontally,
+        verticalArrangement = Arrangement.Center
+    ) {
+        Icon(
+            painter = painterResource(id = R.drawable.escudo),
+            contentDescription = null,
+            modifier = Modifier.size(120.dp),
+            tint = androidx.compose.ui.graphics.Color.Unspecified
+        )
+        Spacer(modifier = Modifier.height(24.dp))
 
-                Text(
-                    text = "Bienvenido, ${user.name}",
-                    style = MaterialTheme.typography.headlineMedium,
-                    color = MaterialTheme.colorScheme.onBackground
-                )
-
-                Spacer(modifier = Modifier.height(32.dp))
+        Text(
+            text = "Bienvenido, ${user.name}",
+            style = MaterialTheme.typography.headlineSmall,
+            color = MaterialTheme.colorScheme.onBackground
+        )
+        Spacer(modifier = Modifier.height(32.dp))
 
-                // Tarjeta de informaci贸n del usuario
-                Card(
-                    modifier = Modifier.fillMaxWidth(),
-                    elevation = CardDefaults.cardElevation(defaultElevation = 4.dp),
-                    colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surface)
-                ) {
-                    Column(
-                        modifier = Modifier.padding(20.dp),
-                        verticalArrangement = Arrangement.spacedBy(20.dp)
-                    ) {
-                        // Nombre
-                        Row(verticalAlignment = Alignment.CenterVertically) {
-                            Icon(
-                                painter = androidx.compose.ui.res.painterResource(id = R.drawable.outline_account_child_invert_24),
-                                contentDescription = null,
-                                tint = MaterialTheme.colorScheme.primary,
-                                modifier = Modifier.size(24.dp)
-                            )
-                            Spacer(modifier = Modifier.width(16.dp))
-                            Column {
-                                Text(
-                                    text = stringResource(id = R.string.profile_name),
-                                    style = MaterialTheme.typography.labelMedium,
-                                    color = MaterialTheme.colorScheme.onSurfaceVariant
-                                )
-                                Text(
-                                    text = user.name ?: "",
-                                    style = MaterialTheme.typography.bodyLarge,
-                                    color = MaterialTheme.colorScheme.onSurface
-                                )
-                            }
-                        }
-
-                        HorizontalDivider(color = MaterialTheme.colorScheme.outlineVariant)
-
-                        // Email
-                        Row(verticalAlignment = Alignment.CenterVertically) {
-                            Icon(
-                                painter = androidx.compose.ui.res.painterResource(id = R.drawable.mail),
-                                contentDescription = null,
-                                tint = MaterialTheme.colorScheme.primary,
-                                modifier = Modifier.size(24.dp)
-                            )
-                            Spacer(modifier = Modifier.width(16.dp))
-                            Column {
-                                Text(
-                                    text = stringResource(id = R.string.profile_email),
-                                    style = MaterialTheme.typography.labelMedium,
-                                    color = MaterialTheme.colorScheme.onSurfaceVariant
-                                )
-                                Text(
-                                    text = user.email ?: "",
-                                    style = MaterialTheme.typography.bodyLarge,
-                                    color = MaterialTheme.colorScheme.onSurface
-                                )
-                            }
-                        }
-                    }
-                }
+        UserInfoCard(user)
+
+        Spacer(modifier = Modifier.height(48.dp))
+
+        LogoutButton(viewModel)
+    }
+}
+
+@Composable
+fun ProfileViewLandscape(user: com.nextapp.monasterio.models.User, viewModel: AuthViewModel) {
+    Row(
+        modifier = Modifier
+            .fillMaxSize()
+            .padding(16.dp),
+        verticalAlignment = Alignment.CenterVertically,
+        horizontalArrangement = Arrangement.SpaceBetween
+    ) {
+        // 1. ESCUDO (30%)
+        Box(
+            modifier = Modifier.weight(0.3f),
+            contentAlignment = Alignment.Center
+        ) {
+            Icon(
+                painter = painterResource(id = R.drawable.escudo),
+                contentDescription = null,
+                modifier = Modifier.size(140.dp), // Un poco m谩s grande en tablet
+                tint = androidx.compose.ui.graphics.Color.Unspecified
+            )
+        }
+
+        // 2. DATOS USUARIO (40%)
+        Box(
+            modifier = Modifier
+                .weight(0.4f)
+                .padding(horizontal = 16.dp),
+            contentAlignment = Alignment.Center
+        ) {
+            UserInfoCard(user)
+        }
+
+        // 3. BOTN LOGOUT (30%)
+        Box(
+            modifier = Modifier.weight(0.3f),
+            contentAlignment = Alignment.Center
+        ) {
+            LogoutButton(viewModel)
+        }
+    }
+}
+
+@Composable
+fun UserInfoCard(user: com.nextapp.monasterio.models.User) {
+    Card(
+        modifier = Modifier.fillMaxWidth(),
+        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp),
+        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surface)
+    ) {
+        Column(
+            modifier = Modifier.padding(20.dp),
+            verticalArrangement = Arrangement.spacedBy(20.dp)
+        ) {
+            // Nombre
+            Row(verticalAlignment = Alignment.CenterVertically) {
+                Icon(
+                    painter = painterResource(id = R.drawable.outline_account_child_invert_24),
+                    contentDescription = null,
+                    tint = MaterialTheme.colorScheme.primary,
+                    modifier = Modifier.size(24.dp)
+                )
+                Spacer(modifier = Modifier.width(16.dp))
+                Column {
+                    Text(
+                        text = stringResource(id = R.string.profile_name),
+                        style = MaterialTheme.typography.labelMedium,
+                        color = MaterialTheme.colorScheme.onSurfaceVariant
+                    )
+                    Text(
+                        text = user.name ?: "",
+                        style = MaterialTheme.typography.bodyLarge,
+                        color = MaterialTheme.colorScheme.onSurface
+                    )
+                }
+            }
+            HorizontalDivider(color = MaterialTheme.colorScheme.outlineVariant)
+            // Email
+            Row(verticalAlignment = Alignment.CenterVertically) {
+                Icon(
+                    painter = painterResource(id = R.drawable.mail),
+                    contentDescription = null,
+                    tint = MaterialTheme.colorScheme.primary,
+                    modifier = Modifier.size(24.dp)
+                )
+                Spacer(modifier = Modifier.width(16.dp))
+                Column {
+                    Text(
+                        text = stringResource(id = R.string.profile_email),
+                        style = MaterialTheme.typography.labelMedium,
+                        color = MaterialTheme.colorScheme.onSurfaceVariant
+                    )
+                    Text(
+                        text = user.email ?: "",
+                        style = MaterialTheme.typography.bodyLarge,
+                        color = MaterialTheme.colorScheme.onSurface
+                    )
+                }
+            }
+        }
+    }
+}
 
-                Spacer(modifier = Modifier.height(48.dp))
-
-                Button(
-                    onClick = { viewModel.logout() },
-                    colors = ButtonDefaults.buttonColors(containerColor = MaterialTheme.colorScheme.error),
-                    modifier = Modifier.fillMaxWidth(0.6f)
-                ) {
-                    Icon(
-                        painter = androidx.compose.ui.res.painterResource(id = R.drawable.ic_close_24),
-                        contentDescription = null,
-                        modifier = Modifier.size(18.dp)
-                    )
-                    Spacer(modifier = Modifier.width(8.dp))
-                    Text(stringResource(id = R.string.profile_logout))
-                }
-            }
+@Composable
+fun LogoutButton(viewModel: AuthViewModel) {
+    Button(
+        onClick = { viewModel.logout() },
+        colors = ButtonDefaults.buttonColors(containerColor = MaterialTheme.colorScheme.error),
+        modifier = Modifier.widthIn(min = 200.dp) // Ancho m铆nimo para que se vea bien
+    ) {
+        Icon(
+            painter = painterResource(id = R.drawable.ic_close_24),
+            contentDescription = null,
+            modifier = Modifier.size(18.dp)
+        )
+        Spacer(modifier = Modifier.width(8.dp))
+        Text(stringResource(id = R.string.profile_logout))
+    }
+}
 
-            // Mostrar errores si los hay
-            error?.let {
-                Spacer(modifier = Modifier.height(16.dp))
-                Text(text = it, color = MaterialTheme.colorScheme.error)
-            }
-        }
-    }
-}
+// =============================================================================
+// MODO EDICIN (COMPONENTE EXISTENTE REUTILIZADO)
+// =============================================================================
+
+@Composable
+fun EditableProfileView(
+    isEditing: Boolean,
+    hasChanges: Boolean,
+    onSave: () -> Unit,
+    onCancel: () -> Unit,
+    name: String,
+    email: String,
+    onNameChange: (String) -> Unit,
+    onEmailChange: (String) -> Unit
+) {
+    Column(
+        modifier = Modifier
+            .fillMaxSize()
+            .padding(24.dp),
+        verticalArrangement = Arrangement.Center,
+        horizontalAlignment = Alignment.CenterHorizontally
+    ) {
+        EditableContent(
+            isEditing = isEditing,
+            hasChanges = hasChanges,
+            onSave = onSave,
+            onCancel = onCancel,
+            modifier = Modifier.fillMaxWidth()
+        ) {
+            Column(
+                modifier = Modifier.fillMaxWidth(),
+                verticalArrangement = Arrangement.spacedBy(16.dp)
+            ) {
+                Text(
+                    text = stringResource(id = R.string.title_profile),
+                    style = MaterialTheme.typography.titleLarge
+                )
+
+                // Campo Nombre
+                Column {
+                    Text(
+                        text = stringResource(id = R.string.profile_name),
+                        style = MaterialTheme.typography.labelMedium,
+                        color = MaterialTheme.colorScheme.onSurfaceVariant
+                    )
+                    Spacer(modifier = Modifier.height(4.dp))
+                    EditableText(
+                        text = name,
+                        isEditing = isEditing,
+                        onTextChange = onNameChange,
+                        label = stringResource(id = R.string.profile_name),
+                        modifier = Modifier.fillMaxWidth()
+                    )
+                }
+
+                // Campo Email
+                Column {
+                    Text(
+                        text = stringResource(id = R.string.profile_email),
+                        style = MaterialTheme.typography.labelMedium,
+                        color = MaterialTheme.colorScheme.onSurfaceVariant
+                    )
+                    Spacer(modifier = Modifier.height(4.dp))
+                    EditableText(
+                        text = email,
+                        isEditing = isEditing,
+                        onTextChange = onEmailChange,
+                        label = stringResource(id = R.string.profile_email),
+                        modifier = Modifier.fillMaxWidth()
+                    )
+                }
+            }
+        }
+    }
+}
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_01_12_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_01_12_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_01_12_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_01_12_[Changes]/shelved.patch	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,289 +0,0 @@
-Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.EntradaMonasterioFirestoreScreen\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.HistoriaViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    authViewModel: AuthViewModel = viewModel(),\r\n    historiaViewModel: HistoriaViewModel = viewModel(),\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    isEditing: Boolean = false,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen(isEditing = isEditing, viewModel = historiaViewModel) }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }\r\n        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyos()}\r\n        composable(route=AppRoutes.MODO_EDICION) { OpcionesModoEdicion(navController = navController)}\r\n        composable(AppRoutes.EDICION_FONDO_INICIO) {EdicionFondoInicio(navController = navController)}\r\n        composable(AppRoutes.EDICION_PINES) { EdicionPines(navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // Ruta al Edici贸n Pines Host\r\n        composable(AppRoutes.EDICION_PINES) {\r\n            EdicionPinesHost(navController)\r\n        }\r\n\r\n\r\n        // --- 隆隆AQU EST LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // --- Pantalla de Entrada del Monasterio (desde Firebase Pin)\r\n        composable(\r\n            route = AppRoutes.PIN_ENTRADA_MONASTERIO + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            EntradaMonasterioFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- FIN DE LA MODIFICACIN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu铆, 隆est谩 bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision f5ce91fc866b7874aa012c07af9f4349047c46e0)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763759232018)
-@@ -18,6 +18,8 @@
- import androidx.navigation.compose.composable
- import com.nextapp.monasterio.AppRoutes
- import com.nextapp.monasterio.R
-+import com.nextapp.monasterio.models.PuzzleData
-+import com.nextapp.monasterio.models.PuzzleSize
- import com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen
- import com.nextapp.monasterio.ui.theme.MonasteryRed
- import com.nextapp.monasterio.ui.theme.White
-@@ -30,12 +32,12 @@
- 
- @Composable
- fun AppNavigationHost(
-+    modifier: Modifier = Modifier,
-     authViewModel: AuthViewModel = viewModel(),
-     historiaViewModel: HistoriaViewModel = viewModel(),
-     ajustesViewModel: AjustesViewModel = viewModel(),
-     navController: NavHostController,
-     isEditing: Boolean = false,
--    modifier: Modifier = Modifier
- ) {
-     NavHost(
-         navController = navController,
-@@ -47,7 +49,12 @@
-         composable(AppRoutes.HISTORIA) { HistoriaScreen(isEditing = isEditing, viewModel = historiaViewModel) }
-         composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
-         composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }
--        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyos()}
-+        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyosScreen()}
-+        composable(AppRoutes.PUZZLENIVEL1){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(2,2),imagenes= PuzzleData.IMAGENES_NIVEL1)}
-+        composable(AppRoutes.PUZZLENIVEL2){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(3,3),imagenes= PuzzleData.IMAGENES_NIVEL2)}
-+        composable(AppRoutes.PUZZLENIVEL3){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(4,4),imagenes= PuzzleData.IMAGENES_NIVEL3)}
-+        composable(AppRoutes.PUZZLENIVEL4){PuzzleScreen(navController=navController,tama帽o= PuzzleSize(5,5),imagenes= PuzzleData.IMAGENES_NIVEL4)}
-+        composable(AppRoutes.JUEGO_NINYOS){JuegoNinyosScreen(navController=navController)}
-         composable(route=AppRoutes.MODO_EDICION) { OpcionesModoEdicion(navController = navController)}
-         composable(AppRoutes.EDICION_FONDO_INICIO) {EdicionFondoInicio(navController = navController)}
-         composable(AppRoutes.EDICION_PINES) { EdicionPines(navController) }
-Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci贸n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti贸n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val MODO_NINYOS = \"modo_ni帽os\"\r\n\r\n    const val VIDEO_NINYOS = \"video_modo_ni帽os\"\r\n\r\n    const val JUEGO_NINYOS = \"juego_modo_ni帽os\"\r\n    const val MODO_EDICION = \"modo_edicion\"\r\n    const val EDICION_FONDO_INICIO = \"edicion_fondo_inicio\"\r\n    const val EDICION_PINES = \"edicion_pines\"\r\n\r\n\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n    const val PIN_ENTRADA_MONASTERIO = \"entrada_monasterio\"\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
---- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision f5ce91fc866b7874aa012c07af9f4349047c46e0)
-+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763758605168)
-@@ -21,6 +21,10 @@
-     const val MODO_NINYOS = "modo_ni帽os"
- 
-     const val VIDEO_NINYOS = "video_modo_ni帽os"
-+    const val PUZZLENIVEL1 ="puzzle_nivel_1"
-+    const val PUZZLENIVEL2 ="puzzle_nivel_2"
-+    const val PUZZLENIVEL3 ="puzzle_nivel_3"
-+    const val PUZZLENIVEL4 ="puzzle_nivel_4"
- 
-     const val JUEGO_NINYOS = "juego_modo_ni帽os"
-     const val MODO_EDICION = "modo_edicion"
-Index: .idea/deploymentTargetSelector.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DROPDOWN\" />\r\n        <DropdownSelection timestamp=\"2025-11-21T20:07:24.718576700Z\">\r\n          <Target type=\"DEFAULT_BOOT\">\r\n            <handle>\r\n              <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=RZCX7216PCM\" />\r\n            </handle>\r\n          </Target>\r\n        </DropdownSelection>\r\n        <DialogSelection />\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
---- a/.idea/deploymentTargetSelector.xml	(revision f5ce91fc866b7874aa012c07af9f4349047c46e0)
-+++ b/.idea/deploymentTargetSelector.xml	(date 1763758605076)
-@@ -5,9 +5,11 @@
-       <SelectionState runConfigName="app">
-         <option name="selectionMode" value="DROPDOWN" />
-         <DropdownSelection timestamp="2025-11-21T20:07:24.718576700Z">
-+        <DropdownSelection timestamp="2025-11-20T15:54:25.882570500Z">
-           <Target type="DEFAULT_BOOT">
-             <handle>
-               <DeviceId pluginId="PhysicalDevice" identifier="serial=RZCX7216PCM" />
-+              <DeviceId pluginId="LocalEmulator" identifier="path=C:\Users\frinc\.android\avd\Medium_Phone.avd" />
-             </handle>
-           </Target>
-         </DropdownSelection>
-Index: app/build.gradle.kts
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    implementation(libs.google.firebase.firestore)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"io.github.chrisbanes:PhotoView:2.3.0\")\r\n    implementation(\"com.github.bumptech.glide:glide:4.16.0\")\r\n\r\n    // Panoramica\r\n    implementation(\"com.github.hannesa2:panoramagl:1.14\")\r\n    // Cloudinary\r\n    implementation(\"io.coil-kt:coil-compose:2.7.0\")\r\n\r\n    //media\r\n    implementation(libs.androidx.media3.exoplayer)\r\n    implementation(libs.androidx.media3.ui)\r\n\r\n    //Datastore\r\n    implementation(\"androidx.datastore:datastore-preferences:1.0.0\")\r\n\r\n    // Cloudinary - Image Upload\r\n    implementation(\"com.squareup.okhttp3:okhttp:4.12.0\")\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/build.gradle.kts b/app/build.gradle.kts
---- a/app/build.gradle.kts	(revision f5ce91fc866b7874aa012c07af9f4349047c46e0)
-+++ b/app/build.gradle.kts	(date 1763767039572)
-@@ -52,6 +52,7 @@
-     implementation(libs.androidx.material3)
-     implementation(libs.androidx.compose.foundation)
-     implementation(libs.google.firebase.firestore)
-+    implementation(libs.androidx.compose.ui.unit)
-     testImplementation(libs.junit)
-     androidTestImplementation(libs.androidx.junit)
-     androidTestImplementation(libs.androidx.espresso.core)
-@@ -89,6 +90,8 @@
- 
-     //Datastore
-     implementation("androidx.datastore:datastore-preferences:1.0.0")
-+    implementation("com.google.accompanist:accompanist-flowlayout:0.34.0")
-+
- 
-     // Cloudinary - Image Upload
-     implementation("com.squareup.okhttp3:okhttp:4.12.0")
-Index: app/src/main/res/values-en/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"title_entrada\">Monastery Entrance</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n    <string name=\"child_mode\">KIDS MODE</string>\r\n    <string name=\"child_mode_view\">Kids Mode</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Game</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">GAME</string>\r\n    <string name=\"edit_mode\">EDIT MODE</string>\r\n    <string name=\"edit_home_background\">Edit home background</string>\r\n    <string name=\"edit_pins\">Edit pins</string>\r\n    <string name=\"location_error\">No app was found to open the location.</string>\r\n    <string name=\"contact_data\">Contact Information</string>\r\n    <string name=\"location_data\">Location</string>\r\n    <string name=\"email_data\">Email</string>\r\n    <string name=\"phone_data\">Phone</string>\r\n    <string name=\"visit_schedule\">Opening Hours</string>\r\n    <string name=\"monday_to_friday\">Monday to Friday:</string>\r\n    <string name=\"play_audio\" />\r\n    <string name=\"confirm_save_title\">Save changes?</string>\r\n    <string name=\"confirm_save_message\">Are you sure you want to save the changes?</string>\r\n    <string name=\"confirm_save_button\">Save</string>\r\n    <string name=\"confirm_cancel_button\">Cancel</string>\r\n    <string name=\"edit_cancel_changes\">Cancel</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Add image</string>\r\n    <string name=\"image_delete\">Delete</string>\r\n    <string name=\"image_delete_confirm_title\">Delete image?</string>\r\n    <string name=\"image_delete_confirm_message\">Are you sure you want to delete this image?</string>\r\n    <string name=\"image_uploading\">Uploading image...</string>\r\n    <string name=\"image_upload_success\">Image uploaded successfully</string>\r\n    <string name=\"image_upload_error\">Error uploading image</string>\r\n    <string name=\"image_select_error\">Error selecting image</string>\r\n    <string name=\"image_gallery_title\">Images</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
---- a/app/src/main/res/values-en/strings.xml	(revision f5ce91fc866b7874aa012c07af9f4349047c46e0)
-+++ b/app/src/main/res/values-en/strings.xml	(date 1763759753151)
-@@ -103,6 +103,11 @@
-     <string name="visit_schedule">Opening Hours</string>
-     <string name="monday_to_friday">Monday to Friday:</string>
-     <string name="play_audio" />
-+    <string name="four_pieces">4 pieces</string>
-+    <string name="nine_pieces">9 pieces</string>
-+    <string name="sixteen_pieces">16 pieces</string>
-+    <string name="twentyfive_pieces">25 pieces</string>
-+
-     <string name="confirm_save_title">Save changes?</string>
-     <string name="confirm_save_message">Are you sure you want to save the changes?</string>
-     <string name="confirm_save_button">Save</string>
-@@ -118,4 +123,7 @@
-     <string name="image_upload_error">Error uploading image</string>
-     <string name="image_select_error">Error selecting image</string>
-     <string name="image_gallery_title">Images</string>
-+    <string name="congratulations">Congratulations!</string>
-+    <string name="message_puzzle_completed">You\'ve solved the puzzle! Ready for the next challenge?</string>
-+    <string name="ready">Ready</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/VideoNinyos.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.layout.fillMaxSize\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.CircularProgressIndicator\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.runtime.getValue\r\nimport androidx.compose.runtime.mutableStateOf\r\nimport androidx.compose.runtime.remember\r\nimport androidx.compose.runtime.setValue\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.core.net.toUri\r\nimport androidx.media3.exoplayer.ExoPlayer\r\nimport androidx.media3.common.MediaItem\r\nimport androidx.media3.common.Player\r\nimport androidx.media3.ui.PlayerView\r\n\r\n\r\n@Composable\r\nfun VideoNinyos(modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    val videoEspanyol = \"https://res.cloudinary.com/drx7mujrv/video/upload/f_auto,q_auto:low,w_auto:1000/v1763317610/videoespa%C3%B1ol_agayqb.mp4\"\r\n    val videoIngles = \"https://res.cloudinary.com/drx7mujrv/video/upload/f_auto,q_auto:low,w_auto:1000/v1763317613/videoingles_h8ejvc.mp4\"\r\n    val videoAleman = \"https://res.cloudinary.com/drx7mujrv/video/upload/f_auto,q_auto:low,w_auto:1000/v1763317621/videoaleman_x5he9w.mp4\"\r\n\r\n    var isLoading by remember { mutableStateOf(true) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val language = configuration.locales[0].language\r\n\r\n    val exoPlayer = remember {\r\n        ExoPlayer.Builder(context).build().apply {\r\n           addListener(object : Player.Listener{\r\n               override fun onPlaybackStateChanged(playbackState: Int) {\r\n                   isLoading = when(playbackState){\r\n                        Player.STATE_BUFFERING -> true\r\n                        Player.STATE_READY -> false\r\n                        else -> false\r\n                   }\r\n               }\r\n           })\r\n            when(language){\r\n                \"es\" -> {\r\n                    setMediaItem(MediaItem.fromUri(videoEspanyol))\r\n                    prepare()\r\n                    playWhenReady = true\r\n                }\r\n                \"de\" -> {\r\n                    setMediaItem(MediaItem.fromUri(videoAleman))\r\n                    prepare()\r\n                    playWhenReady = true\r\n                }\r\n                else -> {\r\n                    setMediaItem(MediaItem.fromUri(videoIngles))\r\n                    prepare()\r\n                    playWhenReady = true\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n\r\n        onDispose {\r\n            exoPlayer.release()\r\n            activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().background(Color.Black)) {\r\n        val(videoPlayer,loadingSpinner) = createRefs()\r\n\r\n        AndroidView(\r\n            factory = {\r\n                PlayerView(context).apply {\r\n                    player = exoPlayer\r\n                    useController = true\r\n                }\r\n            },\r\n            modifier = Modifier\r\n                .constrainAs(videoPlayer){\r\n                    top.linkTo(parent.top)\r\n                    bottom.linkTo(parent.bottom)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.fillToConstraints\r\n                }\r\n        )\r\n\r\n        if (isLoading) {\r\n            CircularProgressIndicator(\r\n                modifier = Modifier.constrainAs(loadingSpinner) {\r\n                    // Lo centramos encima del reproductor\r\n                    top.linkTo(videoPlayer.top)\r\n                    bottom.linkTo(videoPlayer.bottom)\r\n                    start.linkTo(videoPlayer.start)\r\n                    end.linkTo(videoPlayer.end)\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/VideoNinyos.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/VideoNinyos.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/VideoNinyos.kt	(revision f5ce91fc866b7874aa012c07af9f4349047c46e0)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/VideoNinyos.kt	(date 1763758627581)
-@@ -29,7 +29,7 @@
- 
- 
- @Composable
--fun VideoNinyos(modifier: Modifier = Modifier) {
-+fun VideoNinyosScreen(modifier: Modifier = Modifier) {
-     val context = LocalContext.current
- 
-     val activity = (context as? Activity)
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun OpcionesModoNi帽o(navController:NavController,modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().background(Color.White).verticalScroll(rememberScrollState())) {\r\n        val (btnVisit,btnBook) = createRefs()\r\n        val centerGuide = createGuidelineFromTop(0.5f)\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIDEO_NINYOS)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVisit) {\r\n                    bottom.linkTo(centerGuide, margin = 24.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier\r\n                    .padding(horizontal = 20.dp),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            )  {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.youtube),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 18.dp)\r\n                        .size(48.dp)\r\n                )\r\n                Text(\r\n                    stringResource(id = R.string.video_child),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n            }\r\n        }\r\n        Button(\r\n            onClick = {\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnBook) {\r\n                    top.linkTo(centerGuide, margin = 24.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier\r\n                    .padding(horizontal = 20.dp),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.console),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 16.dp)\r\n                        .size(48.dp)\r\n\r\n                )\r\n                Text(\r\n                    stringResource(id = R.string.game_child),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt	(revision f5ce91fc866b7874aa012c07af9f4349047c46e0)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt	(date 1763758627601)
-@@ -51,7 +51,7 @@
-     }
- 
-     ConstraintLayout(modifier = modifier.fillMaxSize().background(Color.White).verticalScroll(rememberScrollState())) {
--        val (btnVisit,btnBook) = createRefs()
-+        val (btnVideo,btnJuego) = createRefs()
-         val centerGuide = createGuidelineFromTop(0.5f)
-         Button(
-             onClick = {
-@@ -60,7 +60,7 @@
-             colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),
-             shape = RoundedCornerShape(20.dp),
-             modifier = Modifier
--                .constrainAs(btnVisit) {
-+                .constrainAs(btnVideo) {
-                     bottom.linkTo(centerGuide, margin = 24.dp)
-                     start.linkTo(parent.start, margin = 40.dp)
-                     end.linkTo(parent.end, margin = 40.dp)
-@@ -88,11 +88,12 @@
-         }
-         Button(
-             onClick = {
-+                navController.navigate(AppRoutes.JUEGO_NINYOS)
-             },
-             colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),
-             shape = RoundedCornerShape(20.dp),
-             modifier = Modifier
--                .constrainAs(btnBook) {
-+                .constrainAs(btnJuego) {
-                     top.linkTo(centerGuide, margin = 24.dp)
-                     start.linkTo(parent.start, margin = 40.dp)
-                     end.linkTo(parent.end, margin = 40.dp)
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIOS</string>\r\n    <string name=\"child_mode_view\">Modo Ni帽os</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n    <string name=\"edit_mode\">MODO EDICIN</string>\r\n    <string name=\"edit_home_background\">Edici贸n fondo inicio</string>\r\n    <string name=\"edit_pins\">Edici贸n pines</string>\r\n    <string name=\"location_error\">No se encontr贸 una app para abrir la ubicaci贸n.</string>\r\n    <string name=\"contact_data\">Datos de contacto</string>\r\n    <string name=\"location_data\">Ubicaci贸n</string>\r\n    <string name=\"email_data\">Correo electr贸nico</string>\r\n    <string name=\"phone_data\">Tel茅fono</string>\r\n    <string name=\"visit_schedule\">Horarios de Visita</string>\r\n    <string name=\"monday_to_friday\">Lunes a Viernes:</string>\r\n    <string name=\"play_audio\" />\r\n    <string name=\"dont_show_again\">No volver a mostrar</string>\r\n    <string name=\"understand\">Entendido</string>\r\n    <string name=\"map_tutorial_body\">Este es el cuerpo del tutorial</string>\r\n    <string name=\"map_tutorial_title\">Este es el titulo del tutorial</string>\r\n    <string name=\"map_tutorial_body2\">Este es el cuerpo del tutorial del mapa 2</string>\r\n    <string name=\"map_tutorial_title2\">Este es el titulo del tutorial del mapa 2</string>\r\n    <string name=\"pin_tutorial_body\">Este es el cuerpo del tutorial del pin</string>\r\n    <string name=\"pin_tutorial_title\">Este es el titulo del tutorial del pin</string>\r\n    <string name=\"next\">Siguiente</string>\r\n    <string name=\"map_tutorial_body1\">En la parte superior izquierda, el s铆mbolo () permite volver al inicio</string>\r\n    <string name=\"map_tutorial_body1_2\">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>\r\n    <string name=\"map_tutorial_body1_3\">Adem谩s de tocando en el mapa se puede interactuar con este a partir de los botones en la parte derecha que permiten ampliar, desampliar y centrar el mapa</string>\r\n    <string name=\"submapa_1\">Tocando en el s铆mbolo () podemos volver al mapa general</string>\r\n    <string name=\"submapa_2\">Tocando en los distintos pines podemos entrar a los puntos de inter茅s</string>\r\n    <string name=\"pin_1\">Pulsando en el s铆mbolo (), se puede volver al mapa</string>\r\n    <string name=\"pin_2\">Puedes desplazarte por las im谩genes o pulsar en ellas para ampliarlas</string>\r\n    <string name=\"pin_3\">Pulsando aqu铆 puedes escuchar el audio del texto</string>\r\n    <string name=\"pin_4\">Para acceder a la vista 360 pulse este bot贸n</string>\r\n    <string name=\"confirm_save_title\">驴Guardar cambios?</string>\r\n    <string name=\"confirm_save_message\">驴Est谩s seguro de que quieres guardar los cambios realizados?</string>\r\n    <string name=\"confirm_save_button\">Guardar</string>\r\n    <string name=\"confirm_cancel_button\">Cancelar</string>\r\n    <string name=\"edit_cancel_changes\">Cancelar</string>\r\n    <string name=\"profile_name\">Nombre</string>\r\n    <string name=\"image_add\">A帽adir imagen</string>\r\n    <string name=\"image_delete\">Borrar</string>\r\n    <string name=\"image_delete_confirm_title\">驴Borrar imagen?</string>\r\n    <string name=\"image_delete_confirm_message\">驴Seguro que quieres borrar la imagen?</string>\r\n    <string name=\"image_uploading\">Subiendo imagen...</string>\r\n    <string name=\"image_upload_success\">Imagen subida correctamente</string>\r\n    <string name=\"image_upload_error\">Error al subir la imagen</string>\r\n    <string name=\"image_select_error\">Error al cargar la imagen</string>\r\n    <string name=\"image_gallery_title\">Im谩genes</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision f5ce91fc866b7874aa012c07af9f4349047c46e0)
-+++ b/app/src/main/res/values/strings.xml	(date 1763759786377)
-@@ -99,6 +99,10 @@
-     <string name="visit_schedule">Horarios de Visita</string>
-     <string name="monday_to_friday">Lunes a Viernes:</string>
-     <string name="play_audio" />
-+    <string name="four_pieces">4 piezas</string>
-+    <string name="nine_pieces">9 piezas</string>
-+    <string name="sixteen_pieces">16 piezas</string>
-+    <string name="twentyfive_pieces">25 piezas</string>
-     <string name="dont_show_again">No volver a mostrar</string>
-     <string name="understand">Entendido</string>
-     <string name="map_tutorial_body">Este es el cuerpo del tutorial</string>
-@@ -131,5 +135,8 @@
-     <string name="image_upload_success">Imagen subida correctamente</string>
-     <string name="image_upload_error">Error al subir la imagen</string>
-     <string name="image_select_error">Error al cargar la imagen</string>
-+    <string name="congratulations">隆Felicidades!</string>
-+    <string name="message_puzzle_completed">隆Has resuelto el puzzle! 驴Listo para el siguiente desaf铆o?</string>
-+    <string name="ready">Listo</string>
-     <string name="image_gallery_title">Im谩genes</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/res/values-de/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus beenden</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">nderungen speichern</string>\r\n    <string name=\"profile_login\">Anmelden</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Gegenwart</string>\r\n    <string name=\"title_appointment\">Termin buchen</string>\r\n    <string name=\"option_phone_appointment\">Telefonisch buchen</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Uhrzeit</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">W盲hlen Sie ein Datum</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name ist erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail ist erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden</string>\r\n    <string name=\"hour_no_selected\">Eine Uhrzeit muss ausgew盲hlt werden</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Abbrechen</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist bereit. Bitte klicken Sie auf \\'Senden\\' in der gerade ge枚ffneten E-Mail-Anwendung, um Ihre Anfrage abzuschlieen. Wir werden auf diese E-Mail antworten, um die Verf眉gbarkeit zu best盲tigen.</string>\r\n    <string name=\"email_subject\">Anfrage f眉r Besuchsreservierung - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nIch m枚chte eine Reservierung f眉r einen Besuch des Klosters mit den folgenden Details anfordern:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre freundliche Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">Schriftgr枚e ausw盲hlen</string>\r\n    <string name=\"font_extrabig\">Extra Gro</string>\r\n    <string name=\"font_normal\">Mittel</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"title_entrada\">Klostereingang</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Zur眉ck</string>\r\n    <string name=\"see_360\">360潞 ansehen</string>\r\n    <string name=\"contentdescription_image_pin\">Pin-Bild (zum Vergr枚ern klicken)</string>\r\n    <string name=\"readjust\">Neu anpassen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Erh枚hen</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Ziel nicht definiert</string>\r\n    <string name=\"notdefined_destinyplane\">Zielplan nicht definiert</string>\r\n    <string name=\"plane_loading\">Lade Plan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n    <string name=\"child_mode\">KINDERMODUS</string>\r\n    <string name=\"child_mode_view\">Kindermodus</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Spiel</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">SPIEL</string>\r\n    <string name=\"edit_mode\">BEARBEITUNGSMODUS</string>\r\n    <string name=\"edit_home_background\">Startseiten-Hintergrund bearbeiten</string>\r\n    <string name=\"edit_pins\">Pins bearbeiten</string>\r\n    <string name=\"location_error\">Es wurde keine App gefunden, mit der der Standort ge枚ffnet werden kann.</string>\r\n    <string name=\"contact_data\">Kontaktinformationen</string>\r\n    <string name=\"location_data\">Standort</string>\r\n    <string name=\"email_data\">E-Mail</string>\r\n    <string name=\"phone_data\">Telefon</string>\r\n    <string name=\"visit_schedule\">ffnungszeiten</string>\r\n    <string name=\"monday_to_friday\">Montag bis Freitag:</string>\r\n    <string name=\"play_audio\" />\r\n    <string name=\"confirm_save_title\">nderungen speichern?</string>\r\n    <string name=\"confirm_save_message\">Sind Sie sicher, dass Sie die nderungen speichern m枚chten?</string>\r\n    <string name=\"confirm_save_button\">Speichern</string>\r\n    <string name=\"confirm_cancel_button\">Abbrechen</string>\r\n    <string name=\"edit_cancel_changes\">Abbrechen</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Bild hinzuf眉gen</string>\r\n    <string name=\"image_delete\">L枚schen</string>\r\n    <string name=\"image_delete_confirm_title\">Bild l枚schen?</string>\r\n    <string name=\"image_delete_confirm_message\">Diese Aktion kann nicht r眉ckg盲ngig gemacht werden</string>\r\n    <string name=\"image_uploading\">Bild wird hochgeladen...</string>\r\n    <string name=\"image_upload_success\">Bild erfolgreich hochgeladen</string>\r\n    <string name=\"image_upload_error\">Fehler beim Hochladen des Bildes</string>\r\n    <string name=\"image_select_error\">Fehler beim Ausw盲hlen des Bildes</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
---- a/app/src/main/res/values-de/strings.xml	(revision f5ce91fc866b7874aa012c07af9f4349047c46e0)
-+++ b/app/src/main/res/values-de/strings.xml	(date 1763759809906)
-@@ -117,4 +117,11 @@
-     <string name="image_upload_success">Bild erfolgreich hochgeladen</string>
-     <string name="image_upload_error">Fehler beim Hochladen des Bildes</string>
-     <string name="image_select_error">Fehler beim Ausw盲hlen des Bildes</string>
-+    <string name="four_pieces">4 St眉ck</string>
-+    <string name="nine_pieces">9 St眉ck</string>
-+    <string name="sixteen_pieces">16 St眉ck</string>
-+    <string name="twentyfive_pieces">25 St眉ck</string>
-+    <string name="congratulations">Gl眉ckwunsch!</string>
-+    <string name="message_puzzle_completed">Du hast das R盲tsel gel枚st! Bereit f眉r die n盲chste Herausforderung?</string>
-+    <string name="ready">Bereit</string>
- </resources>
-\ No newline at end of file
-Index: gradle/libs.versions.toml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>[versions]\r\nagp = \"8.11.1\" #no cambiar de la 8.11.1\r\nkotlin = \"2.2.0\"\r\ncoreKtx = \"1.17.0\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nlifecycleRuntimeKtx = \"2.9.4\"\r\nactivityCompose = \"1.11.0\"\r\ncomposeBom = \"2025.10.01\"\r\n#Practica\r\nconstraintlayoutCompose = \"1.1.1\"\r\nnavigationCompose = \"2.9.5\"\r\nfoundation = \"1.9.4\"\r\nappcompat = \"1.7.0\"\r\nmaterial = \"1.12.0\"\r\nfirebase-gservices = \"4.4.4\"\r\nfirebase-bom = \"33.1.0\"\r\n#panoramicas\r\npanoramaGL = \"1.11.0\"\r\nfirebaseFirestore = \"26.0.2\"\r\nmedia3 = \"1.3.1\"\r\n\r\n[libraries]\r\nandroidx-core-ktx = { group = \"androidx.core\", name = \"core-ktx\", version.ref = \"coreKtx\" }\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\nandroidx-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nandroidx-espresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nandroidx-lifecycle-runtime-ktx = { group = \"androidx.lifecycle\", name = \"lifecycle-runtime-ktx\", version.ref = \"lifecycleRuntimeKtx\" }\r\nandroidx-activity-compose = { group = \"androidx.activity\", name = \"activity-compose\", version.ref = \"activityCompose\" }\r\nandroidx-compose-bom = { group = \"androidx.compose\", name = \"compose-bom\", version.ref = \"composeBom\" }\r\nandroidx-ui = { group = \"androidx.compose.ui\", name = \"ui\" }\r\nandroidx-ui-graphics = { group = \"androidx.compose.ui\", name = \"ui-graphics\" }\r\nandroidx-ui-tooling = { group = \"androidx.compose.ui\", name = \"ui-tooling\" }\r\nandroidx-ui-tooling-preview = { group = \"androidx.compose.ui\", name = \"ui-tooling-preview\" }\r\nandroidx-ui-test-manifest = { group = \"androidx.compose.ui\", name = \"ui-test-manifest\" }\r\nandroidx-ui-test-junit4 = { group = \"androidx.compose.ui\", name = \"ui-test-junit4\" }\r\nandroidx-material3 = { group = \"androidx.compose.material3\", name = \"material3\" }\r\n#Practica\r\nconstraintlayout-compose = { module = \"androidx.constraintlayout:constraintlayout-compose\", version.ref = \"constraintlayoutCompose\" }\r\nnavigation-compose = { module = \"androidx.navigation:navigation-compose\", version.ref = \"navigationCompose\" }\r\nandroidx-compose-foundation = { group = \"androidx.compose.foundation\", name = \"foundation\", version.ref = \"foundation\" }\r\nandroidx-appcompat = { module = \"androidx.appcompat:appcompat\", version.ref = \"appcompat\" }\r\ngoogle-material = { module = \"com.google.android.material:material\", version.ref = \"material\" }\r\nfirebase-bom = { module = \"com.google.firebase:firebase-bom\", version.ref = \"firebase-bom\" }\r\nfirebase-firestore = { module = \"com.google.firebase:firebase-firestore-ktx\" }\r\n#Panoramicas\r\npanoramaGL = { module = \"com.github.hannesa2:panoramaGL\", version.ref = \"panoramaGL\" }\r\ngoogle-firebase-firestore = { group = \"com.google.firebase\", name = \"firebase-firestore\", version.ref = \"firebaseFirestore\" }\r\nandroidx-media3-exoplayer = { module = \"androidx.media3:media3-exoplayer\", version.ref = \"media3\" }\r\nandroidx-media3-ui = { group = \"androidx.media3\", name = \"media3-ui\", version.ref = \"media3\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\nkotlin-android = { id = \"org.jetbrains.kotlin.android\", version.ref = \"kotlin\" }\r\nkotlin-compose = { id = \"org.jetbrains.kotlin.plugin.compose\", version.ref = \"kotlin\" }\r\nfirebase-gservices = { id = \"com.google.gms.google-services\", version.ref = \"firebase-gservices\" }\r\n\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
---- a/gradle/libs.versions.toml	(revision f5ce91fc866b7874aa012c07af9f4349047c46e0)
-+++ b/gradle/libs.versions.toml	(date 1763767039546)
-@@ -20,6 +20,7 @@
- panoramaGL = "1.11.0"
- firebaseFirestore = "26.0.2"
- media3 = "1.3.1"
-+uiUnit = "1.9.5"
- 
- [libraries]
- androidx-core-ktx = { group = "androidx.core", name = "core-ktx", version.ref = "coreKtx" }
-@@ -49,6 +50,7 @@
- google-firebase-firestore = { group = "com.google.firebase", name = "firebase-firestore", version.ref = "firebaseFirestore" }
- androidx-media3-exoplayer = { module = "androidx.media3:media3-exoplayer", version.ref = "media3" }
- androidx-media3-ui = { group = "androidx.media3", name = "media3-ui", version.ref = "media3" }
-+androidx-compose-ui-unit = { group = "androidx.compose.ui", name = "ui-unit", version.ref = "uiUnit" }
- 
- [plugins]
- android-application = { id = "com.android.application", version.ref = "agp" }
Index: .idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]/shelved.patch	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,670 +0,0 @@
-Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            // 1. Leemos el tama帽o guardado en preferencias (ej. 1.3f)\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n\r\n            val currentDensity = LocalDensity.current\r\n            val currentConfig = LocalConfiguration.current\r\n\r\n            // 2. Calculamos la nueva Densidad (Para que el texto SE VEA grande)\r\n            // Nota: Si 'appFontScale' ya es el valor absoluto (ej 1.3), 煤salo directamente.\r\n            // Si es un multiplicador, se multiplica. Asumo que FontSize devuelve 1.0, 1.3, 1.6...\r\n            val newDensity = Density(\r\n                density = currentDensity.density,\r\n                fontScale = appFontScale\r\n            )\r\n\r\n            // 3. (NUEVO) Actualizamos la Configuraci贸n (Para que el RadioButton SEPA que es grande)\r\n            val newConfiguration = android.content.res.Configuration(currentConfig).apply {\r\n                fontScale = appFontScale\r\n            }\r\n\r\n            // 4. Inyectamos AMBOS valores a toda la app\r\n            CompositionLocalProvider(\r\n                LocalDensity provides newDensity,\r\n                LocalConfiguration provides newConfiguration // <--- ESTO FALTABA\r\n            ) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    //ViewModel para tener el estado del usuario autenticado\r\n    val authViewModel: AuthViewModel = viewModel()\r\n    val currentUser by authViewModel.currentUser.collectAsState(initial = null)\r\n    // Estado global para el modo edici贸n\r\n    var isEditing by remember { mutableStateOf(false) }\r\n\r\n    // ... (Tu l贸gica de idioma se queda igual)\r\n    val stringEspanyol= \"Espa帽ol\"\r\n    val stringAleman= \"Deutsch\"\r\n    val stringIngles= \"English\"\r\n    var mostrarIdioma by remember { mutableStateOf(false) }\r\n    val configuration = LocalConfiguration.current\r\n    val currentLanguageCode = configuration.locales[0].language\r\n    var idioma by remember { mutableStateOf(currentLanguageCode) }\r\n    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    //  Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n\r\n    // Comprueba si la ruta ES \"virtual_visit\" (esto cubre el mapa Y los pines anidados)\r\n    val isVirtualVisit = currentRoute == AppRoutes.VIRTUAL_VISIT\r\n\r\n    // Comprueba si la ruta EMPIEZA POR \"pin_360\" (la nueva vista 360)\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n\r\n    val isEdicion = currentRoute == AppRoutes.EDICION_PINES\r\n\r\n    // La vista es inmersiva si es CUALQUIERA de las tres\r\n    val isImmersive = isPanorama || isVirtualVisit || isPin360 || isEdicion\r\n\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    //  Actualizar t铆tulo (Tu l贸gica se queda igual)\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)\r\n                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)\r\n                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)\r\n                AppRoutes.MODO_EDICION -> context.getString(R.string.edit_mode)\r\n                AppRoutes.PIN_ENTRADA_MONASTERIO -> context.getString(R.string.title_entrada)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    // --- 隆隆2. ESTRUCTURA REFACTORIZADA (UN SOLO NAVHOST)!! ---\r\n    // (Hemos eliminado el 'if (isImmersive)' que duplicaba el NavHost)\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        // Desactivamos gestos en el mapa Y en pantallas inmersivas\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                // Solo mostramos la barra roja si NO estamos en una ruta inmersiva\r\n                if (!isImmersive) {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            // ... (Tu l贸gica de idioma y Toast se queda igual)\r\n                            Box {\r\n                                OutlinedIconButton(onClick = {\r\n                                    mostrarIdioma = true\r\n                                }) {\r\n                                    val iconRes =\r\n                                        if (idioma == \"es\" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == \"de\" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido\r\n                                    Image(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = if (idioma == \"es\" || idioma == stringEspanyol ) stringEspanyol\r\n                                        else if (idioma == \"de\" || idioma == stringAleman) stringAleman else stringIngles,\r\n                                        contentScale = ContentScale.Crop\r\n                                    )\r\n                                }\r\n                                DropdownMenu(\r\n                                    expanded = mostrarIdioma,\r\n                                    onDismissRequest = { mostrarIdioma = false },\r\n                                    modifier = Modifier.fillMaxWidth(0.8f),\r\n                                ) {\r\n                                    idiomasDisponibles.forEach { idiomaSlot ->\r\n                                        DropdownMenuItem(\r\n                                            text = { Text(idiomaSlot) },\r\n                                            onClick = {\r\n                                                idioma = idiomaSlot\r\n                                                mostrarIdioma = false\r\n                                                if(idiomaSlot == stringEspanyol)\r\n                                                    LanguageHelper.saveLocale(context, \"es\")\r\n                                                else if(idiomaSlot == stringAleman){\r\n                                                    LanguageHelper.saveLocale(context, \"de\")\r\n                                                } else LanguageHelper.saveLocale(context, \"en\")\r\n                                            }\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            // Icono Editar: solo disponible para un usuario autenticado\r\n                            if (currentUser != null) {\r\n                                IconButton(onClick = {\r\n                                    isEditing = !isEditing // Toggle del modo edici贸n\r\n                                    val message = if (isEditing) context.getString(R.string.edit_mode_activate_message) else context.getString(R.string.edit_mode_deactivate_message)\r\n                                    Toast.makeText(context, message, Toast.LENGTH_SHORT).show()\r\n                                }) {\r\n                                    Icon(\r\n                                        painter = painterResource(id = if (isEditing) R.drawable.lapiz else R.drawable.lapiz),\r\n                                        contentDescription = if (isEditing) stringResource(id = R.string.edit_mode_deactivate_icon) else  stringResource(id = R.string.edit_mode_activate_icon)\r\n                                    )\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            // 隆隆UN SOLO AppNavigationHost!!\r\n            // (Si es inmersiva, paddingValues ser谩 cero porque no hay TopBar)\r\n            AppNavigationHost(\r\n                authViewModel = authViewModel,\r\n                navController = navController,\r\n                isEditing = isEditing,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
---- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1763938644001)
-@@ -1,5 +1,7 @@
- package com.nextapp.monasterio
- 
-+import android.R.attr.text
-+import android.app.Activity
- import android.os.Bundle
- import android.widget.Toast
- import androidx.activity.compose.setContent
-@@ -19,6 +21,9 @@
- import androidx.appcompat.app.AppCompatDelegate
- import androidx.compose.foundation.Image
- import androidx.compose.foundation.border
-+import androidx.compose.foundation.shape.RoundedCornerShape
-+import androidx.compose.ui.Alignment
-+import androidx.compose.ui.draw.clip
- import androidx.compose.ui.graphics.Color
- import androidx.compose.ui.layout.ContentScale
- import androidx.compose.ui.platform.LocalConfiguration
-@@ -140,6 +145,16 @@
-                 AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)
-                 AppRoutes.MODO_EDICION -> context.getString(R.string.edit_mode)
-                 AppRoutes.PIN_ENTRADA_MONASTERIO -> context.getString(R.string.title_entrada)
-+                AppRoutes.JUEGO_PUZZLE -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.JUEGO_PAREJAS -> context.getString(R.string.memory_screen)
-+                AppRoutes.PUZZLENIVEL1 -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.PUZZLENIVEL2 -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.PUZZLENIVEL3 -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.PUZZLENIVEL4 -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.PAREJASNIVEL1 -> context.getString(R.string.memory_screen)
-+                AppRoutes.PAREJASNIVEL2 -> context.getString(R.string.memory_screen)
-+                AppRoutes.PAREJASNIVEL3 -> context.getString(R.string.memory_screen)
-+                AppRoutes.PAREJASNIVEL4 -> context.getString(R.string.memory_screen)
-                 else -> context.getString(R.string.title_inicio)
-             }
-         }
-@@ -208,17 +223,33 @@
-                                     modifier = Modifier.fillMaxWidth(0.8f),
-                                 ) {
-                                     idiomasDisponibles.forEach { idiomaSlot ->
-+                                        val iconRes =
-+                                            if (idioma == "es" || idioma == stringEspanyol) R.drawable.espanya else if (idiomaSlot == "de" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido
-+                                        val name =
-+                                            if (idioma == "es" || idioma == stringEspanyol) stringResource(R.string.lang_es) else if (idioma == "de" || idioma == stringAleman)stringResource(R.string.lang_de) else stringResource(R.string.lang_en)
-+                                        val context = LocalContext.current
-+                                        val activity = context as Activity
-                                         DropdownMenuItem(
--                                            text = { Text(idiomaSlot) },
-+                                            text = {
-+                                                Row(verticalAlignment = Alignment.CenterVertically) {
-+                                                    Image(
-+                                                        painter = painterResource(id = iconRes),
-+                                                        contentDescription = name,
-+                                                        modifier = Modifier.size(28.dp).clip(RoundedCornerShape(4.dp))
-+                                                    )
-+                                                    Spacer(modifier = Modifier.width(16.dp))
-+                                                    Text(text = name)
-+                                                }
-+                                            },
-                                             onClick = {
--                                                idioma = idiomaSlot
-                                                 mostrarIdioma = false
--                                                if(idiomaSlot == stringEspanyol)
--                                                    LanguageHelper.saveLocale(context, "es")
--                                                else if(idiomaSlot == stringAleman){
--                                                    LanguageHelper.saveLocale(context, "de")
--                                                } else LanguageHelper.saveLocale(context, "en")
-+                                                val currentLanguage = activity.resources.configuration.locales[0].language
-+                                                if (currentLanguage != idioma) {
-+                                                    LanguageHelper.saveLocale(activity, idioma)
-+                                                    activity.recreate()
-+                                                }
-                                             }
-+
-                                         )
-                                     }
-                                 }
-Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PuzzleData\r\nimport com.nextapp.monasterio.models.PuzzleSize\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.EntradaMonasterioFirestoreScreen\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.HistoriaViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    modifier: Modifier = Modifier,\r\n    authViewModel: AuthViewModel = viewModel(),\r\n    historiaViewModel: HistoriaViewModel = viewModel(),\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    isEditing: Boolean = false,\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen(isEditing = isEditing, viewModel = historiaViewModel) }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }\r\n        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyosScreen()}\r\n        composable(AppRoutes.PUZZLENIVEL1){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(2,2),imagenes= PuzzleData.IMAGENES_NIVEL1,imagenCompleta=R.drawable.p1)}\r\n        composable(AppRoutes.PUZZLENIVEL2){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(3,3),imagenes= PuzzleData.IMAGENES_NIVEL2, imagenCompleta = R.drawable.p2)}\r\n        composable(AppRoutes.PUZZLENIVEL3){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(4,4),imagenes= PuzzleData.IMAGENES_NIVEL3,imagenCompleta = R.drawable.p3)}\r\n        composable(AppRoutes.PUZZLENIVEL4){PuzzleScreen(navController=navController,tama帽o= PuzzleSize(5,5),imagenes= PuzzleData.IMAGENES_NIVEL4,imagenCompleta = R.drawable.p4)}\r\n        composable(AppRoutes.JUEGO_NINYOS){JuegoNinyosScreen(navController=navController)}\r\n        composable(route=AppRoutes.MODO_EDICION) { OpcionesModoEdicion(navController = navController)}\r\n        composable(AppRoutes.EDICION_FONDO_INICIO) {EdicionFondoInicio(navController = navController)}\r\n        composable(AppRoutes.EDICION_PINES) { EdicionPines(navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // Ruta al Edici贸n Pines Host\r\n        composable(AppRoutes.EDICION_PINES) {\r\n            EdicionPinesHost(navController)\r\n        }\r\n\r\n\r\n        // --- 隆隆AQU EST LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // --- Pantalla de Entrada del Monasterio (desde Firebase Pin)\r\n        composable(\r\n            route = AppRoutes.PIN_ENTRADA_MONASTERIO + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            EntradaMonasterioFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- FIN DE LA MODIFICACIN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu铆, 隆est谩 bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763938687604)
-@@ -18,8 +18,11 @@
- import androidx.navigation.compose.composable
- import com.nextapp.monasterio.AppRoutes
- import com.nextapp.monasterio.R
--import com.nextapp.monasterio.models.PuzzleData
-+import com.nextapp.monasterio.models.ParejasData
-+import com.nextapp.monasterio.models.ParejasSize
-+/*import com.nextapp.monasterio.models.ParejasData*/
- import com.nextapp.monasterio.models.PuzzleSize
-+import com.nextapp.monasterio.models.PuzzleData
- import com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen
- import com.nextapp.monasterio.ui.theme.MonasteryRed
- import com.nextapp.monasterio.ui.theme.White
-@@ -54,12 +57,18 @@
-         composable(AppRoutes.PUZZLENIVEL2){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(3,3),imagenes= PuzzleData.IMAGENES_NIVEL2, imagenCompleta = R.drawable.p2)}
-         composable(AppRoutes.PUZZLENIVEL3){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(4,4),imagenes= PuzzleData.IMAGENES_NIVEL3,imagenCompleta = R.drawable.p3)}
-         composable(AppRoutes.PUZZLENIVEL4){PuzzleScreen(navController=navController,tama帽o= PuzzleSize(5,5),imagenes= PuzzleData.IMAGENES_NIVEL4,imagenCompleta = R.drawable.p4)}
--        composable(AppRoutes.JUEGO_NINYOS){JuegoNinyosScreen(navController=navController)}
-+        composable(AppRoutes.JUEGO_NINYOS){OpcionesJuegoNinyos(navController=navController)}
-         composable(route=AppRoutes.MODO_EDICION) { OpcionesModoEdicion(navController = navController)}
-         composable(AppRoutes.EDICION_FONDO_INICIO) {EdicionFondoInicio(navController = navController)}
-         composable(AppRoutes.EDICION_PINES) { EdicionPines(navController) }
-         composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }
-         composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }
-+        composable (AppRoutes.JUEGO_PUZZLE) {JuegoPuzzleScreen(navController = navController)}
-+        composable(AppRoutes.JUEGO_PAREJAS) {JuegoParejasScreen(navController = navController)}
-+        composable(AppRoutes.PAREJASNIVEL1){ParejasScreen(navController=navController, size = ParejasSize(3,2),imagenes= ParejasData.IMAGENES_NIVEL1)}
-+        composable(AppRoutes.PAREJASNIVEL2){ParejasScreen(navController=navController,size = ParejasSize(4,2),imagenes= ParejasData.IMAGENES_NIVEL2)}
-+        composable(AppRoutes.PAREJASNIVEL3){ParejasScreen(navController=navController,size = ParejasSize(5,2),imagenes= ParejasData.IMAGENES_NIVEL3)}
-+        composable(AppRoutes.PAREJASNIVEL4){ParejasScreen(navController=navController,size= ParejasSize(4,3),imagenes= ParejasData.IMAGENES_NIVEL4)}
- 
-         // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)
-         composable(
-Index: app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt b/app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt
-deleted file mode 100644
---- a/app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ /dev/null	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-@@ -1,87 +0,0 @@
--package com.nextapp.monasterio.viewModels
--
--import androidx.lifecycle.ViewModel
--import androidx.lifecycle.ViewModelProvider
--import com.nextapp.monasterio.models.GridPosicion
--import com.nextapp.monasterio.models.PuzzleManager
--import com.nextapp.monasterio.models.PiezaPuzzle
--import com.nextapp.monasterio.models.PuzzleSize
--import kotlinx.coroutines.flow.MutableStateFlow
--import kotlinx.coroutines.flow.StateFlow
--import kotlinx.coroutines.flow.update
--
--
--
--data class puzzleUiState(
--    val piezas : List<PiezaPuzzle> = emptyList(),
--    val size: PuzzleSize,
--    val solucionado: Boolean = false,
--)
--
--class PuzzleViewModel(
--    private val tama帽oPuzzle: PuzzleSize,
--    private val imagenId: List<Int>) : ViewModel() {
--
--    private val piezas = List(25){it}
--
--    private val _uiState = MutableStateFlow(puzzleUiState(size=tama帽oPuzzle))
--    val uiState: StateFlow<puzzleUiState> = _uiState
--    private val gameManager = PuzzleManager(tama帽oPuzzle)
--
--    init{
--        resetGame()
--    }
--
--    private fun resetGame(){
--        val piezasIniciales = gameManager.inicializarPiezas(imagenId)
--        if (piezasIniciales.isNotEmpty()) {
--            println("DEBUG: Pieza 0 posici贸n inicial: R${piezasIniciales[0].posicionActual.row} C${piezasIniciales[0].posicionActual.column}")
--        }
--        _uiState.value = puzzleUiState(
--            piezas = piezasIniciales,
--            size = tama帽oPuzzle,
--            solucionado = false,
--        )
--    }
--
--    fun soltarPieza(piezaId: Int, newGridPosicion: GridPosicion){
--        _uiState.update{currentUiState->
--            val piezasActualizadas = currentUiState.piezas.map{pieza->
--                if(pieza.id == piezaId){
--                    val esCorrecta = newGridPosicion == pieza.posicionCorrecta
--                    val posicionFinal = if (esCorrecta) {
--                        newGridPosicion
--                    }
--                    else {
--                        pieza.posicionActual
--                    }
--                    pieza.copy(
--                        posicionActual = posicionFinal,
--                        encajada = esCorrecta
--                    )
--                }else{
--                    pieza
--                }
--            }
--            val solved = piezasActualizadas.all{it.encajada}
--            currentUiState.copy(
--                piezas=piezasActualizadas,
--                solucionado = solved
--            )
--        }
--    }
--
--}
--
--class PuzzleViewModelFactory(
--    private val tama帽oPuzzle: PuzzleSize,
--    private val imagenesIds: List<Int>
--) : ViewModelProvider.Factory{
--    @Suppress("UNCHECKED_CAST")
--    override fun <T : ViewModel> create(modelClass: Class<T>): T {
--        if (modelClass.isAssignableFrom(PuzzleViewModel::class.java)) {
--            return PuzzleViewModel(tama帽oPuzzle, imagenesIds) as T
--        }
--        throw IllegalArgumentException("Unknown ViewModel class")
--    }
--}
-\ No newline at end of file
-Index: .idea/deploymentTargetSelector.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DIALOG\" />\r\n        <DropdownSelection timestamp=\"2025-11-23T14:46:27.426713600Z\">\r\n          <Target type=\"DEFAULT_BOOT\">\r\n            <handle>\r\n              <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=R52T40GVQQB\" />\r\n            </handle>\r\n          </Target>\r\n        </DropdownSelection>\r\n        <DialogSelection>\r\n          <targets>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=RZCX7216PCM\" />\r\n              </handle>\r\n            </Target>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=R52T40GVQQB\" />\r\n              </handle>\r\n            </Target>\r\n          </targets>\r\n        </DialogSelection>\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
---- a/.idea/deploymentTargetSelector.xml	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/.idea/deploymentTargetSelector.xml	(date 1763924549556)
-@@ -3,28 +3,7 @@
-   <component name="deploymentTargetSelector">
-     <selectionStates>
-       <SelectionState runConfigName="app">
--        <option name="selectionMode" value="DIALOG" />
--        <DropdownSelection timestamp="2025-11-23T14:46:27.426713600Z">
--          <Target type="DEFAULT_BOOT">
--            <handle>
--              <DeviceId pluginId="PhysicalDevice" identifier="serial=R52T40GVQQB" />
--            </handle>
--          </Target>
--        </DropdownSelection>
--        <DialogSelection>
--          <targets>
--            <Target type="DEFAULT_BOOT">
--              <handle>
--                <DeviceId pluginId="PhysicalDevice" identifier="serial=RZCX7216PCM" />
--              </handle>
--            </Target>
--            <Target type="DEFAULT_BOOT">
--              <handle>
--                <DeviceId pluginId="PhysicalDevice" identifier="serial=R52T40GVQQB" />
--              </handle>
--            </Target>
--          </targets>
--        </DialogSelection>
-+        <option name="selectionMode" value="DROPDOWN" />
-       </SelectionState>
-     </selectionStates>
-   </component>
-Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci贸n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti贸n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val MODO_NINYOS = \"modo_ni帽os\"\r\n\r\n    const val VIDEO_NINYOS = \"video_modo_ni帽os\"\r\n    const val PUZZLENIVEL1 =\"puzzle_nivel_1\"\r\n    const val PUZZLENIVEL2 =\"puzzle_nivel_2\"\r\n    const val PUZZLENIVEL3 =\"puzzle_nivel_3\"\r\n    const val PUZZLENIVEL4 =\"puzzle_nivel_4\"\r\n\r\n    const val JUEGO_NINYOS = \"juego_modo_ni帽os\"\r\n    const val MODO_EDICION = \"modo_edicion\"\r\n    const val EDICION_FONDO_INICIO = \"edicion_fondo_inicio\"\r\n    const val EDICION_PINES = \"edicion_pines\"\r\n\r\n    const val CREACION_PINES = \"creacion_pines\"\r\n\r\n\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n    const val PIN_ENTRADA_MONASTERIO = \"entrada_monasterio\"\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
---- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763915156576)
-@@ -21,10 +21,18 @@
-     const val MODO_NINYOS = "modo_ni帽os"
- 
-     const val VIDEO_NINYOS = "video_modo_ni帽os"
-+
-+    const val JUEGO_PUZZLE = "juego_puzzle"
-+
-+    const val JUEGO_PAREJAS = "juego_parejas"
-     const val PUZZLENIVEL1 ="puzzle_nivel_1"
-     const val PUZZLENIVEL2 ="puzzle_nivel_2"
-     const val PUZZLENIVEL3 ="puzzle_nivel_3"
-     const val PUZZLENIVEL4 ="puzzle_nivel_4"
-+    const val PAREJASNIVEL1 ="parejas_nivel_1"
-+    const val PAREJASNIVEL2 ="parejas_nivel_2"
-+    const val PAREJASNIVEL3 ="parejas_nivel_3"
-+    const val PAREJASNIVEL4 ="parejas_nivel_4"
- 
-     const val JUEGO_NINYOS = "juego_modo_ni帽os"
-     const val MODO_EDICION = "modo_edicion"
-Index: app/src/main/res/values-de/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus beenden</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">nderungen speichern</string>\r\n    <string name=\"profile_login\">Anmelden</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"history_1328\">1328 \uD83D\uDD25 Brand und Wiederaufbau</string>\r\n    <string name=\"history_1328_body\">W盲hrend eines Brandes in Valladolid, ausgel枚st durch die Truppen Alfons XI., wurde das Kloster in den Pal盲sten von La Magdalena schwer besch盲digt. Die Nonnen begannen mit dem Wiederaufbau dank der finanziellen Unterst眉tzung von lvaro Nu帽o P茅rez de Monroy.</string>\r\n\r\n    <string name=\"history_1579\">1579 \uD83C\uDFF0 Wiederaufbau der Kirche und des Kreuzgangs</string>\r\n    <string name=\"history_579_body\">Die Nonnen errichteten die Kirche nach dem Entwurf des italienischen Meisters Pietro Palladio. Der Altaraufsatz stammte von Gregorio Fern谩ndez, und der neue Kreuzgang wurde von Francisco de Praves gebaut. All dies wurde durch die Spenden der btissinnen Ana und Isabel de Mendoza erm枚glicht.</string>\r\n\r\n    <string name=\"history_1869\">1869 \uD83C\uDF93 Gr眉ndung der Klosterschule</string>\r\n    <string name=\"history_1869_body\">Die Gemeinschaft der Huelgas Reales er枚ffnete ihre eigene Schule und nahm adlige M盲dchen aus Valladolid als Halbinternats\u00ADsch眉lerinnen auf.</string>\r\n\r\n    <string name=\"history_XX\">20.21. Jahrhundert  Restaurierung und modernes Leben</string>\r\n    <string name=\"history_XX_body\">Das Kloster wurde vollst盲ndig restauriert. Der R眉ckgang der Berufungen f眉hrte zur Gr眉ndung der Laien-Zisterzienserbruderschaft, die den Geist der Regula Benedicti lebendig h盲lt.</string>\r\n\r\n    <string name=\"history_2007\">Seit 2007 \uD83D\uDC69\u200D\uD83E\uDDB3 Leitung und weibliche Kongregation</string>\r\n    <string name=\"history_2007_body\">Das Kloster geh枚rt zur Kastilischen Kongregation des Zisterzienserordens, die seit 2007 als weibliche Kongregation aktiv ist. Die erste Pr盲sidentin der btissinnen war Mar铆a del Mar Mart铆nez; nach ihrem Tod im Jahr 2013 眉bernahm Schwester Isabel Vall茅s Gallego das Amt. Derzeit leitet Schwester Mar铆a das Kloster und die Schule.</string>\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n    <string name=\"title_appointment\">Termin buchen</string>\r\n    <string name=\"option_phone_appointment\">Telefonisch buchen</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Uhrzeit</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">W盲hlen Sie ein Datum</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name ist erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail ist erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden</string>\r\n    <string name=\"hour_no_selected\">Eine Uhrzeit muss ausgew盲hlt werden</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Abbrechen</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist bereit. Bitte klicken Sie auf \\'Senden\\' in der gerade ge枚ffneten E-Mail-Anwendung, um Ihre Anfrage abzuschlieen. Wir werden auf diese E-Mail antworten, um die Verf眉gbarkeit zu best盲tigen.</string>\r\n    <string name=\"email_subject\">Anfrage f眉r Besuchsreservierung - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nIch m枚chte eine Reservierung f眉r einen Besuch des Klosters mit den folgenden Details anfordern:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre freundliche Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">Schriftgr枚e ausw盲hlen</string>\r\n    <string name=\"font_extrabig\">Extra Gro</string>\r\n    <string name=\"font_normal\">Mittel</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"title_entrada\">Klostereingang</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Zur眉ck</string>\r\n    <string name=\"see_360\">360潞 ansehen</string>\r\n    <string name=\"contentdescription_image_pin\">Pin-Bild (zum Vergr枚ern klicken)</string>\r\n    <string name=\"readjust\">Neu anpassen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Erh枚hen</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Ziel nicht definiert</string>\r\n    <string name=\"notdefined_destinyplane\">Zielplan nicht definiert</string>\r\n    <string name=\"plane_loading\">Lade Plan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n    <string name=\"child_mode\">KINDERMODUS</string>\r\n    <string name=\"child_mode_view\">Kindermodus</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Spiel</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">SPIEL</string>\r\n    <string name=\"edit_mode\">BEARBEITUNGSMODUS</string>\r\n    <string name=\"edit_home_background\">Startseiten-Hintergrund bearbeiten</string>\r\n    <string name=\"edit_pins\">Pins bearbeiten</string>\r\n    <string name=\"location_error\">Es wurde keine App gefunden, mit der der Standort ge枚ffnet werden kann.</string>\r\n    <string name=\"contact_data\">Kontaktinformationen</string>\r\n    <string name=\"location_data\">Standort</string>\r\n    <string name=\"email_data\">E-Mail</string>\r\n    <string name=\"phone_data\">Telefon</string>\r\n    <string name=\"visit_schedule\">ffnungszeiten</string>\r\n    <string name=\"monday_to_friday\">Montag bis Freitag:</string>\r\n    <string name=\"confirm_save_title\">nderungen speichern?</string>\r\n    <string name=\"confirm_save_message\">Sind Sie sicher, dass Sie die nderungen speichern m枚chten?</string>\r\n    <string name=\"confirm_save_button\">Speichern</string>\r\n    <string name=\"confirm_cancel_button\">Abbrechen</string>\r\n    <string name=\"edit_cancel_changes\">Abbrechen</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Bild hinzuf眉gen</string>\r\n    <string name=\"image_delete\">L枚schen</string>\r\n    <string name=\"image_delete_confirm_title\">Bild l枚schen?</string>\r\n    <string name=\"image_delete_confirm_message\">Diese Aktion kann nicht r眉ckg盲ngig gemacht werden</string>\r\n    <string name=\"image_uploading\">Bild wird hochgeladen...</string>\r\n    <string name=\"image_upload_success\">Bild erfolgreich hochgeladen</string>\r\n    <string name=\"image_upload_error\">Fehler beim Hochladen des Bildes</string>\r\n    <string name=\"image_select_error\">Fehler beim Ausw盲hlen des Bildes</string>\r\n    <string name=\"four_pieces\">4 St眉ck</string>\r\n    <string name=\"nine_pieces\">9 St眉ck</string>\r\n    <string name=\"sixteen_pieces\">16 St眉ck</string>\r\n    <string name=\"twentyfive_pieces\">25 St眉ck</string>\r\n    <string name=\"congratulations\">Gl眉ckwunsch!</string>\r\n    <string name=\"message_puzzle_completed\">Du hast das R盲tsel gel枚st! Bereit f眉r die n盲chste Herausforderung?</string>\r\n    <string name=\"original_image\">Bild ansehen</string>\r\n    <string name=\"ready\">Bereit</string>\r\n    <string name=\"dont_show_again\">Nicht mehr anzeigen</string>\r\n    <string name=\"understand\">Verstanden</string>\r\n    <string name=\"map_tutorial_body\">Dies ist der Inhalt des Tutorials</string>\r\n    <string name=\"map_tutorial_title\">Dies ist der Titel des Tutorials</string>\r\n    <string name=\"map_tutorial_body2\">Dies ist der Inhalt des Kartentutorials 2</string>\r\n    <string name=\"map_tutorial_title2\">Dies ist der Titel des Kartentutorials 2</string>\r\n    <string name=\"pin_tutorial_body\">Dies ist der Inhalt des Pin-Tutorials</string>\r\n    <string name=\"pin_tutorial_title\">Dies ist der Titel des Pin-Tutorials</string>\r\n    <string name=\"next\">Weiter</string>\r\n\r\n    <string name=\"map_tutorial_body1\">Oben links k枚nnen Sie 眉ber das Symbol () zum Start zur眉ckkehren.</string>\r\n    <string name=\"map_tutorial_body1_2\">Tippen Sie auf die farbigen Bereiche der Karte, um die verschiedenen Bereiche zu erkunden.</string>\r\n    <string name=\"map_tutorial_body1_3\">Mit den Tasten auf der rechten Seite k枚nnen Sie die Karte vergr枚ern, verkleinern oder zur眉cksetzen.</string>\r\n\r\n    <string name=\"submapa_1\">Tippen Sie auf das Symbol (), um zur bersichtskarte zur眉ckzukehren.</string>\r\n    <string name=\"submapa_2\">Tippen Sie auf die verschiedenen Pins, um die Details aufzurufen.</string>\r\n\r\n    <string name=\"pin_1\">Dr眉cken Sie das Symbol (), um zur Karte zur眉ckzukehren.</string>\r\n    <string name=\"pin_2\">Wischen Sie durch die Bilder oder tippen Sie darauf, um sie zu vergr枚ern.</string>\r\n    <string name=\"pin_3\">Tippen Sie hier, um den Audioguide anzuh枚ren.</string>\r\n    <string name=\"pin_4\">Dr眉cken Sie diesen Button, um die 360掳-Ansicht zu 枚ffnen.</string>\r\n    <string name=\"image_gallery_title\">Bilder</string>\r\n    <string name=\"visible\">sichtbar</string>\r\n    <string name=\"hidden\">versteckt</string>\r\n    <string name=\"lang_en\">English</string>\r\n    <string name=\"lang_es\">Espa帽ol</string>\r\n    <string name=\"sample_text\">Beispiel</string>\r\n    <string name=\"lang_de\">Deutsch</string>\r\n    <string name=\"font_small\">Klein</string>\r\n    <string name=\"font_medium\">Mittel</string>\r\n    <string name=\"font_large\">Gro</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
---- a/app/src/main/res/values-de/strings.xml	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/res/values-de/strings.xml	(date 1763928810236)
-@@ -99,9 +99,9 @@
-     <string name="child_mode">KINDERMODUS</string>
-     <string name="child_mode_view">Kindermodus</string>
-     <string name="video_view">Video</string>
--    <string name="game_view">Spiel</string>
-+    <string name="game_view">Spiele</string>
-     <string name="video_child">VIDEO</string>
--    <string name="game_child">SPIEL</string>
-+    <string name="game_child">SPIELE</string>
-     <string name="edit_mode">BEARBEITUNGSMODUS</string>
-     <string name="edit_home_background">Startseiten-Hintergrund bearbeiten</string>
-     <string name="edit_pins">Pins bearbeiten</string>
-@@ -130,8 +130,12 @@
-     <string name="nine_pieces">9 St眉ck</string>
-     <string name="sixteen_pieces">16 St眉ck</string>
-     <string name="twentyfive_pieces">25 St眉ck</string>
-+    <string name="three_pairs">3 Paare</string>
-+    <string name="four_pairs">4 Paare</string>
-+    <string name="five_pairs">5 Paare</string>
-+    <string name="six_pairs">6 Paare</string>
-     <string name="congratulations">Gl眉ckwunsch!</string>
--    <string name="message_puzzle_completed">Du hast das R盲tsel gel枚st! Bereit f眉r die n盲chste Herausforderung?</string>
-+    <string name="message_game_completed">Du hast das Spiel gel枚st! Bereit f眉r die n盲chste Herausforderung?</string>
-     <string name="original_image">Bild ansehen</string>
-     <string name="ready">Bereit</string>
-     <string name="dont_show_again">Nicht mehr anzeigen</string>
-@@ -165,4 +169,9 @@
-     <string name="font_small">Klein</string>
-     <string name="font_medium">Mittel</string>
-     <string name="font_large">Gro</string>
-+    <string name="puzzle_screen">Puzzle</string>
-+    <string name="puzzle_option">PUZZLE</string>
-+    <string name="memory_screen">Memory</string>
-+    <string name="memory_option">MEMORY</string>
-+    <string name="back_piece">R眉ckseite des St眉ckes</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.util.Log\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.foundation.gestures.detectDragGestures\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.lazy.LazyRow\r\nimport androidx.compose.foundation.lazy.grid.GridCells\r\nimport androidx.compose.foundation.lazy.grid.LazyVerticalGrid\r\nimport androidx.compose.foundation.lazy.grid.items\r\nimport androidx.compose.foundation.lazy.items\r\nimport androidx.compose.material3.AlertDialog\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.Divider\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.geometry.Offset\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.input.pointer.pointerInput\r\nimport androidx.compose.ui.layout.onGloballyPositioned\r\nimport androidx.compose.ui.layout.positionInWindow\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.Dp\r\nimport androidx.compose.ui.unit.IntOffset\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.zIndex\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavController\r\nimport com.nextapp.monasterio.models.GridPosicion\r\nimport com.nextapp.monasterio.models.PiezaPuzzle\r\nimport com.nextapp.monasterio.models.PuzzleSize\r\nimport com.nextapp.monasterio.viewModels.PuzzleViewModel\r\nimport com.nextapp.monasterio.viewModels.PuzzleViewModelFactory\r\nimport kotlin.math.round\r\nimport com.nextapp.monasterio.R\r\n\r\n@Composable\r\nfun PuzzleScreen(\r\n    navController: NavController,\r\n    tama帽o: PuzzleSize,\r\n    imagenes: List<Int>,\r\n    imagenCompleta: Int\r\n) {\r\n    val factory = remember { PuzzleViewModelFactory(tama帽o, imagenes) }\r\n    val viewModel: PuzzleViewModel = viewModel(factory = factory)\r\n    val state by viewModel.uiState.collectAsState()\r\n    val density = LocalDensity.current\r\n\r\n    // Estado del Grid y la celda\r\n    var tama帽oCelda by remember { mutableStateOf(0.dp) }\r\n    var gridOriginOffset by remember { mutableStateOf(Offset.Zero) }\r\n\r\n    // Estado de Drag and Drop (flotante)\r\n    var piezaArrastradaId by remember { mutableStateOf<Int?>(null) }\r\n    var desplazamientoPiezaArrastrada by remember { mutableStateOf<Offset>(Offset.Zero) }\r\n\r\n    // Mapa de posiciones iniciales de las piezas SUELTAS en la bandeja (llenado por LazyRow)\r\n    val trayPositionsMap = remember { mutableStateMapOf<Int, Offset>() }\r\n    var showImagePreviewDialog by remember { mutableStateOf(false) }\r\n    // El Box principal act煤a como la capa de superposici贸n (Overlay) para la pieza arrastrada.\r\n    Box(modifier = Modifier.fillMaxSize()) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // --- 1. PUZZLE GRID (Drop Targets y Piezas Encajadas) ---\r\n            LazyVerticalGrid(\r\n                columns = GridCells.Fixed(tama帽o.columns),\r\n                // ... (Arreglos y Paddings)\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .wrapContentWidth(Alignment.CenterHorizontally)\r\n                    .background(Color.LightGray.copy(0.5f))\r\n                    .onGloballyPositioned { coordinates ->\r\n                        val gridWith = coordinates.size.width\r\n                        if (gridWith > 0) {\r\n                            tama帽oCelda = with(density) { (gridWith / state.size.columns).toDp() }\r\n                            gridOriginOffset = coordinates.positionInWindow()\r\n                        }\r\n                    },\r\n                userScrollEnabled = false\r\n            ) {\r\n                items(tama帽o.rows * tama帽o.columns) { index ->\r\n                    val row = index / tama帽o.columns\r\n                    val col = index % tama帽o.columns\r\n                    val gridPosicion = GridPosicion(row, col)\r\n                    val piezaEnPosicion = state.piezas.find { it.posicionCorrecta == gridPosicion }\r\n                    GridCell(pieza = piezaEnPosicion)\r\n                }\r\n            }\r\n            Button(\r\n                onClick = { showImagePreviewDialog = true }, // Cambia el estado a true\r\n                modifier = Modifier.padding(top = 16.dp, bottom = 8.dp)\r\n            ) {\r\n                Text(text = stringResource(R.string.original_image)) // \"Mostrar Imagen Original\"\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            if (tama帽oCelda > 0.dp) {\r\n                val shuffledLoosePieces by remember(state.piezas) { // Clave: N煤mero de piezas sueltas\r\n                    mutableStateOf(state.piezas.filter { !it.encajada }.shuffled())\r\n                }\r\n                PuzzleTray(\r\n                    piezas = shuffledLoosePieces,\r\n                    tama帽oPieza = tama帽oCelda,\r\n                    isDragInProgress = piezaArrastradaId != null,\r\n                    onPiecePositioned = { id, offset ->\r\n                        // Llenar el mapa de posiciones iniciales para el Drag & Drop\r\n                        trayPositionsMap[id] = offset\r\n                    },\r\n                    onDragStart = { p, _ ->\r\n                        // INICIO DEL DRAG: Activar la pieza flotante\r\n                        piezaArrastradaId = p.id\r\n                        desplazamientoPiezaArrastrada = Offset.Zero\r\n                    }\r\n                )\r\n            }\r\n\r\n            // --- 3. DILOGO DE SOLUCIONADO ---\r\n            if (state.solucionado) {\r\n                PuzzleDialog(onDismiss = {}, onConfirm = { navController.popBackStack() })\r\n            }\r\n            if (showImagePreviewDialog) {\r\n                ImagePreviewDialog(\r\n                    imageResId = imagenCompleta,\r\n                    onDismiss = { showImagePreviewDialog = false }\r\n                )\r\n            }\r\n        } // Fin Column\r\n\r\n        // --- 4. PIEZA ARRASTRADA (OVERLAY) ---\r\n        // Este Box solo dibuja la pieza que se est谩 arrastrando (piezaArrastradaId != null)\r\n        piezaArrastradaId?.let { id ->\r\n            val piezaFlotante = state.piezas.find { it.id == id }!!\r\n            val startOffset = trayPositionsMap[id] ?: Offset.Zero\r\n\r\n            DraggableFloatingPiece(\r\n                pieza = piezaFlotante,\r\n                tama帽oCelda = tama帽oCelda,\r\n                startOffset = startOffset,\r\n                gridOriginOffset = gridOriginOffset,\r\n                desplazamientoActual = desplazamientoPiezaArrastrada,\r\n                onDrag = { dragAmount ->\r\n                    // MOVIMIENTO: Actualizar el desplazamiento\r\n                    desplazamientoPiezaArrastrada += dragAmount\r\n                },\r\n                onDragEnd = {\r\n                    // FIN DEL DRAG: Calcular la nueva posici贸n y llamar al ViewModel\r\n                    if (piezaArrastradaId != null) {\r\n                        val piezaSize = with(density) { tama帽oCelda.toPx() }\r\n                        val piezaActual = state.piezas.find { it.id == piezaArrastradaId }!!\r\n\r\n                        // Calcular la posici贸n final de la pieza respecto al origen del Grid\r\n                        val finalX = startOffset.x + desplazamientoPiezaArrastrada.x\r\n                        val finalY = startOffset.y + desplazamientoPiezaArrastrada.y\r\n\r\n                        val relativeX = finalX - gridOriginOffset.x\r\n                        val relativeY = finalY - gridOriginOffset.y\r\n\r\n                        val centroRelativeX = relativeX + (piezaSize / 2f)\r\n                        val centroRelativeY = relativeY + (piezaSize / 2f)\r\n\r\n                        val Y_Compensado = centroRelativeY + piezaSize * 1.0f\r\n\r\n                        val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tama帽o.columns - 1)\r\n                        val newRow = (Y_Compensado / piezaSize).toInt().coerceIn(0, tama帽o.rows - 1)\r\n\r\n                        Log.d(\"PUZZLE_DROP\", \"Pieza ${piezaArrastradaId} destino: R$newRow C$newColumn\")\r\n                        Log.d(\"PUZZLE_DROP_2\", \"Pieza ${piezaArrastradaId} posicion correcta: R${piezaActual.posicionCorrecta.row} C${piezaActual.posicionCorrecta.column}\")\r\n                        viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))\r\n                    }\r\n                    piezaArrastradaId = null\r\n                    desplazamientoPiezaArrastrada = Offset.Zero\r\n                }\r\n            )\r\n        }\r\n    } // Fin Box\r\n}\r\n\r\n// ... (El resto de composables en el siguiente bloque)\r\n\r\n// Este Composable dibuja una celda en el Grid (vac铆a o con pieza encajada)\r\n@Composable\r\nfun GridCell(pieza: PiezaPuzzle?) {\r\n    val isEncajada = pieza?.encajada ?: false\r\n    Box(\r\n        modifier = Modifier\r\n            .aspectRatio(1f)\r\n            .padding(1.dp)\r\n            .background(Color.LightGray.copy(alpha = 0.1f)),\r\n        contentAlignment = Alignment.Center\r\n    ) {\r\n        if (isEncajada) {\r\n            Image(\r\n                painter = painterResource(id = pieza!!.imagen),\r\n                contentDescription = \"Pieza encajada ${pieza.id}\",\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// --- BANDEJA (LAZY ROW) ---\r\n@Composable\r\nfun PuzzleTray(\r\n    piezas: List<PiezaPuzzle>,\r\n    tama帽oPieza: Dp,\r\n    isDragInProgress: Boolean,\r\n    onPiecePositioned: (Int, Offset) -> Unit,\r\n    onDragStart: (PiezaPuzzle, Offset) -> Unit\r\n) {\r\n    Column(\r\n        modifier = Modifier.fillMaxWidth(),\r\n        horizontalAlignment = Alignment.CenterHorizontally\r\n    ) {\r\n        Text(\r\n            text = \"Piezas Faltantes (${piezas.size})\",\r\n            style = androidx.compose.material3.MaterialTheme.typography.titleMedium,\r\n            modifier = Modifier.padding(bottom = 8.dp)\r\n        )\r\n        LazyRow(\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .height(tama帽oPieza + 16.dp), // Altura fija para el LazyRow\r\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\r\n            contentPadding = PaddingValues(horizontal = 8.dp)\r\n        ) {\r\n            items(piezas, key = { it.id }) { pieza ->\r\n                // Este Box representa la pieza en la bandeja, que inicia el arrastre.\r\n                Box(\r\n                    modifier = Modifier\r\n                        .size(tama帽oPieza)\r\n                        .onGloballyPositioned { coordinates ->\r\n                            // 1. CAPTURAR LA POSICIN DE INICIO EN LA BANDEJA\r\n                            onPiecePositioned(pieza.id, coordinates.positionInWindow())\r\n                        }\r\n                        .pointerInput(isDragInProgress) {\r\n                            if (isDragInProgress) return@pointerInput\r\n                            detectDragGestures(\r\n                                onDragStart = { offset ->\r\n                                    // 2. INICIAR EL DRAG: Avisar a PuzzleScreen para activar la pieza flotante\r\n                                    onDragStart(pieza, offset)\r\n                                },\r\n                                onDrag = { _, _ -> /* El movimiento lo gestiona la pieza flotante */ },\r\n                                onDragEnd = { /* El fin lo gestiona la pieza flotante */ }\r\n                            )\r\n                        }\r\n                ) {\r\n                    Image(\r\n                        painter = painterResource(id = pieza.imagen),\r\n                        contentDescription = \"Pieza ${pieza.id}\",\r\n                        modifier = Modifier.fillMaxSize()\r\n                    )\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// --- PIEZA FLOTANTE (OVERLAY) ---\r\n// Este componente se dibuja en el Box principal y sigue el dedo.\r\n@Composable\r\nfun DraggableFloatingPiece(\r\n    pieza: PiezaPuzzle,\r\n    tama帽oCelda: Dp,\r\n    startOffset: Offset,\r\n    gridOriginOffset: Offset,\r\n    desplazamientoActual: Offset,\r\n    onDrag: (Offset) -> Unit,\r\n    onDragEnd: () -> Unit\r\n) {\r\n    // Calcular la posici贸n absoluta en la pantalla (Base de la Bandeja + Movimiento del dedo)\r\n    val totalOffsetX = startOffset.x + desplazamientoActual.x\r\n    val totalOffsetY = startOffset.y + desplazamientoActual.y\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .offset {\r\n                // Aplicar el desplazamiento total\r\n                IntOffset(\r\n                    x = totalOffsetX.toInt(),\r\n                    y = totalOffsetY.toInt()\r\n                )\r\n            }\r\n            .zIndex(10f) // Asegura que est茅 por encima de todo\r\n            .size(tama帽oCelda)\r\n            .pointerInput(Unit) {\r\n                // DETECCIN DE MOVIMIENTO Y FIN DE ARRASTRE\r\n                detectDragGestures(\r\n                    onDragStart = { /* Ya se inici贸 en la bandeja */ },\r\n                    onDrag = { change, dragAmount ->\r\n                        onDrag(dragAmount)\r\n                        change.consume()\r\n                    },\r\n                    onDragEnd = onDragEnd // Llamar al fin para la l贸gica de soltar\r\n                )\r\n            }\r\n            .border(2.dp, Color.Red) // Indicador visual de que se est谩 arrastrando\r\n    ) {\r\n        Image(\r\n            painter = painterResource(id = pieza.imagen),\r\n            contentDescription = \"Pieza flotante ${pieza.id}\",\r\n            modifier = Modifier.fillMaxSize()\r\n        )\r\n    }\r\n}\r\n\r\n// (Asumimos que PuzzleDialog est谩 definido en tu archivo)\r\n// ...\r\n@Composable\r\nfun PuzzleDialog(\r\n    onDismiss: () -> Unit,\r\n    onConfirm : () -> Unit\r\n){\r\n    AlertDialog(\r\n        onDismissRequest=onDismiss,\r\n        title = {\r\n            Text(stringResource(R.string.congratulations))\r\n        },\r\n        text = {\r\n            Text(stringResource(R.string.message_puzzle_completed))\r\n        },\r\n        confirmButton = {\r\n            Button(\r\n                onClick = onConfirm\r\n            ) {\r\n                Text(stringResource(R.string.ready))\r\n            }\r\n        },\r\n    )\r\n}\r\n\r\n@Composable\r\nfun ImagePreviewDialog(\r\n    imageResId: Int, // Recibe el ID del recurso de la imagen completa\r\n    onDismiss: () -> Unit // Funci贸n para cerrar el di谩logo\r\n) {\r\n    AlertDialog(\r\n        onDismissRequest = onDismiss,\r\n        text = {\r\n            // Muestra la imagen completa\r\n            Image(\r\n                painter = painterResource(id = imageResId),\r\n                contentDescription = stringResource(R.string.original_image),\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .aspectRatio(1f) // Mantener la proporci贸n de la imagen\r\n            )\r\n        },\r\n        confirmButton = {\r\n            Button(onClick = onDismiss) {\r\n                Text(stringResource(R.string.close)) // \"Cerrar\"\r\n            }\r\n        }\r\n    )\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt	(date 1763937359809)
-@@ -1,5 +1,7 @@
- package com.nextapp.monasterio.ui.screens
- 
-+import android.app.Activity
-+import android.content.pm.ActivityInfo
- import android.util.Log
- import androidx.compose.foundation.Image
- import androidx.compose.foundation.background
-@@ -11,6 +13,7 @@
- import androidx.compose.foundation.lazy.grid.LazyVerticalGrid
- import androidx.compose.foundation.lazy.grid.items
- import androidx.compose.foundation.lazy.items
-+import androidx.compose.foundation.shape.RoundedCornerShape
- import androidx.compose.material3.AlertDialog
- import androidx.compose.material3.Button
- import androidx.compose.material3.Divider
-@@ -23,6 +26,8 @@
- import androidx.compose.ui.input.pointer.pointerInput
- import androidx.compose.ui.layout.onGloballyPositioned
- import androidx.compose.ui.layout.positionInWindow
-+import androidx.compose.ui.platform.LocalConfiguration
-+import androidx.compose.ui.platform.LocalContext
- import androidx.compose.ui.platform.LocalDensity
- import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.res.stringResource
-@@ -52,6 +57,9 @@
-     val state by viewModel.uiState.collectAsState()
-     val density = LocalDensity.current
- 
-+    val context = LocalContext.current
-+    val activity = context as? Activity
-+
-     // Estado del Grid y la celda
-     var tama帽oCelda by remember { mutableStateOf(0.dp) }
-     var gridOriginOffset by remember { mutableStateOf(Offset.Zero) }
-@@ -63,6 +71,17 @@
-     // Mapa de posiciones iniciales de las piezas SUELTAS en la bandeja (llenado por LazyRow)
-     val trayPositionsMap = remember { mutableStateMapOf<Int, Offset>() }
-     var showImagePreviewDialog by remember { mutableStateOf(false) }
-+
-+    val screenWidth = LocalConfiguration.current.screenWidthDp
-+    val isTablet = screenWidth > 600
-+
-+    DisposableEffect(Unit) {
-+        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-+        onDispose {
-+
-+        }
-+    }
-+
-     // El Box principal act煤a como la capa de superposici贸n (Overlay) para la pieza arrastrada.
-     Box(modifier = Modifier.fillMaxSize()) {
-         Column(
-@@ -74,11 +93,11 @@
-             // --- 1. PUZZLE GRID (Drop Targets y Piezas Encajadas) ---
-             LazyVerticalGrid(
-                 columns = GridCells.Fixed(tama帽o.columns),
--                // ... (Arreglos y Paddings)
-                 modifier = Modifier
-                     .fillMaxWidth()
-                     .wrapContentWidth(Alignment.CenterHorizontally)
-                     .background(Color.LightGray.copy(0.5f))
-+                    .border(1.dp,Color.Black)
-                     .onGloballyPositioned { coordinates ->
-                         val gridWith = coordinates.size.width
-                         if (gridWith > 0) {
-@@ -169,14 +188,19 @@
-                         val centroRelativeX = relativeX + (piezaSize / 2f)
-                         val centroRelativeY = relativeY + (piezaSize / 2f)
- 
--                        val Y_Compensado = centroRelativeY + piezaSize * 1.0f
-+
-+                        if((tama帽o.columns==2 || tama帽o.columns == 3) && isTablet) {
-+                            val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tama帽o.columns - 1)
-+                            val newRow = (centroRelativeY / piezaSize).toInt().coerceIn(0, tama帽o.rows - 1)
-+                            viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))
-+                        }
-+                        else{
-+                            val Y_Compensado = centroRelativeY + piezaSize * 1.0f
- 
--                        val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tama帽o.columns - 1)
--                        val newRow = (Y_Compensado / piezaSize).toInt().coerceIn(0, tama帽o.rows - 1)
--
--                        Log.d("PUZZLE_DROP", "Pieza ${piezaArrastradaId} destino: R$newRow C$newColumn")
--                        Log.d("PUZZLE_DROP_2", "Pieza ${piezaArrastradaId} posicion correcta: R${piezaActual.posicionCorrecta.row} C${piezaActual.posicionCorrecta.column}")
--                        viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))
-+                            val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tama帽o.columns - 1)
-+                            val newRow = (Y_Compensado / piezaSize).toInt().coerceIn(0, tama帽o.rows - 1)
-+                            viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))
-+                        }
-                     }
-                     piezaArrastradaId = null
-                     desplazamientoPiezaArrastrada = Offset.Zero
-@@ -196,6 +220,7 @@
-         modifier = Modifier
-             .aspectRatio(1f)
-             .padding(1.dp)
-+            .border(1.dp, Color.Black)
-             .background(Color.LightGray.copy(alpha = 0.1f)),
-         contentAlignment = Alignment.Center
-     ) {
-@@ -244,7 +269,6 @@
-                             onPiecePositioned(pieza.id, coordinates.positionInWindow())
-                         }
-                         .pointerInput(isDragInProgress) {
--                            if (isDragInProgress) return@pointerInput
-                             detectDragGestures(
-                                 onDragStart = { offset ->
-                                     // 2. INICIAR EL DRAG: Avisar a PuzzleScreen para activar la pieza flotante
-@@ -327,7 +351,7 @@
-             Text(stringResource(R.string.congratulations))
-         },
-         text = {
--            Text(stringResource(R.string.message_puzzle_completed))
-+            Text(stringResource(R.string.message_game_completed))
-         },
-         confirmButton = {
-             Button(
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoPuzzleScreen.kt
-rename from app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt
-rename to app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoPuzzleScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoPuzzleScreen.kt	(date 1763915142931)
-@@ -2,7 +2,6 @@
- 
- import android.app.Activity
- import android.content.pm.ActivityInfo
--import androidx.compose.foundation.Image
- import androidx.compose.foundation.background
- import androidx.compose.foundation.layout.*
- import androidx.compose.foundation.rememberScrollState
-@@ -10,41 +9,35 @@
- import androidx.compose.foundation.verticalScroll
- import androidx.compose.material3.Button
- import androidx.compose.material3.ButtonDefaults
--import androidx.compose.material3.Icon
- import androidx.compose.material3.Text
- import androidx.compose.runtime.Composable
- import androidx.compose.runtime.DisposableEffect
- import androidx.compose.ui.Alignment
- import androidx.compose.ui.Modifier
- import androidx.compose.ui.graphics.Color
--import androidx.compose.ui.layout.ContentScale
--import androidx.compose.ui.platform.LocalConfiguration
- import androidx.compose.ui.platform.LocalContext
--import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.res.stringResource
- import androidx.compose.ui.text.style.TextAlign
--import androidx.compose.ui.tooling.preview.Preview
- import androidx.compose.ui.unit.dp
- import androidx.compose.ui.unit.sp
- import androidx.constraintlayout.compose.ChainStyle
- import androidx.constraintlayout.compose.ConstraintLayout
- import androidx.constraintlayout.compose.Dimension
- import androidx.navigation.NavController
--import androidx.navigation.compose.rememberNavController
- import com.nextapp.monasterio.AppRoutes
- import com.nextapp.monasterio.R
- import com.nextapp.monasterio.ui.theme.MonasteryBlue
--import com.nextapp.monasterio.ui.theme.MonasteryOrange
-+
- 
- 
- @Composable
--fun JuegoNinyosScreen(navController:NavController,modifier: Modifier = Modifier) {
-+fun JuegoPuzzleScreen(navController:NavController,modifier: Modifier = Modifier) {
-     val context = LocalContext.current
- 
-     val activity = (context as? Activity)
- 
-     DisposableEffect(Unit) {
--        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-+        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
- 
-         onDispose {
- 
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1328\">1328 \uD83D\uDD25 Incendio y reconstrucci贸n</string>\r\n    <string name=\"history_1328_body\">Durante un incendio en Valladolid provocado por tropas de Alfonso XI, el monasterio en los palacios de la Magdalena qued贸 gravemente da帽ado. Las monjas comenzaron su reconstrucci贸n gracias a la ayuda econ贸mica de lvaro Nu帽o P茅rez de Monroy.</string>\r\n    <string name=\"history_1579\">1579 \uD83C\uDFF0 Reconstrucci贸n de la iglesia y el claustro</string>\r\n    <string name=\"history_579_body\">Las monjas levantaron la iglesia siguiendo el dise帽o del maestro italiano Pietro Palladio. El retablo fue obra de Gregorio Fern谩ndez y el nuevo claustro, de Francisco de Praves. Todo esto se hizo posible gracias a las donaciones de las abadesas Ana e Isabel de Mendoza.</string>\r\n    <string name=\"history_1869\">1869 \uD83C\uDF93 Nace la escuela del monasterio</string>\r\n    <string name=\"history_1869_body\">La comunidad de las Huelgas Reales abri贸 su propia escuela, acogiendo a ni帽as de la nobleza vallisoletana como medio pensionistas.</string>\r\n    <string name=\"history_XX\">Siglo XX-XXI  Restauraci贸n y vida moderna</string>\r\n    <string name=\"history_XX_body\">El monasterio fue totalmente restaurado. La disminuci贸n de vocaciones impuls贸 la creaci贸n de la Hermandad Laica Cisterciense, que mantiene vivo el esp铆ritu de la Regla de San Benito.</string>\r\n    <string name=\"history_2007\">2007 en adelante \uD83D\uDC69\u200D\uD83E\uDDB3 Liderazgo y Congregaci贸n femenina</string>\r\n    <string name=\"history_2007_body\">El monasterio forma parte de la Congregaci贸n de Castilla de la Orden del Cister, activa como congregaci贸n femenina desde 2007. La primera abadesa presidenta fue Mar铆a del Mar Mart铆nez; tras su fallecimiento en 2013, Sor Isabel Vall茅s Gallego asumi贸 el cargo. Actualmente, Sor Mar铆a dirige el monasterio y el colegio.</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIOS</string>\r\n    <string name=\"child_mode_view\">Modo Ni帽os</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n    <string name=\"edit_mode\">MODO EDICIN</string>\r\n    <string name=\"edit_home_background\">Edici贸n fondo inicio</string>\r\n    <string name=\"edit_pins\">Edici贸n pines</string>\r\n    <string name=\"location_error\">No se encontr贸 una app para abrir la ubicaci贸n.</string>\r\n    <string name=\"contact_data\">Datos de contacto</string>\r\n    <string name=\"location_data\">Ubicaci贸n</string>\r\n    <string name=\"email_data\">Correo electr贸nico</string>\r\n    <string name=\"phone_data\">Tel茅fono</string>\r\n    <string name=\"visit_schedule\">Horarios de Visita</string>\r\n    <string name=\"monday_to_friday\">Lunes a Viernes:</string>\r\n    <string name=\"four_pieces\">4 piezas</string>\r\n    <string name=\"nine_pieces\">9 piezas</string>\r\n    <string name=\"sixteen_pieces\">16 piezas</string>\r\n    <string name=\"twentyfive_pieces\">25 piezas</string>\r\n    <string name=\"dont_show_again\">No volver a mostrar</string>\r\n    <string name=\"understand\">Entendido</string>\r\n    <string name=\"map_tutorial_body\">Este es el cuerpo del tutorial</string>\r\n    <string name=\"map_tutorial_title\">Este es el titulo del tutorial</string>\r\n    <string name=\"map_tutorial_body2\">Este es el cuerpo del tutorial del mapa 2</string>\r\n    <string name=\"map_tutorial_title2\">Este es el titulo del tutorial del mapa 2</string>\r\n    <string name=\"pin_tutorial_body\">Este es el cuerpo del tutorial del pin</string>\r\n    <string name=\"pin_tutorial_title\">Este es el titulo del tutorial del pin</string>\r\n    <string name=\"next\">Siguiente</string>\r\n    <string name=\"map_tutorial_body1\">En la parte superior izquierda, el s铆mbolo () permite volver al inicio</string>\r\n    <string name=\"map_tutorial_body1_2\">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>\r\n    <string name=\"map_tutorial_body1_3\">Adem谩s, los botones de la parte derecha te permiten ampliar el mapa, reducirlo o volver a su tama帽o   original</string>\r\n    <string name=\"submapa_1\">Tocando en el s铆mbolo () podemos volver al mapa general</string>\r\n    <string name=\"submapa_2\">Tocando en los distintos pines podemos entrar a los puntos de inter茅s</string>\r\n    <string name=\"pin_1\">Pulsando en el s铆mbolo (), se puede volver al mapa</string>\r\n    <string name=\"pin_2\">Puedes desplazarte por las im谩genes o pulsar en ellas para ampliarlas</string>\r\n    <string name=\"pin_3\">Pulsando aqu铆 puedes escuchar el audio del texto</string>\r\n    <string name=\"pin_4\">Para acceder a la vista 360 pulse este bot贸n</string>\r\n    <string name=\"confirm_save_title\">驴Guardar cambios?</string>\r\n    <string name=\"confirm_save_message\">驴Est谩s seguro de que quieres guardar los cambios realizados?</string>\r\n    <string name=\"confirm_save_button\">Guardar</string>\r\n    <string name=\"confirm_cancel_button\">Cancelar</string>\r\n    <string name=\"edit_cancel_changes\">Cancelar</string>\r\n    <string name=\"profile_name\">Nombre</string>\r\n    <string name=\"image_add\">A帽adir imagen</string>\r\n    <string name=\"image_delete\">Borrar</string>\r\n    <string name=\"image_delete_confirm_title\">驴Borrar imagen?</string>\r\n    <string name=\"image_delete_confirm_message\">驴Seguro que quieres borrar la imagen?</string>\r\n    <string name=\"image_uploading\">Subiendo imagen...</string>\r\n    <string name=\"image_upload_success\">Imagen subida correctamente</string>\r\n    <string name=\"image_upload_error\">Error al subir la imagen</string>\r\n    <string name=\"image_select_error\">Error al cargar la imagen</string>\r\n    <string name=\"congratulations\">隆Felicidades!</string>\r\n    <string name=\"message_puzzle_completed\">隆Has resuelto el puzzle! 驴Listo para el siguiente desaf铆o?</string>\r\n    <string name=\"ready\">Listo</string>\r\n    <string name=\"original_image\">Ver imagen</string>\r\n    <string name=\"image_gallery_title\">Im谩genes</string>\r\n    <string name=\"visible\">Visibles</string>\r\n    <string name=\"hidden\">Ocultos</string>\r\n    <string name=\"lang_en\">Engish</string>\r\n    <string name=\"lang_es\">Espa帽ol</string>\r\n    <string name=\"sample_text\">Ejemplo</string>\r\n    <string name=\"lang_de\">Deutsch</string>\r\n    <string name=\"font_small\">Peque帽a</string>\r\n    <string name=\"font_medium\">Mediana</string>\r\n    <string name=\"font_large\">Grande</string>\r\n    <string name=\"play_audio\"></string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/res/values/strings.xml	(date 1763928775861)
-@@ -91,9 +91,9 @@
-     <string name="child_mode">MODO NIOS</string>
-     <string name="child_mode_view">Modo Ni帽os</string>
-     <string name="video_view">Video</string>
--    <string name="game_view">Juego</string>
-+    <string name="game_view">Juegos</string>
-     <string name="video_child">VIDEO</string>
--    <string name="game_child">JUEGO</string>
-+    <string name="game_child">JUEGOS</string>
-     <string name="edit_mode">MODO EDICIN</string>
-     <string name="edit_home_background">Edici贸n fondo inicio</string>
-     <string name="edit_pins">Edici贸n pines</string>
-@@ -108,6 +108,10 @@
-     <string name="nine_pieces">9 piezas</string>
-     <string name="sixteen_pieces">16 piezas</string>
-     <string name="twentyfive_pieces">25 piezas</string>
-+    <string name="three_pairs">3 Parejas</string>
-+    <string name="four_pairs">4 Parejas</string>
-+    <string name="five_pairs">5 parejas</string>
-+    <string name="six_pairs">6 Parejas</string>
-     <string name="dont_show_again">No volver a mostrar</string>
-     <string name="understand">Entendido</string>
-     <string name="map_tutorial_body">Este es el cuerpo del tutorial</string>
-@@ -115,7 +119,7 @@
-     <string name="map_tutorial_body2">Este es el cuerpo del tutorial del mapa 2</string>
-     <string name="map_tutorial_title2">Este es el titulo del tutorial del mapa 2</string>
-     <string name="pin_tutorial_body">Este es el cuerpo del tutorial del pin</string>
--    <string name="pin_tutorial_title">Este es el titulo del tutorial del pin</string>
-+    <string name="pine潞潞_tutorial_title">Este es el titulo del tutorial del pin</string>
-     <string name="next">Siguiente</string>
-     <string name="map_tutorial_body1">En la parte superior izquierda, el s铆mbolo () permite volver al inicio</string>
-     <string name="map_tutorial_body1_2">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>
-@@ -141,7 +145,7 @@
-     <string name="image_upload_error">Error al subir la imagen</string>
-     <string name="image_select_error">Error al cargar la imagen</string>
-     <string name="congratulations">隆Felicidades!</string>
--    <string name="message_puzzle_completed">隆Has resuelto el puzzle! 驴Listo para el siguiente desaf铆o?</string>
-+    <string name="message_game_completed">隆Has resuelto el juego! 驴Listo para el siguiente desaf铆o?</string>
-     <string name="ready">Listo</string>
-     <string name="original_image">Ver imagen</string>
-     <string name="image_gallery_title">Im谩genes</string>
-@@ -154,5 +158,11 @@
-     <string name="font_small">Peque帽a</string>
-     <string name="font_medium">Mediana</string>
-     <string name="font_large">Grande</string>
-+    <string name="puzzle_screen">Puzle</string>
-+    <string name="puzzle_option">PUZLE</string>
-+    <string name="memory_screen">Parejas</string>
-+    <string name="memory_option">PAREJAS</string>
-+    <string name="back_piece">Parte de atr谩s de la pieza</string>
-+
-     <string name="play_audio"></string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/res/values-en/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n    <string name=\"history_1328\">1328 \uD83D\uDD25 Fire and Reconstruction</string>\r\n    <string name=\"history_1328_body\">During a fire in Valladolid caused by the troops of Alfonso XI, the monastery in the Palaces of La Magdalena was severely damaged. The nuns began its reconstruction thanks to the financial support of lvaro Nu帽o P茅rez de Monroy.</string>\r\n\r\n    <string name=\"history_1579\">1579 \uD83C\uDFF0 Reconstruction of the Church and the Cloister</string>\r\n    <string name=\"history_579_body\">The nuns built the church following the design of the Italian master Pietro Palladio. The altarpiece was the work of Gregorio Fern谩ndez, and the new cloister was built by Francisco de Praves. All this was made possible thanks to donations from the abbesses Ana and Isabel de Mendoza.</string>\r\n\r\n    <string name=\"history_1869\">1869 \uD83C\uDF93 The Monastery School Is Founded</string>\r\n    <string name=\"history_1869_body\">The community of Las Huelgas Reales opened its own school, welcoming young noble girls from Valladolid as semi-boarders.</string>\r\n\r\n    <string name=\"history_XX\">20th21st Centuries  Restoration and Modern Life</string>\r\n    <string name=\"history_XX_body\">The monastery was fully restored. The decline in vocations encouraged the creation of the Lay Cistercian Brotherhood, which keeps alive the spirit of the Rule of Saint Benedict.</string>\r\n\r\n    <string name=\"history_2007\">2007 Onwards \uD83D\uDC69\u200D\uD83E\uDDB3 Leadership and Female Congregation</string>\r\n    <string name=\"history_2007_body\">The monastery is part of the Castile Congregation of the Cistercian Order, active as a female congregation since 2007. The first abbess president was Mar铆a del Mar Mart铆nez; after her death in 2013, Sister Isabel Vall茅s Gallego took over the position. Currently, Sister Mar铆a leads the monastery and the school.</string>\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"title_entrada\">Monastery Entrance</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n    <string name=\"child_mode\">KIDS MODE</string>\r\n    <string name=\"child_mode_view\">Kids Mode</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Game</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">GAME</string>\r\n    <string name=\"edit_mode\">EDIT MODE</string>\r\n    <string name=\"edit_home_background\">Edit home background</string>\r\n    <string name=\"edit_pins\">Edit pins</string>\r\n    <string name=\"location_error\">No app was found to open the location.</string>\r\n    <string name=\"contact_data\">Contact Information</string>\r\n    <string name=\"location_data\">Location</string>\r\n    <string name=\"email_data\">Email</string>\r\n    <string name=\"phone_data\">Phone</string>\r\n    <string name=\"visit_schedule\">Opening Hours</string>\r\n    <string name=\"monday_to_friday\">Monday to Friday:</string>\r\n    <string name=\"four_pieces\">4 pieces</string>\r\n    <string name=\"nine_pieces\">9 pieces</string>\r\n    <string name=\"sixteen_pieces\">16 pieces</string>\r\n    <string name=\"twentyfive_pieces\">25 pieces</string>\r\n    <string name=\"confirm_save_title\">Save changes?</string>\r\n    <string name=\"confirm_save_message\">Are you sure you want to save the changes?</string>\r\n    <string name=\"confirm_save_button\">Save</string>\r\n    <string name=\"confirm_cancel_button\">Cancel</string>\r\n    <string name=\"edit_cancel_changes\">Cancel</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Add image</string>\r\n    <string name=\"image_delete\">Delete</string>\r\n    <string name=\"image_delete_confirm_title\">Delete image?</string>\r\n    <string name=\"image_delete_confirm_message\">Are you sure you want to delete this image?</string>\r\n    <string name=\"image_uploading\">Uploading image...</string>\r\n    <string name=\"image_upload_success\">Image uploaded successfully</string>\r\n    <string name=\"image_upload_error\">Error uploading image</string>\r\n    <string name=\"image_select_error\">Error selecting image</string>\r\n    <string name=\"image_gallery_title\">Images</string>\r\n    <string name=\"congratulations\">Congratulations!</string>\r\n    <string name=\"message_puzzle_completed\">You\\'ve solved the puzzle! Ready for the next challenge?</string>\r\n    <string name=\"original_image\">View image</string>\r\n    <string name=\"ready\">Ready</string>\r\n    <string name=\"lang_de\">Deutsch</string>\r\n    <string name=\"font_small\">Small</string>\r\n    <string name=\"font_medium\">Medium</string>\r\n    <string name=\"font_large\">Large</string>\r\n    <string name=\"dont_show_again\">Don\\'t show again</string>\r\n    <string name=\"understand\">Got it</string>\r\n    <string name=\"map_tutorial_body\">This is the tutorial body</string>\r\n    <string name=\"map_tutorial_title\">This is the tutorial title</string>\r\n    <string name=\"map_tutorial_body2\">This is the map tutorial body 2</string>\r\n    <string name=\"map_tutorial_title2\">This is the map tutorial title 2</string>\r\n    <string name=\"pin_tutorial_body\">This is the pin tutorial body</string>\r\n    <string name=\"pin_tutorial_title\">This is the pin tutorial title</string>\r\n    <string name=\"next\">Next</string>\r\n\r\n    <string name=\"map_tutorial_body1\">The () symbol in the top left allows you to return to the start.</string>\r\n    <string name=\"map_tutorial_body1_2\">Tap the colored zones on the map to enter the different viewable areas.</string>\r\n    <string name=\"map_tutorial_body1_3\">Additionally, the buttons on the right allow you to zoom in, zoom out, or reset the map to its original size.</string>\r\n\r\n    <string name=\"submapa_1\">Tap the () symbol to return to the main map.</string>\r\n    <string name=\"submapa_2\">Tap the different pins to access the points of interest.</string>\r\n\r\n    <string name=\"pin_1\">Tap the () symbol to return to the map.</string>\r\n    <string name=\"pin_2\">Swipe through the images or tap them to enlarge.</string>\r\n    <string name=\"pin_3\">Tap here to listen to the audio narration.</string>\r\n    <string name=\"pin_4\">Tap this button to access the 360掳 view.</string>\r\n    <string name=\"visible\">Visible</string>\r\n    <string name=\"hidden\">Hidden</string>\r\n    <string name=\"lang_en\">English</string>\r\n    <string name=\"lang_es\">Espa帽ol</string>\r\n    <string name=\"sample_text\">Ejemplo</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
---- a/app/src/main/res/values-en/strings.xml	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/res/values-en/strings.xml	(date 1763928819884)
-@@ -97,9 +97,9 @@
-     <string name="child_mode">KIDS MODE</string>
-     <string name="child_mode_view">Kids Mode</string>
-     <string name="video_view">Video</string>
--    <string name="game_view">Game</string>
-+    <string name="game_view">Games</string>
-     <string name="video_child">VIDEO</string>
--    <string name="game_child">GAME</string>
-+    <string name="game_child">GAMES</string>
-     <string name="edit_mode">EDIT MODE</string>
-     <string name="edit_home_background">Edit home background</string>
-     <string name="edit_pins">Edit pins</string>
-@@ -114,6 +114,10 @@
-     <string name="nine_pieces">9 pieces</string>
-     <string name="sixteen_pieces">16 pieces</string>
-     <string name="twentyfive_pieces">25 pieces</string>
-+    <string name="three_pairs">3 Pairs</string>
-+    <string name="four_pairs">4 Pairs</string>
-+    <string name="five_pairs">5 Pairs</string>
-+    <string name="six_pairs">6 Pairs</string>
-     <string name="confirm_save_title">Save changes?</string>
-     <string name="confirm_save_message">Are you sure you want to save the changes?</string>
-     <string name="confirm_save_button">Save</string>
-@@ -130,7 +134,7 @@
-     <string name="image_select_error">Error selecting image</string>
-     <string name="image_gallery_title">Images</string>
-     <string name="congratulations">Congratulations!</string>
--    <string name="message_puzzle_completed">You\'ve solved the puzzle! Ready for the next challenge?</string>
-+    <string name="message_game_completed">You\'ve solved the game! Ready for the next challenge?</string>
-     <string name="original_image">View image</string>
-     <string name="ready">Ready</string>
-     <string name="lang_de">Deutsch</string>
-@@ -163,4 +167,9 @@
-     <string name="lang_en">English</string>
-     <string name="lang_es">Espa帽ol</string>
-     <string name="sample_text">Ejemplo</string>
-+    <string name="puzzle_screen">Puzzle</string>
-+    <string name="puzzle_option">PUZZLE</string>
-+    <string name="memory_screen">Memory</string>
-+    <string name="memory_option">MEMORY</string>
-+    <string name="back_piece">Back of the piece</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun OpcionesModoNi帽o(navController:NavController,modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().background(Color.White).verticalScroll(rememberScrollState())) {\r\n        val (btnVideo,btnJuego) = createRefs()\r\n        val centerGuide = createGuidelineFromTop(0.5f)\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIDEO_NINYOS)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVideo) {\r\n                    bottom.linkTo(centerGuide, margin = 24.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier\r\n                    .padding(horizontal = 20.dp),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            )  {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.youtube),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 18.dp)\r\n                        .size(48.dp)\r\n                )\r\n                Text(\r\n                    stringResource(id = R.string.video_child),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n            }\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.JUEGO_NINYOS)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnJuego) {\r\n                    top.linkTo(centerGuide, margin = 24.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier\r\n                    .padding(horizontal = 20.dp),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.console),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 16.dp)\r\n                        .size(48.dp)\r\n\r\n                )\r\n                Text(\r\n                    stringResource(id = R.string.game_child),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt	(revision a6457c469b0cfa32d9f1ff66441a454d44dcf73e)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt	(date 1763915214561)
-@@ -43,7 +43,7 @@
-     val activity = (context as? Activity)
- 
-     DisposableEffect(Unit) {
--        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-+        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
- 
-         onDispose {
- 
Index: .idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_12_17_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_12_17_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_12_17_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_12_17_[Changes]/shelved.patch	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,1046 +0,0 @@
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIOS</string>\r\n    <string name=\"child_mode_view\">Modo Ni帽os</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n    <string name=\"edit_mode\">MODO EDICIN</string>\r\n    <string name=\"edit_home_background\">Edici贸n fondo inicio</string>\r\n    <string name=\"edit_pins\">Edici贸n pines</string>\r\n    <string name=\"location_error\">No se encontr贸 una app para abrir la ubicaci贸n.</string>\r\n    <string name=\"contact_data\">Datos de contacto</string>\r\n    <string name=\"location_data\">Ubicaci贸n</string>\r\n    <string name=\"email_data\">Correo electr贸nico</string>\r\n    <string name=\"phone_data\">Tel茅fono</string>\r\n    <string name=\"visit_schedule\">Horarios de Visita</string>\r\n    <string name=\"monday_to_friday\">Lunes a Viernes:</string>\r\n    <string name=\"play_audio\" />\r\n    <string name=\"dont_show_again\">No volver a mostrar</string>\r\n    <string name=\"understand\">Entendido</string>\r\n    <string name=\"map_tutorial_body\">Este es el cuerpo del tutorial</string>\r\n    <string name=\"map_tutorial_title\">Este es el titulo del tutorial</string>\r\n    <string name=\"map_tutorial_body2\">Este es el cuerpo del tutorial del mapa 2</string>\r\n    <string name=\"map_tutorial_title2\">Este es el titulo del tutorial del mapa 2</string>\r\n    <string name=\"pin_tutorial_body\">Este es el cuerpo del tutorial del pin</string>\r\n    <string name=\"pin_tutorial_title\">Este es el titulo del tutorial del pin</string>\r\n    <string name=\"next\">Siguiente</string>\r\n    <string name=\"map_tutorial_body1\">En la parte superior izquierda, el s铆mbolo () permite volver al inicio</string>\r\n    <string name=\"map_tutorial_body1_2\">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>\r\n    <string name=\"map_tutorial_body1_3\">Adem谩s de tocando en el mapa se puede interactuar con este a partir de los botones en la parte derecha que permiten ampliar, desampliar y centrar el mapa</string>\r\n    <string name=\"submapa_1\">Tocando en el s铆mbolo () podemos volver al mapa general</string>\r\n    <string name=\"submapa_2\">Tocando en los distintos pines podemos entrar a los puntos de inter茅s</string>\r\n    <string name=\"pin_1\">Pulsando en el s铆mbolo (), se puede volver al mapa</string>\r\n    <string name=\"pin_2\">Puedes desplazarte por las im谩genes o pulsar en ellas para ampliarlas</string>\r\n    <string name=\"pin_3\">Pulsando aqu铆 puedes escuchar el audio del texto</string>\r\n    <string name=\"pin_4\">Para acceder a la vista 360 pulse este bot贸n</string>\r\n    <string name=\"confirm_save_title\">驴Guardar cambios?</string>\r\n    <string name=\"confirm_save_message\">驴Est谩s seguro de que quieres guardar los cambios realizados?</string>\r\n    <string name=\"confirm_save_button\">Guardar</string>\r\n    <string name=\"confirm_cancel_button\">Cancelar</string>\r\n    <string name=\"edit_cancel_changes\">Cancelar</string>\r\n    <string name=\"profile_name\">Nombre</string>\r\n    <string name=\"image_add\">A帽adir imagen</string>\r\n    <string name=\"image_delete\">Borrar</string>\r\n    <string name=\"image_delete_confirm_title\">驴Borrar imagen?</string>\r\n    <string name=\"image_delete_confirm_message\">驴Seguro que quieres borrar la imagen?</string>\r\n    <string name=\"image_uploading\">Subiendo imagen...</string>\r\n    <string name=\"image_upload_success\">Imagen subida correctamente</string>\r\n    <string name=\"image_upload_error\">Error al subir la imagen</string>\r\n    <string name=\"image_select_error\">Error al cargar la imagen</string>\r\n    <string name=\"image_gallery_title\">Im谩genes</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision a3b04c883cce96b084eb3dacc2d4afe1ccb060a1)
-+++ b/app/src/main/res/values/strings.xml	(date 1763809531067)
-@@ -110,7 +110,7 @@
-     <string name="next">Siguiente</string>
-     <string name="map_tutorial_body1">En la parte superior izquierda, el s铆mbolo () permite volver al inicio</string>
-     <string name="map_tutorial_body1_2">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>
--    <string name="map_tutorial_body1_3">Adem谩s de tocando en el mapa se puede interactuar con este a partir de los botones en la parte derecha que permiten ampliar, desampliar y centrar el mapa</string>
-+    <string name="map_tutorial_body1_3">Adem谩s, los botones de la parte derecha te permiten ampliar el mapa, reducirlo o volver a su tama帽o  voriginal</string>
-     <string name="submapa_1">Tocando en el s铆mbolo () podemos volver al mapa general</string>
-     <string name="submapa_2">Tocando en los distintos pines podemos entrar a los puntos de inter茅s</string>
-     <string name="pin_1">Pulsando en el s铆mbolo (), se puede volver al mapa</string>
-@@ -132,4 +132,10 @@
-     <string name="image_upload_error">Error al subir la imagen</string>
-     <string name="image_select_error">Error al cargar la imagen</string>
-     <string name="image_gallery_title">Im谩genes</string>
-+    <string name="visible">Visibles</string>
-+    <string name="hidden">Ocultos</string>
-+    <string name="lang_en">Engish</string>
-+    <string name="lang_es">Espa帽ol</string>
-+    <string name="sample_text">Ejemplo</string>
-+    <string name="lang_de">Deutsch</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/AjustesScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.activity.compose.LocalActivity\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.layout.Arrangement\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.runtime.collectAsState\r\nimport androidx.compose.runtime.getValue\r\nimport androidx.compose.runtime.mutableStateOf\r\nimport androidx.compose.runtime.remember\r\nimport androidx.compose.runtime.setValue\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport com.nextapp.monasterio.LanguageHelper\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\n\r\n@Composable\r\nfun AjustesScreen(viewModel: AjustesViewModel) {\r\n    //  Usa LocalActivity en lugar de LocalContext\r\n    val activity = LocalActivity.current as? AppCompatActivity ?: return\r\n    val botonesVisibles by viewModel.botonesVisibles.collectAsState()\r\n\r\n    DisposableEffect(Unit) {\r\n        activity.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    Column(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .verticalScroll(rememberScrollState())\r\n            .padding(16.dp),\r\n        horizontalAlignment = Alignment.CenterHorizontally\r\n    ) {\r\n        Text(\r\n            text = stringResource(id = R.string.language_select),\r\n            style = MaterialTheme.typography.headlineMedium\r\n        )\r\n\r\n        Spacer(modifier = Modifier.height(32.dp))\r\n\r\n        // Bot贸n para Espa帽ol\r\n        Button(onClick = {\r\n            LanguageHelper.saveLocale(activity, \"es\")\r\n            activity.recreate()\r\n        }) {\r\n            Text(\"Espa帽ol\")\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(16.dp))\r\n\r\n        // Bot贸n para Ingl茅s\r\n        Button(onClick = {\r\n            LanguageHelper.saveLocale(activity, \"en\")\r\n            activity.recreate()\r\n        }) {\r\n            Text(\"English\")\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(16.dp))\r\n\r\n        // Bot贸n para Alem谩n\r\n        Button(onClick = {\r\n            LanguageHelper.saveLocale(activity, \"de\")\r\n            activity.recreate()\r\n        }) {\r\n            Text(\"Deutsch\")\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(48.dp))\r\n\r\n        Text(\r\n            text = stringResource(R.string.font_size_select),\r\n            style = MaterialTheme.typography.headlineMedium\r\n        )\r\n\r\n        Spacer(modifier = Modifier.height(32.dp))\r\n\r\n\r\n        Button(\r\n            onClick = {\r\n                FontSize.guardarFontScale(activity, 1.0f)\r\n                activity.recreate()\r\n            }\r\n        ) {\r\n            Text(\r\n                text = stringResource(R.string.font_normal),\r\n                textAlign = TextAlign.Center\r\n            )\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(16.dp))\r\n\r\n        Button(\r\n            onClick = {\r\n                FontSize.guardarFontScale(activity, 1.3f)\r\n                activity.recreate()\r\n            }\r\n        ) {\r\n            Text(\r\n                text = stringResource(R.string.font_big),\r\n                textAlign = TextAlign.Center\r\n            )\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(16.dp))\r\n\r\n        Button(\r\n            onClick = {\r\n                FontSize.guardarFontScale(activity, 1.6f)\r\n                activity.recreate()\r\n            }\r\n        ) {\r\n            Text(\r\n                text = stringResource(R.string.font_extrabig),\r\n                textAlign = TextAlign.Center\r\n            )\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(32.dp))\r\n\r\n        Row(\r\n            verticalAlignment = Alignment.CenterVertically,\r\n        ){\r\n            Text(\r\n                text=stringResource(R.string.navegation_button),\r\n                style = MaterialTheme.typography.headlineMedium,\r\n            )\r\n            Checkbox(\r\n                checked = !botonesVisibles,\r\n                onCheckedChange = {nuevoValor ->\r\n                    viewModel.setBotonesVisibles(!nuevoValor)\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/AjustesScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/AjustesScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/AjustesScreen.kt	(revision a3b04c883cce96b084eb3dacc2d4afe1ccb060a1)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/AjustesScreen.kt	(date 1763810212659)
-@@ -3,148 +3,287 @@
- import android.content.pm.ActivityInfo
- import androidx.activity.compose.LocalActivity
- import androidx.appcompat.app.AppCompatActivity
-+import androidx.compose.foundation.Image
-+import androidx.compose.foundation.background
- import androidx.compose.foundation.layout.*
--import androidx.compose.foundation.layout.Arrangement
- import androidx.compose.foundation.rememberScrollState
-+import androidx.compose.foundation.shape.RoundedCornerShape
- import androidx.compose.foundation.verticalScroll
- import androidx.compose.material3.*
--import androidx.compose.runtime.Composable
--import androidx.compose.runtime.DisposableEffect
--import androidx.compose.runtime.collectAsState
--import androidx.compose.runtime.getValue
--import androidx.compose.runtime.mutableStateOf
--import androidx.compose.runtime.remember
--import androidx.compose.runtime.setValue
-+import androidx.compose.runtime.*
- import androidx.compose.ui.Alignment
- import androidx.compose.ui.Modifier
-+import androidx.compose.ui.draw.clip
-+import androidx.compose.ui.draw.rotate
-+import androidx.compose.ui.graphics.Color
-+import androidx.compose.ui.platform.LocalConfiguration
-+import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.res.stringResource
--import androidx.compose.ui.text.style.TextAlign
-+import androidx.compose.ui.text.font.FontWeight
- import androidx.compose.ui.unit.dp
-+import androidx.compose.ui.unit.sp
- import com.nextapp.monasterio.LanguageHelper
- import com.nextapp.monasterio.R
- import com.nextapp.monasterio.utils.FontSize
- import com.nextapp.monasterio.viewModels.AjustesViewModel
-+import java.util.Locale
-+import kotlin.math.roundToInt // Importante para el redondeo
- 
-+@OptIn(ExperimentalMaterial3Api::class)
- @Composable
- fun AjustesScreen(viewModel: AjustesViewModel) {
--    //  Usa LocalActivity en lugar de LocalContext
-     val activity = LocalActivity.current as? AppCompatActivity ?: return
-     val botonesVisibles by viewModel.botonesVisibles.collectAsState()
- 
-+    // Configuraci贸n actual para detectar idioma y fuente inicial
-+    val configuration = LocalConfiguration.current
-+    val currentLocale = configuration.locales[0]
-+    val currentFontScale = configuration.fontScale
-+
-     DisposableEffect(Unit) {
-         activity.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
--        onDispose {
--
--        }
-+        onDispose {}
-     }
- 
-     Column(
-         modifier = Modifier
-             .fillMaxSize()
-+            .background(MaterialTheme.colorScheme.background)
-             .verticalScroll(rememberScrollState())
-             .padding(16.dp),
-         horizontalAlignment = Alignment.CenterHorizontally
-     ) {
--        Text(
--            text = stringResource(id = R.string.language_select),
--            style = MaterialTheme.typography.headlineMedium
--        )
--
--        Spacer(modifier = Modifier.height(32.dp))
--
--        // Bot贸n para Espa帽ol
--        Button(onClick = {
--            LanguageHelper.saveLocale(activity, "es")
--            activity.recreate()
--        }) {
--            Text("Espa帽ol")
--        }
--
--        Spacer(modifier = Modifier.height(16.dp))
--
--        // Bot贸n para Ingl茅s
--        Button(onClick = {
--            LanguageHelper.saveLocale(activity, "en")
--            activity.recreate()
--        }) {
--            Text("English")
-+        // (T铆tulo eliminado)
-+
-+        // ==========================================
-+        // 1. SELECTOR DE IDIOMA (DROPDOWN CON BANDERAS)
-+        // ==========================================
-+        SettingsSectionCard(title = stringResource(R.string.language_select)) {
-+            LanguageSelector(activity, currentLocale)
-+        }
-+
-+        Spacer(modifier = Modifier.height(24.dp))
-+
-+        // ==========================================
-+        // 2. TAMAO DE FUENTE (SLIDER)
-+        // ==========================================
-+        SettingsSectionCard(title = stringResource(R.string.font_size_select)) {
-+            FontSizeSlider(activity, currentFontScale)
-+        }
-+
-+        Spacer(modifier = Modifier.height(24.dp))
-+
-+        // ==========================================
-+        // 3. BOTONES DE NAVEGACIN (SWITCH)
-+        // ==========================================
-+        SettingsSectionCard(title = stringResource(R.string.navegation_button)) {
-+            Row(
-+                modifier = Modifier
-+                    .fillMaxWidth()
-+                    .padding(vertical = 8.dp),
-+                verticalAlignment = Alignment.CenterVertically,
-+                horizontalArrangement = Arrangement.SpaceBetween
-+            ) {
-+                Text(
-+                    text = if (botonesVisibles) stringResource(R.string.visible) else stringResource(R.string.hidden),
-+                    style = MaterialTheme.typography.bodyLarge
-+                )
-+                Switch(
-+                    checked = botonesVisibles,
-+                    onCheckedChange = { viewModel.setBotonesVisibles(it) },
-+                    colors = SwitchDefaults.colors(
-+                        checkedThumbColor = MaterialTheme.colorScheme.primary,
-+                        checkedTrackColor = MaterialTheme.colorScheme.primaryContainer
-+                    )
-+                )
-+            }
-         }
--
--        Spacer(modifier = Modifier.height(16.dp))
--
--        // Bot贸n para Alem谩n
--        Button(onClick = {
--            LanguageHelper.saveLocale(activity, "de")
--            activity.recreate()
--        }) {
--            Text("Deutsch")
--        }
-+    }
-+}
- 
--        Spacer(modifier = Modifier.height(48.dp))
--
--        Text(
--            text = stringResource(R.string.font_size_select),
--            style = MaterialTheme.typography.headlineMedium
--        )
--
--        Spacer(modifier = Modifier.height(32.dp))
--
--
--        Button(
--            onClick = {
--                FontSize.guardarFontScale(activity, 1.0f)
--                activity.recreate()
--            }
--        ) {
-+// --- COMPONENTE TARJETA PARA SECCIONES ---
-+@Composable
-+fun SettingsSectionCard(title: String, content: @Composable () -> Unit) {
-+    Card(
-+        modifier = Modifier.fillMaxWidth(),
-+        shape = RoundedCornerShape(16.dp),
-+        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp),
-+        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surface)
-+    ) {
-+        Column(modifier = Modifier.padding(20.dp)) {
-             Text(
--                text = stringResource(R.string.font_normal),
--                textAlign = TextAlign.Center
-+                text = title,
-+                style = MaterialTheme.typography.titleMedium,
-+                fontWeight = FontWeight.Bold,
-+                color = MaterialTheme.colorScheme.onSurface
-             )
--        }
--
--        Spacer(modifier = Modifier.height(16.dp))
-+            Spacer(modifier = Modifier.height(16.dp))
-+            content()
-+        }
-+    }
-+}
-+
-+// --- COMPONENTE SELECTOR DE IDIOMA ---
-+@Composable
-+fun LanguageSelector(activity: AppCompatActivity, currentLocale: Locale) {
-+    var expanded by remember { mutableStateOf(false) }
-+    val languageCode = currentLocale.language
- 
--        Button(
--            onClick = {
--                FontSize.guardarFontScale(activity, 1.3f)
-+    val currentFlag = when (languageCode) {
-+        "de" -> R.drawable.alemania
-+        "en" -> R.drawable.reinounido
-+        else -> R.drawable.espanya
-+    }
-+
-+    val currentName = when (languageCode) {
-+        "de" -> stringResource(R.string.lang_de)
-+        "en" -> stringResource(R.string.lang_en)
-+        else -> stringResource(R.string.lang_es)
-+    }
-+
-+    Box(modifier = Modifier.fillMaxWidth()) {
-+        OutlinedButton(
-+            onClick = { expanded = true },
-+            modifier = Modifier.fillMaxWidth(),
-+            shape = RoundedCornerShape(12.dp),
-+            colors = ButtonDefaults.outlinedButtonColors(containerColor = Color.Transparent)
-+        ) {
-+            Row(
-+                verticalAlignment = Alignment.CenterVertically,
-+                horizontalArrangement = Arrangement.SpaceBetween,
-+                modifier = Modifier.fillMaxWidth()
-+            ) {
-+                Row(verticalAlignment = Alignment.CenterVertically) {
-+                    Image(
-+                        painter = painterResource(id = currentFlag),
-+                        contentDescription = null,
-+                        modifier = Modifier
-+                            .size(32.dp)
-+                            .clip(RoundedCornerShape(4.dp))
-+                    )
-+                    Spacer(modifier = Modifier.width(16.dp))
-+                    Text(text = currentName, style = MaterialTheme.typography.bodyLarge, color = MaterialTheme.colorScheme.onSurface)
-+                }
-+                Icon(
-+                    painter = painterResource(id = R.drawable.arrow_down),
-+                    contentDescription = null,
-+                    tint = MaterialTheme.colorScheme.onSurface,
-+                    modifier = Modifier.rotate(if (expanded) 180f else 0f)
-+                )
-+            }
-+        }
-+
-+        DropdownMenu(
-+            expanded = expanded,
-+            onDismissRequest = { expanded = false },
-+            modifier = Modifier.fillMaxWidth(0.85f)
-+        ) {
-+            LanguageItem(activity, "es", stringResource(R.string.lang_es), R.drawable.espanya) { expanded = false }
-+            LanguageItem(activity, "en", stringResource(R.string.lang_en), R.drawable.reinounido) { expanded = false }
-+            LanguageItem(activity, "de", stringResource(R.string.lang_de), R.drawable.alemania) { expanded = false }
-+        }
-+    }
-+}
-+
-+@Composable
-+fun LanguageItem(
-+    activity: AppCompatActivity,
-+    code: String,
-+    name: String,
-+    flagRes: Int,
-+    onDismiss: () -> Unit
-+) {
-+    DropdownMenuItem(
-+        text = {
-+            Row(verticalAlignment = Alignment.CenterVertically) {
-+                Image(
-+                    painter = painterResource(id = flagRes),
-+                    contentDescription = null,
-+                    modifier = Modifier.size(28.dp).clip(RoundedCornerShape(4.dp))
-+                )
-+                Spacer(modifier = Modifier.width(16.dp))
-+                Text(text = name)
-+            }
-+        },
-+        onClick = {
-+            onDismiss()
-+            val currentLanguage = activity.resources.configuration.locales[0].language
-+            if (currentLanguage != code) {
-+                LanguageHelper.saveLocale(activity, code)
-                 activity.recreate()
-             }
--        ) {
--            Text(
--                text = stringResource(R.string.font_big),
--                textAlign = TextAlign.Center
--            )
--        }
-+        }
-+    )
-+}
-+
-+// --- COMPONENTE SLIDER DE FUENTE (CORREGIDO) ---
-+@Composable
-+fun FontSizeSlider(activity: AppCompatActivity, currentScale: Float) {
-+
-+    // 1. DEFINIR LOS NUEVOS TAMAOS MS GRANDES
-+    val scaleSmall = 1.3f
-+    val scaleMedium = 1.6f
-+    val scaleLarge = 1.9f
-+
-+    // 2. DETERMINAR LA POSICIN INICIAL BASADA EN EL TAMAO ACTUAL
-+    // Usamos rangos para ser tolerantes a peque帽as variaciones decimales
-+    val initialPos = remember(currentScale) {
-+        when {
-+            currentScale >= 1.8f -> 2f // Si es 1.9 o mayor -> Posici贸n 2
-+            currentScale >= 1.5f -> 1f // Si es entre 1.5 y 1.8 -> Posici贸n 1
-+            else -> 0f                 // Si es menor (1.0, 1.3) -> Posici贸n 0
-+        }
-+    }
-+
-+    // 3. Estado del Slider
-+    var sliderPosition by remember(currentScale) { mutableFloatStateOf(initialPos) }
-+
-+    Column(horizontalAlignment = Alignment.CenterHorizontally) {
-+
-+        // C谩lculo del tama帽o para la previsualizaci贸n en tiempo real
-+        val previewScale = when (sliderPosition.roundToInt()) {
-+            0 -> scaleSmall
-+            1 -> scaleMedium
-+            else -> scaleLarge
-+        }
-+
-+        Text(
-+            text = stringResource(R.string.sample_text),
-+            fontSize = 16.sp * previewScale, // Se actualiza al mover la barra
-+            style = MaterialTheme.typography.bodyMedium,
-+            color = MaterialTheme.colorScheme.primary,
-+            modifier = Modifier
-+                .padding(bottom = 16.dp)
-+                .height(50.dp) // Altura un poco mayor para acomodar texto grande
-+                .wrapContentHeight(Alignment.CenterVertically)
-+        )
- 
--        Spacer(modifier = Modifier.height(16.dp))
-+        Slider(
-+            value = sliderPosition,
-+            onValueChange = { sliderPosition = it },
-+            valueRange = 0f..2f,
-+            steps = 1, // Puntos exactos: 0, 1, 2
-+            onValueChangeFinished = {
-+                // L贸gica de guardado al soltar
-+                val selectedPos = sliderPosition.roundToInt()
-+                val newScale = when (selectedPos) {
-+                    0 -> scaleSmall
-+                    1 -> scaleMedium
-+                    else -> scaleLarge
-+                }
- 
--        Button(
--            onClick = {
--                FontSize.guardarFontScale(activity, 1.6f)
--                activity.recreate()
--            }
--        ) {
--            Text(
--                text = stringResource(R.string.font_extrabig),
--                textAlign = TextAlign.Center
-+                // Solo si ha cambiado respecto al actual, guardamos y recreamos
-+                // (Usamos una peque帽a tolerancia para comparar floats)
-+                if (kotlin.math.abs(newScale - currentScale) > 0.01f) {
-+                    FontSize.guardarFontScale(activity, newScale)
-+                    activity.recreate()
-+                }
-+            },
-+            colors = SliderDefaults.colors(
-+                thumbColor = MaterialTheme.colorScheme.primary,
-+                activeTrackColor = MaterialTheme.colorScheme.primary,
-+                inactiveTrackColor = MaterialTheme.colorScheme.surfaceVariant
-             )
--        }
--
--        Spacer(modifier = Modifier.height(32.dp))
--
--        Row(
--            verticalAlignment = Alignment.CenterVertically,
--        ){
--            Text(
--                text=stringResource(R.string.navegation_button),
--                style = MaterialTheme.typography.headlineMedium,
--            )
--            Checkbox(
--                checked = !botonesVisibles,
--                onCheckedChange = {nuevoValor ->
--                    viewModel.setBotonesVisibles(!nuevoValor)
--                }
--            )
--        }
-+        )
-     }
--}
-+}
-\ No newline at end of file
-Index: app/src/main/res/values-de/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus beenden</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">nderungen speichern</string>\r\n    <string name=\"profile_login\">Anmelden</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Gegenwart</string>\r\n    <string name=\"title_appointment\">Termin buchen</string>\r\n    <string name=\"option_phone_appointment\">Telefonisch buchen</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Uhrzeit</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">W盲hlen Sie ein Datum</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name ist erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail ist erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden</string>\r\n    <string name=\"hour_no_selected\">Eine Uhrzeit muss ausgew盲hlt werden</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Abbrechen</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist bereit. Bitte klicken Sie auf \\'Senden\\' in der gerade ge枚ffneten E-Mail-Anwendung, um Ihre Anfrage abzuschlieen. Wir werden auf diese E-Mail antworten, um die Verf眉gbarkeit zu best盲tigen.</string>\r\n    <string name=\"email_subject\">Anfrage f眉r Besuchsreservierung - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nIch m枚chte eine Reservierung f眉r einen Besuch des Klosters mit den folgenden Details anfordern:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre freundliche Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">Schriftgr枚e ausw盲hlen</string>\r\n    <string name=\"font_extrabig\">Extra Gro</string>\r\n    <string name=\"font_normal\">Mittel</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"title_entrada\">Klostereingang</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Zur眉ck</string>\r\n    <string name=\"see_360\">360潞 ansehen</string>\r\n    <string name=\"contentdescription_image_pin\">Pin-Bild (zum Vergr枚ern klicken)</string>\r\n    <string name=\"readjust\">Neu anpassen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Erh枚hen</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Ziel nicht definiert</string>\r\n    <string name=\"notdefined_destinyplane\">Zielplan nicht definiert</string>\r\n    <string name=\"plane_loading\">Lade Plan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n    <string name=\"child_mode\">KINDERMODUS</string>\r\n    <string name=\"child_mode_view\">Kindermodus</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Spiel</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">SPIEL</string>\r\n    <string name=\"edit_mode\">BEARBEITUNGSMODUS</string>\r\n    <string name=\"edit_home_background\">Startseiten-Hintergrund bearbeiten</string>\r\n    <string name=\"edit_pins\">Pins bearbeiten</string>\r\n    <string name=\"location_error\">Es wurde keine App gefunden, mit der der Standort ge枚ffnet werden kann.</string>\r\n    <string name=\"contact_data\">Kontaktinformationen</string>\r\n    <string name=\"location_data\">Standort</string>\r\n    <string name=\"email_data\">E-Mail</string>\r\n    <string name=\"phone_data\">Telefon</string>\r\n    <string name=\"visit_schedule\">ffnungszeiten</string>\r\n    <string name=\"monday_to_friday\">Montag bis Freitag:</string>\r\n    <string name=\"play_audio\" />\r\n    <string name=\"confirm_save_title\">nderungen speichern?</string>\r\n    <string name=\"confirm_save_message\">Sind Sie sicher, dass Sie die nderungen speichern m枚chten?</string>\r\n    <string name=\"confirm_save_button\">Speichern</string>\r\n    <string name=\"confirm_cancel_button\">Abbrechen</string>\r\n    <string name=\"edit_cancel_changes\">Abbrechen</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Bild hinzuf眉gen</string>\r\n    <string name=\"image_delete\">L枚schen</string>\r\n    <string name=\"image_delete_confirm_title\">Bild l枚schen?</string>\r\n    <string name=\"image_delete_confirm_message\">Diese Aktion kann nicht r眉ckg盲ngig gemacht werden</string>\r\n    <string name=\"image_uploading\">Bild wird hochgeladen...</string>\r\n    <string name=\"image_upload_success\">Bild erfolgreich hochgeladen</string>\r\n    <string name=\"image_upload_error\">Fehler beim Hochladen des Bildes</string>\r\n    <string name=\"image_select_error\">Fehler beim Ausw盲hlen des Bildes</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
---- a/app/src/main/res/values-de/strings.xml	(revision a3b04c883cce96b084eb3dacc2d4afe1ccb060a1)
-+++ b/app/src/main/res/values-de/strings.xml	(date 1763809581753)
-@@ -27,6 +27,7 @@
-     <string name="title_profile">Profil</string>
-     <string name="title_settings">Einstellungen</string>
- 
-+
-     <string name="info_location">Strae: </string>
- 
-     <string name="info_hours">ffnungszeiten: XX:XX - YY:YY</string>
-@@ -117,4 +118,32 @@
-     <string name="image_upload_success">Bild erfolgreich hochgeladen</string>
-     <string name="image_upload_error">Fehler beim Hochladen des Bildes</string>
-     <string name="image_select_error">Fehler beim Ausw盲hlen des Bildes</string>
-+    <string name="dont_show_again">Nicht mehr anzeigen</string>
-+    <string name="understand">Verstanden</string>
-+    <string name="map_tutorial_body">Dies ist der Inhalt des Tutorials</string>
-+    <string name="map_tutorial_title">Dies ist der Titel des Tutorials</string>
-+    <string name="map_tutorial_body2">Dies ist der Inhalt des Kartentutorials 2</string>
-+    <string name="map_tutorial_title2">Dies ist der Titel des Kartentutorials 2</string>
-+    <string name="pin_tutorial_body">Dies ist der Inhalt des Pin-Tutorials</string>
-+    <string name="pin_tutorial_title">Dies ist der Titel des Pin-Tutorials</string>
-+    <string name="next">Weiter</string>
-+
-+    <string name="map_tutorial_body1">Oben links k枚nnen Sie 眉ber das Symbol () zum Start zur眉ckkehren.</string>
-+    <string name="map_tutorial_body1_2">Tippen Sie auf die farbigen Bereiche der Karte, um die verschiedenen Bereiche zu erkunden.</string>
-+    <string name="map_tutorial_body1_3">Mit den Tasten auf der rechten Seite k枚nnen Sie die Karte vergr枚ern, verkleinern oder zur眉cksetzen.</string>
-+
-+    <string name="submapa_1">Tippen Sie auf das Symbol (), um zur bersichtskarte zur眉ckzukehren.</string>
-+    <string name="submapa_2">Tippen Sie auf die verschiedenen Pins, um die Details aufzurufen.</string>
-+
-+    <string name="pin_1">Dr眉cken Sie das Symbol (), um zur Karte zur眉ckzukehren.</string>
-+    <string name="pin_2">Wischen Sie durch die Bilder oder tippen Sie darauf, um sie zu vergr枚ern.</string>
-+    <string name="pin_3">Tippen Sie hier, um den Audioguide anzuh枚ren.</string>
-+    <string name="pin_4">Dr眉cken Sie diesen Button, um die 360掳-Ansicht zu 枚ffnen.</string>
-+    <string name="image_gallery_title">Bilder</string>
-+    <string name="visible">sichtbar</string>
-+    <string name="hidden">versteckt</string>
-+    <string name="lang_en">English</string>
-+    <string name="lang_es">Espa帽ol</string>
-+    <string name="sample_text">Beispiel</string>
-+    <string name="lang_de">Deutsch</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/res/values-en/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"title_entrada\">Monastery Entrance</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n    <string name=\"child_mode\">KIDS MODE</string>\r\n    <string name=\"child_mode_view\">Kids Mode</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Game</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">GAME</string>\r\n    <string name=\"edit_mode\">EDIT MODE</string>\r\n    <string name=\"edit_home_background\">Edit home background</string>\r\n    <string name=\"edit_pins\">Edit pins</string>\r\n    <string name=\"location_error\">No app was found to open the location.</string>\r\n    <string name=\"contact_data\">Contact Information</string>\r\n    <string name=\"location_data\">Location</string>\r\n    <string name=\"email_data\">Email</string>\r\n    <string name=\"phone_data\">Phone</string>\r\n    <string name=\"visit_schedule\">Opening Hours</string>\r\n    <string name=\"monday_to_friday\">Monday to Friday:</string>\r\n    <string name=\"play_audio\" />\r\n    <string name=\"confirm_save_title\">Save changes?</string>\r\n    <string name=\"confirm_save_message\">Are you sure you want to save the changes?</string>\r\n    <string name=\"confirm_save_button\">Save</string>\r\n    <string name=\"confirm_cancel_button\">Cancel</string>\r\n    <string name=\"edit_cancel_changes\">Cancel</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Add image</string>\r\n    <string name=\"image_delete\">Delete</string>\r\n    <string name=\"image_delete_confirm_title\">Delete image?</string>\r\n    <string name=\"image_delete_confirm_message\">Are you sure you want to delete this image?</string>\r\n    <string name=\"image_uploading\">Uploading image...</string>\r\n    <string name=\"image_upload_success\">Image uploaded successfully</string>\r\n    <string name=\"image_upload_error\">Error uploading image</string>\r\n    <string name=\"image_select_error\">Error selecting image</string>\r\n    <string name=\"image_gallery_title\">Images</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
---- a/app/src/main/res/values-en/strings.xml	(revision a3b04c883cce96b084eb3dacc2d4afe1ccb060a1)
-+++ b/app/src/main/res/values-en/strings.xml	(date 1763809581740)
-@@ -118,4 +118,32 @@
-     <string name="image_upload_error">Error uploading image</string>
-     <string name="image_select_error">Error selecting image</string>
-     <string name="image_gallery_title">Images</string>
-+    <string name="dont_show_again">Don\'t show again</string>
-+    <string name="understand">Got it</string>
-+    <string name="map_tutorial_body">This is the tutorial body</string>
-+    <string name="map_tutorial_title">This is the tutorial title</string>
-+    <string name="map_tutorial_body2">This is the map tutorial body 2</string>
-+    <string name="map_tutorial_title2">This is the map tutorial title 2</string>
-+    <string name="pin_tutorial_body">This is the pin tutorial body</string>
-+    <string name="pin_tutorial_title">This is the pin tutorial title</string>
-+    <string name="next">Next</string>
-+
-+    <string name="map_tutorial_body1">The () symbol in the top left allows you to return to the start.</string>
-+    <string name="map_tutorial_body1_2">Tap the colored zones on the map to enter the different viewable areas.</string>
-+    <string name="map_tutorial_body1_3">Additionally, the buttons on the right allow you to zoom in, zoom out, or reset the map size.</string>
-+
-+    <string name="submapa_1">Tap the () symbol to return to the main map.</string>
-+    <string name="submapa_2">Tap the different pins to access the points of interest.</string>
-+
-+    <string name="pin_1">Press the () symbol to return to the map.</string>
-+    <string name="pin_2">Swipe through the images or tap to enlarge them.</string>
-+    <string name="pin_3">Tap here to listen to the audio narration.</string>
-+    <string name="pin_4">Press this button to access the 360掳 view.</string>
-+    <string name="visible">visible</string>
-+    <string name="hidden">hidden</string>
-+    <string name="lang_en">English</string>
-+    <string name="lang_es">Espa帽ol</string>
-+    <string name="sample_text">Examen</string>
-+    <string name="lang_de">Deutsch</string>
-+
- </resources>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04__Changes_.xml	(revision a3b04c883cce96b084eb3dacc2d4afe1ccb060a1)
-+++ /dev/null	(revision a3b04c883cce96b084eb3dacc2d4afe1ccb060a1)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]" date="1763157937923" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 14/11/2025 23:04 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]/shelved.patch	(revision a3b04c883cce96b084eb3dacc2d4afe1ccb060a1)
-+++ /dev/null	(revision a3b04c883cce96b084eb3dacc2d4afe1ccb060a1)
-@@ -1,496 +0,0 @@
--Index: app/src/main/res/values-de/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus verlassen</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">nderungen speichern</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Heute</string>\r\n    <string name=\"title_appointment\">Termin vereinbaren</string>\r\n    <string name=\"option_phone_appointment\">Buchen Sie telefonisch</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Stunde</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Datum ausw盲hlen</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail-Adresse erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig.</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden.</string>\r\n    <string name=\"hour_no_selected\">Es muss ein Zeitpunkt ausgew盲hlt werden.</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Stornieren</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte klicken Sie in der soeben ge枚ffneten E-Mail-Anwendung auf Senden, um Ihre Anfrage abzuschlieen. Wir werden Ihnen die Verf眉gbarkeit per E-Mail best盲tigen..</string>\r\n    <string name=\"email_subject\">Reservierungsanfrage ansehen - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich m枚chte hiermit eine Reservierung f眉r einen Besuch im Kloster anfragen. Bitte geben Sie folgende Daten an:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden.</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">W盲hlen Sie die Schriftgr枚e aus</string>\r\n    <string name=\"font_extrabig\">Extra gro</string>\r\n    <string name=\"font_normal\">Mittlere</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"title_entrada\">Klostereingang</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Geh zur眉ck</string>\r\n    <string name=\"see_360\">360潞-Ansicht</string>\r\n    <string name=\"contentdescription_image_pin\">Bild anpinnen (zum Vergr枚ern anklicken)</string>\r\n    <string name=\"readjust\">Zur眉cksetzen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Zunahme</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Undefiniertes Ziel</string>\r\n    <string name=\"notdefined_destinyplane\">Zielebene nicht definiert</string>\r\n    <string name=\"plane_loading\">Ladeplan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n    <string name=\"child_mode\">KINDERMODUS</string>\r\n    <string name=\"child_mode_view\">Kindermodus</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Spiel</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">SPIEL</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
----- a/app/src/main/res/values-de/strings.xml	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/res/values-de/strings.xml	(date 1763142930387)
--@@ -93,4 +93,5 @@
--     <string name="game_view">Spiel</string>
--     <string name="video_child">VIDEO</string>
--     <string name="game_child">SPIEL</string>
--+    <string name="play_audio" />
-- </resources>
--\ No newline at end of file
--Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport androidx.compose.foundation.*\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.pager.HorizontalPager\r\nimport androidx.compose.foundation.pager.rememberPagerState\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalView\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.compose.ui.window.Dialog\r\nimport androidx.compose.ui.window.DialogProperties\r\nimport androidx.core.view.WindowCompat\r\nimport coil.compose.AsyncImage\r\nimport coil.load\r\nimport com.github.chrisbanes.photoview.PhotoView\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.models.Ubicacion\r\nimport java.util.Locale\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.res.stringResource\r\n\r\n@OptIn(ExperimentalFoundationApi::class)\r\n@Composable\r\nfun PinDetalleScreen(\r\n    pin: PinData,\r\n    onBack: () -> Unit,\r\n    onVer360: (() -> Unit)? = null\r\n) {\r\n    val view = LocalView.current\r\n    LaunchedEffect(Unit) {\r\n        val window = (view.context as? Activity)?.window\r\n        window?.let { WindowCompat.setDecorFitsSystemWindows(it, false) }\r\n    }\r\n\r\n    val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()\r\n\r\n    val pagerState = rememberPagerState(pageCount = { imagenes.size })\r\n    var selectedImageUrl by remember { mutableStateOf<String?>(null) }\r\n    var selectedImageTitle by remember { mutableStateOf<String?>(null) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val locale: Locale = configuration.locales[0]\r\n    val language = locale.language\r\n\r\n    val titulo_pin: String\r\n    val descripcion_pin: String?\r\n    val ubicacion_pin: Ubicacion?\r\n\r\n    when (language) {\r\n        \"es\" -> {\r\n            titulo_pin = pin.titulo\r\n            descripcion_pin = pin.descripcion\r\n            ubicacion_pin = pin.ubicacion\r\n        }\r\n        \"de\" -> {\r\n            titulo_pin = pin.tituloAleman\r\n            descripcion_pin = pin.descripcionAleman\r\n            ubicacion_pin = pin.ubicacionAleman\r\n        }\r\n        else -> {\r\n            titulo_pin = pin.tituloIngles\r\n            descripcion_pin = pin.descripcionIngles\r\n            ubicacion_pin = pin.ubicacionIngles\r\n        }\r\n    }\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.White)\r\n            .statusBarsPadding()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(horizontal = 16.dp)\r\n                .padding(bottom = 40.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // \uD83D\uDD19 Bot贸n atr谩s\r\n            Box(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 16.dp),\r\n                contentAlignment = Alignment.CenterStart\r\n            ) {\r\n                Image(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.go_back),\r\n                    modifier = Modifier\r\n                        .size(28.dp)\r\n                        .clickable { onBack() }\r\n                )\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            // \uD83C\uDFF7\uFE0F T铆tulo principal\r\n            Text(\r\n                text = buildString {\r\n                    append(titulo_pin)\r\n                    ubicacion_pin?.let { append(\" (${it.displayName})\") }\r\n                },\r\n                fontSize = 26.sp,\r\n                fontWeight = FontWeight.Bold,\r\n                color = Color.Black,\r\n                textAlign = TextAlign.Center,\r\n                modifier = Modifier.fillMaxWidth()\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(20.dp))\r\n\r\n            // \uD83D\uDDBC\uFE0F Carrusel con etiqueta (solo aqu铆)\r\n            if (imagenes.isNotEmpty()) {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(250.dp)\r\n                        .clip(RoundedCornerShape(16.dp))\r\n                        .border(3.dp, Color.Black, RoundedCornerShape(16.dp))\r\n                ) {\r\n                    HorizontalPager(state = pagerState) { page ->\r\n                        val imagen = imagenes[page]\r\n                        Box(modifier = Modifier.fillMaxSize()) {\r\n                            AsyncImage(\r\n                                model = imagen.url,\r\n                                contentDescription = imagen.etiqueta,\r\n                                contentScale = ContentScale.Crop,\r\n                                modifier = Modifier\r\n                                    .fillMaxSize()\r\n                                    .clickable {\r\n                                        selectedImageUrl = imagen.url\r\n                                        // \uD83D\uDC47 t铆tulo seg煤n idioma actual\r\n                                        selectedImageTitle = when (language) {\r\n                                            \"es\" -> imagen.titulo\r\n                                            \"de\" -> imagen.tituloAleman\r\n                                            else -> imagen.tituloIngles\r\n                                        }\r\n                                    }\r\n                            )\r\n\r\n                            // \uD83D\uDD39 Etiqueta abajo a la izquierda (solo carrusel)\r\n                            Text(\r\n                                text = imagen.etiqueta,\r\n                                color = Color.White,\r\n                                fontSize = 14.sp,\r\n                                modifier = Modifier\r\n                                    .align(Alignment.BottomStart)\r\n                                    .background(Color.Black.copy(alpha = 0.6f))\r\n                                    .padding(horizontal = 10.dp, vertical = 6.dp)\r\n                            )\r\n                        }\r\n                    }\r\n\r\n                    // \uD83D\uDD38 Indicadores inferiores\r\n                    Row(\r\n                        Modifier\r\n                            .align(Alignment.BottomCenter)\r\n                            .padding(bottom = 6.dp)\r\n                    ) {\r\n                        repeat(imagenes.size) { index ->\r\n                            val selected = pagerState.currentPage == index\r\n                            Box(\r\n                                Modifier\r\n                                    .padding(3.dp)\r\n                                    .size(if (selected) 8.dp else 6.dp)\r\n                                    .background(\r\n                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),\r\n                                        shape = CircleShape\r\n                                    )\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n                Spacer(modifier = Modifier.height(24.dp))\r\n            }\r\n\r\n            // \uD83D\uDCDD Descripci贸n\r\n            val descripcion = descripcion_pin ?: \"\"\r\n            if (descripcion.isNotBlank()) {\r\n                val textScrollState = rememberScrollState()\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .weight(1f)\r\n                        .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))\r\n                        .clip(RoundedCornerShape(8.dp))\r\n                ) {\r\n                    Text(\r\n                        text = descripcion,\r\n                        fontSize = 16.sp,\r\n                        color = Color.DarkGray,\r\n                        lineHeight = 22.sp,\r\n                        modifier = Modifier\r\n                            .fillMaxSize()\r\n                            .padding(horizontal = 12.dp, vertical = 8.dp)\r\n                            .verticalScroll(textScrollState)\r\n                    )\r\n                }\r\n            }\r\n\r\n            Spacer(modifier=Modifier.height(24.dp))\r\n\r\n            // \uD83D\uDD18 Bot贸n 360\r\n            onVer360?.let {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .background(Color.White)\r\n                        .navigationBarsPadding()\r\n                        .padding(horizontal = 16.dp, vertical = 2.dp)\r\n                ) {\r\n                    Button(\r\n                        onClick = it,\r\n                        modifier = Modifier\r\n                            .fillMaxWidth()\r\n                            .height(56.dp),\r\n                        colors = ButtonDefaults.buttonColors(containerColor = Color.Black),\r\n                        shape = RoundedCornerShape(12.dp)\r\n                    ) {\r\n                        Text(\r\n                            text = stringResource(R.string.see_360),\r\n                            color = Color.White,\r\n                            fontSize = 18.sp,\r\n                            fontWeight = FontWeight.Bold,\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD0D Zoom con t铆tulo traducido\r\n        if (selectedImageUrl != null) {\r\n            ZoomableImageDialog(\r\n                imageUrl = selectedImageUrl!!,\r\n                label = selectedImageTitle ?: \"\",\r\n                onDismiss = {\r\n                    selectedImageUrl = null\r\n                    selectedImageTitle = null\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// \uD83D\uDD0D Di谩logo de zoom\r\n@Composable\r\nprivate fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {\r\n    Dialog(\r\n        onDismissRequest = onDismiss,\r\n        properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)\r\n    ) {\r\n        Box(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .background(Color.Black.copy(alpha = 0.95f))\r\n        ) {\r\n            AndroidView(\r\n                factory = { context ->\r\n                    PhotoView(context).apply {\r\n                        load(imageUrl) { crossfade(true) }\r\n                    }\r\n                },\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n\r\n            // \uD83D\uDD39 T铆tulo (ya traducido seg煤n idioma)\r\n            Text(\r\n                text = label,\r\n                color = Color.White,\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Medium,\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomStart)\r\n                    .background(Color.Black.copy(alpha = 0.7f))\r\n                    .padding(horizontal = 12.dp, vertical = 8.dp)\r\n            )\r\n\r\n            //  Bot贸n cerrar\r\n            IconButton(\r\n                onClick = onDismiss,\r\n                modifier = Modifier\r\n                    .align(Alignment.TopEnd)\r\n                    .statusBarsPadding()\r\n                    .padding(16.dp)\r\n                    .background(Color.Black.copy(alpha = 0.5f), CircleShape)\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.close),\r\n                    tint = Color.White\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(date 1763157645700)
--@@ -14,6 +14,7 @@
-- import androidx.compose.ui.draw.clip
-- import androidx.compose.ui.graphics.Color
-- import androidx.compose.ui.layout.ContentScale
--+import androidx.compose.ui.platform.LocalContext // <-- 隆NUEVO IMPORT!
-- import androidx.compose.ui.platform.LocalView
-- import androidx.compose.ui.res.painterResource
-- import androidx.compose.ui.text.font.FontWeight
--@@ -35,6 +36,12 @@
-- import androidx.compose.foundation.verticalScroll
-- import androidx.compose.ui.platform.LocalConfiguration
-- import androidx.compose.ui.res.stringResource
--+// Imports de Media3 (ExoPlayer)
--+import androidx.media3.common.MediaItem
--+import androidx.media3.common.Player
--+import androidx.media3.exoplayer.ExoPlayer
--+import android.util.Log
--+import androidx.compose.foundation.layout.Arrangement
-- 
-- @OptIn(ExperimentalFoundationApi::class)
-- @Composable
--@@ -59,6 +66,7 @@
--     val locale: Locale = configuration.locales[0]
--     val language = locale.language
-- 
--+    // --- L贸gica de Texto Multiling眉e (Tu c贸digo) ---
--     val titulo_pin: String
--     val descripcion_pin: String?
--     val ubicacion_pin: Ubicacion?
--@@ -81,6 +89,64 @@
--         }
--     }
-- 
--+    // --- 隆隆NUEVA LGICA DE AUDIO!! ---
--+    val context = LocalContext.current
--+
--+    // 1. Selecciona la URL de audio correcta
--+    val audioUrl = when (language) {
--+        "es" -> pin.audioUrl_es
--+        "en" -> pin.audioUrl_en
--+        "de" -> pin.audioUrl_ge
--+        else -> pin.audioUrl_es
--+    }
--+
--+    Log.d(
--+        "AudioDebug",
--+        "Pin: '${pin.titulo}', Idioma: $language, URL de Audio Seleccionada: [$audioUrl]"
--+    )
--+
--+    // 2. Configura el ExoPlayer
--+    val exoPlayer = remember { ExoPlayer.Builder(context).build() }
--+    var isPlaying by remember { mutableStateOf(false) }
--+    var playbackState by remember { mutableStateOf(Player.STATE_IDLE) }
--+    var hasUserInteracted by remember { mutableStateOf(false) }
--+
--+    // 3. Prepara el player si la URL cambia (y no es nula)
--+    DisposableEffect(audioUrl) {
--+        if (!audioUrl.isNullOrBlank()) {
--+            val mediaItem = MediaItem.fromUri(audioUrl)
--+            exoPlayer.setMediaItem(mediaItem)
--+            exoPlayer.prepare()
--+        }
--+        // (No necesitamos onDispose aqu铆, se libera abajo)
--+        onDispose { }
--+    }
--+
--+    // 4. Listener para actualizar el bot贸n Play/Pause y rebobinar
--+    LaunchedEffect(exoPlayer) {
--+        exoPlayer.addListener(object : Player.Listener {
--+            override fun onIsPlayingChanged(isPlayingValue: Boolean) {
--+                isPlaying = isPlayingValue
--+            }
--+            override fun onPlaybackStateChanged(state: Int) {
--+                playbackState = state
--+
--+                if (state == Player.STATE_ENDED) {
--+                    isPlaying = false
--+                    exoPlayer.seekTo(0)
--+                }
--+            }
--+        })
--+    }
--+
--+    // 5. Libera el player al salir de la pantalla
--+    DisposableEffect(Unit) {
--+        onDispose {
--+            exoPlayer.release()
--+        }
--+    }
--+    // --- FIN LGICA DE AUDIO ---
--+
--     Box(
--         modifier = Modifier
--             .fillMaxSize()
--@@ -110,9 +176,8 @@
--                 )
--             }
-- 
---            Spacer(modifier = Modifier.height(16.dp))
--+            Spacer(modifier = Modifier.height(8.dp))
-- 
---            // 凤 T铆tulo principal
--             Text(
--                 text = buildString {
--                     append(titulo_pin)
--@@ -125,9 +190,9 @@
--                 modifier = Modifier.fillMaxWidth()
--             )
-- 
---            Spacer(modifier = Modifier.height(20.dp))
--+            Spacer(modifier = Modifier.height(16.dp))
-- 
---            // 硷 Carrusel con etiqueta (solo aqu铆)
--+            // 硷 Carrusel con etiqueta (se queda igual)
--             if (imagenes.isNotEmpty()) {
--                 Box(
--                     modifier = Modifier
--@@ -137,62 +202,141 @@
--                         .border(3.dp, Color.Black, RoundedCornerShape(16.dp))
--                 ) {
--                     HorizontalPager(state = pagerState) { page ->
--+
--                         val imagen = imagenes[page]
--+
--                         Box(modifier = Modifier.fillMaxSize()) {
--+
--                             AsyncImage(
--+
--                                 model = imagen.url,
--+
--                                 contentDescription = imagen.etiqueta,
--+
--                                 contentScale = ContentScale.Crop,
--+
--                                 modifier = Modifier
--+
--                                     .fillMaxSize()
--+
--                                     .clickable {
--+
--                                         selectedImageUrl = imagen.url
---                                        //  t铆tulo seg煤n idioma actual
--+
--+//  t铆tulo seg煤n idioma actual
--+
--                                         selectedImageTitle = when (language) {
--+
--                                             "es" -> imagen.titulo
--+
--                                             "de" -> imagen.tituloAleman
--+
--                                             else -> imagen.tituloIngles
--+
--                                         }
--+
--                                     }
---                            )
-- 
---                            //  Etiqueta abajo a la izquierda (solo carrusel)
--+                            )
--                             Text(
--+
--                                 text = imagen.etiqueta,
--+
--                                 color = Color.White,
--+
--                                 fontSize = 14.sp,
--+
--                                 modifier = Modifier
--+
--                                     .align(Alignment.BottomStart)
--+
--                                     .background(Color.Black.copy(alpha = 0.6f))
--+
--                                     .padding(horizontal = 10.dp, vertical = 6.dp)
--+
--                             )
--+
--                         }
---                    }
-- 
---                    //  Indicadores inferiores
--+                    }
--                     Row(
--                         Modifier
--                             .align(Alignment.BottomCenter)
--                             .padding(bottom = 6.dp)
--                     ) {
--                         repeat(imagenes.size) { index ->
--+
--                             val selected = pagerState.currentPage == index
--+
--                             Box(
--+
--                                 Modifier
--+
--                                     .padding(3.dp)
--+
--                                     .size(if (selected) 8.dp else 6.dp)
--+
--                                     .background(
--+
--                                         Color.White.copy(alpha = if (selected) 1f else 0.6f),
--+
--                                         shape = CircleShape
--+
--                                     )
--+
--                             )
--+
--                         }
--                     }
--                 }
---                Spacer(modifier = Modifier.height(24.dp))
--+                Spacer(modifier = Modifier.height(12.dp))
--             }
-- 
---            //  Descripci贸n
--+
--+            Row(
--+                modifier = Modifier.fillMaxWidth(),
--+                verticalAlignment = Alignment.CenterVertically
--+            ) {
--+                // Bot贸n de Audio (solo si hay URL)
--+                if (!audioUrl.isNullOrBlank()) {
--+                    // 1. Determina el icono correcto
--+                    val iconRes = when {
--+                        isPlaying -> R.drawable.pause
--+                        !hasUserInteracted -> R.drawable.microphone
--+                        else -> R.drawable.play_arrow
--+                    }
--+
--+                    // 2. Bot贸n de audio con redondel, alineado a la derecha del t铆tulo
--+                    Row(
--+                        modifier = Modifier
--+                            .fillMaxWidth()
--+                            .padding(top = 8.dp), // Espacio entre el t铆tulo y el bot贸n
--+                        horizontalArrangement = Arrangement.Start // Alinea a la derecha
--+                    ) {
--+                        IconButton(onClick = {
--+                            hasUserInteracted = true
--+                            if (isPlaying) exoPlayer.pause() else exoPlayer.play()
--+                        }) {
--+                            Box(
--+                                modifier = Modifier
--+                                    .size(48.dp) // Tama帽o del redondel
--+                                    .clip(CircleShape) // Forma redonda
--+                                    .background(Color.Gray.copy(alpha = 0.3f)), // Color de fondo del redondel (ej. gris suave)
--+                                contentAlignment = Alignment.Center // Centra el icono dentro del redondel
--+                            ) {
--+                                Icon(
--+                                    painter = painterResource(id = iconRes),
--+                                    contentDescription = stringResource(R.string.play_audio),
--+                                    tint = Color.Black, // Color del icono
--+                                    modifier = Modifier.size(28.dp) // Tama帽o del icono dentro del redondel
--+                                )
--+                            }
--+                        }
--+                    }
--+                }
--+            }
--+
--+            //  Descripci贸n (se queda igual)
--             val descripcion = descripcion_pin ?: ""
--             if (descripcion.isNotBlank()) {
--                 val textScrollState = rememberScrollState()
--@@ -218,7 +362,7 @@
-- 
--             Spacer(modifier=Modifier.height(24.dp))
-- 
---            //  Bot贸n 360
--+            //  Bot贸n 360 (se queda igual)
--             onVer360?.let {
--                 Box(
--                     modifier = Modifier
--@@ -245,7 +389,7 @@
--             }
--         }
-- 
---        //  Zoom con t铆tulo traducido
--+        //  Zoom con t铆tulo traducido (se queda igual)
--         if (selectedImageUrl != null) {
--             ZoomableImageDialog(
--                 imageUrl = selectedImageUrl!!,
--@@ -259,7 +403,7 @@
--     }
-- }
-- 
---//  Di谩logo de zoom
--+//  Di谩logo de zoom (se queda igual)
-- @Composable
-- private fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {
--     Dialog(
--@@ -309,4 +453,4 @@
--             }
--         }
--     }
---}
--+}
--\ No newline at end of file
--Index: gradle/libs.versions.toml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>[versions]\r\nagp = \"8.11.1\" #no cambiar de la 8.11.1\r\nkotlin = \"2.2.0\"\r\ncoreKtx = \"1.17.0\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nlifecycleRuntimeKtx = \"2.9.4\"\r\nactivityCompose = \"1.11.0\"\r\ncomposeBom = \"2025.10.01\"\r\n#Practica\r\nconstraintlayoutCompose = \"1.1.1\"\r\nnavigationCompose = \"2.9.5\"\r\nfoundation = \"1.9.4\"\r\nappcompat = \"1.7.0\"\r\nmaterial = \"1.12.0\"\r\nfirebase-gservices = \"4.4.4\"\r\nfirebase-bom = \"33.1.0\"\r\n#panoramicas\r\npanoramaGL = \"1.11.0\"\r\nfirebaseFirestore = \"26.0.2\"\r\n\r\n[libraries]\r\nandroidx-core-ktx = { group = \"androidx.core\", name = \"core-ktx\", version.ref = \"coreKtx\" }\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\nandroidx-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nandroidx-espresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nandroidx-lifecycle-runtime-ktx = { group = \"androidx.lifecycle\", name = \"lifecycle-runtime-ktx\", version.ref = \"lifecycleRuntimeKtx\" }\r\nandroidx-activity-compose = { group = \"androidx.activity\", name = \"activity-compose\", version.ref = \"activityCompose\" }\r\nandroidx-compose-bom = { group = \"androidx.compose\", name = \"compose-bom\", version.ref = \"composeBom\" }\r\nandroidx-ui = { group = \"androidx.compose.ui\", name = \"ui\" }\r\nandroidx-ui-graphics = { group = \"androidx.compose.ui\", name = \"ui-graphics\" }\r\nandroidx-ui-tooling = { group = \"androidx.compose.ui\", name = \"ui-tooling\" }\r\nandroidx-ui-tooling-preview = { group = \"androidx.compose.ui\", name = \"ui-tooling-preview\" }\r\nandroidx-ui-test-manifest = { group = \"androidx.compose.ui\", name = \"ui-test-manifest\" }\r\nandroidx-ui-test-junit4 = { group = \"androidx.compose.ui\", name = \"ui-test-junit4\" }\r\nandroidx-material3 = { group = \"androidx.compose.material3\", name = \"material3\" }\r\n#Practica\r\nconstraintlayout-compose = { module = \"androidx.constraintlayout:constraintlayout-compose\", version.ref = \"constraintlayoutCompose\" }\r\nnavigation-compose = { module = \"androidx.navigation:navigation-compose\", version.ref = \"navigationCompose\" }\r\nandroidx-compose-foundation = { group = \"androidx.compose.foundation\", name = \"foundation\", version.ref = \"foundation\" }\r\nandroidx-appcompat = { module = \"androidx.appcompat:appcompat\", version.ref = \"appcompat\" }\r\ngoogle-material = { module = \"com.google.android.material:material\", version.ref = \"material\" }\r\nfirebase-bom = { module = \"com.google.firebase:firebase-bom\", version.ref = \"firebase-bom\" }\r\nfirebase-firestore = { module = \"com.google.firebase:firebase-firestore-ktx\" }\r\n#Panoramicas\r\npanoramaGL = { module = \"com.github.hannesa2:panoramaGL\", version.ref = \"panoramaGL\" }\r\ngoogle-firebase-firestore = { group = \"com.google.firebase\", name = \"firebase-firestore\", version.ref = \"firebaseFirestore\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\nkotlin-android = { id = \"org.jetbrains.kotlin.android\", version.ref = \"kotlin\" }\r\nkotlin-compose = { id = \"org.jetbrains.kotlin.plugin.compose\", version.ref = \"kotlin\" }\r\nfirebase-gservices = { id = \"com.google.gms.google-services\", version.ref = \"firebase-gservices\" }\r\n\r\n\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
----- a/gradle/libs.versions.toml	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/gradle/libs.versions.toml	(date 1763140616731)
--@@ -19,6 +19,7 @@
-- #panoramicas
-- panoramaGL = "1.11.0"
-- firebaseFirestore = "26.0.2"
--+media3 = "1.3.1"
-- 
-- [libraries]
-- androidx-core-ktx = { group = "androidx.core", name = "core-ktx", version.ref = "coreKtx" }
--@@ -46,6 +47,7 @@
-- #Panoramicas
-- panoramaGL = { module = "com.github.hannesa2:panoramaGL", version.ref = "panoramaGL" }
-- google-firebase-firestore = { group = "com.google.firebase", name = "firebase-firestore", version.ref = "firebaseFirestore" }
--+androidx-media3-exoplayer = { module = "androidx.media3:media3-exoplayer", version.ref = "media3" }
-- 
-- [plugins]
-- android-application = { id = "com.android.application", version.ref = "agp" }
--Index: app/src/main/res/values-en/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"title_entrada\">Monastery Entrance</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n    <string name=\"child_mode\">KIDS MODE</string>\r\n    <string name=\"child_mode_view\">Kids Mode</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Game</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">GAME</string>\r\n\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
----- a/app/src/main/res/values-en/strings.xml	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/res/values-en/strings.xml	(date 1763142930046)
--@@ -92,5 +92,6 @@
--     <string name="game_view">Game</string>
--     <string name="video_child">VIDEO</string>
--     <string name="game_child">GAME</string>
--+    <string name="play_audio" />
-- 
-- </resources>
--\ No newline at end of file
--Index: app/src/main/java/com/nextapp/monasterio/models/PinData.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.models\r\n\r\nimport androidx.compose.ui.graphics.Color\r\n\r\ndata class PinData(\r\n    val id: String,\r\n    val titulo: String,\r\n    val tituloIngles: String,\r\n    val tituloAleman: String,\r\n    val ubicacion: Ubicacion? = null,\r\n    val ubicacionIngles: Ubicacion? = null,\r\n    val ubicacionAleman: Ubicacion? = null,\r\n    val x: Float,\r\n    val y: Float,\r\n    val tema: Tema,\r\n    val color: Color? = null,\r\n    val iconRes: Int? = null,\r\n    val imagenes: List<String> = emptyList(),\r\n    val imagenesDetalladas: List<ImagenData> = emptyList(),\r\n    val descripcion: String? = null,\r\n    val descripcionIngles: String? = null,\r\n    val descripcionAleman: String? = null,\r\n\r\n    // \uD83D\uDD39 Nuevo: destino din谩mico le铆do de Firebase\r\n    val tipoDestino: String? = null,\r\n    val valorDestino: String? = null,\r\n    val destino: DestinoPin = DestinoPin.Detalle(\"pin_detalle\"),\r\n\r\n    val tapRadius: Float = 0.04f,\r\n    val vista360Url: String? = null\r\n)\r\n\r\nsealed class DestinoPin {\r\n    data class Detalle(val idDetalle: String) : DestinoPin()\r\n    data class Ruta(val nombreRuta: String) : DestinoPin()\r\n    data class Popup(val mensaje: String) : DestinoPin()\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/models/PinData.kt b/app/src/main/java/com/nextapp/monasterio/models/PinData.kt
----- a/app/src/main/java/com/nextapp/monasterio/models/PinData.kt	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/java/com/nextapp/monasterio/models/PinData.kt	(date 1763157570731)
--@@ -27,7 +27,11 @@
--     val destino: DestinoPin = DestinoPin.Detalle("pin_detalle"),
-- 
--     val tapRadius: Float = 0.04f,
---    val vista360Url: String? = null
--+    val vista360Url: String? = null,
--+
--+    val audioUrl_es: String? = null,
--+    val audioUrl_en: String? = null,
--+    val audioUrl_ge: String? = null
-- )
-- 
-- sealed class DestinoPin {
--Index: app/src/main/java/com/nextapp/monasterio/repository/PinRepository.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.repository\r\n\r\nimport android.util.Log\r\nimport com.google.firebase.firestore.DocumentReference\r\nimport com.google.firebase.firestore.FirebaseFirestore\r\nimport com.google.firebase.firestore.SetOptions\r\nimport com.nextapp.monasterio.models.*\r\nimport kotlinx.coroutines.tasks.await\r\n\r\nobject PinRepository {\r\n    private val firestore = FirebaseFirestore.getInstance()\r\n    private val collection = firestore.collection(\"pines\")\r\n\r\n    // -----------------------\r\n    // CREATE\r\n    // -----------------------\r\n    suspend fun createPinAutoId(pinPayload: Map<String, Any?>): String {\r\n        val docRef = collection.add(pinPayload).await()\r\n        val generatedId = docRef.id\r\n        docRef.set(mapOf(\"id\" to generatedId), SetOptions.merge()).await()\r\n        return generatedId\r\n    }\r\n\r\n    suspend fun createPin(pin: PinData): String {\r\n        val payload = mapOf(\r\n            \"titulo\" to pin.titulo,\r\n            \"ubicacion\" to pin.ubicacion?.name,\r\n            \"x\" to pin.x.toDouble(),\r\n            \"y\" to pin.y.toDouble(),\r\n            \"tema\" to pin.tema.name,\r\n            \"imagenes\" to pin.imagenes,\r\n            \"descripcion\" to pin.descripcion,\r\n            \"tapRadius\" to pin.tapRadius.toDouble(),\r\n            \"vista360Url\" to pin.vista360Url\r\n        )\r\n        return createPinAutoId(payload)\r\n    }\r\n\r\n    // -----------------------\r\n    // READ: todos los pines\r\n    // -----------------------\r\n    suspend fun getAllPins(): List<PinData> {\r\n        val snapshot = collection.get().await()\r\n        Log.d(\"PinRepository\", \"\uD83D\uDCE6 getAllPins()  ${snapshot.size()} documentos\")\r\n        return snapshot.documents.mapNotNull { doc ->\r\n            mapDocToPinData(doc.id, doc.data)\r\n        }\r\n    }\r\n\r\n    // -----------------------\r\n    // READ: pin individual\r\n    // -----------------------\r\n    suspend fun getPinById(id: String): PinData? {\r\n        Log.d(\"PinRepository\", \"\uD83D\uDD0D getPinById($id)\")\r\n        val doc = collection.document(id).get().await()\r\n\r\n        if (!doc.exists()) {\r\n            Log.e(\"PinRepository\", \" Documento de pin no encontrado: $id\")\r\n            return null\r\n        }\r\n\r\n        val data = doc.data\r\n        Log.d(\"PinRepository\", \"\uD83D\uDCC4 Datos del pin recuperados: ${data?.keys}\")\r\n\r\n        val basePin = mapDocToPinData(doc.id, data)\r\n        if (basePin == null) {\r\n            Log.e(\"PinRepository\", \" Fallo al mapear el pin $id\")\r\n            return null\r\n        }\r\n\r\n        if (basePin.imagenes.isEmpty()) {\r\n            Log.w(\"PinRepository\", \"\uFE0F El pin $id no tiene referencias de im谩genes\")\r\n        } else {\r\n            Log.d(\"PinRepository\", \"\uD83D\uDD17 Referencias detectadas: ${basePin.imagenes}\")\r\n        }\r\n\r\n        val imagenesDetalladas = mutableListOf<ImagenData>()\r\n\r\n        for (ref in basePin.imagenes) {\r\n            try {\r\n                val imageId = ref.substringAfterLast(\"/\")\r\n                val imageDoc = firestore.collection(\"imagenes\").document(imageId).get().await()\r\n                if (imageDoc.exists()) {\r\n                    val url = imageDoc.getString(\"url\") ?: \"\"\r\n                    val etiqueta = imageDoc.getString(\"etiqueta\") ?: \"\"\r\n                    val titulo = imageDoc.getString(\"titulo\") ?: \"\"\r\n                    val tituloIngles = imageDoc.getString(\"tituloIngles\") ?: \"\"\r\n                    val tituloAleman = imageDoc.getString(\"tituloAleman\") ?: \"\"\r\n\r\n                    Log.d(\r\n                        \"PinRepository\",\r\n                        \" Imagen encontrada '$imageId'  etiqueta='$etiqueta', titulo='$titulo', url='$url'\"\r\n                    )\r\n\r\n                    if (url.isNotBlank()) {\r\n                        imagenesDetalladas.add(\r\n                            ImagenData(\r\n                                id = imageId,\r\n                                url = url,\r\n                                etiqueta = etiqueta,\r\n                                titulo = titulo,\r\n                                tituloIngles = tituloIngles,\r\n                                tituloAleman = tituloAleman\r\n                            )\r\n                        )\r\n                    }\r\n                } else {\r\n                    Log.w(\"PinRepository\", \"\uFE0F Documento no encontrado en /imagenes/: $imageId\")\r\n                }\r\n            } catch (e: Exception) {\r\n                Log.e(\"PinRepository\", \" Error al obtener imagen referenciada para $ref\", e)\r\n            }\r\n        }\r\n\r\n\r\n        Log.d(\"PinRepository\", \"\uD83D\uDCCA Resultado final para pin $id  ${imagenesDetalladas.size} im谩genes cargadas\")\r\n\r\n        return basePin.copy(imagenesDetalladas = imagenesDetalladas)\r\n    }\r\n\r\n    // -----------------------\r\n    // Helper: mapear doc -> PinData\r\n    // -----------------------\r\n    private fun mapDocToPinData(docId: String, data: Map<String, Any>?): PinData? {\r\n        if (data == null) return null\r\n\r\n        return try {\r\n            val titulo = data[\"titulo\"] as? String ?: \"\"\r\n            val tituloIngles = data[\"tituloIngles\"] as? String ?: \"\"\r\n            val tituloAleman = data[\"tituloAleman\"] as? String ?: \"\"\r\n\r\n            val ubicacion = (data[\"ubicacion\"] as? String)?.let { safeUbicacionOf(it) }\r\n            val ubicacionIngles = (data[\"ubicacionIngles\"] as? String)?.let { safeUbicacionOf(it) }\r\n            val ubicacionAleman = (data[\"ubicacionAleman\"] as? String)?.let { safeUbicacionOf(it) }\r\n\r\n            val x = (data[\"x\"] as? Number)?.toFloat() ?: 0f\r\n            val y = (data[\"y\"] as? Number)?.toFloat() ?: 0f\r\n            val temaStr = data[\"tema\"] as? String\r\n            val tema = temaStr?.let { safeTemaOf(it) } ?: Tema.PINTURA_Y_ARTE_VISUAL\r\n\r\n            // \uD83E\uDDE9 Referencias de im谩genes\r\n            val imagenes: List<String> = when (val raw = data[\"imagenes\"]) {\r\n                is List<*> -> raw.mapNotNull {\r\n                    when (it) {\r\n                        is String -> it\r\n                        is DocumentReference -> it.path\r\n                        else -> null\r\n                    }\r\n                }\r\n                else -> emptyList()\r\n            }\r\n\r\n            val descripcion = data[\"descripcion\"] as? String\r\n            val descripcionIngles = data[\"descripcionIngles\"] as? String\r\n            val descripcionAleman = data[\"descripcionAleman\"] as? String\r\n            val tapRadius = (data[\"tapRadius\"] as? Number)?.toFloat() ?: 0.04f\r\n            val vista360Url = data[\"vista360Url\"] as? String\r\n\r\n            // \uD83D\uDD39 NUEVO: leer los campos de destino\r\n            val tipoDestino = data[\"tipoDestino\"] as? String\r\n            val valorDestino = data[\"valorDestino\"] as? String\r\n\r\n            // \uD83D\uDD39 Crear el destino din谩micamente\r\n            val destino = when (tipoDestino?.lowercase()) {\r\n                \"ruta\" -> DestinoPin.Ruta(valorDestino ?: \"\")\r\n                \"detalle\" -> DestinoPin.Detalle(valorDestino ?: docId)\r\n                \"popup\" -> DestinoPin.Popup(valorDestino ?: \"Sin mensaje\")\r\n                else -> DestinoPin.Detalle(docId)\r\n            }\r\n\r\n            Log.d(\"PinRepository\", \"\uD83D\uDCCD Mapeando pin '$titulo' ($docId)  tipoDestino=$tipoDestino, valor=$valorDestino\")\r\n\r\n            PinData(\r\n                id = docId,\r\n                titulo = titulo,\r\n                tituloIngles = tituloIngles,\r\n                tituloAleman = tituloAleman,\r\n                ubicacion = ubicacion,\r\n                ubicacionIngles = ubicacionIngles,\r\n                ubicacionAleman = ubicacionAleman,\r\n                x = x,\r\n                y = y,\r\n                tema = tema,\r\n                color = null,\r\n                iconRes = null,\r\n                imagenes = imagenes,\r\n                imagenesDetalladas = emptyList(),\r\n                descripcion = descripcion,\r\n                descripcionIngles = descripcionIngles,\r\n                descripcionAleman = descripcionAleman,\r\n                tipoDestino = tipoDestino,\r\n                valorDestino = valorDestino,\r\n                destino = destino,\r\n                tapRadius = tapRadius,\r\n                vista360Url = vista360Url\r\n            )\r\n        } catch (e: Exception) {\r\n            Log.e(\"PinRepository\", \" Error mapeando pin $docId\", e)\r\n            null\r\n        }\r\n    }\r\n\r\n\r\n    private fun safeTemaOf(name: String): Tema {\r\n        return try {\r\n            Tema.valueOf(name)\r\n        } catch (_: Exception) {\r\n            Tema.PINTURA_Y_ARTE_VISUAL\r\n        }\r\n    }\r\n\r\n    private fun safeUbicacionOf(name: String): Ubicacion? {\r\n        return try {\r\n            Ubicacion.valueOf(name)\r\n        } catch (_: Exception) {\r\n            null\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/repository/PinRepository.kt b/app/src/main/java/com/nextapp/monasterio/repository/PinRepository.kt
----- a/app/src/main/java/com/nextapp/monasterio/repository/PinRepository.kt	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/java/com/nextapp/monasterio/repository/PinRepository.kt	(date 1763157570755)
--@@ -31,7 +31,10 @@
--             "imagenes" to pin.imagenes,
--             "descripcion" to pin.descripcion,
--             "tapRadius" to pin.tapRadius.toDouble(),
---            "vista360Url" to pin.vista360Url
--+            "vista360Url" to pin.vista360Url,
--+            "audioUrl_es" to pin.audioUrl_es,
--+            "audioUrl_en" to pin.audioUrl_en,
--+            "audioUrl_ge" to pin.audioUrl_ge
--         )
--         return createPinAutoId(payload)
--     }
--@@ -156,6 +159,10 @@
--             val tapRadius = (data["tapRadius"] as? Number)?.toFloat() ?: 0.04f
--             val vista360Url = data["vista360Url"] as? String
-- 
--+            val audioUrl_es = data["audioUrl_es"] as? String
--+            val audioUrl_en = data["audioUrl_en"] as? String
--+            val audioUrl_ge = data["audioUrl_ge"] as? String
--+
--             //  NUEVO: leer los campos de destino
--             val tipoDestino = data["tipoDestino"] as? String
--             val valorDestino = data["valorDestino"] as? String
--@@ -192,7 +199,10 @@
--                 valorDestino = valorDestino,
--                 destino = destino,
--                 tapRadius = tapRadius,
---                vista360Url = vista360Url
--+                vista360Url = vista360Url,
--+                audioUrl_es = audioUrl_es,
--+                audioUrl_en = audioUrl_en,
--+                audioUrl_ge = audioUrl_ge
--             )
--         } catch (e: Exception) {
--             Log.e("PinRepository", " Error mapeando pin $docId", e)
--Index: app/src/main/res/drawable/pause.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/drawable/pause.xml b/app/src/main/res/drawable/pause.xml
--new file mode 100644
----- /dev/null	(date 1763141624380)
--+++ b/app/src/main/res/drawable/pause.xml	(date 1763141624380)
--@@ -0,0 +1,10 @@
--+<vector xmlns:android="http://schemas.android.com/apk/res/android"
--+    android:width="24dp"
--+    android:height="24dp"
--+    android:viewportWidth="960"
--+    android:viewportHeight="960"
--+    android:tint="?attr/colorControlNormal">
--+  <path
--+      android:fillColor="@android:color/white"
--+      android:pathData="M520,760L520,200L760,200L760,760L520,760ZM200,760L200,200L440,200L440,760L200,760ZM600,680L680,680L680,280L600,280L600,680ZM280,680L360,680L360,280L280,280L280,680ZM280,280L280,280L280,680L280,680L280,280ZM600,280L600,280L600,680L600,680L600,280Z"/>
--+</vector>
--Index: app/build.gradle.kts
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    implementation(libs.google.firebase.firestore)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"io.github.chrisbanes:PhotoView:2.3.0\")\r\n    implementation(\"com.github.bumptech.glide:glide:4.16.0\")\r\n\r\n    // Panoramica\r\n    implementation(\"com.github.hannesa2:panoramagl:1.14\")\r\n    // Cloudinary\r\n    implementation(\"io.coil-kt:coil-compose:2.7.0\")\r\n\r\n\r\n\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/build.gradle.kts b/app/build.gradle.kts
----- a/app/build.gradle.kts	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/build.gradle.kts	(date 1763140934065)
--@@ -83,6 +83,9 @@
--     // Cloudinary
--     implementation("io.coil-kt:coil-compose:2.7.0")
-- 
--+    //media
--+    implementation(libs.androidx.media3.exoplayer)
--+
-- 
-- 
-- }
--Index: app/src/main/res/values/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIOS</string>\r\n    <string name=\"child_mode_view\">Modo Ni帽os</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
----- a/app/src/main/res/values/strings.xml	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/res/values/strings.xml	(date 1763142930062)
--@@ -88,4 +88,5 @@
--     <string name="game_view">Juego</string>
--     <string name="video_child">VIDEO</string>
--     <string name="game_child">JUEGO</string>
--+    <string name="play_audio" />
-- </resources>
--\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59__Changes_.xml	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]" date="1763938864071" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_23_59_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 23/11/2025 23:59 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56__Changes_.xml	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,40 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]" date="1763758681614" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 21/11/2025 21:56 [Changes]" />
-  <binary>
-    <option name="AFTER_PATH" value="app/src/main/res/drawable/p2_3.png" />
-    <option name="SHELVED_PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/p2_3.png" />
-  </binary>
-  <binary>
-    <option name="AFTER_PATH" value="app/src/main/res/drawable/p2_6.png" />
-    <option name="SHELVED_PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/p2_6.png" />
-  </binary>
-  <binary>
-    <option name="AFTER_PATH" value="app/src/main/res/drawable/p2_9.png" />
-    <option name="SHELVED_PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/p2_9.png" />
-  </binary>
-  <binary>
-    <option name="AFTER_PATH" value="app/src/main/res/drawable/p2_7.png" />
-    <option name="SHELVED_PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/p2_7.png" />
-  </binary>
-  <binary>
-    <option name="AFTER_PATH" value="app/src/main/res/drawable/p2_2.png" />
-    <option name="SHELVED_PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/p2_2.png" />
-  </binary>
-  <binary>
-    <option name="AFTER_PATH" value="app/src/main/res/drawable/p2_4.png" />
-    <option name="SHELVED_PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/p2_4.png" />
-  </binary>
-  <binary>
-    <option name="AFTER_PATH" value="app/src/main/res/drawable/p2_8.png" />
-    <option name="SHELVED_PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/p2_8.png" />
-  </binary>
-  <binary>
-    <option name="AFTER_PATH" value="app/src/main/res/drawable/p2_5.png" />
-    <option name="SHELVED_PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/p2_5.png" />
-  </binary>
-  <binary>
-    <option name="AFTER_PATH" value="app/src/main/res/drawable/p2_1.png" />
-    <option name="SHELVED_PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/p2_1.png" />
-  </binary>
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_17_25__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_17_25__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_17_25__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_17_25__Changes_.xml	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_23_11_2025_17_25_[Changes]" date="1763915214771" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_17_25_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 23/11/2025 17:25 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_11_59__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_11_59__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_11_59__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_11_59__Changes_.xml	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_22_11_2025_11_59_[Changes]" date="1763809272628" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_11_59_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 22/11/2025 11:59 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_11_56_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_11_56_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_11_56_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_11_56_[Changes]/shelved.patch	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,3702 +0,0 @@
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/VirtualVisitScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.*\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\n\r\nobject VirtualVisitRoutes {\r\n    const val PLANO = \"plano\"\r\n    const val DETALLE_GENERICO = \"detalle_generico\"\r\n}\r\n\r\n@Composable\r\nfun VirtualVisitScreen(navController: NavHostController? = null,viewModel: AjustesViewModel) {\r\n    val localNavController = rememberNavController()\r\n\r\n    val context = LocalContext.current\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        onDispose {}\r\n    }\r\n\r\n    // \uD83D\uDD39 ID inicial del plano por defecto (exterior)\r\n    val initialPlanoId = \"monasterio_exterior\"\r\n\r\n    NavHost(\r\n        navController = localNavController,\r\n        // \uD83D\uDC47 Empieza directamente en el plano exterior\r\n        startDestination = \"${VirtualVisitRoutes.PLANO}/$initialPlanoId\"\r\n    ) {\r\n        // --- \uD83D\uDD39 Ruta base sin argumento (por si alguien navega a \"plano\" directamente)\r\n        composable(VirtualVisitRoutes.PLANO) {\r\n            PlanoScreen(\r\n                viewModel=viewModel,\r\n                planoId = initialPlanoId,\r\n                navController = localNavController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- \uD83D\uDD39 Ruta con par谩metro (para navegaci贸n entre planos)\r\n        composable(\r\n            route = \"${VirtualVisitRoutes.PLANO}/{planoId}\",\r\n            arguments = listOf(navArgument(\"planoId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val planoId = backStackEntry.arguments?.getString(\"planoId\") ?: initialPlanoId\r\n            PlanoScreen(\r\n                viewModel=viewModel,\r\n                planoId = planoId,\r\n                navController = localNavController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- \uD83D\uDD39 Pantalla de detalle de Pin (igual que antes)\r\n        composable(\r\n            route = AppRoutes.PIN_DETALLE + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            PinDetalleFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = localNavController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n\r\n        // --- \uD83D\uDD39 Pantalla gen茅rica de detalle de Figura\r\n        composable(\r\n            route = \"${VirtualVisitRoutes.DETALLE_GENERICO}/{nombre}\",\r\n            arguments = listOf(navArgument(\"nombre\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            DetalleFiguraScreen(\r\n                navController = localNavController,\r\n                nombre = nombre\r\n            )\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/VirtualVisitScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/VirtualVisitScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/VirtualVisitScreen.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/VirtualVisitScreen.kt	(date 1763638720570)
-@@ -21,7 +21,7 @@
- }
- 
- @Composable
--fun VirtualVisitScreen(navController: NavHostController? = null,viewModel: AjustesViewModel) {
-+fun VirtualVisitScreen(navController: NavHostController? = null, viewModel: AjustesViewModel) {
-     val localNavController = rememberNavController()
- 
-     val context = LocalContext.current
-@@ -43,7 +43,7 @@
-         // ---  Ruta base sin argumento (por si alguien navega a "plano" directamente)
-         composable(VirtualVisitRoutes.PLANO) {
-             PlanoScreen(
--                viewModel=viewModel,
-+                viewModel = viewModel,
-                 planoId = initialPlanoId,
-                 navController = localNavController,
-                 rootNavController = navController
-@@ -57,20 +57,23 @@
-         ) { backStackEntry ->
-             val planoId = backStackEntry.arguments?.getString("planoId") ?: initialPlanoId
-             PlanoScreen(
--                viewModel=viewModel,
-+                viewModel = viewModel,
-                 planoId = planoId,
-                 navController = localNavController,
-                 rootNavController = navController
-             )
-         }
- 
--        // ---  Pantalla de detalle de Pin (igual que antes)
-+        // ---  Pantalla de detalle de Pin
-         composable(
-             route = AppRoutes.PIN_DETALLE + "/{pinId}",
-             arguments = listOf(navArgument("pinId") { type = NavType.StringType })
-         ) { backStackEntry ->
-             val pinId = backStackEntry.arguments?.getString("pinId") ?: ""
-+
-+            //  AQU ESTABA EL ERROR: AADIMOS 'viewModel = viewModel'
-             PinDetalleFirestoreScreen(
-+                viewModel = viewModel, // <--- 隆CORREGIDO!
-                 pinId = pinId,
-                 navController = localNavController,
-                 rootNavController = navController
-@@ -90,4 +93,4 @@
-             )
-         }
-     }
--}
-+}
-\ No newline at end of file
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIOS</string>\r\n    <string name=\"child_mode_view\">Modo Ni帽os</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n    <string name=\"location_error\">No se encontr贸 una app para abrir la ubicaci贸n.</string>\r\n    <string name=\"contact_data\">Datos de contacto</string>\r\n    <string name=\"location_data\">Ubicaci贸n</string>\r\n    <string name=\"email_data\">Correo electr贸nico</string>\r\n    <string name=\"phone_data\">Tel茅fono</string>\r\n    <string name=\"visit_schedule\">Horarios de Visita</string>\r\n    <string name=\"monday_to_friday\">Lunes a Viernes:</string>\r\n    <string name=\"play_audio\" />\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ b/app/src/main/res/values/strings.xml	(date 1763721534857)
-@@ -96,4 +96,22 @@
-     <string name="visit_schedule">Horarios de Visita</string>
-     <string name="monday_to_friday">Lunes a Viernes:</string>
-     <string name="play_audio" />
-+    <string name="dont_show_again">No volver a mostrar</string>
-+    <string name="understand">Entendido</string>
-+    <string name="map_tutorial_body">Este es el cuerpo del tutorial</string>
-+    <string name="map_tutorial_title">Este es el titulo del tutorial</string>
-+    <string name="map_tutorial_body2">Este es el cuerpo del tutorial del mapa 2</string>
-+    <string name="map_tutorial_title2">Este es el titulo del tutorial del mapa 2</string>
-+    <string name="pin_tutorial_body">Este es el cuerpo del tutorial del pin</string>
-+    <string name="pin_tutorial_title">Este es el titulo del tutorial del pin</string>
-+    <string name="next">Siguiente</string>
-+    <string name="map_tutorial_body1">En la parte superior izquierda, el s铆mbolo () permite volver al inicio</string>
-+    <string name="map_tutorial_body1_2">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>
-+    <string name="map_tutorial_body1_3">Adem谩s de tocando en el mapa se puede interactuar con este a partir de los botones en la parte derecha que permiten ampliar, desampliar y centrar el mapa</string>
-+    <string name="submapa_1">Tocando en el s铆mbolo () podemos volver al mapa general</string>
-+    <string name="submapa_2">Tocando en los distintos pines podemos entrar a los puntos de inter茅s</string>
-+    <string name="pin_1">Pulsando en el s铆mbolo (), se puede volver al mapa</string>
-+    <string name="pin_2">Puedes desplazarte por las im谩genes o pulsar en ellas para ampliarlas</string>
-+    <string name="pin_3">Pulsando aqu铆 puedes escuchar el audio del texto</string>
-+    <string name="pin_4">Para acceder a la vista 360 pulse este bot贸n</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleFirestoreScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.NavHostController // <-- 隆IMPORT AADIDO!\r\nimport com.nextapp.monasterio.repository.PinRepository\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.AppRoutes // <-- 隆IMPORT AADIDO!\r\nimport android.util.Log\r\n\r\n@Composable\r\nfun PinDetalleFirestoreScreen(\r\n    pinId: String,\r\n    navController: NavController, // Este es el local (para 'onBack')\r\n    rootNavController: NavHostController? = null // <-- 1. ACEPTA EL NAVEGADOR RAZ\r\n) {\r\n    var pin by remember { mutableStateOf<PinData?>(null) }\r\n    var isLoading by remember { mutableStateOf(true) }\r\n    var errorMessage by remember { mutableStateOf<String?>(null) }\r\n\r\n    LaunchedEffect(pinId) {\r\n        try {\r\n            val loadedPin = PinRepository.getPinById(pinId)\r\n            if (loadedPin != null) pin = loadedPin\r\n            else errorMessage = \"Pin no encontrado (ID: $pinId)\"\r\n        } catch (e: Exception) {\r\n            errorMessage = \"Error al cargar datos: ${e.message}\"\r\n        } finally {\r\n            isLoading = false\r\n        }\r\n    }\r\n\r\n    when {\r\n        isLoading -> Box(Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {\r\n            CircularProgressIndicator()\r\n        }\r\n\r\n        errorMessage != null -> Box(Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {\r\n            Text(errorMessage ?: \"Error desconocido\", color = MaterialTheme.colorScheme.error)\r\n        }\r\n\r\n        pin != null -> {\r\n            val currentPin = pin\r\n\r\n            // 2. Usamos 'currentPin' para todas las operaciones\r\n            Log.d(\r\n                \"Pin360Debug\",\r\n                \"Pin cargado: '${currentPin?.titulo}'. URL 360: [${currentPin?.vista360Url}]\"\r\n            )\r\n            val onVer360: (() -> Unit)? =\r\n                // Usamos 'vista360Url' (el campo que a帽adimos a PinData.kt)\r\n                if (!pin!!.vista360Url.isNullOrBlank()) {\r\n                    // 3. Si la tiene, creamos la lambda de navegaci贸n\r\n                    {\r\n                        // Llama al navegador RAZ (rootNavController)\r\n                        // y navega a la NUEVA ruta 'PIN_360'\r\n                        rootNavController?.navigate(AppRoutes.PIN_360 + \"/${pin!!.id}\")\r\n                    }\r\n                } else {\r\n                    // 4. Si no la tiene, pasa null\r\n                    null\r\n                }\r\n\r\n            PinDetalleScreen(\r\n                pin = pin!!,\r\n                onBack = { navController.popBackStack() },\r\n                onVer360 = onVer360 // <-- 5. PASAMOS LA LAMBDA (O NULL)\r\n            )\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleFirestoreScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleFirestoreScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleFirestoreScreen.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleFirestoreScreen.kt	(date 1763638633519)
-@@ -6,17 +6,20 @@
- import androidx.compose.ui.Alignment
- import androidx.compose.ui.Modifier
- import androidx.navigation.NavController
--import androidx.navigation.NavHostController // <-- 隆IMPORT AADIDO!
-+import androidx.navigation.NavHostController
- import com.nextapp.monasterio.repository.PinRepository
- import com.nextapp.monasterio.models.PinData
--import com.nextapp.monasterio.AppRoutes // <-- 隆IMPORT AADIDO!
-+import com.nextapp.monasterio.AppRoutes
- import android.util.Log
-+// 1. IMPORTAMOS EL VIEWMODEL
-+import com.nextapp.monasterio.viewModels.AjustesViewModel
- 
- @Composable
- fun PinDetalleFirestoreScreen(
-+    viewModel: AjustesViewModel, // <--- 2. AADIMOS ESTE PARMETRO
-     pinId: String,
--    navController: NavController, // Este es el local (para 'onBack')
--    rootNavController: NavHostController? = null // <-- 1. ACEPTA EL NAVEGADOR RAZ
-+    navController: NavController,
-+    rootNavController: NavHostController? = null
- ) {
-     var pin by remember { mutableStateOf<PinData?>(null) }
-     var isLoading by remember { mutableStateOf(true) }
-@@ -46,29 +49,25 @@
-         pin != null -> {
-             val currentPin = pin
- 
--            // 2. Usamos 'currentPin' para todas las operaciones
-             Log.d(
-                 "Pin360Debug",
-                 "Pin cargado: '${currentPin?.titulo}'. URL 360: [${currentPin?.vista360Url}]"
-             )
-             val onVer360: (() -> Unit)? =
--                // Usamos 'vista360Url' (el campo que a帽adimos a PinData.kt)
-                 if (!pin!!.vista360Url.isNullOrBlank()) {
--                    // 3. Si la tiene, creamos la lambda de navegaci贸n
-                     {
--                        // Llama al navegador RAZ (rootNavController)
--                        // y navega a la NUEVA ruta 'PIN_360'
-                         rootNavController?.navigate(AppRoutes.PIN_360 + "/${pin!!.id}")
-                     }
-                 } else {
--                    // 4. Si no la tiene, pasa null
-                     null
-                 }
- 
-+            // AQUI ESTABA EL ERROR:
-             PinDetalleScreen(
-+                viewModel = viewModel,
-                 pin = pin!!,
-                 onBack = { navController.popBackStack() },
--                onVer360 = onVer360 // <-- 5. PASAMOS LA LAMBDA (O NULL)
-+                onVer360 = onVer360
-             )
-         }
-     }
-Index: app/build.gradle.kts
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    implementation(libs.google.firebase.firestore)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"io.github.chrisbanes:PhotoView:2.3.0\")\r\n    implementation(\"com.github.bumptech.glide:glide:4.16.0\")\r\n\r\n    // Panoramica\r\n    implementation(\"com.github.hannesa2:panoramagl:1.14\")\r\n    // Cloudinary\r\n    implementation(\"io.coil-kt:coil-compose:2.7.0\")\r\n\r\n    //media\r\n    implementation(libs.androidx.media3.exoplayer)\r\n\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/build.gradle.kts b/app/build.gradle.kts
---- a/app/build.gradle.kts	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ b/app/build.gradle.kts	(date 1763458281732)
-@@ -86,6 +86,9 @@
-     //media
-     implementation(libs.androidx.media3.exoplayer)
- 
-+    //Datastore
-+    implementation("androidx.datastore:datastore-preferences:1.0.0")
-+
- 
- 
- }
-Index: app/src/main/java/com/nextapp/monasterio/viewModels/AjustesViewModel.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.viewModels\r\n\r\nimport androidx.lifecycle.ViewModel\r\nimport kotlinx.coroutines.flow.MutableStateFlow\r\nimport kotlinx.coroutines.flow.StateFlow\r\nimport kotlinx.coroutines.flow.asStateFlow\r\n\r\nclass AjustesViewModel : ViewModel(){\r\n    private val _botonesVisibles = MutableStateFlow(true)\r\n\r\n    val botonesVisibles: StateFlow<Boolean> = _botonesVisibles\r\n\r\n    fun setBotonesVisibles(valor: Boolean){\r\n        _botonesVisibles.value = valor\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/viewModels/AjustesViewModel.kt b/app/src/main/java/com/nextapp/monasterio/viewModels/AjustesViewModel.kt
---- a/app/src/main/java/com/nextapp/monasterio/viewModels/AjustesViewModel.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ b/app/src/main/java/com/nextapp/monasterio/viewModels/AjustesViewModel.kt	(date 1763462027810)
-@@ -1,16 +1,38 @@
- package com.nextapp.monasterio.viewModels
- 
- import androidx.lifecycle.ViewModel
-+import androidx.lifecycle.viewModelScope
-+import com.nextapp.monasterio.repository.UserPreferencesRepository // 1. Importar
- import kotlinx.coroutines.flow.MutableStateFlow
-+import kotlinx.coroutines.flow.SharingStarted
- import kotlinx.coroutines.flow.StateFlow
- import kotlinx.coroutines.flow.asStateFlow
-+import kotlinx.coroutines.flow.stateIn
-+import kotlinx.coroutines.launch
- 
--class AjustesViewModel : ViewModel(){
-+class AjustesViewModel : ViewModel() {
-+    // 2. Obtener la instancia del repositorio
-+    private val prefsRepository = UserPreferencesRepository.instance
-+
-+    // --- L贸gica existente de botones ---
-     private val _botonesVisibles = MutableStateFlow(true)
--
-     val botonesVisibles: StateFlow<Boolean> = _botonesVisibles
--
--    fun setBotonesVisibles(valor: Boolean){
-+    fun setBotonesVisibles(valor: Boolean) {
-         _botonesVisibles.value = valor
-     }
-+
-+    val isMainMapDismissed = prefsRepository.isMainMapTutorialDismissed
-+        .stateIn(viewModelScope, SharingStarted.Lazily, false)
-+
-+    val isSubMapDismissed = prefsRepository.isSubMapTutorialDismissed
-+        .stateIn(viewModelScope, SharingStarted.Lazily, false)
-+
-+    val isPinDismissed = prefsRepository.isPinTutorialDismissed
-+        .stateIn(viewModelScope, SharingStarted.Lazily, false)
-+
-+    // --- FUNCIONES PARA OCULTAR ---
-+
-+    fun dismissMainMap() = viewModelScope.launch { prefsRepository.dismissMainMapTutorial() }
-+    fun dismissSubMap() = viewModelScope.launch { prefsRepository.dismissSubMapTutorial() }
-+    fun dismissPin() = viewModelScope.launch { prefsRepository.dismissPinTutorial() }
- }
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.*\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.pager.HorizontalPager\r\nimport androidx.compose.foundation.pager.rememberPagerState\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalContext // <-- 隆NUEVO IMPORT!\r\nimport androidx.compose.ui.platform.LocalView\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.compose.ui.window.Dialog\r\nimport androidx.compose.ui.window.DialogProperties\r\nimport androidx.core.view.WindowCompat\r\nimport coil.compose.AsyncImage\r\nimport coil.load\r\nimport com.github.chrisbanes.photoview.PhotoView\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.models.Ubicacion\r\nimport java.util.Locale\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.res.stringResource\r\n// Imports de Media3 (ExoPlayer)\r\nimport androidx.media3.common.MediaItem\r\nimport androidx.media3.common.Player\r\nimport androidx.media3.exoplayer.ExoPlayer\r\nimport android.util.Log\r\nimport androidx.compose.foundation.layout.Arrangement\r\n\r\n@OptIn(ExperimentalFoundationApi::class)\r\n@Composable\r\nfun PinDetalleScreen(\r\n    pin: PinData,\r\n    onBack: () -> Unit,\r\n    onVer360: (() -> Unit)? = null\r\n) {\r\n    val view = LocalView.current\r\n    LaunchedEffect(Unit) {\r\n        val window = (view.context as? Activity)?.window\r\n        window?.let { WindowCompat.setDecorFitsSystemWindows(it, false) }\r\n    }\r\n\r\n    val activity = view.context as? Activity\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n            activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        }\r\n    }\r\n\r\n    val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()\r\n\r\n    val pagerState = rememberPagerState(pageCount = { imagenes.size })\r\n    var selectedImageUrl by remember { mutableStateOf<String?>(null) }\r\n    var selectedImageTitle by remember { mutableStateOf<String?>(null) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val locale: Locale = configuration.locales[0]\r\n    val language = locale.language\r\n\r\n    // --- L贸gica de Texto Multiling眉e (Tu c贸digo) ---\r\n    val titulo_pin: String\r\n    val descripcion_pin: String?\r\n    val ubicacion_pin: Ubicacion?\r\n\r\n    when (language) {\r\n        \"es\" -> {\r\n            titulo_pin = pin.titulo\r\n            descripcion_pin = pin.descripcion\r\n            ubicacion_pin = pin.ubicacion\r\n        }\r\n        \"de\" -> {\r\n            titulo_pin = pin.tituloAleman\r\n            descripcion_pin = pin.descripcionAleman\r\n            ubicacion_pin = pin.ubicacionAleman\r\n        }\r\n        else -> {\r\n            titulo_pin = pin.tituloIngles\r\n            descripcion_pin = pin.descripcionIngles\r\n            ubicacion_pin = pin.ubicacionIngles\r\n        }\r\n    }\r\n\r\n    // --- 隆隆NUEVA LGICA DE AUDIO!! ---\r\n    val context = LocalContext.current\r\n\r\n    // 1. Selecciona la URL de audio correcta\r\n    val audioUrl = when (language) {\r\n        \"es\" -> pin.audioUrl_es\r\n        \"en\" -> pin.audioUrl_en\r\n        \"de\" -> pin.audioUrl_ge\r\n        else -> pin.audioUrl_es\r\n    }\r\n\r\n    Log.d(\r\n        \"AudioDebug\",\r\n        \"Pin: '${pin.titulo}', Idioma: $language, URL de Audio Seleccionada: [$audioUrl]\"\r\n    )\r\n\r\n    // 2. Configura el ExoPlayer\r\n    val exoPlayer = remember { ExoPlayer.Builder(context).build() }\r\n    var isPlaying by remember { mutableStateOf(false) }\r\n    var playbackState by remember { mutableStateOf(Player.STATE_IDLE) }\r\n    var hasUserInteracted by remember { mutableStateOf(false) }\r\n\r\n    // 3. Prepara el player si la URL cambia (y no es nula)\r\n    DisposableEffect(audioUrl) {\r\n        if (!audioUrl.isNullOrBlank()) {\r\n            val mediaItem = MediaItem.fromUri(audioUrl)\r\n            exoPlayer.setMediaItem(mediaItem)\r\n            exoPlayer.prepare()\r\n        }\r\n        // (No necesitamos onDispose aqu铆, se libera abajo)\r\n        onDispose { }\r\n    }\r\n\r\n    // 4. Listener para actualizar el bot贸n Play/Pause y rebobinar\r\n    LaunchedEffect(exoPlayer) {\r\n        exoPlayer.addListener(object : Player.Listener {\r\n            override fun onIsPlayingChanged(isPlayingValue: Boolean) {\r\n                isPlaying = isPlayingValue\r\n            }\r\n            override fun onPlaybackStateChanged(state: Int) {\r\n                playbackState = state\r\n\r\n                if (state == Player.STATE_ENDED) {\r\n                    isPlaying = false\r\n                    exoPlayer.seekTo(0)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    // 5. Libera el player al salir de la pantalla\r\n    DisposableEffect(Unit) {\r\n        onDispose {\r\n            exoPlayer.release()\r\n        }\r\n    }\r\n    // --- FIN LGICA DE AUDIO ---\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.White)\r\n            .statusBarsPadding()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(horizontal = 16.dp)\r\n                .padding(bottom = 40.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // \uD83D\uDD19 Bot贸n atr谩s\r\n            Box(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 16.dp),\r\n                contentAlignment = Alignment.CenterStart\r\n            ) {\r\n                Image(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.go_back),\r\n                    modifier = Modifier\r\n                        .size(28.dp)\r\n                        .clickable { onBack() }\r\n                )\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(8.dp))\r\n\r\n            Text(\r\n                text = buildString {\r\n                    append(titulo_pin)\r\n                    ubicacion_pin?.let { append(\" (${it.displayName})\") }\r\n                },\r\n                fontSize = 26.sp,\r\n                fontWeight = FontWeight.Bold,\r\n                color = Color.Black,\r\n                textAlign = TextAlign.Center,\r\n                modifier = Modifier.fillMaxWidth()\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            // \uD83D\uDDBC\uFE0F Carrusel con etiqueta (se queda igual)\r\n            if (imagenes.isNotEmpty()) {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(250.dp)\r\n                        .clip(RoundedCornerShape(16.dp))\r\n                        .border(3.dp, Color.Black, RoundedCornerShape(16.dp))\r\n                ) {\r\n                    HorizontalPager(state = pagerState) { page ->\r\n\r\n                        val imagen = imagenes[page]\r\n\r\n                        Box(modifier = Modifier.fillMaxSize()) {\r\n\r\n                            AsyncImage(\r\n\r\n                                model = imagen.url,\r\n\r\n                                contentDescription = imagen.etiqueta,\r\n\r\n                                contentScale = ContentScale.Crop,\r\n\r\n                                modifier = Modifier\r\n\r\n                                    .fillMaxSize()\r\n\r\n                                    .clickable {\r\n\r\n                                        selectedImageUrl = imagen.url\r\n\r\n// \uD83D\uDC47 t铆tulo seg煤n idioma actual\r\n\r\n                                        selectedImageTitle = when (language) {\r\n\r\n                                            \"es\" -> imagen.titulo\r\n\r\n                                            \"de\" -> imagen.tituloAleman\r\n\r\n                                            else -> imagen.tituloIngles\r\n\r\n                                        }\r\n\r\n                                    }\r\n\r\n                            )\r\n                            Text(\r\n\r\n                                text = imagen.etiqueta,\r\n\r\n                                color = Color.White,\r\n\r\n                                fontSize = 14.sp,\r\n\r\n                                modifier = Modifier\r\n\r\n                                    .align(Alignment.BottomStart)\r\n\r\n                                    .background(Color.Black.copy(alpha = 0.6f))\r\n\r\n                                    .padding(horizontal = 10.dp, vertical = 6.dp)\r\n\r\n                            )\r\n\r\n                        }\r\n\r\n                    }\r\n                    Row(\r\n                        Modifier\r\n                            .align(Alignment.BottomCenter)\r\n                            .padding(bottom = 6.dp)\r\n                    ) {\r\n                        repeat(imagenes.size) { index ->\r\n\r\n                            val selected = pagerState.currentPage == index\r\n\r\n                            Box(\r\n\r\n                                Modifier\r\n\r\n                                    .padding(3.dp)\r\n\r\n                                    .size(if (selected) 8.dp else 6.dp)\r\n\r\n                                    .background(\r\n\r\n                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),\r\n\r\n                                        shape = CircleShape\r\n\r\n                                    )\r\n\r\n                            )\r\n\r\n                        }\r\n                    }\r\n                }\r\n                Spacer(modifier = Modifier.height(12.dp))\r\n            }\r\n\r\n\r\n            Row(\r\n                modifier = Modifier.fillMaxWidth(),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            ) {\r\n                // Bot贸n de Audio (solo si hay URL)\r\n                if (!audioUrl.isNullOrBlank()) {\r\n                    // 1. Determina el icono correcto\r\n                    val iconRes = when {\r\n                        isPlaying -> R.drawable.pause\r\n                        !hasUserInteracted -> R.drawable.microphone\r\n                        else -> R.drawable.play_arrow\r\n                    }\r\n\r\n                    // 2. Bot贸n de audio con redondel, alineado a la derecha del t铆tulo\r\n                    Row(\r\n                        modifier = Modifier\r\n                            .fillMaxWidth()\r\n                            .padding(top = 8.dp), // Espacio entre el t铆tulo y el bot贸n\r\n                        horizontalArrangement = Arrangement.Start // Alinea a la derecha\r\n                    ) {\r\n                        IconButton(onClick = {\r\n                            hasUserInteracted = true\r\n                            if (isPlaying) exoPlayer.pause() else exoPlayer.play()\r\n                        }) {\r\n                            Box(\r\n                                modifier = Modifier\r\n                                    .size(48.dp) // Tama帽o del redondel\r\n                                    .clip(CircleShape) // Forma redonda\r\n                                    .background(Color.Gray.copy(alpha = 0.3f)), // Color de fondo del redondel (ej. gris suave)\r\n                                contentAlignment = Alignment.Center // Centra el icono dentro del redondel\r\n                            ) {\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(R.string.play_audio),\r\n                                    tint = Color.Black, // Color del icono\r\n                                    modifier = Modifier.size(28.dp) // Tama帽o del icono dentro del redondel\r\n                                )\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // \uD83D\uDCDD Descripci贸n (se queda igual)\r\n            val descripcion = descripcion_pin ?: \"\"\r\n            if (descripcion.isNotBlank()) {\r\n                val textScrollState = rememberScrollState()\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .weight(1f)\r\n                        .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))\r\n                        .clip(RoundedCornerShape(8.dp))\r\n                ) {\r\n                    Text(\r\n                        text = descripcion,\r\n                        fontSize = 16.sp,\r\n                        color = Color.DarkGray,\r\n                        lineHeight = 22.sp,\r\n                        modifier = Modifier\r\n                            .fillMaxSize()\r\n                            .padding(horizontal = 12.dp, vertical = 8.dp)\r\n                            .verticalScroll(textScrollState)\r\n                    )\r\n                }\r\n            }\r\n\r\n            Spacer(modifier=Modifier.height(24.dp))\r\n\r\n            // \uD83D\uDD18 Bot贸n 360 (se queda igual)\r\n            onVer360?.let {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .background(Color.White)\r\n                        .navigationBarsPadding()\r\n                        .padding(horizontal = 16.dp, vertical = 2.dp)\r\n                ) {\r\n                    Button(\r\n                        onClick = it,\r\n                        modifier = Modifier\r\n                            .fillMaxWidth()\r\n                            .height(56.dp),\r\n                        colors = ButtonDefaults.buttonColors(containerColor = Color.Black),\r\n                        shape = RoundedCornerShape(12.dp)\r\n                    ) {\r\n                        Text(\r\n                            text = stringResource(R.string.see_360),\r\n                            color = Color.White,\r\n                            fontSize = 18.sp,\r\n                            fontWeight = FontWeight.Bold,\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD0D Zoom con t铆tulo traducido (se queda igual)\r\n        if (selectedImageUrl != null) {\r\n            ZoomableImageDialog(\r\n                imageUrl = selectedImageUrl!!,\r\n                label = selectedImageTitle ?: \"\",\r\n                onDismiss = {\r\n                    selectedImageUrl = null\r\n                    selectedImageTitle = null\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// \uD83D\uDD0D Di谩logo de zoom (se queda igual)\r\n@Composable\r\nprivate fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {\r\n\r\n    val view =LocalView.current\r\n    val activity = view.context as? Activity\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_SENSOR\r\n\r\n        onDispose {\r\n            activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n        }\r\n    }\r\n\r\n    Dialog(\r\n        onDismissRequest = onDismiss,\r\n        properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)\r\n    ) {\r\n        Box(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .background(Color.Black.copy(alpha = 0.95f))\r\n        ) {\r\n            AndroidView(\r\n                factory = { context ->\r\n                    PhotoView(context).apply {\r\n                        load(imageUrl) { crossfade(true) }\r\n                    }\r\n                },\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n\r\n            // \uD83D\uDD39 T铆tulo (ya traducido seg煤n idioma)\r\n            Text(\r\n                text = label,\r\n                color = Color.White,\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Medium,\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomStart)\r\n                    .background(Color.Black.copy(alpha = 0.7f))\r\n                    .padding(horizontal = 12.dp, vertical = 8.dp)\r\n            )\r\n\r\n            //  Bot贸n cerrar\r\n            IconButton(\r\n                onClick = onDismiss,\r\n                modifier = Modifier\r\n                    .align(Alignment.TopEnd)\r\n                    .statusBarsPadding()\r\n                    .padding(16.dp)\r\n                    .background(Color.Black.copy(alpha = 0.5f), CircleShape)\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.close),\r\n                    tint = Color.White\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(date 1763721534656)
-@@ -15,7 +15,7 @@
- import androidx.compose.ui.draw.clip
- import androidx.compose.ui.graphics.Color
- import androidx.compose.ui.layout.ContentScale
--import androidx.compose.ui.platform.LocalContext // <-- 隆NUEVO IMPORT!
-+import androidx.compose.ui.platform.LocalContext
- import androidx.compose.ui.platform.LocalView
- import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.text.font.FontWeight
-@@ -43,10 +43,25 @@
- import androidx.media3.exoplayer.ExoPlayer
- import android.util.Log
- import androidx.compose.foundation.layout.Arrangement
-+import com.nextapp.monasterio.viewModels.AjustesViewModel
-+import com.nextapp.monasterio.ui.virtualvisit.components.GenericTutorialOverlay
-+import androidx.compose.ui.platform.LocalDensity
-+import androidx.compose.ui.geometry.Offset
-+import androidx.compose.ui.geometry.Size // Importante para el foco cuadrado
-+
-+// Clase privada para definir los pasos del tutorial del Pin
-+private data class PinTutorialStep(
-+    val description: String,
-+    val focusCenter: Offset,
-+    val focusRadius: Float = 0f,      // Para c铆rculos
-+    val rectSize: Size? = null,       // Para cuadrados/rect谩ngulos
-+    val alignment: Alignment = Alignment.BottomCenter // D贸nde poner el cuadro de texto
-+)
- 
- @OptIn(ExperimentalFoundationApi::class)
- @Composable
- fun PinDetalleScreen(
-+    viewModel: AjustesViewModel,
-     pin: PinData,
-     onBack: () -> Unit,
-     onVer360: (() -> Unit)? = null
-@@ -61,12 +76,17 @@
- 
-     DisposableEffect(Unit) {
-         activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
--
-         onDispose {
-             activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
-         }
-     }
- 
-+    // --- LGICA DE ESTADO DEL TUTORIAL ---
-+    val isPinDismissed by viewModel.isPinDismissed.collectAsState()
-+    var showTutorialSession by remember { mutableStateOf(true) }
-+    // ndice para recorrer los pasos (Atr谩s -> Imagen -> Audio -> 360)
-+    var currentStepIndex by remember { mutableIntStateOf(0) }
-+
-     val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()
- 
-     val pagerState = rememberPagerState(pageCount = { imagenes.size })
-@@ -77,7 +97,7 @@
-     val locale: Locale = configuration.locales[0]
-     val language = locale.language
- 
--    // --- L贸gica de Texto Multiling眉e (Tu c贸digo) ---
-+    // --- Textos Multiling眉es ---
-     val titulo_pin: String
-     val descripcion_pin: String?
-     val ubicacion_pin: Ubicacion?
-@@ -100,10 +120,8 @@
-         }
-     }
- 
--    // --- 隆隆NUEVA LGICA DE AUDIO!! ---
-+    // --- AUDIO ---
-     val context = LocalContext.current
--
--    // 1. Selecciona la URL de audio correcta
-     val audioUrl = when (language) {
-         "es" -> pin.audioUrl_es
-         "en" -> pin.audioUrl_en
-@@ -111,37 +129,27 @@
-         else -> pin.audioUrl_es
-     }
- 
--    Log.d(
--        "AudioDebug",
--        "Pin: '${pin.titulo}', Idioma: $language, URL de Audio Seleccionada: [$audioUrl]"
--    )
-+    Log.d("AudioDebug", "Pin: '${pin.titulo}', URL Audio: [$audioUrl]")
- 
--    // 2. Configura el ExoPlayer
-     val exoPlayer = remember { ExoPlayer.Builder(context).build() }
-     var isPlaying by remember { mutableStateOf(false) }
--    var playbackState by remember { mutableStateOf(Player.STATE_IDLE) }
-     var hasUserInteracted by remember { mutableStateOf(false) }
- 
--    // 3. Prepara el player si la URL cambia (y no es nula)
-     DisposableEffect(audioUrl) {
-         if (!audioUrl.isNullOrBlank()) {
-             val mediaItem = MediaItem.fromUri(audioUrl)
-             exoPlayer.setMediaItem(mediaItem)
-             exoPlayer.prepare()
-         }
--        // (No necesitamos onDispose aqu铆, se libera abajo)
-         onDispose { }
-     }
- 
--    // 4. Listener para actualizar el bot贸n Play/Pause y rebobinar
-     LaunchedEffect(exoPlayer) {
-         exoPlayer.addListener(object : Player.Listener {
-             override fun onIsPlayingChanged(isPlayingValue: Boolean) {
-                 isPlaying = isPlayingValue
-             }
-             override fun onPlaybackStateChanged(state: Int) {
--                playbackState = state
--
-                 if (state == Player.STATE_ENDED) {
-                     isPlaying = false
-                     exoPlayer.seekTo(0)
-@@ -150,13 +158,45 @@
-         })
-     }
- 
--    // 5. Libera el player al salir de la pantalla
-     DisposableEffect(Unit) {
--        onDispose {
--            exoPlayer.release()
--        }
-+        onDispose { exoPlayer.release() }
-+    }
-+
-+    // =====================================================================
-+    // CLCULO DE COORDENADAS PARA EL TUTORIAL
-+    // =====================================================================
-+    val density = LocalDensity.current
-+    val screenWidthPx = with(density) { configuration.screenWidthDp.dp.toPx() }
-+    val screenHeightPx = with(density) { configuration.screenHeightDp.dp.toPx() }
-+
-+    // 1. Bot贸n Atr谩s (Aprox Top-Left)
-+    val backButtonPos = remember(density) {
-+        with(density) { Offset(30.dp.toPx(), 85.dp.toPx()) }
-     }
--    // --- FIN LGICA DE AUDIO ---
-+
-+    // 2. Imagen Principal (Carrusel) - Aprox Centro-Superior
-+    // T铆tulo(~100dp) + Imagen(250dp). Centro aprox en Y=240dp
-+    val imageCenterPos = remember(density) {
-+        with(density) { Offset(screenWidthPx / 2, 280.dp.toPx()) }
-+    }
-+    val imageRectSize = remember(density, screenWidthPx) {
-+        with(density) { Size(screenWidthPx - 32.dp.toPx(), 250.dp.toPx()) }
-+    }
-+
-+    // 3. Bot贸n Audio - Debajo de la imagen, izquierda.
-+    // Aprox Y = 100(titulo) + 250(img) + 20(pads) + 24(mitad btn)  400dp
-+    val audioBtnPos = remember(density) {
-+        with(density) { Offset(40.dp.toPx(), 450.dp.toPx()) }
-+    }
-+
-+    // 4. Bot贸n 360 - Abajo del todo
-+    val btn360Pos = remember(density, screenHeightPx) {
-+        with(density) { Offset(screenWidthPx / 2, screenHeightPx - 100.dp.toPx()) }
-+    }
-+    val btn360Size = remember(density, screenWidthPx) {
-+        with(density) { Size(screenWidthPx - 32.dp.toPx(), 60.dp.toPx()) }
-+    }
-+
- 
-     Box(
-         modifier = Modifier
-@@ -203,7 +243,7 @@
- 
-             Spacer(modifier = Modifier.height(16.dp))
- 
--            // 硷 Carrusel con etiqueta (se queda igual)
-+            // 硷 Carrusel
-             if (imagenes.isNotEmpty()) {
-                 Box(
-                     modifier = Modifier
-@@ -213,116 +253,65 @@
-                         .border(3.dp, Color.Black, RoundedCornerShape(16.dp))
-                 ) {
-                     HorizontalPager(state = pagerState) { page ->
--
-                         val imagen = imagenes[page]
--
-                         Box(modifier = Modifier.fillMaxSize()) {
--
-                             AsyncImage(
--
-                                 model = imagen.url,
--
-                                 contentDescription = imagen.etiqueta,
--
-                                 contentScale = ContentScale.Crop,
--
-                                 modifier = Modifier
--
-                                     .fillMaxSize()
--
-                                     .clickable {
--
-                                         selectedImageUrl = imagen.url
--
--//  t铆tulo seg煤n idioma actual
--
-                                         selectedImageTitle = when (language) {
--
-                                             "es" -> imagen.titulo
--
-                                             "de" -> imagen.tituloAleman
--
-                                             else -> imagen.tituloIngles
--
-                                         }
--
-                                     }
--
-                             )
-                             Text(
--
-                                 text = imagen.etiqueta,
--
-                                 color = Color.White,
--
-                                 fontSize = 14.sp,
--
-                                 modifier = Modifier
--
-                                     .align(Alignment.BottomStart)
--
-                                     .background(Color.Black.copy(alpha = 0.6f))
--
-                                     .padding(horizontal = 10.dp, vertical = 6.dp)
--
-                             )
--
-                         }
--
-                     }
-                     Row(
--                        Modifier
--                            .align(Alignment.BottomCenter)
--                            .padding(bottom = 6.dp)
-+                        Modifier.align(Alignment.BottomCenter).padding(bottom = 6.dp)
-                     ) {
-                         repeat(imagenes.size) { index ->
--
-                             val selected = pagerState.currentPage == index
--
-                             Box(
--
-                                 Modifier
--
-                                     .padding(3.dp)
--
-                                     .size(if (selected) 8.dp else 6.dp)
--
--                                    .background(
--
--                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),
--
--                                        shape = CircleShape
--
--                                    )
--
-+                                    .background(Color.White.copy(alpha = if (selected) 1f else 0.6f), CircleShape)
-                             )
--
-                         }
-                     }
-                 }
-                 Spacer(modifier = Modifier.height(12.dp))
-             }
- 
--
-+            //  Bot贸n Audio
-             Row(
-                 modifier = Modifier.fillMaxWidth(),
-                 verticalAlignment = Alignment.CenterVertically
-             ) {
--                // Bot贸n de Audio (solo si hay URL)
-                 if (!audioUrl.isNullOrBlank()) {
--                    // 1. Determina el icono correcto
-                     val iconRes = when {
-                         isPlaying -> R.drawable.pause
-                         !hasUserInteracted -> R.drawable.microphone
-                         else -> R.drawable.play_arrow
-                     }
--
--                    // 2. Bot贸n de audio con redondel, alineado a la derecha del t铆tulo
-                     Row(
--                        modifier = Modifier
--                            .fillMaxWidth()
--                            .padding(top = 8.dp), // Espacio entre el t铆tulo y el bot贸n
--                        horizontalArrangement = Arrangement.Start // Alinea a la derecha
-+                        modifier = Modifier.fillMaxWidth().padding(top = 8.dp),
-+                        horizontalArrangement = Arrangement.Start
-                     ) {
-                         IconButton(onClick = {
-                             hasUserInteracted = true
-@@ -330,16 +319,16 @@
-                         }) {
-                             Box(
-                                 modifier = Modifier
--                                    .size(48.dp) // Tama帽o del redondel
--                                    .clip(CircleShape) // Forma redonda
--                                    .background(Color.Gray.copy(alpha = 0.3f)), // Color de fondo del redondel (ej. gris suave)
--                                contentAlignment = Alignment.Center // Centra el icono dentro del redondel
-+                                    .size(48.dp)
-+                                    .clip(CircleShape)
-+                                    .background(Color.Gray.copy(alpha = 0.3f)),
-+                                contentAlignment = Alignment.Center
-                             ) {
-                                 Icon(
-                                     painter = painterResource(id = iconRes),
-                                     contentDescription = stringResource(R.string.play_audio),
--                                    tint = Color.Black, // Color del icono
--                                    modifier = Modifier.size(28.dp) // Tama帽o del icono dentro del redondel
-+                                    tint = Color.Black,
-+                                    modifier = Modifier.size(28.dp)
-                                 )
-                             }
-                         }
-@@ -347,7 +336,7 @@
-                 }
-             }
- 
--            //  Descripci贸n (se queda igual)
-+            //  Descripci贸n
-             val descripcion = descripcion_pin ?: ""
-             if (descripcion.isNotBlank()) {
-                 val textScrollState = rememberScrollState()
-@@ -373,7 +362,7 @@
- 
-             Spacer(modifier=Modifier.height(24.dp))
- 
--            //  Bot贸n 360 (se queda igual)
-+            //  Bot贸n 360
-             onVer360?.let {
-                 Box(
-                     modifier = Modifier
-@@ -383,9 +372,7 @@
-                 ) {
-                     Button(
-                         onClick = it,
--                        modifier = Modifier
--                            .fillMaxWidth()
--                            .height(56.dp),
-+                        modifier = Modifier.fillMaxWidth().height(56.dp),
-                         colors = ButtonDefaults.buttonColors(containerColor = Color.Black),
-                         shape = RoundedCornerShape(12.dp)
-                     ) {
-@@ -400,7 +387,90 @@
-             }
-         }
- 
--        //  Zoom con t铆tulo traducido (se queda igual)
-+        // ====================================================================
-+        // LOGICA VISUAL DEL TUTORIAL
-+        // ====================================================================
-+
-+        if (!isPinDismissed && showTutorialSession) {
-+            // Construimos la lista de pasos din谩micamente
-+            // (Solo mostramos el paso de audio si hay audio, y el de 360 si hay 360)
-+            val steps = remember(audioUrl, onVer360) {
-+                val list = mutableListOf<PinTutorialStep>()
-+
-+                // PASO 1: Volver (C铆rculo, Texto Abajo)
-+                list.add(
-+                    PinTutorialStep(
-+                        description = activity?.getString(R.string.pin_1) ?: "Volver",
-+                        focusCenter = backButtonPos,
-+                        focusRadius = 70f,
-+                        alignment = Alignment.BottomCenter
-+                    )
-+                )
-+
-+                // PASO 2: Im谩genes (Cuadrado, Texto Abajo)
-+                list.add(
-+                    PinTutorialStep(
-+                        description = activity?.getString(R.string.pin_2) ?: "Volver",
-+                        focusCenter = imageCenterPos,
-+                        rectSize = imageRectSize,
-+                        alignment = Alignment.BottomCenter
-+                    )
-+                )
-+
-+                // PASO 3: Audio (Solo si existe) (C铆rculo, Texto Abajo)
-+                if (!audioUrl.isNullOrBlank()) {
-+                    list.add(
-+                        PinTutorialStep(
-+                            description = activity?.getString(R.string.pin_3) ?: "Volver",
-+                            focusCenter = audioBtnPos,
-+                            focusRadius = 80f,
-+                            alignment = Alignment.BottomCenter
-+                        )
-+                    )
-+                }
-+
-+                // PASO 4: Bot贸n 360 (Solo si existe) (Rect谩ngulo, Texto ARRIBA)
-+                if (onVer360 != null) {
-+                    list.add(
-+                        PinTutorialStep(
-+                            description = activity?.getString(R.string.pin_4) ?: "Volver",
-+                            focusCenter = btn360Pos,
-+                            rectSize = btn360Size,
-+                            alignment = Alignment.TopCenter //  EL CAMBIO CLAVE: Texto arriba
-+                        )
-+                    )
-+                }
-+                list
-+            }
-+
-+            if (currentStepIndex < steps.size) {
-+                val step = steps[currentStepIndex]
-+                val isLastStep = currentStepIndex == steps.size - 1
-+                val btnText = if (isLastStep) stringResource(R.string.understand) else stringResource(R.string.next)
-+
-+                GenericTutorialOverlay(
-+                    description = step.description,
-+                    highlightCenter = step.focusCenter,
-+                    highlightRadius = step.focusRadius,
-+                    highlightRectSize = step.rectSize,
-+                    buttonText = btnText,
-+                    dialogAlignment = step.alignment, //  Pasamos la alineaci贸n
-+
-+                    onCloseClicked = { permanent ->
-+                        if (isLastStep) {
-+                            showTutorialSession = false
-+                            if (permanent) viewModel.dismissPin()
-+                        } else {
-+                            currentStepIndex++
-+                            if (permanent) viewModel.dismissPin()
-+                        }
-+                    }
-+                )
-+            }
-+        }
-+
-+
-+        //  Zoom Dialog
-         if (selectedImageUrl != null) {
-             ZoomableImageDialog(
-                 imageUrl = selectedImageUrl!!,
-@@ -414,16 +484,13 @@
-     }
- }
- 
--//  Di谩logo de zoom (se queda igual)
- @Composable
- private fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {
--
--    val view =LocalView.current
-+    val view = LocalView.current
-     val activity = view.context as? Activity
- 
-     DisposableEffect(Unit) {
-         activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_SENSOR
--
-         onDispose {
-             activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-         }
-@@ -434,20 +501,12 @@
-         properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)
-     ) {
-         Box(
--            modifier = Modifier
--                .fillMaxSize()
--                .background(Color.Black.copy(alpha = 0.95f))
-+            modifier = Modifier.fillMaxSize().background(Color.Black.copy(alpha = 0.95f))
-         ) {
-             AndroidView(
--                factory = { context ->
--                    PhotoView(context).apply {
--                        load(imageUrl) { crossfade(true) }
--                    }
--                },
-+                factory = { context -> PhotoView(context).apply { load(imageUrl) { crossfade(true) } } },
-                 modifier = Modifier.fillMaxSize()
-             )
--
--            //  T铆tulo (ya traducido seg煤n idioma)
-             Text(
-                 text = label,
-                 color = Color.White,
-@@ -458,8 +517,6 @@
-                     .background(Color.Black.copy(alpha = 0.7f))
-                     .padding(horizontal = 12.dp, vertical = 8.dp)
-             )
--
--            //  Bot贸n cerrar
-             IconButton(
-                 onClick = onDismiss,
-                 modifier = Modifier
-Index: app/src/main/java/com/nextapp/monasterio/MonasteryApplication.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\nimport android.app.Application\r\n\r\n/**\r\n * Esta clase se ejecuta ANTES que cualquier Activity.\r\n * Es el lugar perfecto para configurar cosas de toda la app, como el idioma.\r\n */\r\nclass MonasteryApplication : Application() {\r\n\r\n    override fun onCreate() {\r\n        super.onCreate()\r\n\r\n        // 1. Carga el idioma guardado en el momento en que la app arranca.\r\n        // Esto garantiza que CUALQUIER activity que se inicie ya tenga el idioma correcto.\r\n        LanguageHelper.loadLocale(this)\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/MonasteryApplication.kt b/app/src/main/java/com/nextapp/monasterio/MonasteryApplication.kt
---- a/app/src/main/java/com/nextapp/monasterio/MonasteryApplication.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ b/app/src/main/java/com/nextapp/monasterio/MonasteryApplication.kt	(date 1763458435685)
-@@ -1,18 +1,13 @@
- package com.nextapp.monasterio
- 
- import android.app.Application
-+import com.nextapp.monasterio.repository.UserPreferencesRepository // 1. Importar
- 
--/**
-- * Esta clase se ejecuta ANTES que cualquier Activity.
-- * Es el lugar perfecto para configurar cosas de toda la app, como el idioma.
-- */
- class MonasteryApplication : Application() {
--
-     override fun onCreate() {
-         super.onCreate()
- 
--        // 1. Carga el idioma guardado en el momento en que la app arranca.
--        // Esto garantiza que CUALQUIER activity que se inicie ya tenga el idioma correcto.
--        LanguageHelper.loadLocale(this)
-+        // 2. A帽ade esta l铆nea para inicializar el repositorio
-+        UserPreferencesRepository.initialize(this)
-     }
- }
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PlanoScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport android.os.Handler\r\nimport android.os.Looper\r\nimport android.widget.FrameLayout\r\nimport android.widget.Toast\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.animation.core.*\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.graphics.toArgb\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.NavHostController\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.models.*\r\nimport com.nextapp.monasterio.repository.*\r\nimport com.nextapp.monasterio.ui.virtualvisit.components.DebugPhotoView\r\nimport com.nextapp.monasterio.ui.virtualvisit.utils.isPointInPath\r\nimport com.nextapp.monasterio.ui.virtualvisit.utils.isPointInPinArea\r\nimport com.nextapp.monasterio.ui.screens.VirtualVisitRoutes\r\nimport kotlinx.coroutines.launch\r\nimport android.graphics.Matrix\r\nimport android.graphics.Path\r\nimport android.util.Log\r\nimport androidx.compose.runtime.snapshots.toInt\r\nimport androidx.compose.ui.res.stringResource\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\n\r\n@Composable\r\nfun PlanoScreen(\r\n    viewModel: AjustesViewModel,\r\n    planoId: String, //  id del documento de Firestore (p.ej. \"monasterio_exterior\")\r\n    navController: NavController,\r\n    rootNavController: NavHostController? = null\r\n) {\r\n    val context = LocalContext.current\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        onDispose {}\r\n    }\r\n\r\n    val scope = rememberCoroutineScope()\r\n\r\n    // --- Estados ---\r\n    var plano by remember { mutableStateOf<PlanoData?>(null) }\r\n    var figuras by remember { mutableStateOf<List<FiguraData>>(emptyList()) }\r\n    var pines by remember { mutableStateOf<List<PinData>>(emptyList()) }\r\n    var isLoading by remember { mutableStateOf(true) }\r\n\r\n    // --- Estados visuales ---\r\n    var activePath by remember { mutableStateOf<Path?>(null) }\r\n    var activeHighlight by remember { mutableStateOf<Color?>(null) }\r\n    var isPinPressed by remember { mutableStateOf(false) }\r\n\r\n    val initialZoom = 1.5f\r\n    val planoBackgroundColor = Color(0xFFF5F5F5)\r\n\r\n    val botonesVisibles by viewModel.botonesVisibles.collectAsState()\r\n\r\n    // --- Efecto de parpadeo (blink) ---\r\n    val infiniteTransition = rememberInfiniteTransition(label = \"BlinkTransition\")\r\n    val blinkAlpha by infiniteTransition.animateFloat(\r\n        initialValue = 0f,\r\n        targetValue = 1f,\r\n        animationSpec = infiniteRepeatable(\r\n            animation = tween(1500, easing = LinearEasing),\r\n            repeatMode = RepeatMode.Reverse\r\n        )\r\n    )\r\n\r\n    // --- Carga inicial del plano + figuras + pines ---\r\n    LaunchedEffect(planoId) {\r\n        isLoading = true\r\n        try {\r\n            plano = PlanoRepository.getPlanoById(planoId)\r\n\r\n            if (plano != null) {\r\n                Log.d(\"PlanoUniversal\", \" Plano cargado: ${plano!!.nombre}\")\r\n                // Cargar figuras\r\n                val figuraRefs = plano!!.figuras.map { it.substringAfterLast(\"/\") }\r\n                figuras = FiguraRepository.getAllFiguras().filter { figuraRefs.contains(it.id) }\r\n\r\n                // Cargar pines\r\n                val pinRefs = plano!!.pines.map { it.substringAfterLast(\"/\") }\r\n                pines = PinRepository.getAllPins().filter { pinRefs.contains(it.id) }\r\n\r\n                Log.d(\"PlanoUniversal\", \"\uD83D\uDFE2 Figuras: ${figuras.size}, Pines: ${pines.size}\")\r\n            } else {\r\n                Log.e(\"PlanoUniversal\", \"\uFE0F Plano no encontrado con id=$planoId\")\r\n            }\r\n        } catch (e: Exception) {\r\n            Log.e(\"PlanoUniversal\", \" Error cargando plano\", e)\r\n            Toast.makeText(context, context.getString(R.string.error_loading_plane), Toast.LENGTH_SHORT).show()\r\n        } finally {\r\n            isLoading = false\r\n        }\r\n    }\r\n\r\n    // --- UI principal ---\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(planoBackgroundColor)\r\n    ) {\r\n        if (isLoading) {\r\n            Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {\r\n                Text(stringResource(R.string.plane_loading))\r\n            }\r\n            return@Box\r\n        }\r\n\r\n        var photoViewRef by remember { mutableStateOf<DebugPhotoView?>(null) }\r\n\r\n        AndroidView(\r\n            modifier = Modifier.fillMaxSize(),\r\n            factory = { ctx ->\r\n                DebugPhotoView(ctx).apply {\r\n                    layoutParams = FrameLayout.LayoutParams(\r\n                        FrameLayout.LayoutParams.MATCH_PARENT,\r\n                        FrameLayout.LayoutParams.MATCH_PARENT\r\n                    )\r\n\r\n                    // \uD83D\uDD39 Cargar imagen del plano (URL)\r\n                    plano?.let { p ->\r\n                        setImageFromUrl(p.plano)\r\n                    }\r\n\r\n                    post { setScale(initialZoom, true) }\r\n                    this.pins = emptyList()\r\n                }\r\n            },\r\n            update = { photoView ->\r\n                // \uD83D\uDD39 Actualizar zonas interactivas de figuras\r\n                photoView.staticZones = figuras.map { figura ->\r\n                    DebugPhotoView.StaticZoneData(\r\n                        path = createPathFromFirebase(figura),\r\n                        color = figura.colorResaltado.toUInt().toInt()\r\n                    )\r\n                }\r\n\r\n                // \uD83D\uDD39 Actualizar pines\r\n                photoView.pins = pines.map {\r\n                    DebugPhotoView.PinData(\r\n                        x = it.x,\r\n                        y = it.y,\r\n                        iconId = R.drawable.pin3,\r\n                        isPressed = isPinPressed\r\n                    )\r\n                }\r\n\r\n                // \uD83D\uDD39 Actualizar estado din谩mico\r\n                photoView.blinkingAlpha = blinkAlpha\r\n                photoView.interactivePath = activePath\r\n                photoView.highlightColor = activeHighlight?.toArgb() ?: Color.Transparent.toArgb()\r\n\r\n                photoView.invalidate()\r\n\r\n                // \uD83D\uDC46 Listener de tap\r\n                photoView.setOnPhotoTapListener { _, x, y ->\r\n                    val figura = figuras.find { isPointInPath(x, y, createPathFromFirebase(it)) }\r\n                    val pin = pines.find { isPointInPinArea(x, y, it.x, it.y, it.tapRadius) }\r\n\r\n                    when {\r\n                        figura != null -> {\r\n                            activePath = createPathFromFirebase(figura)\r\n                            activeHighlight = Color(figura.colorResaltado.toUInt().toInt())\r\n                            Handler(Looper.getMainLooper()).postDelayed({\r\n                                activeHighlight = null\r\n                                when (figura.tipoDestino) {\r\n                                    \"detalle\" -> {\r\n                                        navController.navigate(\"${VirtualVisitRoutes.DETALLE_GENERICO}/${figura.valorDestino}\")\r\n                                    }\r\n\r\n                                    \"plano\" -> {\r\n                                        val destinoId = figura.valorDestino\r\n                                        if (destinoId.isNotBlank()) {\r\n                                            // \uD83D\uDE80 Usar el navController local (no el root)\r\n                                            navController.navigate(\"${VirtualVisitRoutes.PLANO}/$destinoId\")\r\n                                        } else {\r\n                                            Toast.makeText(context, context.getString(R.string.notdefined_destinyplane), Toast.LENGTH_SHORT).show()\r\n                                        }\r\n                                    }\r\n\r\n\r\n                                    else -> {\r\n                                        Toast.makeText(context, context.getString(R.string.notdefined_destiny), Toast.LENGTH_SHORT).show()\r\n                                    }\r\n                                }\r\n\r\n                            }, 200)\r\n                        }\r\n\r\n                        pin != null -> {\r\n                            isPinPressed = true\r\n                            Log.d(\"PlanoScreen\", \"\uD83D\uDFE1 Pin pulsado  ${pin.id}, tipoDestino=${pin.tipoDestino}, valorDestino=${pin.valorDestino}\")\r\n                            try {\r\n                                Handler(Looper.getMainLooper()).postDelayed({\r\n                                    try {\r\n                                        isPinPressed = false\r\n                                        val tipo = pin.tipoDestino?.lowercase()\r\n                                        val destino = pin.valorDestino\r\n                                        Log.d(\"PlanoScreen\", \"\uD83D\uDD39 Dentro del handler  tipo=$tipo, destino=$destino\")\r\n\r\n                                        when (tipo) {\r\n                                            \"ruta\" -> {\r\n                                                val destino = pin.valorDestino ?: return@postDelayed\r\n                                                Log.d(\"PlanoScreen\", \" Navegando (root) a: $destino con pinId=${pin.id}\")\r\n                                                rootNavController?.navigate(\"${AppRoutes.PIN_ENTRADA_MONASTERIO}/${pin.id}\")\r\n                                            }\r\n\r\n                                            \"detalle\" -> {\r\n                                                Log.d(\"PlanoScreen\", \" Navegando a detalle: ${pin.id}\")\r\n                                                navController.navigate(AppRoutes.PIN_DETALLE + \"/${pin.id}\")\r\n                                            }\r\n                                            else -> {\r\n                                                Log.w(\"PlanoScreen\", \"\uFE0F tipoDestino desconocido: $tipo\")\r\n                                            }\r\n                                        }\r\n                                    } catch (e: Exception) {\r\n                                        Log.e(\"PlanoScreen\", \" Error dentro del Handler al navegar (interno)\", e)\r\n                                    }\r\n                                }, 200)\r\n                            } catch (e: Exception) {\r\n                                Log.e(\"PlanoScreen\", \" Error al iniciar el Handler (externo)\", e)\r\n                            }\r\n                        }\r\n\r\n\r\n\r\n                        else -> Toast.makeText(context, context.getString(R.string.out_interactive_area), Toast.LENGTH_SHORT).show()\r\n                    }\r\n                }\r\n\r\n                photoViewRef = photoView\r\n            }\r\n        )\r\n\r\n        // --- Controles de zoom ---\r\n        Column(\r\n            modifier = Modifier\r\n                .align(Alignment.CenterEnd)\r\n                .padding(end = 16.dp, bottom = 80.dp),\r\n            verticalArrangement = Arrangement.spacedBy(12.dp)\r\n        ) {\r\n            if(botonesVisibles) {\r\n                FloatingActionButton(onClick = {\r\n                    photoViewRef?.let {\r\n                        val newScale = (it.scale + 0.2f).coerceAtMost(it.maximumScale)\r\n                        it.setScale(newScale, true)\r\n                    }\r\n                }) {\r\n                    Box(\r\n                        modifier = Modifier\r\n                            .size(48.dp)\r\n                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),\r\n                        contentAlignment = Alignment.Center\r\n                    ) {\r\n                        Icon(\r\n                            painter = painterResource(id = R.drawable.aumentar_zoom),\r\n                            contentDescription = stringResource(R.string.increase),\r\n                            tint = Color.Unspecified\r\n                        )\r\n                    }\r\n                }\r\n\r\n                FloatingActionButton(onClick = {\r\n                    photoViewRef?.let {\r\n                        val newScale = (it.scale - 0.2f).coerceAtLeast(it.minimumScale)\r\n                        it.setScale(newScale, true)\r\n                    }\r\n                }) {\r\n                    Box(\r\n                        modifier = Modifier\r\n                            .size(48.dp)\r\n                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),\r\n                        contentAlignment = Alignment.Center\r\n                    ) {\r\n                        Icon(\r\n                            painter = painterResource(id = R.drawable.disminuir_zoom),\r\n                            contentDescription = stringResource(R.string.decrease),\r\n                            tint = Color.Unspecified\r\n                        )\r\n                    }\r\n                }\r\n\r\n                FloatingActionButton(onClick = {\r\n                    photoViewRef?.apply {\r\n                        setScale(initialZoom, true)\r\n                        setTranslationX(0f)\r\n                        setTranslationY(0f)\r\n                    }\r\n                }) {\r\n                    Box(\r\n                        modifier = Modifier\r\n                            .size(48.dp)\r\n                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),\r\n                        contentAlignment = Alignment.Center\r\n                    ) {\r\n                        Icon(\r\n                            painter = painterResource(id = R.drawable.reajustar),\r\n                            contentDescription = stringResource(R.string.readjust),\r\n                            tint = Color.Unspecified\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // --- Bot贸n \"Atr谩s\" ---\r\n        IconButton(\r\n            onClick = {\r\n                if (!navController.popBackStack()) {\r\n                    if (planoId == \"monasterio_exterior\") {\r\n                        // Si estamos en el plano ra铆z, volver al inicio de la app\r\n                        rootNavController?.popBackStack()\r\n                        // o si prefieres ir expl铆citamente:\r\n                        // rootNavController?.navigate(AppRoutes.INICIO)\r\n                    } else {\r\n                        // Si no es el exterior, volver al exterior como fallback\r\n                        navController.navigate(\"${VirtualVisitRoutes.PLANO}/monasterio_exterior\") {\r\n                            popUpTo(\"${VirtualVisitRoutes.PLANO}/monasterio_exterior\") { inclusive = false }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            modifier = Modifier\r\n                .align(Alignment.TopStart)\r\n                .statusBarsPadding()\r\n                .padding(16.dp)\r\n                .background(Color.Black.copy(alpha = 0.5f), shape = RoundedCornerShape(12.dp))\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.arrow_back),\r\n                contentDescription = stringResource(R.string.go_back),\r\n                tint = Color.White\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n\r\n// --- Helper para crear Paths de Firebase ---\r\nprivate fun createPathFromFirebase(figura: FiguraData): Path {\r\n    val path = Path()\r\n    if (figura.path.isEmpty()) return path\r\n\r\n    path.moveTo(figura.path[0].x, figura.path[0].y)\r\n    for (i in 1 until figura.path.size) {\r\n        path.lineTo(figura.path[i].x, figura.path[i].y)\r\n    }\r\n    path.close()\r\n\r\n    val matrix = Matrix().apply {\r\n        setScale(figura.scale, figura.scale)\r\n        postTranslate(figura.offsetX, figura.offsetY)\r\n    }\r\n    path.transform(matrix)\r\n    return path\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PlanoScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PlanoScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PlanoScreen.kt	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PlanoScreen.kt	(date 1763717710414)
-@@ -6,23 +6,30 @@
- import android.os.Looper
- import android.widget.FrameLayout
- import android.widget.Toast
-+import androidx.compose.animation.core.*
- import androidx.compose.foundation.background
- import androidx.compose.foundation.layout.*
--import androidx.compose.animation.core.*
- import androidx.compose.foundation.shape.CircleShape
- import androidx.compose.foundation.shape.RoundedCornerShape
- import androidx.compose.material3.*
- import androidx.compose.runtime.*
- import androidx.compose.ui.Alignment
- import androidx.compose.ui.Modifier
-+import androidx.compose.ui.geometry.Offset
- import androidx.compose.ui.graphics.Color
- import androidx.compose.ui.graphics.toArgb
-+import androidx.compose.ui.platform.LocalConfiguration
- import androidx.compose.ui.platform.LocalContext
-+import androidx.compose.ui.platform.LocalDensity
- import androidx.compose.ui.res.painterResource
-+import androidx.compose.ui.res.stringResource
- import androidx.compose.ui.unit.dp
- import androidx.compose.ui.viewinterop.AndroidView
- import androidx.navigation.NavController
- import androidx.navigation.NavHostController
-+import android.graphics.Matrix
-+import android.graphics.Path
-+import android.util.Log
- import com.nextapp.monasterio.R
- import com.nextapp.monasterio.AppRoutes
- import com.nextapp.monasterio.models.*
-@@ -31,19 +38,21 @@
- import com.nextapp.monasterio.ui.virtualvisit.utils.isPointInPath
- import com.nextapp.monasterio.ui.virtualvisit.utils.isPointInPinArea
- import com.nextapp.monasterio.ui.screens.VirtualVisitRoutes
--import kotlinx.coroutines.launch
--import android.graphics.Matrix
--import android.graphics.Path
--import android.util.Log
--import androidx.compose.runtime.snapshots.toInt
--import androidx.compose.ui.res.stringResource
- import com.nextapp.monasterio.viewModels.AjustesViewModel
--import com.nextapp.monasterio.viewModels.AuthViewModel
-+import com.nextapp.monasterio.ui.virtualvisit.components.GenericTutorialOverlay
-+
-+// Clase auxiliar para definir los pasos del tutorial
-+private data class TutorialStep(
-+    val title: String? = null,
-+    val description: String,
-+    val focusCenter: Offset,
-+    val focusRadius: Float
-+)
- 
- @Composable
- fun PlanoScreen(
-     viewModel: AjustesViewModel,
--    planoId: String, //  id del documento de Firestore (p.ej. "monasterio_exterior")
-+    planoId: String,
-     navController: NavController,
-     rootNavController: NavHostController? = null
- ) {
-@@ -55,64 +64,102 @@
-         onDispose {}
-     }
- 
-+    // -----------------------------------------------------------
-+    // 1. CLCULOS DE COORDENADAS PARA LOS FOCOS DEL TUTORIAL
-+    // -----------------------------------------------------------
-+    val configuration = LocalConfiguration.current
-+    val density = LocalDensity.current
-+    val screenWidthPx = with(density) { configuration.screenWidthDp.dp.toPx() }
-+    val screenHeightPx = with(density) { configuration.screenHeightDp.dp.toPx() }
-+
-+    // A. Centro de la pantalla (Para el Mapa / Bienvenida)
-+    val centerOffset = remember(configuration) {
-+        Offset(screenWidthPx / 3.5f, screenHeightPx / 2.1f)
-+    }
-+
-+    val backButtonOffset = remember(density) {
-+        Offset(screenWidthPx / 9.5f, screenHeightPx / 8.6f)
-+    }
-+
-+    val rightbuttons = remember(density) {
-+        Offset(screenWidthPx / 1f, screenHeightPx / 2.2f)
-+    }
-+
-+    val pins = remember(density) {
-+        Offset(screenWidthPx / 2.5f, screenHeightPx / 6f)
-+    }
-+
-+    // C. Controles de Zoom (Abajo Derecha)
-+    val zoomControlsOffset = remember(density, configuration) {
-+        with(density) {
-+            Offset(
-+                x = screenWidthPx - 40.dp.toPx(),
-+                y = screenHeightPx - 160.dp.toPx()
-+            )
-+        }
-+    }
-+
-     val scope = rememberCoroutineScope()
- 
--    // --- Estados ---
-+    // --- Estados de Datos ---
-     var plano by remember { mutableStateOf<PlanoData?>(null) }
-     var figuras by remember { mutableStateOf<List<FiguraData>>(emptyList()) }
-     var pines by remember { mutableStateOf<List<PinData>>(emptyList()) }
-     var isLoading by remember { mutableStateOf(true) }
- 
--    // --- Estados visuales ---
-+    // --- Estados Visuales ---
-     var activePath by remember { mutableStateOf<Path?>(null) }
-     var activeHighlight by remember { mutableStateOf<Color?>(null) }
-     var isPinPressed by remember { mutableStateOf(false) }
- 
--    val initialZoom = 1.5f
-+    // --- LOGICA DE TUTORIAL ---
-+    val isMainDismissed by viewModel.isMainMapDismissed.collectAsState()
-+    val isSubDismissed by viewModel.isSubMapDismissed.collectAsState()
-+    var showTutorialSession by remember { mutableStateOf(true) }
-+
-+    // Estado para saber en qu茅 paso del tutorial estamos (0, 1, 2...)
-+    var currentStepIndex by remember { mutableIntStateOf(0) }
-+
-+    val initialZoom = 1f
-     val planoBackgroundColor = Color(0xFFF5F5F5)
--
-     val botonesVisibles by viewModel.botonesVisibles.collectAsState()
- 
--    // --- Efecto de parpadeo (blink) ---
-+    // --- Efecto de parpadeo ---
-     val infiniteTransition = rememberInfiniteTransition(label = "BlinkTransition")
-     val blinkAlpha by infiniteTransition.animateFloat(
--        initialValue = 0f,
--        targetValue = 1f,
--        animationSpec = infiniteRepeatable(
--            animation = tween(1500, easing = LinearEasing),
--            repeatMode = RepeatMode.Reverse
--        )
-+        initialValue = 0f, targetValue = 1f,
-+        animationSpec = infiniteRepeatable(tween(1500), RepeatMode.Reverse)
-     )
- 
--    // --- Carga inicial del plano + figuras + pines ---
-+    // --- Carga inicial ---
-     LaunchedEffect(planoId) {
-         isLoading = true
-+        showTutorialSession = true
-+        currentStepIndex = 0 // Reiniciamos los pasos al cambiar de plano
-         try {
-             plano = PlanoRepository.getPlanoById(planoId)
--
-             if (plano != null) {
-                 Log.d("PlanoUniversal", " Plano cargado: ${plano!!.nombre}")
--                // Cargar figuras
-                 val figuraRefs = plano!!.figuras.map { it.substringAfterLast("/") }
-                 figuras = FiguraRepository.getAllFiguras().filter { figuraRefs.contains(it.id) }
--
--                // Cargar pines
-                 val pinRefs = plano!!.pines.map { it.substringAfterLast("/") }
-                 pines = PinRepository.getAllPins().filter { pinRefs.contains(it.id) }
--
--                Log.d("PlanoUniversal", " Figuras: ${figuras.size}, Pines: ${pines.size}")
-             } else {
-                 Log.e("PlanoUniversal", "锔 Plano no encontrado con id=$planoId")
-             }
-         } catch (e: Exception) {
-             Log.e("PlanoUniversal", " Error cargando plano", e)
--            Toast.makeText(context, context.getString(R.string.error_loading_plane), Toast.LENGTH_SHORT).show()
-+            Toast.makeText(
-+                context,
-+                context.getString(R.string.error_loading_plane),
-+                Toast.LENGTH_SHORT
-+            ).show()
-         } finally {
-             isLoading = false
-         }
-     }
- 
--    // --- UI principal ---
-+    // --- UI Principal ---
-     Box(
-         modifier = Modifier
-             .fillMaxSize()
-@@ -127,6 +174,7 @@
- 
-         var photoViewRef by remember { mutableStateOf<DebugPhotoView?>(null) }
- 
-+        // 1. Capa del Mapa Interactivo
-         AndroidView(
-             modifier = Modifier.fillMaxSize(),
-             factory = { ctx ->
-@@ -135,47 +183,28 @@
-                         FrameLayout.LayoutParams.MATCH_PARENT,
-                         FrameLayout.LayoutParams.MATCH_PARENT
-                     )
--
--                    //  Cargar imagen del plano (URL)
--                    plano?.let { p ->
--                        setImageFromUrl(p.plano)
--                    }
--
-+                    plano?.let { p -> setImageFromUrl(p.plano) }
-                     post { setScale(initialZoom, true) }
-                     this.pins = emptyList()
-                 }
-             },
-             update = { photoView ->
--                //  Actualizar zonas interactivas de figuras
--                photoView.staticZones = figuras.map { figura ->
-+                photoView.staticZones = figuras.map {
-                     DebugPhotoView.StaticZoneData(
--                        path = createPathFromFirebase(figura),
--                        color = figura.colorResaltado.toUInt().toInt()
--                    )
--                }
--
--                //  Actualizar pines
--                photoView.pins = pines.map {
--                    DebugPhotoView.PinData(
--                        x = it.x,
--                        y = it.y,
--                        iconId = R.drawable.pin3,
--                        isPressed = isPinPressed
-+                        createPathFromFirebase(it), // Ahora s铆 encontrar谩 la funci贸n
-+                        it.colorResaltado.toUInt().toInt()
-                     )
-                 }
--
--                //  Actualizar estado din谩mico
-+                photoView.pins =
-+                    pines.map { DebugPhotoView.PinData(it.x, it.y, R.drawable.pin3, isPinPressed) }
-                 photoView.blinkingAlpha = blinkAlpha
-                 photoView.interactivePath = activePath
-                 photoView.highlightColor = activeHighlight?.toArgb() ?: Color.Transparent.toArgb()
--
-                 photoView.invalidate()
- 
--                //  Listener de tap
-                 photoView.setOnPhotoTapListener { _, x, y ->
-                     val figura = figuras.find { isPointInPath(x, y, createPathFromFirebase(it)) }
-                     val pin = pines.find { isPointInPinArea(x, y, it.x, it.y, it.tapRadius) }
--
-                     when {
-                         figura != null -> {
-                             activePath = createPathFromFirebase(figura)
-@@ -183,92 +212,69 @@
-                             Handler(Looper.getMainLooper()).postDelayed({
-                                 activeHighlight = null
-                                 when (figura.tipoDestino) {
--                                    "detalle" -> {
--                                        navController.navigate("${VirtualVisitRoutes.DETALLE_GENERICO}/${figura.valorDestino}")
--                                    }
--
-+                                    "detalle" -> navController.navigate("${VirtualVisitRoutes.DETALLE_GENERICO}/${figura.valorDestino}")
-                                     "plano" -> {
-                                         val destinoId = figura.valorDestino
--                                        if (destinoId.isNotBlank()) {
--                                            //  Usar el navController local (no el root)
--                                            navController.navigate("${VirtualVisitRoutes.PLANO}/$destinoId")
--                                        } else {
--                                            Toast.makeText(context, context.getString(R.string.notdefined_destinyplane), Toast.LENGTH_SHORT).show()
--                                        }
-+                                        if (destinoId.isNotBlank()) navController.navigate("${VirtualVisitRoutes.PLANO}/$destinoId")
-+                                        else Toast.makeText(
-+                                            context,
-+                                            context.getString(R.string.notdefined_destinyplane),
-+                                            Toast.LENGTH_SHORT
-+                                        ).show()
-                                     }
--
--
--                                    else -> {
--                                        Toast.makeText(context, context.getString(R.string.notdefined_destiny), Toast.LENGTH_SHORT).show()
--                                    }
-+                                    else -> Toast.makeText(
-+                                        context,
-+                                        context.getString(R.string.notdefined_destiny),
-+                                        Toast.LENGTH_SHORT
-+                                    ).show()
-                                 }
--
-                             }, 200)
-                         }
- 
-                         pin != null -> {
-                             isPinPressed = true
--                            Log.d("PlanoScreen", " Pin pulsado  ${pin.id}, tipoDestino=${pin.tipoDestino}, valorDestino=${pin.valorDestino}")
--                            try {
--                                Handler(Looper.getMainLooper()).postDelayed({
--                                    try {
--                                        isPinPressed = false
--                                        val tipo = pin.tipoDestino?.lowercase()
--                                        val destino = pin.valorDestino
--                                        Log.d("PlanoScreen", " Dentro del handler  tipo=$tipo, destino=$destino")
--
--                                        when (tipo) {
--                                            "ruta" -> {
--                                                val destino = pin.valorDestino ?: return@postDelayed
--                                                Log.d("PlanoScreen", " Navegando (root) a: $destino con pinId=${pin.id}")
--                                                rootNavController?.navigate("${AppRoutes.PIN_ENTRADA_MONASTERIO}/${pin.id}")
--                                            }
--
--                                            "detalle" -> {
--                                                Log.d("PlanoScreen", " Navegando a detalle: ${pin.id}")
--                                                navController.navigate(AppRoutes.PIN_DETALLE + "/${pin.id}")
--                                            }
--                                            else -> {
--                                                Log.w("PlanoScreen", "锔 tipoDestino desconocido: $tipo")
--                                            }
--                                        }
--                                    } catch (e: Exception) {
--                                        Log.e("PlanoScreen", " Error dentro del Handler al navegar (interno)", e)
--                                    }
--                                }, 200)
--                            } catch (e: Exception) {
--                                Log.e("PlanoScreen", " Error al iniciar el Handler (externo)", e)
--                            }
-+                            Handler(Looper.getMainLooper()).postDelayed({
-+                                isPinPressed = false
-+                                when (pin.tipoDestino?.lowercase()) {
-+                                    "ruta" -> if (pin.valorDestino != null) rootNavController?.navigate(
-+                                        "${AppRoutes.PIN_ENTRADA_MONASTERIO}/${pin.id}"
-+                                    )
-+                                    "detalle" -> navController.navigate(AppRoutes.PIN_DETALLE + "/${pin.id}")
-+                                }
-+                            }, 200)
-                         }
- 
--
--
--                        else -> Toast.makeText(context, context.getString(R.string.out_interactive_area), Toast.LENGTH_SHORT).show()
-+                        else -> Toast.makeText(
-+                            context,
-+                            context.getString(R.string.out_interactive_area),
-+                            Toast.LENGTH_SHORT
-+                        ).show()
-                     }
-                 }
--
-                 photoViewRef = photoView
-             }
-         )
- 
--        // --- Controles de zoom ---
-+        // 2. Controles de Zoom
-         Column(
-             modifier = Modifier
-                 .align(Alignment.CenterEnd)
-                 .padding(end = 16.dp, bottom = 80.dp),
-             verticalArrangement = Arrangement.spacedBy(12.dp)
-         ) {
--            if(botonesVisibles) {
-+            if (botonesVisibles) {
-                 FloatingActionButton(onClick = {
-                     photoViewRef?.let {
--                        val newScale = (it.scale + 0.2f).coerceAtMost(it.maximumScale)
--                        it.setScale(newScale, true)
-+                        it.setScale(
-+                            (it.scale + 0.2f).coerceAtMost(
-+                                it.maximumScale
-+                            ), true
-+                        )
-                     }
-                 }) {
-                     Box(
--                        modifier = Modifier
--                            .size(48.dp)
--                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),
-+                        modifier = Modifier.size(48.dp)
-+                            .background(Color.White.copy(alpha = 0.7f), CircleShape),
-                         contentAlignment = Alignment.Center
-                     ) {
-                         Icon(
-@@ -278,17 +284,18 @@
-                         )
-                     }
-                 }
--
-                 FloatingActionButton(onClick = {
-                     photoViewRef?.let {
--                        val newScale = (it.scale - 0.2f).coerceAtLeast(it.minimumScale)
--                        it.setScale(newScale, true)
-+                        it.setScale(
-+                            (it.scale - 0.2f).coerceAtLeast(
-+                                it.minimumScale
-+                            ), true
-+                        )
-                     }
-                 }) {
-                     Box(
--                        modifier = Modifier
--                            .size(48.dp)
--                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),
-+                        modifier = Modifier.size(48.dp)
-+                            .background(Color.White.copy(alpha = 0.7f), CircleShape),
-                         contentAlignment = Alignment.Center
-                     ) {
-                         Icon(
-@@ -298,18 +305,17 @@
-                         )
-                     }
-                 }
--
-                 FloatingActionButton(onClick = {
-                     photoViewRef?.apply {
--                        setScale(initialZoom, true)
--                        setTranslationX(0f)
--                        setTranslationY(0f)
-+                        setScale(
-+                            initialZoom,
-+                            true
-+                        ); setTranslationX(0f); setTranslationY(0f)
-                     }
-                 }) {
-                     Box(
--                        modifier = Modifier
--                            .size(48.dp)
--                            .background(Color.White.copy(alpha = 0.7f), shape = CircleShape),
-+                        modifier = Modifier.size(48.dp)
-+                            .background(Color.White.copy(alpha = 0.7f), CircleShape),
-                         contentAlignment = Alignment.Center
-                     ) {
-                         Icon(
-@@ -322,19 +328,17 @@
-             }
-         }
- 
--        // --- Bot贸n "Atr谩s" ---
-+        // 3. Bot贸n Atr谩s
-         IconButton(
-             onClick = {
-                 if (!navController.popBackStack()) {
-                     if (planoId == "monasterio_exterior") {
--                        // Si estamos en el plano ra铆z, volver al inicio de la app
-                         rootNavController?.popBackStack()
--                        // o si prefieres ir expl铆citamente:
--                        // rootNavController?.navigate(AppRoutes.INICIO)
-                     } else {
--                        // Si no es el exterior, volver al exterior como fallback
-                         navController.navigate("${VirtualVisitRoutes.PLANO}/monasterio_exterior") {
--                            popUpTo("${VirtualVisitRoutes.PLANO}/monasterio_exterior") { inclusive = false }
-+                            popUpTo("${VirtualVisitRoutes.PLANO}/monasterio_exterior") {
-+                                inclusive = false
-+                            }
-                         }
-                     }
-                 }
-@@ -352,20 +356,115 @@
-             )
-         }
- 
--    }
--}
-+        // 4. TUTORIALES (L贸gica Step-by-Step)
-+        val isMainMap = (planoId == "monasterio_exterior")
-+
-+        if (showTutorialSession) {
-+            if (isMainMap && !isMainDismissed) {
-+                // --- TUTORIAL MAPA PRINCIPAL (3 Pasos) ---
-+                val steps = listOf(
-+                    // Paso 0: Bienvenida -> Foco Centro
-+                    TutorialStep(
-+                        description = stringResource(R.string.map_tutorial_body1),
-+                        focusCenter = backButtonOffset,
-+                        focusRadius = 120f
-+                    ),
-+                    // Paso 1: Zoom -> Foco Abajo Derecha
-+                    TutorialStep(
-+                        description = stringResource(R.string.map_tutorial_body1_2),
-+                        focusCenter = centerOffset,
-+                        focusRadius = 220f
-+                    ),
-+                    // Paso 2: Atr谩s -> Foco Arriba Izquierda
-+                    TutorialStep(
-+                        description = stringResource(R.string.map_tutorial_body1_3),
-+                        focusCenter = rightbuttons,
-+                        focusRadius = 400f
-+                    )
-+                )
-+
-+                if (currentStepIndex < steps.size) {
-+                    val step = steps[currentStepIndex]
-+                    val isLastStep = currentStepIndex == steps.size - 1
-+                    val btnText =
-+                        if (isLastStep) stringResource(R.string.understand) else stringResource(R.string.next)
-+
-+                    GenericTutorialOverlay(
-+                        title = step.title,
-+                        description = step.description,
-+                        highlightCenter = step.focusCenter,
-+                        highlightRadius = step.focusRadius,
-+                        buttonText = btnText, // Pasamos el texto din谩mico
-+                        onCloseClicked = { permanent ->
-+                            if (isLastStep) {
-+                                // Fin del tutorial
-+                                showTutorialSession = false
-+                                if (permanent) viewModel.dismissMainMap()
-+                            } else {
-+                                // Siguiente paso
-+                                currentStepIndex++
-+                                if (permanent) viewModel.dismissMainMap() // Guardar preferencia si marca
-+                            }
-+                        }
-+                    )
-+                }
- 
--// --- Helper para crear Paths de Firebase ---
-+            } else if (!isMainMap && !isSubDismissed) {
-+                // --- TUTORIAL SUB-MAPA (2 Pasos) ---
-+
-+                val subSteps = listOf(
-+                    // PASO 1: Bienvenida a la sala (Foco Circular en el centro)
-+                    TutorialStep(
-+                        description = stringResource(R.string.submapa_1),
-+                        focusCenter = backButtonOffset,
-+                        focusRadius = 120f
-+                    ),
-+
-+                    // PASO 2: C贸mo salir (Foco Cuadrado en el bot贸n atr谩s)
-+                    TutorialStep(
-+                        description = stringResource(R.string.submapa_2),
-+                        focusCenter = pins,
-+                        focusRadius = 300f,
-+                    )
-+                )
-+
-+                // L贸gica de control de pasos
-+                if (currentStepIndex < subSteps.size) {
-+                    val step = subSteps[currentStepIndex]
-+                    val isLastStep = currentStepIndex == subSteps.size - 1
-+                    val btnText =
-+                        if (isLastStep) stringResource(R.string.understand) else stringResource(R.string.next)
-+
-+                    GenericTutorialOverlay(
-+                        description = step.description,
-+                        highlightCenter = step.focusCenter,
-+                        highlightRadius = step.focusRadius,
-+                        buttonText = btnText,
-+                        onCloseClicked = { permanent ->
-+                            if (isLastStep) {
-+                                showTutorialSession = false
-+                                if (permanent) viewModel.dismissSubMap()
-+                            } else {
-+                                currentStepIndex++
-+                                if (permanent) viewModel.dismissSubMap()
-+                            }
-+                        }
-+                    )
-+                }
-+            }
-+        }
-+    }
-+} // <--- AQU TERMINA LA FUNCIN PlanoScreen
-+
-+// --- Helper para crear Paths (AHORA EST FUERA, COMO DEBE SER) ---
- private fun createPathFromFirebase(figura: FiguraData): Path {
-     val path = Path()
-     if (figura.path.isEmpty()) return path
--
-     path.moveTo(figura.path[0].x, figura.path[0].y)
-     for (i in 1 until figura.path.size) {
-         path.lineTo(figura.path[i].x, figura.path[i].y)
-     }
-     path.close()
--
-     val matrix = Matrix().apply {
-         setScale(figura.scale, figura.scale)
-         postTranslate(figura.offsetX, figura.offsetY)
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]" date="1763075316945" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 14/11/2025 0:07 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]" date="1762634936332" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 21:48 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]" date="1762638861779" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 22:54 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,17 +0,0 @@
--Index: .idea/gradle.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/gradle.xml b/.idea/gradle.xml
----- a/.idea/gradle.xml	(revision 1c0bfc618ece38c61714e2813735e3a928424a11)
--+++ b/.idea/gradle.xml	(date 1762636134357)
--@@ -1,5 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--+  <component name="GradleMigrationSettings" migrationVersion="1" />
--   <component name="GradleSettings">
--     <option name="linkedExternalProjectsSettings">
--       <GradleProjectSettings>
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,76 +0,0 @@
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml	(revision 749e348327723e32182d8232c1f468717dd07de8)
--+++ /dev/null	(revision 749e348327723e32182d8232c1f468717dd07de8)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]" date="1762203554276" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 03/11/2025 21:59 [Changes]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch	(revision 749e348327723e32182d8232c1f468717dd07de8)
--+++ /dev/null	(revision 749e348327723e32182d8232c1f468717dd07de8)
--@@ -1,40 +0,0 @@
---Index: app/build.gradle.kts
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"com.github.chrisbanes:PhotoView:2.3.0\")\r\n\r\n\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/build.gradle.kts b/app/build.gradle.kts
------ a/app/build.gradle.kts	(revision 5de2861fc1fa7434418f05b9799750836a56e25d)
---+++ b/app/build.gradle.kts	(date 1762107218284)
---@@ -74,7 +74,7 @@
---     implementation("com.google.android.material:material:1.10.0")
--- 
---     // Plano Interactivo
----    implementation("com.github.chrisbanes:PhotoView:2.3.0")
---+    implementation("io.github.chrisbanes:PhotoView:2.3.0")
--- 
--- 
--- }
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.nextapp.monasterio\"> <application\r\n    android:name=\".MonasteryApplication\"\r\n    android:allowBackup=\"true\"\r\n    android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n    android:fullBackupContent=\"@xml/backup_rules\"\r\n    android:icon=\"@drawable/escudo\"\r\n    android:label=\"@string/app_name\"\r\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n    android:supportsRtl=\"true\"\r\n    android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n    <activity\r\n        android:name=\".MainActivity\"\r\n        android:exported=\"true\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n        <intent-filter>\r\n            <action android:name=\"android.intent.action.MAIN\" />\r\n            <category android:name=\"android.intent.category.LAUNCHER\" />\r\n        </intent-filter>\r\n    </activity>\r\n    <activity\r\n        android:name=\"com.nextapp.monasterio.ui.virtualvisit.VirtualVisitActivity\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\" />\r\n</application>\r\n\r\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
------ a/app/src/main/AndroidManifest.xml	(revision 5de2861fc1fa7434418f05b9799750836a56e25d)
---+++ b/app/src/main/AndroidManifest.xml	(date 1762106092917)
---@@ -19,9 +19,6 @@
---             <category android:name="android.intent.category.LAUNCHER" />
---         </intent-filter>
---     </activity>
----    <activity
----        android:name="com.nextapp.monasterio.ui.virtualvisit.VirtualVisitActivity"
----        android:theme="@style/Theme.SMOV_Monasterio" />
--- </application>
--- 
--- </manifest>
---\ No newline at end of file
--Index: .idea/gradle.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/gradle.xml b/.idea/gradle.xml
----- a/.idea/gradle.xml	(revision 749e348327723e32182d8232c1f468717dd07de8)
--+++ b/.idea/gradle.xml	(date 1762878195656)
--@@ -1,5 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--+  <component name="GradleMigrationSettings" migrationVersion="1" />
--   <component name="GradleSettings">
--     <option name="linkedExternalProjectsSettings">
--       <GradleProjectSettings>
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_54_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,258 +0,0 @@
--Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.ComponentActivity\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val newDensity= Density(\r\n                density= currentDensity.density,\r\n                fontScale = currentDensity.fontScale*appFontScale\r\n            )\r\n            CompositionLocalProvider(LocalDensity provides newDensity) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    //  Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n    //  Rutas inmersivas\r\n    val immersiveRoutes = listOf(AppRoutes.PIN_DETALLE)\r\n    val isImmersive = currentRoute in immersiveRoutes\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    //  Actualizar t铆tulo\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            currentTitle.value = when (route) {\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    if (isImmersive) {\r\n        // \uD83C\uDF0C Vista inmersiva sin barra ni men煤\r\n        AppNavigationHost(\r\n            navController = navController,\r\n            modifier = Modifier.fillMaxSize()\r\n        )\r\n    } else {\r\n        // \uD83E\uDDF1 Vista normal con barra y men煤\r\n        ModalNavigationDrawer(\r\n            drawerState = drawerState,\r\n            drawerContent = {\r\n                AppDrawerContent(\r\n                    navController = navController,\r\n                    scope = scope,\r\n                    drawerState = drawerState\r\n                )\r\n            },\r\n            gesturesEnabled = gesturesEnabled\r\n        ) {\r\n            Scaffold(\r\n                topBar = {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            IconButton(onClick = {\r\n                                Toast.makeText(context, \"Modo edici贸n (pr贸ximamente)\", Toast.LENGTH_SHORT).show()\r\n                            }) {\r\n                                Icon(\r\n                                    painter = painterResource(id = R.drawable.lapiz),\r\n                                    contentDescription = stringResource(id = R.string.edit_mode)\r\n                                )\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            ) { paddingValues ->\r\n                AppNavigationHost(\r\n                    navController = navController,\r\n                    modifier = Modifier.padding(paddingValues)\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
----- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
--+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1762637290372)
--@@ -1,8 +1,8 @@
-- package com.nextapp.monasterio
-- 
--+
-- import android.os.Bundle
-- import android.widget.Toast
---import androidx.activity.ComponentActivity
-- import androidx.activity.compose.setContent
-- import androidx.compose.foundation.layout.*
-- import androidx.compose.material3.*
--@@ -18,8 +18,14 @@
-- import kotlinx.coroutines.launch
-- import androidx.appcompat.app.AppCompatActivity
-- import androidx.appcompat.app.AppCompatDelegate
--+import androidx.compose.foundation.Image
--+import androidx.compose.foundation.border
--+import androidx.compose.ui.graphics.Color
--+import androidx.compose.ui.layout.ContentScale
--+import androidx.compose.ui.platform.LocalConfiguration
-- import androidx.compose.ui.platform.LocalDensity
-- import androidx.compose.ui.unit.Density
--+import androidx.compose.ui.unit.dp
-- import androidx.navigation.compose.currentBackStackEntryAsState
-- import com.nextapp.monasterio.utils.FontSize
-- 
--@@ -52,15 +58,39 @@
--     val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)
--     val scope = rememberCoroutineScope()
-- 
--+    val stringEspanyol= "Espa帽ol"
--+    val stringAleman= "Deutsch"
--+    val stringIngles= "English"
--+
--+
--+    var mostrarIdioma by remember { mutableStateOf(false) }
--+
--+    val configuration = LocalConfiguration.current
--+    val currentLanguageCode = configuration.locales[0].language
--+
--+    var idioma by remember { mutableStateOf(currentLanguageCode) }
--+
--+    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)
--+
--     val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }
-- 
--     //  Detectar ruta actual
--     val currentBackStackEntry by navController.currentBackStackEntryAsState()
--     val currentRoute = currentBackStackEntry?.destination?.route
-- 
---    //  Rutas inmersivas
---    val immersiveRoutes = listOf(AppRoutes.PIN_DETALLE)
---    val isImmersive = currentRoute in immersiveRoutes
--+    // --- 隆AQU EST LA CORRECCIN! ---
--+    // En lugar de una lista, comprobamos si la ruta "empieza por" la ruta base,
--+    // ya que ahora tiene argumentos (ej: "panorama/monastery_1")
--+
--+    // Comprueba si la ruta actual empieza por "panorama"
--+    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true
--+    // Comprueba si la ruta actual es exactamente "pin_detalle"
--+    val isPinDetalle = currentRoute == AppRoutes.PIN_DETALLE
--+
--+    // La vista es inmersiva si CUALQUIERA de las dos es verdadera
--+    val isImmersive = isPanorama || isPinDetalle
--+    // --- FIN DE LA CORRECCIN ---
--+
-- 
--     val gesturesEnabled = when(currentRoute){
--         AppRoutes.VIRTUAL_VISIT -> false
--@@ -71,7 +101,11 @@
--     LaunchedEffect(navController) {
--         navController.currentBackStackEntryFlow.collect { backStackEntry ->
--             val route = backStackEntry.destination.route
---            currentTitle.value = when (route) {
--+            // --- MODIFICACIN SUGERIDA ---
--+            // A帽adimos esto para que no intente buscar un t铆tulo para la ruta con argumento
--+            val routeBase = route?.split("/")?.firstOrNull() ?: route
--+
--+            currentTitle.value = when (routeBase) { // <-- Usamos routeBase
--                 AppRoutes.INFO -> context.getString(R.string.title_info_general)
--                 AppRoutes.HISTORIA -> context.getString(R.string.title_history)
--                 AppRoutes.GALERIA -> context.getString(R.string.title_gallery)
--@@ -81,6 +115,7 @@
--                 AppRoutes.RESERVA,
--                 AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)
--                 AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)
--+                // (No es necesario a帽adir PANORAMA aqu铆, ya que ser谩 inmersiva y no mostrar谩 t铆tulo)
--                 else -> context.getString(R.string.title_inicio)
--             }
--         }
--@@ -131,8 +166,46 @@
--                             }
--                         },
--                         actions = {
--+                            Box {
--+                                OutlinedIconButton(onClick = {
--+                                    mostrarIdioma = true
--+                                }) {
--+                                    val iconRes =
--+                                        if (idioma == "es" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == "de" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido
--+                                    Image(
--+                                        painter = painterResource(id = iconRes),
--+                                        contentDescription = if (idioma == "es" || idioma == stringEspanyol ) stringEspanyol
--+                                        else if (idioma == "de" || idioma == stringAleman) stringAleman else stringIngles,
--+                                        contentScale = ContentScale.Crop
--+                                    )
--+                                }
--+                                DropdownMenu(
--+                                    expanded = mostrarIdioma,
--+                                    onDismissRequest = { mostrarIdioma = false },
--+                                    modifier = Modifier.fillMaxWidth(0.8f),
--+                                ) {
--+                                    idiomasDisponibles.forEach { idiomaSlot ->
--+                                        DropdownMenuItem(
--+                                            text = { Text(idiomaSlot) },
--+                                            onClick = {
--+                                                idioma = idiomaSlot
--+                                                mostrarIdioma = false
--+                                                if(idiomaSlot == stringEspanyol)
--+                                                    LanguageHelper.saveLocale(context, "es")
--+                                                else if(idiomaSlot == stringAleman){
--+                                                    LanguageHelper.saveLocale(context, "de")
--+                                                } else LanguageHelper.saveLocale(context, "en")
--+                                            }
--+                                        )
--+                                    }
--+                                }
--+                            }
--                             IconButton(onClick = {
---                                Toast.makeText(context, "Modo edici贸n (pr贸ximamente)", Toast.LENGTH_SHORT).show()
--+                                Toast.makeText(
--+                                    context,
--+                                    "Modo edici贸n (pr贸ximamente)",
--+                                    Toast.LENGTH_SHORT
--+                                ).show()
--                             }) {
--                                 Icon(
--                                     painter = painterResource(id = R.drawable.lapiz),
--Index: settings.gradle.kts
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>pluginManagement {\r\n    repositories {\r\n        google {\r\n            content {\r\n                includeGroupByRegex(\"com\\\\.android.*\")\r\n                includeGroupByRegex(\"com\\\\.google.*\")\r\n                includeGroupByRegex(\"androidx.*\")\r\n            }\r\n        }\r\n        mavenCentral()\r\n        gradlePluginPortal()\r\n    }\r\n}\r\ndependencyResolutionManagement {\r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n    repositories {\r\n        google()\r\n        mavenCentral( )\r\n        maven { url = uri(\"https://www.jitpack.io\") }\r\n    }\r\n}\r\n\r\nrootProject.name = \"SMOV_Monasterio\"\r\ninclude(\":app\")\r\n 
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/settings.gradle.kts b/settings.gradle.kts
----- a/settings.gradle.kts	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
--+++ b/settings.gradle.kts	(date 1762637928480)
--@@ -16,7 +16,7 @@
--     repositories {
--         google()
--         mavenCentral( )
---        maven { url = uri("https://www.jitpack.io") }
--+        maven { url = uri("https://jitpack.io") }
--     }
-- }
-- 
--Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.*\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.*\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    navController: NavHostController,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen() }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen() }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen() }\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n\r\n        // \uD83E\uDDED M贸dulo de visita virtual\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController)\r\n        }\r\n\r\n        composable(\r\n            route = \"pin_detalle/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            PinDetalleFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController\r\n            )\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1762638506592)
--@@ -40,9 +40,27 @@
--         composable(AppRoutes.GALERIA)  { GaleriaScreen() }
--         composable(AppRoutes.PERFIL)   { ProfileScreen() }
--         composable(AppRoutes.AJUSTES)  { AjustesScreen() }
--+
--+        composable(
--+            route = AppRoutes.PANORAMA + "/{vistaId}", // Define la ruta con argumento
--+            arguments = listOf(navArgument("vistaId") { type = NavType.StringType })
--+        ) { backStackEntry ->
--+            // Recoge el argumento
--+            val vistaId = backStackEntry.arguments?.getString("vistaId")
--+
--+            // Llama a PanoramaScreen con el ID y el NavController
--+            if (vistaId != null) {
--+                PanoramaScreen(
--+                    vistaId = vistaId,
--+                    navController = navController
--+                )
--+            }
--+        }
--+
--         composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }
--         composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }
-- 
--+
--         composable(
--             route = AppRoutes.CONFIRMACION_RESERVA + "/{nombre}/{email}/{fecha}/{hora}",
--             arguments = listOf(
--Index: app/build.gradle.kts
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    implementation(libs.google.firebase.firestore)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"io.github.chrisbanes:PhotoView:2.3.0\")\r\n\r\n    // Cloudinary\r\n    implementation(\"io.coil-kt:coil-compose:2.7.0\")\r\n\r\n\r\n\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/build.gradle.kts b/app/build.gradle.kts
----- a/app/build.gradle.kts	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
--+++ b/app/build.gradle.kts	(date 1762638050671)
--@@ -80,6 +80,8 @@
--     // Cloudinary
--     implementation("io.coil-kt:coil-compose:2.7.0")
-- 
--+    implementation("com.github.hannesa2:panoramagl:1.14")
--+
-- 
-- 
-- }
--Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci贸n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti贸n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
----- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
--+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1762638506598)
--@@ -16,4 +16,6 @@
--     const val CONFIRMACION_RESERVA = "confirmacion_reserva"
--     const val VIRTUAL_VISIT = "virtual_visit"
--     const val PIN_DETALLE = "pin_detalle"
--+
--+    const val PANORAMA = "panorama"
-- }
--Index: gradle/libs.versions.toml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>[versions]\r\nagp = \"8.11.1\" #no cambiar de la 8.11.1\r\nkotlin = \"2.0.21\"\r\ncoreKtx = \"1.17.0\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nlifecycleRuntimeKtx = \"2.9.4\"\r\nactivityCompose = \"1.11.0\"\r\ncomposeBom = \"2025.10.01\"\r\n#Practica\r\nconstraintlayoutCompose = \"1.1.1\"\r\nnavigationCompose = \"2.9.5\"\r\nfoundation = \"1.9.4\"\r\nappcompat = \"1.7.0\"\r\nmaterial = \"1.12.0\"\r\nfirebase-gservices = \"4.4.4\"\r\nfirebase-bom = \"33.1.0\"\r\nfirebaseFirestore = \"26.0.2\"\r\n\r\n[libraries]\r\nandroidx-core-ktx = { group = \"androidx.core\", name = \"core-ktx\", version.ref = \"coreKtx\" }\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\nandroidx-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nandroidx-espresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nandroidx-lifecycle-runtime-ktx = { group = \"androidx.lifecycle\", name = \"lifecycle-runtime-ktx\", version.ref = \"lifecycleRuntimeKtx\" }\r\nandroidx-activity-compose = { group = \"androidx.activity\", name = \"activity-compose\", version.ref = \"activityCompose\" }\r\nandroidx-compose-bom = { group = \"androidx.compose\", name = \"compose-bom\", version.ref = \"composeBom\" }\r\nandroidx-ui = { group = \"androidx.compose.ui\", name = \"ui\" }\r\nandroidx-ui-graphics = { group = \"androidx.compose.ui\", name = \"ui-graphics\" }\r\nandroidx-ui-tooling = { group = \"androidx.compose.ui\", name = \"ui-tooling\" }\r\nandroidx-ui-tooling-preview = { group = \"androidx.compose.ui\", name = \"ui-tooling-preview\" }\r\nandroidx-ui-test-manifest = { group = \"androidx.compose.ui\", name = \"ui-test-manifest\" }\r\nandroidx-ui-test-junit4 = { group = \"androidx.compose.ui\", name = \"ui-test-junit4\" }\r\nandroidx-material3 = { group = \"androidx.compose.material3\", name = \"material3\" }\r\n#Practica\r\nconstraintlayout-compose = { module = \"androidx.constraintlayout:constraintlayout-compose\", version.ref = \"constraintlayoutCompose\" }\r\nnavigation-compose = { module = \"androidx.navigation:navigation-compose\", version.ref = \"navigationCompose\" }\r\nandroidx-compose-foundation = { group = \"androidx.compose.foundation\", name = \"foundation\", version.ref = \"foundation\" }\r\nandroidx-appcompat = { module = \"androidx.appcompat:appcompat\", version.ref = \"appcompat\" }\r\ngoogle-material = { module = \"com.google.android.material:material\", version.ref = \"material\" }\r\nfirebase-bom = { module = \"com.google.firebase:firebase-bom\", version.ref = \"firebase-bom\" }\r\nfirebase-firestore = { module = \"com.google.firebase:firebase-firestore-ktx\" }\r\ngoogle-firebase-firestore = { group = \"com.google.firebase\", name = \"firebase-firestore\", version.ref = \"firebaseFirestore\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\nkotlin-android = { id = \"org.jetbrains.kotlin.android\", version.ref = \"kotlin\" }\r\nkotlin-compose = { id = \"org.jetbrains.kotlin.plugin.compose\", version.ref = \"kotlin\" }\r\nfirebase-gservices = { id = \"com.google.gms.google-services\", version.ref = \"firebase-gservices\" }\r\n\r\n\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
----- a/gradle/libs.versions.toml	(revision 39a86368e80442156ba767c8ea88d7fdae822333)
--+++ b/gradle/libs.versions.toml	(date 1762638710995)
--@@ -1,6 +1,6 @@
-- [versions]
-- agp = "8.11.1" #no cambiar de la 8.11.1
---kotlin = "2.0.21"
--+kotlin = "2.2.0"
-- coreKtx = "1.17.0"
-- junit = "4.13.2"
-- junitVersion = "1.3.0"
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]" date="1763066246225" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 13/11/2025 21:35 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,17 +0,0 @@
--Index: .idea/gradle.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/gradle.xml b/.idea/gradle.xml
----- a/.idea/gradle.xml	(revision 1c0bfc618ece38c61714e2813735e3a928424a11)
--+++ b/.idea/gradle.xml	(date 1762635811330)
--@@ -1,5 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--+  <component name="GradleMigrationSettings" migrationVersion="1" />
--   <component name="GradleSettings">
--     <option name="linkedExternalProjectsSettings">
--       <GradleProjectSettings>
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,470 +0,0 @@
--Index: app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun HomeScreenContent(navController:NavController, modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {\r\n        val (background, crest, title, btnVisit, btnBook) = createRefs()\r\n        Image(\r\n            painter = painterResource(id = R.drawable.monastery_background),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop,\r\n            modifier = Modifier.constrainAs(background) {\r\n                top.linkTo(parent.top)\r\n                bottom.linkTo(parent.bottom)\r\n                start.linkTo(parent.start)\r\n                end.linkTo(parent.end)\r\n                width = Dimension.fillToConstraints\r\n                height = Dimension.fillToConstraints\r\n\r\n                centerVerticallyTo(parent)\r\n            }\r\n        )\r\n        Image(\r\n            painter = painterResource(id = R.drawable.huelgas_inicio),\r\n            contentDescription = \"Escudo\",\r\n            contentScale = ContentScale.FillWidth,\r\n            modifier = Modifier\r\n                .constrainAs(crest) {\r\n                    top.linkTo(parent.top, margin = 24.dp)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.wrapContent\r\n                }\r\n        )\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIRTUAL_VISIT)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVisit) {\r\n                    bottom.linkTo(btnBook.top, margin = 72.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_map_24),\r\n                contentDescription = null,\r\n                modifier = Modifier\r\n                    .padding(end = 16.dp)\r\n                    .size(48.dp)\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.virtual_visit),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.OPCIONES_RESERVA)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnBook) {\r\n                    bottom.linkTo(parent.bottom, margin = 186.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_time_24),\r\n                contentDescription = null,\r\n                modifier = Modifier.padding(end = 16.dp).size(48.dp)\r\n\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.book_appointment),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(date 1763074982128)
--@@ -13,12 +13,15 @@
-- import androidx.compose.material3.Text
-- import androidx.compose.runtime.Composable
-- import androidx.compose.runtime.DisposableEffect
--+import androidx.compose.ui.Alignment
-- import androidx.compose.ui.Modifier
--+import androidx.compose.ui.graphics.Color
-- import androidx.compose.ui.layout.ContentScale
-- import androidx.compose.ui.platform.LocalConfiguration
-- import androidx.compose.ui.platform.LocalContext
-- import androidx.compose.ui.res.painterResource
-- import androidx.compose.ui.res.stringResource
--+import androidx.compose.ui.text.style.TextAlign
-- import androidx.compose.ui.tooling.preview.Preview
-- import androidx.compose.ui.unit.dp
-- import androidx.compose.ui.unit.sp
--@@ -47,7 +50,7 @@
--     }
-- 
--     ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {
---        val (background, crest, title, btnVisit, btnBook) = createRefs()
--+        val (background, crest, title, btnVisit, btnChild,btnBook) = createRefs()
--         Image(
--             painter = painterResource(id = R.drawable.monastery_background),
--             contentDescription = null,
--@@ -84,24 +87,63 @@
--             shape = RoundedCornerShape(20.dp),
--             modifier = Modifier
--                 .constrainAs(btnVisit) {
---                    bottom.linkTo(btnBook.top, margin = 72.dp)
---                    start.linkTo(parent.start, margin = 40.dp)
---                    end.linkTo(parent.end, margin = 40.dp)
---                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
--+                    bottom.linkTo(btnChild.top, margin = 48.dp)
--+                    start.linkTo(parent.start, margin = 20.dp)
--+                    end.linkTo(parent.end, margin = 20.dp)
--+                    width = Dimension.fillToConstraints
--                 }
---                .height(60.dp)
--         ) {
---            Icon(
---                painter = painterResource(id = R.drawable.ic_map_24),
---                contentDescription = null,
---                modifier = Modifier
---                    .padding(end = 16.dp)
---                    .size(48.dp)
---            )
---            Text(
---                stringResource(id = R.string.virtual_visit),
---                fontSize = 22.sp
---            )
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            )  {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.ic_map_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
--+                )
--+                Text(
--+                    stringResource(id = R.string.virtual_visit),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center
--+                )
--+            }
--+        }
--+        Button(
--+            onClick = {
--+                navController.navigate(AppRoutes.MODO_NINYOS)
--+            },
--+            colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF6EB017)),
--+            shape = RoundedCornerShape(20.dp),
--+            modifier = Modifier
--+                .constrainAs(btnChild) {
--+                    bottom.linkTo(btnBook.top, margin = 48.dp)
--+                    start.linkTo(parent.start, margin = 20.dp)
--+                    end.linkTo(parent.end, margin = 20.dp)
--+                    width = Dimension.fillToConstraints
--+                }
--+        ) {
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            )  {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.outline_account_child_invert_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
--+                )
--+                Text(
--+                    stringResource(id = R.string.child_mode),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center
--+                )
--+            }
--         }
--         Button(
--             onClick = {
--@@ -112,22 +154,30 @@
--             modifier = Modifier
--                 .constrainAs(btnBook) {
--                     bottom.linkTo(parent.bottom, margin = 186.dp)
---                    start.linkTo(parent.start, margin = 40.dp)
---                    end.linkTo(parent.end, margin = 40.dp)
---                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
--+                    start.linkTo(parent.start, margin = 20.dp)
--+                    end.linkTo(parent.end, margin = 20.dp)
--+                    width = Dimension.fillToConstraints
--                 }
---                .height(60.dp)
--         ) {
---            Icon(
---                painter = painterResource(id = R.drawable.ic_time_24),
---                contentDescription = null,
---                modifier = Modifier.padding(end = 16.dp).size(48.dp)
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            ) {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.ic_time_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
-- 
---            )
---            Text(
---                stringResource(id = R.string.book_appointment),
---                fontSize = 22.sp
---            )
--+                )
--+                Text(
--+                    stringResource(id = R.string.book_appointment),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center,
--+                )
--+            }
--         }
--     }
-- }
--Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport androidx.compose.foundation.*\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.pager.HorizontalPager\r\nimport androidx.compose.foundation.pager.rememberPagerState\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalView\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.compose.ui.window.Dialog\r\nimport androidx.compose.ui.window.DialogProperties\r\nimport androidx.core.view.WindowCompat\r\nimport coil.compose.AsyncImage\r\nimport coil.load\r\nimport com.github.chrisbanes.photoview.PhotoView\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.models.Ubicacion\r\nimport java.util.Locale\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.res.stringResource\r\n\r\n@OptIn(ExperimentalFoundationApi::class)\r\n@Composable\r\nfun PinDetalleScreen(\r\n    pin: PinData,\r\n    onBack: () -> Unit,\r\n    onVer360: (() -> Unit)? = null\r\n) {\r\n    val view = LocalView.current\r\n    LaunchedEffect(Unit) {\r\n        val window = (view.context as? Activity)?.window\r\n        window?.let { WindowCompat.setDecorFitsSystemWindows(it, false) }\r\n    }\r\n\r\n    val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()\r\n\r\n    val pagerState = rememberPagerState(pageCount = { imagenes.size })\r\n    var selectedImageUrl by remember { mutableStateOf<String?>(null) }\r\n    var selectedImageTitle by remember { mutableStateOf<String?>(null) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val locale: Locale = configuration.locales[0]\r\n    val language = locale.language\r\n\r\n    val titulo_pin: String\r\n    val descripcion_pin: String?\r\n    val ubicacion_pin: Ubicacion?\r\n\r\n    when (language) {\r\n        \"es\" -> {\r\n            titulo_pin = pin.titulo\r\n            descripcion_pin = pin.descripcion\r\n            ubicacion_pin = pin.ubicacion\r\n        }\r\n        \"de\" -> {\r\n            titulo_pin = pin.tituloAleman\r\n            descripcion_pin = pin.descripcionAleman\r\n            ubicacion_pin = pin.ubicacionAleman\r\n        }\r\n        else -> {\r\n            titulo_pin = pin.tituloIngles\r\n            descripcion_pin = pin.descripcionIngles\r\n            ubicacion_pin = pin.ubicacionIngles\r\n        }\r\n    }\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.White)\r\n            .statusBarsPadding()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(horizontal = 16.dp)\r\n                .padding(bottom = 90.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // \uD83D\uDD19 Bot贸n atr谩s\r\n            Box(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 16.dp),\r\n                contentAlignment = Alignment.CenterStart\r\n            ) {\r\n                Image(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.go_back),\r\n                    modifier = Modifier\r\n                        .size(28.dp)\r\n                        .clickable { onBack() }\r\n                )\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            // \uD83C\uDFF7\uFE0F T铆tulo principal\r\n            Text(\r\n                text = buildString {\r\n                    append(titulo_pin)\r\n                    ubicacion_pin?.let { append(\" (${it.displayName})\") }\r\n                },\r\n                fontSize = 26.sp,\r\n                fontWeight = FontWeight.Bold,\r\n                color = Color.Black,\r\n                textAlign = TextAlign.Center,\r\n                modifier = Modifier.fillMaxWidth()\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(20.dp))\r\n\r\n            // \uD83D\uDDBC\uFE0F Carrusel con etiqueta (solo aqu铆)\r\n            if (imagenes.isNotEmpty()) {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(250.dp)\r\n                        .clip(RoundedCornerShape(16.dp))\r\n                        .border(3.dp, Color.Black, RoundedCornerShape(16.dp))\r\n                ) {\r\n                    HorizontalPager(state = pagerState) { page ->\r\n                        val imagen = imagenes[page]\r\n                        Box(modifier = Modifier.fillMaxSize()) {\r\n                            AsyncImage(\r\n                                model = imagen.url,\r\n                                contentDescription = imagen.etiqueta,\r\n                                contentScale = ContentScale.Crop,\r\n                                modifier = Modifier\r\n                                    .fillMaxSize()\r\n                                    .clickable {\r\n                                        selectedImageUrl = imagen.url\r\n                                        // \uD83D\uDC47 t铆tulo seg煤n idioma actual\r\n                                        selectedImageTitle = when (language) {\r\n                                            \"es\" -> imagen.titulo\r\n                                            \"de\" -> imagen.tituloAleman\r\n                                            else -> imagen.tituloIngles\r\n                                        }\r\n                                    }\r\n                            )\r\n\r\n                            // \uD83D\uDD39 Etiqueta abajo a la izquierda (solo carrusel)\r\n                            Text(\r\n                                text = imagen.etiqueta,\r\n                                color = Color.White,\r\n                                fontSize = 14.sp,\r\n                                modifier = Modifier\r\n                                    .align(Alignment.BottomStart)\r\n                                    .background(Color.Black.copy(alpha = 0.6f))\r\n                                    .padding(horizontal = 10.dp, vertical = 6.dp)\r\n                            )\r\n                        }\r\n                    }\r\n\r\n                    // \uD83D\uDD38 Indicadores inferiores\r\n                    Row(\r\n                        Modifier\r\n                            .align(Alignment.BottomCenter)\r\n                            .padding(bottom = 6.dp)\r\n                    ) {\r\n                        repeat(imagenes.size) { index ->\r\n                            val selected = pagerState.currentPage == index\r\n                            Box(\r\n                                Modifier\r\n                                    .padding(3.dp)\r\n                                    .size(if (selected) 8.dp else 6.dp)\r\n                                    .background(\r\n                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),\r\n                                        shape = CircleShape\r\n                                    )\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n                Spacer(modifier = Modifier.height(24.dp))\r\n            }\r\n\r\n            // \uD83D\uDCDD Descripci贸n\r\n            val descripcion = descripcion_pin ?: \"\"\r\n            if (descripcion.isNotBlank()) {\r\n                val textScrollState = rememberScrollState()\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .weight(1f)\r\n                        .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))\r\n                        .clip(RoundedCornerShape(8.dp))\r\n                ) {\r\n                    Text(\r\n                        text = descripcion,\r\n                        fontSize = 16.sp,\r\n                        color = Color.DarkGray,\r\n                        lineHeight = 22.sp,\r\n                        modifier = Modifier\r\n                            .fillMaxSize()\r\n                            .padding(horizontal = 12.dp, vertical = 8.dp)\r\n                            .verticalScroll(textScrollState)\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD18 Bot贸n 360\r\n        onVer360?.let {\r\n            Box(\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomCenter)\r\n                    .fillMaxWidth()\r\n                    .background(Color.White)\r\n                    .navigationBarsPadding()\r\n                    .padding(horizontal = 16.dp, vertical = 12.dp)\r\n            ) {\r\n                Button(\r\n                    onClick = it,\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(56.dp),\r\n                    colors = ButtonDefaults.buttonColors(containerColor = Color.Black),\r\n                    shape = RoundedCornerShape(12.dp)\r\n                ) {\r\n                    Text(\r\n                        text = stringResource(R.string.see_360),\r\n                        color = Color.White,\r\n                        fontSize = 18.sp,\r\n                        fontWeight = FontWeight.Bold,\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD0D Zoom con t铆tulo traducido\r\n        if (selectedImageUrl != null) {\r\n            ZoomableImageDialog(\r\n                imageUrl = selectedImageUrl!!,\r\n                label = selectedImageTitle ?: \"\",\r\n                onDismiss = {\r\n                    selectedImageUrl = null\r\n                    selectedImageTitle = null\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// \uD83D\uDD0D Di谩logo de zoom\r\n@Composable\r\nprivate fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {\r\n    Dialog(\r\n        onDismissRequest = onDismiss,\r\n        properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)\r\n    ) {\r\n        Box(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .background(Color.Black.copy(alpha = 0.95f))\r\n        ) {\r\n            AndroidView(\r\n                factory = { context ->\r\n                    PhotoView(context).apply {\r\n                        load(imageUrl) { crossfade(true) }\r\n                    }\r\n                },\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n\r\n            // \uD83D\uDD39 T铆tulo (ya traducido seg煤n idioma)\r\n            Text(\r\n                text = label,\r\n                color = Color.White,\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Medium,\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomStart)\r\n                    .background(Color.Black.copy(alpha = 0.7f))\r\n                    .padding(horizontal = 12.dp, vertical = 8.dp)\r\n            )\r\n\r\n            //  Bot贸n cerrar\r\n            IconButton(\r\n                onClick = onDismiss,\r\n                modifier = Modifier\r\n                    .align(Alignment.TopEnd)\r\n                    .statusBarsPadding()\r\n                    .padding(16.dp)\r\n                    .background(Color.Black.copy(alpha = 0.5f), CircleShape)\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.close),\r\n                    tint = Color.White\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(date 1763075243695)
--@@ -89,25 +89,31 @@
--     ) {
--         Column(
--             modifier = Modifier
---                .fillMaxSize()
---                .padding(horizontal = 16.dp)
---                .padding(bottom = 90.dp),
--+                .fillMaxWidth()
--+                .verticalScroll(rememberScrollState())
--+                .padding(horizontal = 16.dp),
--             horizontalAlignment = Alignment.CenterHorizontally
--         ) {
---            //  Bot贸n atr谩s
---            Box(
---                modifier = Modifier
---                    .fillMaxWidth()
---                    .padding(top = 16.dp),
---                contentAlignment = Alignment.CenterStart
---            ) {
---                Image(
---                    painter = painterResource(id = R.drawable.arrow_back),
---                    contentDescription = stringResource(R.string.go_back),
---                    modifier = Modifier
---                        .size(28.dp)
---                        .clickable { onBack() }
---                )
--+            Column(
--+                modifier = Modifier
--+                    .padding(horizontal = 16.dp),
--+                horizontalAlignment = Alignment.CenterHorizontally
--+            ) {
--+                //  Bot贸n atr谩s
--+                Box(
--+                    modifier = Modifier
--+                        .fillMaxWidth()
--+                        .padding(top = 16.dp),
--+                    contentAlignment = Alignment.CenterStart
--+                ) {
--+                    Image(
--+                        painter = painterResource(id = R.drawable.arrow_back),
--+                        contentDescription = stringResource(R.string.go_back),
--+                        modifier = Modifier
--+                            .size(28.dp)
--+                            .clickable { onBack() }
--+                    )
--+                }
--             }
-- 
--             Spacer(modifier = Modifier.height(16.dp))
--@@ -189,8 +195,9 @@
--                         }
--                     }
--                 }
---                Spacer(modifier = Modifier.height(24.dp))
---            }
--+            }
--+
--+            Spacer(modifier = Modifier.height(24.dp))
-- 
--             //  Descripci贸n
--             val descripcion = descripcion_pin ?: ""
--@@ -199,7 +206,6 @@
--                 Box(
--                     modifier = Modifier
--                         .fillMaxWidth()
---                        .weight(1f)
--                         .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))
--                         .clip(RoundedCornerShape(8.dp))
--                 ) {
--@@ -215,32 +221,32 @@
--                     )
--                 }
--             }
---        }
--+
-- 
---        //  Bot贸n 360
---        onVer360?.let {
---            Box(
---                modifier = Modifier
---                    .align(Alignment.BottomCenter)
---                    .fillMaxWidth()
---                    .background(Color.White)
---                    .navigationBarsPadding()
---                    .padding(horizontal = 16.dp, vertical = 12.dp)
---            ) {
---                Button(
---                    onClick = it,
---                    modifier = Modifier
---                        .fillMaxWidth()
---                        .height(56.dp),
---                    colors = ButtonDefaults.buttonColors(containerColor = Color.Black),
---                    shape = RoundedCornerShape(12.dp)
---                ) {
---                    Text(
---                        text = stringResource(R.string.see_360),
---                        color = Color.White,
---                        fontSize = 18.sp,
---                        fontWeight = FontWeight.Bold,
---                    )
--+            //  Bot贸n 360
--+            onVer360?.let {
--+                Box(
--+                    modifier = Modifier
--+                        .fillMaxWidth()
--+                        .background(Color.White)
--+                        .navigationBarsPadding()
--+                        .padding(horizontal = 16.dp, vertical = 12.dp)
--+                ) {
--+                    Button(
--+                        onClick = it,
--+                        modifier = Modifier
--+                            .fillMaxWidth()
--+                            .height(56.dp),
--+                        colors = ButtonDefaults.buttonColors(containerColor = Color.Black),
--+                        shape = RoundedCornerShape(12.dp)
--+                    ) {
--+                        Text(
--+                            text = stringResource(R.string.see_360),
--+                            color = Color.White,
--+                            fontSize = 18.sp,
--+                            fontWeight = FontWeight.Bold,
--+                        )
--+                    }
--                 }
--             }
--         }
--Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val newDensity= Density(\r\n                density= currentDensity.density,\r\n                fontScale = currentDensity.fontScale*appFontScale\r\n            )\r\n            CompositionLocalProvider(LocalDensity provides newDensity) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    //ViewModel para tener el estado del usuario autenticado\r\n    val authViewModel: AuthViewModel = viewModel()\r\n    val currentUser by authViewModel.currentUser.collectAsState(initial = null)\r\n    // Estado global para el modo edici贸n\r\n    var isEditing by remember { mutableStateOf(false) }\r\n\r\n    // ... (Tu l贸gica de idioma se queda igual)\r\n    val stringEspanyol= \"Espa帽ol\"\r\n    val stringAleman= \"Deutsch\"\r\n    val stringIngles= \"English\"\r\n    var mostrarIdioma by remember { mutableStateOf(false) }\r\n    val configuration = LocalConfiguration.current\r\n    val currentLanguageCode = configuration.locales[0].language\r\n    var idioma by remember { mutableStateOf(currentLanguageCode) }\r\n    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    //  Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n\r\n    // Comprueba si la ruta ES \"virtual_visit\" (esto cubre el mapa Y los pines anidados)\r\n    val isVirtualVisit = currentRoute == AppRoutes.VIRTUAL_VISIT\r\n\r\n    // Comprueba si la ruta EMPIEZA POR \"pin_360\" (la nueva vista 360)\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n\r\n    // La vista es inmersiva si es CUALQUIERA de las tres\r\n    val isImmersive = isPanorama || isVirtualVisit || isPin360\r\n\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    //  Actualizar t铆tulo (Tu l贸gica se queda igual)\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    // --- 隆隆2. ESTRUCTURA REFACTORIZADA (UN SOLO NAVHOST)!! ---\r\n    // (Hemos eliminado el 'if (isImmersive)' que duplicaba el NavHost)\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        // Desactivamos gestos en el mapa Y en pantallas inmersivas\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                // Solo mostramos la barra roja si NO estamos en una ruta inmersiva\r\n                if (!isImmersive) {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            // ... (Tu l贸gica de idioma y Toast se queda igual)\r\n                            Box {\r\n                                OutlinedIconButton(onClick = {\r\n                                    mostrarIdioma = true\r\n                                }) {\r\n                                    val iconRes =\r\n                                        if (idioma == \"es\" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == \"de\" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido\r\n                                    Image(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = if (idioma == \"es\" || idioma == stringEspanyol ) stringEspanyol\r\n                                        else if (idioma == \"de\" || idioma == stringAleman) stringAleman else stringIngles,\r\n                                        contentScale = ContentScale.Crop\r\n                                    )\r\n                                }\r\n                                DropdownMenu(\r\n                                    expanded = mostrarIdioma,\r\n                                    onDismissRequest = { mostrarIdioma = false },\r\n                                    modifier = Modifier.fillMaxWidth(0.8f),\r\n                                ) {\r\n                                    idiomasDisponibles.forEach { idiomaSlot ->\r\n                                        DropdownMenuItem(\r\n                                            text = { Text(idiomaSlot) },\r\n                                            onClick = {\r\n                                                idioma = idiomaSlot\r\n                                                mostrarIdioma = false\r\n                                                if(idiomaSlot == stringEspanyol)\r\n                                                    LanguageHelper.saveLocale(context, \"es\")\r\n                                                else if(idiomaSlot == stringAleman){\r\n                                                    LanguageHelper.saveLocale(context, \"de\")\r\n                                                } else LanguageHelper.saveLocale(context, \"en\")\r\n                                            }\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            // Icono Editar: solo disponible para un usuario autenticado\r\n                            if (currentUser != null) {\r\n                                IconButton(onClick = {\r\n                                    isEditing = !isEditing // Toggle del modo edici贸n\r\n                                    val message = if (isEditing) context.getString(R.string.edit_mode_activate_message) else context.getString(R.string.edit_mode_deactivate_message)\r\n                                    Toast.makeText(context, message, Toast.LENGTH_SHORT).show()\r\n                                }) {\r\n                                    Icon(\r\n                                        painter = painterResource(id = if (isEditing) R.drawable.baseline_done_24 else R.drawable.lapiz),\r\n                                        contentDescription = if (isEditing) stringResource(id = R.string.edit_mode_deactivate_icon) else  stringResource(id = R.string.edit_mode_activate_icon)\r\n                                    )\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            // 隆隆UN SOLO AppNavigationHost!!\r\n            // (Si es inmersiva, paddingValues ser谩 cero porque no hay TopBar)\r\n            AppNavigationHost(\r\n                authViewModel = authViewModel,\r\n                navController = navController,\r\n                isEditing = isEditing,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
----- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1763070828153)
--@@ -116,6 +116,9 @@
--                 AppRoutes.RESERVA,
--                 AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)
--                 AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)
--+                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)
--+                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)
--+                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)
--                 else -> context.getString(R.string.title_inicio)
--             }
--         }
--@@ -208,7 +211,7 @@
--                                     Toast.makeText(context, message, Toast.LENGTH_SHORT).show()
--                                 }) {
--                                     Icon(
---                                        painter = painterResource(id = if (isEditing) R.drawable.baseline_done_24 else R.drawable.lapiz),
--+                                        painter = painterResource(id = if (isEditing) R.drawable.lapiz else R.drawable.lapiz),
--                                         contentDescription = if (isEditing) stringResource(id = R.string.edit_mode_deactivate_icon) else  stringResource(id = R.string.edit_mode_activate_icon)
--                                     )
--                                 }
--Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.EntradaMonasterioFirestoreScreen\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    authViewModel: AuthViewModel = viewModel(),\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    isEditing: Boolean = false,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // --- 隆隆AQU EST LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // --- Pantalla de Entrada del Monasterio (desde Firebase Pin)\r\n        composable(\r\n            route = AppRoutes.PIN_ENTRADA_MONASTERIO + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            EntradaMonasterioFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- FIN DE LA MODIFICACIN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu铆, 隆est谩 bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763066246026)
--@@ -44,6 +44,8 @@
--         composable(AppRoutes.INFO)     { InfoScreen() }
--         composable(AppRoutes.HISTORIA) { HistoriaScreen() }
--         composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
--+        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }
--+        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyos()}
--         composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }
--         composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }
-- 
--Index: app/src/main/res/values/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
----- a/app/src/main/res/values/strings.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/res/values/strings.xml	(date 1763066246062)
--@@ -81,4 +81,10 @@
--     <string name="notdefined_destinyplane">Plano destino no definido</string>
--     <string name="plane_loading">Cargando plano...</string>
--     <string name="error_loading_plane">Error cargando datos del plano</string>
--+    <string name="child_mode">MODO NIOS</string>
--+    <string name="child_mode_view">Modo Ni帽os</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Juego</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">JUEGO</string>
-- </resources>
--\ No newline at end of file
--Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci贸n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti贸n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n    const val PIN_ENTRADA_MONASTERIO = \"entrada_monasterio\"\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
----- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763066246086)
--@@ -18,6 +18,12 @@
--     const val PIN_DETALLE = "pin_detalle"
--     const val PANORAMA = "panorama"
-- 
--+    const val MODO_NINYOS = "modo_ni帽os"
--+
--+    const val VIDEO_NINYOS = "video_modo_ni帽os"
--+
--+    const val JUEGO_NINYOS = "juego_modo_ni帽os"
--+
--     const val PIN_360 = "pin_360"
--     const val PIN_ENTRADA_MONASTERIO = "entrada_monasterio"
-- }
--Index: app/src/main/res/values-de/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus verlassen</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">nderungen speichern</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Heute</string>\r\n    <string name=\"title_appointment\">Termin vereinbaren</string>\r\n    <string name=\"option_phone_appointment\">Buchen Sie telefonisch</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Stunde</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Datum ausw盲hlen</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail-Adresse erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig.</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden.</string>\r\n    <string name=\"hour_no_selected\">Es muss ein Zeitpunkt ausgew盲hlt werden.</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Stornieren</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte klicken Sie in der soeben ge枚ffneten E-Mail-Anwendung auf Senden, um Ihre Anfrage abzuschlieen. Wir werden Ihnen die Verf眉gbarkeit per E-Mail best盲tigen..</string>\r\n    <string name=\"email_subject\">Reservierungsanfrage ansehen - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich m枚chte hiermit eine Reservierung f眉r einen Besuch im Kloster anfragen. Bitte geben Sie folgende Daten an:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden.</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">W盲hlen Sie die Schriftgr枚e aus</string>\r\n    <string name=\"font_extrabig\">Extra gro</string>\r\n    <string name=\"font_normal\">Mittlere</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Geh zur眉ck</string>\r\n    <string name=\"see_360\">360潞-Ansicht</string>\r\n    <string name=\"contentdescription_image_pin\">Bild anpinnen (zum Vergr枚ern anklicken)</string>\r\n    <string name=\"readjust\">Zur眉cksetzen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Zunahme</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Undefiniertes Ziel</string>\r\n    <string name=\"notdefined_destinyplane\">Zielebene nicht definiert</string>\r\n    <string name=\"plane_loading\">Ladeplan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
----- a/app/src/main/res/values-de/strings.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/res/values-de/strings.xml	(date 1763066246094)
--@@ -86,4 +86,10 @@
--     <string name="notdefined_destinyplane">Zielebene nicht definiert</string>
--     <string name="plane_loading">Ladeplan...</string>
--     <string name="error_loading_plane">Fehler beim Laden der Plandaten</string>
--+    <string name="child_mode">KINDERMODUS</string>
--+    <string name="child_mode_view">Kindermodus</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Spiel</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">SPIEL</string>
-- </resources>
--\ No newline at end of file
--Index: app/src/main/res/values-en/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
----- a/app/src/main/res/values-en/strings.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/res/values-en/strings.xml	(date 1763066246105)
--@@ -85,5 +85,11 @@
--     <string name="notdefined_destinyplane">Destination plane not defined</string>
--     <string name="plane_loading">Loading plane...</string>
--     <string name="error_loading_plane">Error loading plan data</string>
--+    <string name="child_mode">KIDS MODE</string>
--+    <string name="child_mode_view">Kids Mode</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Game</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">GAME</string>
-- 
-- </resources>
--\ No newline at end of file
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.nextapp.monasterio\"> <application\r\n    android:name=\".MonasteryApplication\"\r\n    android:allowBackup=\"true\"\r\n    android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n    android:fullBackupContent=\"@xml/backup_rules\"\r\n    android:icon=\"@drawable/escudo\"\r\n    android:label=\"@string/app_name\"\r\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n    android:supportsRtl=\"true\"\r\n    android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n    <activity\r\n        android:name=\".MainActivity\"\r\n        android:exported=\"true\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n        <intent-filter>\r\n            <action android:name=\"android.intent.action.MAIN\" />\r\n            <category android:name=\"android.intent.category.LAUNCHER\" />\r\n        </intent-filter>\r\n    </activity>\r\n</application>\r\n\r\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
----- a/app/src/main/AndroidManifest.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/AndroidManifest.xml	(date 1763071551234)
--@@ -1,6 +1,8 @@
-- <?xml version="1.0" encoding="utf-8"?>
-- <manifest xmlns:android="http://schemas.android.com/apk/res/android"
---    package="com.nextapp.monasterio"> <application
--+    package="com.nextapp.monasterio">
--+    <uses-permission android:name="android.permission.INTERNET"/>
--+    <application
--     android:name=".MonasteryApplication"
--     android:allowBackup="true"
--     android:dataExtractionRules="@xml/data_extraction_rules"
--@@ -9,11 +11,13 @@
--     android:label="@string/app_name"
--     android:roundIcon="@mipmap/ic_launcher_round"
--     android:supportsRtl="true"
---    android:theme="@style/Theme.SMOV_Monasterio">
--+    android:theme="@style/Theme.SMOV_Monasterio"
--+        android:usesCleartextTraffic="true">
--     <activity
--         android:name=".MainActivity"
--         android:exported="true"
---        android:theme="@style/Theme.SMOV_Monasterio">
--+        android:theme="@style/Theme.SMOV_Monasterio"
--+        android:configChanges="orientation|screenSize|keyboardHidden">
--         <intent-filter>
--             <action android:name="android.intent.action.MAIN" />
--             <category android:name="android.intent.category.LAUNCHER" />
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_21_48_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,17 +0,0 @@
--Index: .idea/gradle.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/gradle.xml b/.idea/gradle.xml
----- a/.idea/gradle.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ b/.idea/gradle.xml	(date 1762631053346)
--@@ -1,5 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--+  <component name="GradleMigrationSettings" migrationVersion="1" />
--   <component name="GradleSettings">
--     <option name="linkedExternalProjectsSettings">
--       <GradleProjectSettings>
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]" date="1762878199117" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/11/2025 17:23 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]" date="1762639210614" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 08/11/2025 23:00 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]" date="1762636073541" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_07_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 22:07 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_1.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_1.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_1.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_1.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1" date="1762636134377" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 22:08 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]" date="1762636094033" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 22:08 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,17 +0,0 @@
--Index: .idea/gradle.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/gradle.xml b/.idea/gradle.xml
----- a/.idea/gradle.xml	(revision 1c0bfc618ece38c61714e2813735e3a928424a11)
--+++ b/.idea/gradle.xml	(date 1762636073534)
--@@ -1,5 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--+  <component name="GradleMigrationSettings" migrationVersion="1" />
--   <component name="GradleSettings">
--     <option name="linkedExternalProjectsSettings">
--       <GradleProjectSettings>
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_08_[Changes]1/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,17 +0,0 @@
--Index: .idea/gradle.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/gradle.xml b/.idea/gradle.xml
----- a/.idea/gradle.xml	(revision 1c0bfc618ece38c61714e2813735e3a928424a11)
--+++ b/.idea/gradle.xml	(date 1762636093999)
--@@ -1,5 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--+  <component name="GradleMigrationSettings" migrationVersion="1" />
--   <component name="GradleSettings">
--     <option name="linkedExternalProjectsSettings">
--       <GradleProjectSettings>
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18__Changes_.xml	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]" date="1762636735672" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_08_11_2025_22_18_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 08/11/2025 22:18 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,401 +0,0 @@
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.nextapp.monasterio\"> <application\r\n    android:name=\".MonasteryApplication\"\r\n    android:allowBackup=\"true\"\r\n    android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n    android:fullBackupContent=\"@xml/backup_rules\"\r\n    android:icon=\"@drawable/escudo\"\r\n    android:label=\"@string/app_name\"\r\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n    android:supportsRtl=\"true\"\r\n    android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n    <activity\r\n        android:name=\".MainActivity\"\r\n        android:exported=\"true\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n        <intent-filter>\r\n            <action android:name=\"android.intent.action.MAIN\" />\r\n            <category android:name=\"android.intent.category.LAUNCHER\" />\r\n        </intent-filter>\r\n    </activity>\r\n</application>\r\n\r\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
----- a/app/src/main/AndroidManifest.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/AndroidManifest.xml	(date 1763063995443)
--@@ -1,6 +1,8 @@
-- <?xml version="1.0" encoding="utf-8"?>
-- <manifest xmlns:android="http://schemas.android.com/apk/res/android"
---    package="com.nextapp.monasterio"> <application
--+    package="com.nextapp.monasterio">
--+    <uses-permission android:name="android.permission.INTERNET"/>
--+    <application
--     android:name=".MonasteryApplication"
--     android:allowBackup="true"
--     android:dataExtractionRules="@xml/data_extraction_rules"
--@@ -9,7 +11,8 @@
--     android:label="@string/app_name"
--     android:roundIcon="@mipmap/ic_launcher_round"
--     android:supportsRtl="true"
---    android:theme="@style/Theme.SMOV_Monasterio">
--+    android:theme="@style/Theme.SMOV_Monasterio"
--+        android:usesCleartextTraffic="true">
--     <activity
--         android:name=".MainActivity"
--         android:exported="true"
--Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val newDensity= Density(\r\n                density= currentDensity.density,\r\n                fontScale = currentDensity.fontScale*appFontScale\r\n            )\r\n            CompositionLocalProvider(LocalDensity provides newDensity) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    // ... (Tu l贸gica de idioma se queda igual)\r\n    val stringEspanyol= \"Espa帽ol\"\r\n    val stringAleman= \"Deutsch\"\r\n    val stringIngles= \"English\"\r\n    var mostrarIdioma by remember { mutableStateOf(false) }\r\n    val configuration = LocalConfiguration.current\r\n    val currentLanguageCode = configuration.locales[0].language\r\n    var idioma by remember { mutableStateOf(currentLanguageCode) }\r\n    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    //  Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n\r\n    // Comprueba si la ruta ES \"virtual_visit\" (esto cubre el mapa Y los pines anidados)\r\n    val isVirtualVisit = currentRoute == AppRoutes.VIRTUAL_VISIT\r\n\r\n    // Comprueba si la ruta EMPIEZA POR \"pin_360\" (la nueva vista 360)\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n\r\n    // La vista es inmersiva si es CUALQUIERA de las tres\r\n    val isImmersive = isPanorama || isVirtualVisit || isPin360\r\n\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    //  Actualizar t铆tulo (Tu l贸gica se queda igual)\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    // --- 隆隆2. ESTRUCTURA REFACTORIZADA (UN SOLO NAVHOST)!! ---\r\n    // (Hemos eliminado el 'if (isImmersive)' que duplicaba el NavHost)\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        // Desactivamos gestos en el mapa Y en pantallas inmersivas\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                // Solo mostramos la barra roja si NO estamos en una ruta inmersiva\r\n                if (!isImmersive) {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            // ... (Tu l贸gica de idioma y Toast se queda igual)\r\n                            Box {\r\n                                OutlinedIconButton(onClick = {\r\n                                    mostrarIdioma = true\r\n                                }) {\r\n                                    val iconRes =\r\n                                        if (idioma == \"es\" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == \"de\" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido\r\n                                    Image(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = if (idioma == \"es\" || idioma == stringEspanyol ) stringEspanyol\r\n                                        else if (idioma == \"de\" || idioma == stringAleman) stringAleman else stringIngles,\r\n                                        contentScale = ContentScale.Crop\r\n                                    )\r\n                                }\r\n                                DropdownMenu(\r\n                                    expanded = mostrarIdioma,\r\n                                    onDismissRequest = { mostrarIdioma = false },\r\n                                    modifier = Modifier.fillMaxWidth(0.8f),\r\n                                ) {\r\n                                    idiomasDisponibles.forEach { idiomaSlot ->\r\n                                        DropdownMenuItem(\r\n                                            text = { Text(idiomaSlot) },\r\n                                            onClick = {\r\n                                                idioma = idiomaSlot\r\n                                                mostrarIdioma = false\r\n                                                if(idiomaSlot == stringEspanyol)\r\n                                                    LanguageHelper.saveLocale(context, \"es\")\r\n                                                else if(idiomaSlot == stringAleman){\r\n                                                    LanguageHelper.saveLocale(context, \"de\")\r\n                                                } else LanguageHelper.saveLocale(context, \"en\")\r\n                                            }\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n                            IconButton(onClick = {\r\n                                Toast.makeText(\r\n                                    context,\r\n                                    \"Modo edici贸n (pr贸ximamente)\",\r\n                                    Toast.LENGTH_SHORT\r\n                                ).show()\r\n                            }) {\r\n                                Icon(\r\n                                    painter = painterResource(id = R.drawable.lapiz),\r\n                                    contentDescription = stringResource(id = R.string.edit_mode)\r\n                                )\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            // 隆隆UN SOLO AppNavigationHost!!\r\n            // (Si es inmersiva, paddingValues ser谩 cero porque no hay TopBar)\r\n            AppNavigationHost(\r\n                navController = navController,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
----- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1763062898144)
--@@ -110,6 +110,9 @@
--                 AppRoutes.RESERVA,
--                 AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)
--                 AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)
--+                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)
--+                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)
--+                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)
--                 else -> context.getString(R.string.title_inicio)
--             }
--         }
--Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen() }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // --- 隆隆AQU EST LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n        // --- FIN DE LA MODIFICACIN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu铆, 隆est谩 bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763062855767)
--@@ -41,6 +41,8 @@
--         composable(AppRoutes.HISTORIA) { HistoriaScreen() }
--         composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
--         composable(AppRoutes.PERFIL)   { ProfileScreen() }
--+        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }
--+        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyos()}
--         composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }
-- 
--         // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)
--Index: app/src/main/res/values/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode\">Modo edici贸n</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
----- a/app/src/main/res/values/strings.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/res/values/strings.xml	(date 1763060335813)
--@@ -73,4 +73,10 @@
--     <string name="notdefined_destinyplane">Plano destino no definido</string>
--     <string name="plane_loading">Cargando plano...</string>
--     <string name="error_loading_plane">Error cargando datos del plano</string>
--+    <string name="child_mode">MODO NIOS</string>
--+    <string name="child_mode_view">Modo Ni帽os</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Juego</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">JUEGO</string>
-- </resources>
--\ No newline at end of file
--Index: app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun HomeScreenContent(navController:NavController, modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {\r\n        val (background, crest, title, btnVisit, btnBook) = createRefs()\r\n        Image(\r\n            painter = painterResource(id = R.drawable.monastery_background),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop,\r\n            modifier = Modifier.constrainAs(background) {\r\n                top.linkTo(parent.top)\r\n                bottom.linkTo(parent.bottom)\r\n                start.linkTo(parent.start)\r\n                end.linkTo(parent.end)\r\n                width = Dimension.fillToConstraints\r\n                height = Dimension.fillToConstraints\r\n\r\n                centerVerticallyTo(parent)\r\n            }\r\n        )\r\n        Image(\r\n            painter = painterResource(id = R.drawable.huelgas_inicio),\r\n            contentDescription = \"Escudo\",\r\n            contentScale = ContentScale.FillWidth,\r\n            modifier = Modifier\r\n                .constrainAs(crest) {\r\n                    top.linkTo(parent.top, margin = 24.dp)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.wrapContent\r\n                }\r\n        )\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIRTUAL_VISIT)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVisit) {\r\n                    bottom.linkTo(btnBook.top, margin = 72.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_map_24),\r\n                contentDescription = null,\r\n                modifier = Modifier\r\n                    .padding(end = 16.dp)\r\n                    .size(48.dp)\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.virtual_visit),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.OPCIONES_RESERVA)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnBook) {\r\n                    bottom.linkTo(parent.bottom, margin = 186.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_time_24),\r\n                contentDescription = null,\r\n                modifier = Modifier.padding(end = 16.dp).size(48.dp)\r\n\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.book_appointment),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(date 1763059354437)
--@@ -13,12 +13,15 @@
-- import androidx.compose.material3.Text
-- import androidx.compose.runtime.Composable
-- import androidx.compose.runtime.DisposableEffect
--+import androidx.compose.ui.Alignment
-- import androidx.compose.ui.Modifier
--+import androidx.compose.ui.graphics.Color
-- import androidx.compose.ui.layout.ContentScale
-- import androidx.compose.ui.platform.LocalConfiguration
-- import androidx.compose.ui.platform.LocalContext
-- import androidx.compose.ui.res.painterResource
-- import androidx.compose.ui.res.stringResource
--+import androidx.compose.ui.text.style.TextAlign
-- import androidx.compose.ui.tooling.preview.Preview
-- import androidx.compose.ui.unit.dp
-- import androidx.compose.ui.unit.sp
--@@ -47,7 +50,7 @@
--     }
-- 
--     ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {
---        val (background, crest, title, btnVisit, btnBook) = createRefs()
--+        val (background, crest, title, btnVisit, btnChild,btnBook) = createRefs()
--         Image(
--             painter = painterResource(id = R.drawable.monastery_background),
--             contentDescription = null,
--@@ -84,24 +87,63 @@
--             shape = RoundedCornerShape(20.dp),
--             modifier = Modifier
--                 .constrainAs(btnVisit) {
---                    bottom.linkTo(btnBook.top, margin = 72.dp)
--+                    bottom.linkTo(btnChild.top, margin = 48.dp)
--                     start.linkTo(parent.start, margin = 40.dp)
--                     end.linkTo(parent.end, margin = 40.dp)
---                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
--+                    width = Dimension.fillToConstraints
--                 }
---                .height(60.dp)
--         ) {
---            Icon(
---                painter = painterResource(id = R.drawable.ic_map_24),
---                contentDescription = null,
---                modifier = Modifier
---                    .padding(end = 16.dp)
---                    .size(48.dp)
---            )
---            Text(
---                stringResource(id = R.string.virtual_visit),
---                fontSize = 22.sp
---            )
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            )  {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.ic_map_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
--+                )
--+                Text(
--+                    stringResource(id = R.string.virtual_visit),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center
--+                )
--+            }
--+        }
--+        Button(
--+            onClick = {
--+                navController.navigate(AppRoutes.MODO_NINYOS)
--+            },
--+            colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF6EB017)),
--+            shape = RoundedCornerShape(20.dp),
--+            modifier = Modifier
--+                .constrainAs(btnChild) {
--+                    bottom.linkTo(btnBook.top, margin = 48.dp)
--+                    start.linkTo(parent.start, margin = 40.dp)
--+                    end.linkTo(parent.end, margin = 40.dp)
--+                    width = Dimension.fillToConstraints
--+                }
--+        ) {
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            )  {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.outline_account_child_invert_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
--+                )
--+                Text(
--+                    stringResource(id = R.string.child_mode),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center
--+                )
--+            }
--         }
--         Button(
--             onClick = {
--@@ -114,20 +156,28 @@
--                     bottom.linkTo(parent.bottom, margin = 186.dp)
--                     start.linkTo(parent.start, margin = 40.dp)
--                     end.linkTo(parent.end, margin = 40.dp)
---                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
--+                    width = Dimension.fillToConstraints
--                 }
---                .height(60.dp)
--         ) {
---            Icon(
---                painter = painterResource(id = R.drawable.ic_time_24),
---                contentDescription = null,
---                modifier = Modifier.padding(end = 16.dp).size(48.dp)
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            ) {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.ic_time_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
-- 
---            )
---            Text(
---                stringResource(id = R.string.book_appointment),
---                fontSize = 22.sp
---            )
--+                )
--+                Text(
--+                    stringResource(id = R.string.book_appointment),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center
--+                )
--+            }
--         }
--     }
-- }
--Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport androidx.compose.foundation.*\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.pager.HorizontalPager\r\nimport androidx.compose.foundation.pager.rememberPagerState\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalView\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.compose.ui.window.Dialog\r\nimport androidx.compose.ui.window.DialogProperties\r\nimport androidx.core.view.WindowCompat\r\nimport coil.compose.AsyncImage\r\nimport coil.load\r\nimport com.github.chrisbanes.photoview.PhotoView\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.models.Ubicacion\r\nimport java.util.Locale\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.res.stringResource\r\n\r\n@OptIn(ExperimentalFoundationApi::class)\r\n@Composable\r\nfun PinDetalleScreen(\r\n    pin: PinData,\r\n    onBack: () -> Unit,\r\n    onVer360: (() -> Unit)? = null\r\n) {\r\n    val view = LocalView.current\r\n    LaunchedEffect(Unit) {\r\n        val window = (view.context as? Activity)?.window\r\n        window?.let { WindowCompat.setDecorFitsSystemWindows(it, false) }\r\n    }\r\n\r\n    val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()\r\n\r\n    val pagerState = rememberPagerState(pageCount = { imagenes.size })\r\n    var selectedImageUrl by remember { mutableStateOf<String?>(null) }\r\n    var selectedImageTitle by remember { mutableStateOf<String?>(null) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val locale: Locale = configuration.locales[0]\r\n    val language = locale.language\r\n\r\n    val titulo_pin: String\r\n    val descripcion_pin: String?\r\n    val ubicacion_pin: Ubicacion?\r\n\r\n    when (language) {\r\n        \"es\" -> {\r\n            titulo_pin = pin.titulo\r\n            descripcion_pin = pin.descripcion\r\n            ubicacion_pin = pin.ubicacion\r\n        }\r\n        \"de\" -> {\r\n            titulo_pin = pin.tituloAleman\r\n            descripcion_pin = pin.descripcionAleman\r\n            ubicacion_pin = pin.ubicacionAleman\r\n        }\r\n        else -> {\r\n            titulo_pin = pin.tituloIngles\r\n            descripcion_pin = pin.descripcionIngles\r\n            ubicacion_pin = pin.ubicacionIngles\r\n        }\r\n    }\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.White)\r\n            .statusBarsPadding()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(horizontal = 16.dp)\r\n                .padding(bottom = 90.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // \uD83D\uDD19 Bot贸n atr谩s\r\n            Box(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 16.dp),\r\n                contentAlignment = Alignment.CenterStart\r\n            ) {\r\n                Image(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.go_back),\r\n                    modifier = Modifier\r\n                        .size(28.dp)\r\n                        .clickable { onBack() }\r\n                )\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            // \uD83C\uDFF7\uFE0F T铆tulo principal\r\n            Text(\r\n                text = buildString {\r\n                    append(titulo_pin)\r\n                    ubicacion_pin?.let { append(\" (${it.displayName})\") }\r\n                },\r\n                fontSize = 26.sp,\r\n                fontWeight = FontWeight.Bold,\r\n                color = Color.Black,\r\n                textAlign = TextAlign.Center,\r\n                modifier = Modifier.fillMaxWidth()\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(20.dp))\r\n\r\n            // \uD83D\uDDBC\uFE0F Carrusel con etiqueta (solo aqu铆)\r\n            if (imagenes.isNotEmpty()) {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(250.dp)\r\n                        .clip(RoundedCornerShape(16.dp))\r\n                        .border(3.dp, Color.Black, RoundedCornerShape(16.dp))\r\n                ) {\r\n                    HorizontalPager(state = pagerState) { page ->\r\n                        val imagen = imagenes[page]\r\n                        Box(modifier = Modifier.fillMaxSize()) {\r\n                            AsyncImage(\r\n                                model = imagen.url,\r\n                                contentDescription = imagen.etiqueta,\r\n                                contentScale = ContentScale.Crop,\r\n                                modifier = Modifier\r\n                                    .fillMaxSize()\r\n                                    .clickable {\r\n                                        selectedImageUrl = imagen.url\r\n                                        // \uD83D\uDC47 t铆tulo seg煤n idioma actual\r\n                                        selectedImageTitle = when (language) {\r\n                                            \"es\" -> imagen.titulo\r\n                                            \"de\" -> imagen.tituloAleman\r\n                                            else -> imagen.tituloIngles\r\n                                        }\r\n                                    }\r\n                            )\r\n\r\n                            // \uD83D\uDD39 Etiqueta abajo a la izquierda (solo carrusel)\r\n                            Text(\r\n                                text = imagen.etiqueta,\r\n                                color = Color.White,\r\n                                fontSize = 14.sp,\r\n                                modifier = Modifier\r\n                                    .align(Alignment.BottomStart)\r\n                                    .background(Color.Black.copy(alpha = 0.6f))\r\n                                    .padding(horizontal = 10.dp, vertical = 6.dp)\r\n                            )\r\n                        }\r\n                    }\r\n\r\n                    // \uD83D\uDD38 Indicadores inferiores\r\n                    Row(\r\n                        Modifier\r\n                            .align(Alignment.BottomCenter)\r\n                            .padding(bottom = 6.dp)\r\n                    ) {\r\n                        repeat(imagenes.size) { index ->\r\n                            val selected = pagerState.currentPage == index\r\n                            Box(\r\n                                Modifier\r\n                                    .padding(3.dp)\r\n                                    .size(if (selected) 8.dp else 6.dp)\r\n                                    .background(\r\n                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),\r\n                                        shape = CircleShape\r\n                                    )\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n                Spacer(modifier = Modifier.height(24.dp))\r\n            }\r\n\r\n            // \uD83D\uDCDD Descripci贸n\r\n            val descripcion = descripcion_pin ?: \"\"\r\n            if (descripcion.isNotBlank()) {\r\n                val textScrollState = rememberScrollState()\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .weight(1f)\r\n                        .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))\r\n                        .clip(RoundedCornerShape(8.dp))\r\n                ) {\r\n                    Text(\r\n                        text = descripcion,\r\n                        fontSize = 16.sp,\r\n                        color = Color.DarkGray,\r\n                        lineHeight = 22.sp,\r\n                        modifier = Modifier\r\n                            .fillMaxSize()\r\n                            .padding(horizontal = 12.dp, vertical = 8.dp)\r\n                            .verticalScroll(textScrollState)\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD18 Bot贸n 360\r\n        onVer360?.let {\r\n            Box(\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomCenter)\r\n                    .fillMaxWidth()\r\n                    .background(Color.White)\r\n                    .navigationBarsPadding()\r\n                    .padding(horizontal = 16.dp, vertical = 12.dp)\r\n            ) {\r\n                Button(\r\n                    onClick = it,\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(56.dp),\r\n                    colors = ButtonDefaults.buttonColors(containerColor = Color.Black),\r\n                    shape = RoundedCornerShape(12.dp)\r\n                ) {\r\n                    Text(\r\n                        text = stringResource(R.string.see_360),\r\n                        color = Color.White,\r\n                        fontSize = 18.sp,\r\n                        fontWeight = FontWeight.Bold,\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD0D Zoom con t铆tulo traducido\r\n        if (selectedImageUrl != null) {\r\n            ZoomableImageDialog(\r\n                imageUrl = selectedImageUrl!!,\r\n                label = selectedImageTitle ?: \"\",\r\n                onDismiss = {\r\n                    selectedImageUrl = null\r\n                    selectedImageTitle = null\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// \uD83D\uDD0D Di谩logo de zoom\r\n@Composable\r\nprivate fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {\r\n    Dialog(\r\n        onDismissRequest = onDismiss,\r\n        properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)\r\n    ) {\r\n        Box(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .background(Color.Black.copy(alpha = 0.95f))\r\n        ) {\r\n            AndroidView(\r\n                factory = { context ->\r\n                    PhotoView(context).apply {\r\n                        load(imageUrl) { crossfade(true) }\r\n                    }\r\n                },\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n\r\n            // \uD83D\uDD39 T铆tulo (ya traducido seg煤n idioma)\r\n            Text(\r\n                text = label,\r\n                color = Color.White,\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Medium,\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomStart)\r\n                    .background(Color.Black.copy(alpha = 0.7f))\r\n                    .padding(horizontal = 12.dp, vertical = 8.dp)\r\n            )\r\n\r\n            //  Bot贸n cerrar\r\n            IconButton(\r\n                onClick = onDismiss,\r\n                modifier = Modifier\r\n                    .align(Alignment.TopEnd)\r\n                    .statusBarsPadding()\r\n                    .padding(16.dp)\r\n                    .background(Color.Black.copy(alpha = 0.5f), CircleShape)\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.close),\r\n                    tint = Color.White\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(date 1763054038537)
--@@ -189,7 +189,6 @@
--                         }
--                     }
--                 }
---                Spacer(modifier = Modifier.height(24.dp))
--             }
-- 
--             //  Descripci贸n
--@@ -216,7 +215,7 @@
--                 }
--             }
--         }
---
--+        Spacer(modifier = Modifier.height(24.dp))
--         //  Bot贸n 360
--         onVer360?.let {
--             Box(
--Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci贸n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti贸n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
----- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763058434043)
--@@ -18,5 +18,11 @@
--     const val PIN_DETALLE = "pin_detalle"
--     const val PANORAMA = "panorama"
-- 
--+    const val MODO_NINYOS = "modo_ni帽os"
--+
--+    const val VIDEO_NINYOS = "video_modo_ni帽os"
--+
--+    const val JUEGO_NINYOS = "juego_modo_ni帽os"
--+
--     const val PIN_360 = "pin_360"
-- }
--Index: app/src/main/res/values-de/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode\">Bearbeiten</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Heute</string>\r\n    <string name=\"title_appointment\">Termin vereinbaren</string>\r\n    <string name=\"option_phone_appointment\">Buchen Sie telefonisch</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Stunde</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Datum ausw盲hlen</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail-Adresse erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig.</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden.</string>\r\n    <string name=\"hour_no_selected\">Es muss ein Zeitpunkt ausgew盲hlt werden.</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Stornieren</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte klicken Sie in der soeben ge枚ffneten E-Mail-Anwendung auf Senden, um Ihre Anfrage abzuschlieen. Wir werden Ihnen die Verf眉gbarkeit per E-Mail best盲tigen..</string>\r\n    <string name=\"email_subject\">Reservierungsanfrage ansehen - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich m枚chte hiermit eine Reservierung f眉r einen Besuch im Kloster anfragen. Bitte geben Sie folgende Daten an:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden.</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">W盲hlen Sie die Schriftgr枚e aus</string>\r\n    <string name=\"font_extrabig\">Extra gro</string>\r\n    <string name=\"font_normal\">Mittlere</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Geh zur眉ck</string>\r\n    <string name=\"see_360\">360潞-Ansicht</string>\r\n    <string name=\"contentdescription_image_pin\">Bild anpinnen (zum Vergr枚ern anklicken)</string>\r\n    <string name=\"readjust\">Zur眉cksetzen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Zunahme</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Undefiniertes Ziel</string>\r\n    <string name=\"notdefined_destinyplane\">Zielebene nicht definiert</string>\r\n    <string name=\"plane_loading\">Ladeplan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
----- a/app/src/main/res/values-de/strings.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/res/values-de/strings.xml	(date 1763060335818)
--@@ -78,4 +78,10 @@
--     <string name="notdefined_destinyplane">Zielebene nicht definiert</string>
--     <string name="plane_loading">Ladeplan...</string>
--     <string name="error_loading_plane">Fehler beim Laden der Plandaten</string>
--+    <string name="child_mode">KINDERMODUS</string>
--+    <string name="child_mode_view">Kindermodus</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Spiel</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">SPIEL</string>
-- </resources>
--\ No newline at end of file
--Index: .idea/inspectionProfiles/Project_Default.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><component name=\"InspectionProjectProfileManager\">\r\n  <profile version=\"1.0\">\r\n    <option name=\"myName\" value=\"Project Default\" />\r\n    <inspection_tool class=\"ComposePreviewDimensionRespectsLimit\" enabled=\"true\" level=\"WARNING\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"ComposePreviewMustBeTopLevelFunction\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"ComposePreviewNeedsComposableAnnotation\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"ComposePreviewNotSupportedInUnitTestFiles\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewDimensionRespectsLimit\" enabled=\"true\" level=\"WARNING\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewMustBeTopLevelFunction\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewNeedsComposableAnnotation\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewNotSupportedInUnitTestFiles\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewAnnotationInFunctionWithParameters\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewApiLevelMustBeValid\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewDeviceShouldUseNewSpec\" enabled=\"true\" level=\"WEAK WARNING\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewFontScaleMustBeGreaterThanZero\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewMultipleParameterProviders\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewParameterProviderOnFirstParameter\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewPickerAnnotation\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n  </profile>\r\n</component>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/inspectionProfiles/Project_Default.xml b/.idea/inspectionProfiles/Project_Default.xml
----- a/.idea/inspectionProfiles/Project_Default.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/.idea/inspectionProfiles/Project_Default.xml	(date 1763052230945)
--@@ -3,15 +3,19 @@
--     <option name="myName" value="Project Default" />
--     <inspection_tool class="ComposePreviewDimensionRespectsLimit" enabled="true" level="WARNING" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="ComposePreviewMustBeTopLevelFunction" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="ComposePreviewNeedsComposableAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="ComposePreviewNotSupportedInUnitTestFiles" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="GlancePreviewDimensionRespectsLimit" enabled="true" level="WARNING" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--@@ -27,24 +31,31 @@
--     </inspection_tool>
--     <inspection_tool class="PreviewAnnotationInFunctionWithParameters" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewApiLevelMustBeValid" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewDeviceShouldUseNewSpec" enabled="true" level="WEAK WARNING" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewFontScaleMustBeGreaterThanZero" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewMultipleParameterProviders" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewParameterProviderOnFirstParameter" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewPickerAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--   </profile>
-- </component>
--\ No newline at end of file
--Index: app/src/main/res/values-en/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode\">Edit mode</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
----- a/app/src/main/res/values-en/strings.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/res/values-en/strings.xml	(date 1763060335806)
--@@ -77,5 +77,11 @@
--     <string name="notdefined_destinyplane">Destination plane not defined</string>
--     <string name="plane_loading">Loading plane...</string>
--     <string name="error_loading_plane">Error loading plan data</string>
--+    <string name="child_mode">KIDS MODE</string>
--+    <string name="child_mode_view">Kids Mode</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Game</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">GAME</string>
-- 
-- </resources>
--\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_23_00_[Changes]/shelved.patch	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-+++ /dev/null	(revision 470eb5c05fe46e058e615c9f60a5708b68f47180)
-@@ -1,872 +0,0 @@
--Index: gradle.properties
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+># Project-wide Gradle settings.\r\n# IDE (e.g. Android Studio) users:\r\n# Gradle settings configured through the IDE *will override*\r\n# any settings specified in this file.\r\n# For more details on how to configure your build environment visit\r\n# http://www.gradle.org/docs/current/userguide/build_environment.html\r\n# Specifies the JVM arguments used for the daemon process.\r\n# The setting is particularly useful for tweaking memory settings.\r\norg.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8\r\n# When configured, Gradle will run in incubating parallel mode.\r\n# This option should only be used with decoupled projects. For more details, visit\r\n# https://developer.android.com/r/tools/gradle-multi-project-decoupled-projects\r\n# org.gradle.parallel=true\r\n# AndroidX package structure to make it clearer which packages are bundled with the\r\n# Android operating system, and which are packaged with your app's APK\r\n# https://developer.android.com/topic/libraries/support-library/androidx-rn\r\nandroid.useAndroidX=true\r\n# Kotlin code style for this project: \"official\" or \"obsolete\":\r\nkotlin.code.style=official\r\n# Enables namespacing of each library's R class so that its R class includes only the\r\n# resources declared in the library itself and none from the library's dependencies,\r\n# thereby reducing the size of the R class for that library\r\nandroid.nonTransitiveRClass=true
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>ISO-8859-1
--===================================================================
--diff --git a/gradle.properties b/gradle.properties
----- a/gradle.properties	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ b/gradle.properties	(date 1762631081582)
--@@ -20,4 +20,5 @@
-- # Enables namespacing of each library's R class so that its R class includes only the
-- # resources declared in the library itself and none from the library's dependencies,
-- # thereby reducing the size of the R class for that library
---android.nonTransitiveRClass=true
--\ No newline at end of file
--+android.nonTransitiveRClass=true
--+kotlin.compiler.force.k1=true
--\ No newline at end of file
--Index: gradle/libs.versions.toml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>[versions]\r\nagp = \"8.11.1\" #no cambiar de la 8.11.1\r\nkotlin = \"2.0.21\"\r\ncoreKtx = \"1.17.0\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nlifecycleRuntimeKtx = \"2.9.4\"\r\nactivityCompose = \"1.11.0\"\r\ncomposeBom = \"2025.10.01\"\r\n#Practica\r\nconstraintlayoutCompose = \"1.1.1\"\r\nnavigationCompose = \"2.9.5\"\r\nfoundation = \"1.9.4\"\r\nappcompat = \"1.7.0\"\r\nmaterial = \"1.12.0\"\r\nfirebase-gservices = \"4.4.4\"\r\nfirebase-bom = \"33.1.0\"\r\n#panoramicas\r\npanoramaGL = \"1.11.0\"\r\nfirebaseFirestore = \"26.0.2\"\r\n\r\n[libraries]\r\nandroidx-core-ktx = { group = \"androidx.core\", name = \"core-ktx\", version.ref = \"coreKtx\" }\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\nandroidx-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nandroidx-espresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nandroidx-lifecycle-runtime-ktx = { group = \"androidx.lifecycle\", name = \"lifecycle-runtime-ktx\", version.ref = \"lifecycleRuntimeKtx\" }\r\nandroidx-activity-compose = { group = \"androidx.activity\", name = \"activity-compose\", version.ref = \"activityCompose\" }\r\nandroidx-compose-bom = { group = \"androidx.compose\", name = \"compose-bom\", version.ref = \"composeBom\" }\r\nandroidx-ui = { group = \"androidx.compose.ui\", name = \"ui\" }\r\nandroidx-ui-graphics = { group = \"androidx.compose.ui\", name = \"ui-graphics\" }\r\nandroidx-ui-tooling = { group = \"androidx.compose.ui\", name = \"ui-tooling\" }\r\nandroidx-ui-tooling-preview = { group = \"androidx.compose.ui\", name = \"ui-tooling-preview\" }\r\nandroidx-ui-test-manifest = { group = \"androidx.compose.ui\", name = \"ui-test-manifest\" }\r\nandroidx-ui-test-junit4 = { group = \"androidx.compose.ui\", name = \"ui-test-junit4\" }\r\nandroidx-material3 = { group = \"androidx.compose.material3\", name = \"material3\" }\r\n#Practica\r\nconstraintlayout-compose = { module = \"androidx.constraintlayout:constraintlayout-compose\", version.ref = \"constraintlayoutCompose\" }\r\nnavigation-compose = { module = \"androidx.navigation:navigation-compose\", version.ref = \"navigationCompose\" }\r\nandroidx-compose-foundation = { group = \"androidx.compose.foundation\", name = \"foundation\", version.ref = \"foundation\" }\r\nandroidx-appcompat = { module = \"androidx.appcompat:appcompat\", version.ref = \"appcompat\" }\r\ngoogle-material = { module = \"com.google.android.material:material\", version.ref = \"material\" }\r\nfirebase-bom = { module = \"com.google.firebase:firebase-bom\", version.ref = \"firebase-bom\" }\r\nfirebase-firestore = { module = \"com.google.firebase:firebase-firestore-ktx\" }\r\n#Panoramicas\r\npanoramaGL = { module = \"com.github.hannesa2:panoramaGL\", version.ref = \"panoramaGL\" }\r\ngoogle-firebase-firestore = { group = \"com.google.firebase\", name = \"firebase-firestore\", version.ref = \"firebaseFirestore\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\nkotlin-android = { id = \"org.jetbrains.kotlin.android\", version.ref = \"kotlin\" }\r\nkotlin-compose = { id = \"org.jetbrains.kotlin.plugin.compose\", version.ref = \"kotlin\" }\r\nfirebase-gservices = { id = \"com.google.gms.google-services\", version.ref = \"firebase-gservices\" }\r\n\r\n\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
----- a/gradle/libs.versions.toml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ b/gradle/libs.versions.toml	(date 1762638917078)
--@@ -1,6 +1,6 @@
-- [versions]
-- agp = "8.11.1" #no cambiar de la 8.11.1
---kotlin = "2.0.21"
--+kotlin = "2.2.0"
-- coreKtx = "1.17.0"
-- junit = "4.13.2"
-- junitVersion = "1.3.0"
--Index: app/src/main/java/com/nextapp/monasterio/LanguageHelper.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\nimport android.content.Context\r\nimport android.content.SharedPreferences\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.core.os.LocaleListCompat\r\n\r\nobject LanguageHelper {\r\n\r\n    private const val PREFS_NAME = \"language_prefs\"\r\n    private const val PREF_KEY_LANGUAGE = \"language_code\"\r\n\r\n    private fun getPrefs(context: Context): SharedPreferences {\r\n        // --- INICIO DE LA CORRECCIN ---\r\n        // Usa SIEMPRE el contexto de la aplicaci贸n para evitar inconsistencias\r\n        return context.applicationContext.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)\r\n        // --- FIN DE LA CORRECCIN ---\r\n    }\r\n\r\n    // 1. Carga el idioma guardado al iniciar la app\r\n    fun loadLocale(context: Context) {\r\n        val language = getPrefs(context).getString(PREF_KEY_LANGUAGE, null)\r\n        if (language != null) {\r\n            val appLocale = LocaleListCompat.forLanguageTags(language)\r\n            AppCompatDelegate.setApplicationLocales(appLocale)\r\n        }\r\n    }\r\n\r\n    // 2. Guarda el nuevo idioma cuando el usuario lo cambia\r\n    fun saveLocale(context: Context, language: String) {\r\n        getPrefs(context).edit().putString(PREF_KEY_LANGUAGE, language).commit()\r\n        val appLocale = LocaleListCompat.forLanguageTags(language)\r\n        AppCompatDelegate.setApplicationLocales(appLocale)\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/LanguageHelper.kt b/app/src/main/java/com/nextapp/monasterio/LanguageHelper.kt
----- a/app/src/main/java/com/nextapp/monasterio/LanguageHelper.kt	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ b/app/src/main/java/com/nextapp/monasterio/LanguageHelper.kt	(date 1762633262572)
--@@ -4,6 +4,7 @@
-- import android.content.SharedPreferences
-- import androidx.appcompat.app.AppCompatDelegate
-- import androidx.core.os.LocaleListCompat
--+import androidx.core.content.edit
-- 
-- object LanguageHelper {
-- 
--@@ -17,7 +18,6 @@
--         // --- FIN DE LA CORRECCIN ---
--     }
-- 
---    // 1. Carga el idioma guardado al iniciar la app
--     fun loadLocale(context: Context) {
--         val language = getPrefs(context).getString(PREF_KEY_LANGUAGE, null)
--         if (language != null) {
--@@ -29,6 +29,7 @@
--     // 2. Guarda el nuevo idioma cuando el usuario lo cambia
--     fun saveLocale(context: Context, language: String) {
--         getPrefs(context).edit().putString(PREF_KEY_LANGUAGE, language).commit()
--+
--         val appLocale = LocaleListCompat.forLanguageTags(language)
--         AppCompatDelegate.setApplicationLocales(appLocale)
--     }
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]/shelved.patch	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ /dev/null	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--@@ -1,639 +0,0 @@
---Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.nextapp.monasterio\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.ComponentActivity\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val newDensity= Density(\r\n                density= currentDensity.density,\r\n                fontScale = currentDensity.fontScale*appFontScale\r\n            )\r\n            CompositionLocalProvider(LocalDensity provides newDensity) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    //  Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n    //  Rutas inmersivas\r\n    val immersiveRoutes = listOf(AppRoutes.PIN_DETALLE)\r\n    val isImmersive = currentRoute in immersiveRoutes\r\n\r\n    //  Actualizar t铆tulo\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            currentTitle.value = when (route) {\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    if (isImmersive) {\r\n        // \uD83C\uDF0C Vista inmersiva sin barra ni men煤\r\n        AppNavigationHost(\r\n            navController = navController,\r\n            modifier = Modifier.fillMaxSize()\r\n        )\r\n    } else {\r\n        // \uD83E\uDDF1 Vista normal con barra y men煤\r\n        ModalNavigationDrawer(\r\n            drawerState = drawerState,\r\n            drawerContent = {\r\n                AppDrawerContent(\r\n                    navController = navController,\r\n                    scope = scope,\r\n                    drawerState = drawerState\r\n                )\r\n            }\r\n        ) {\r\n            Scaffold(\r\n                topBar = {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            IconButton(onClick = {\r\n                                Toast.makeText(context, \"Modo edici贸n (pr贸ximamente)\", Toast.LENGTH_SHORT).show()\r\n                            }) {\r\n                                Icon(\r\n                                    painter = painterResource(id = R.drawable.lapiz),\r\n                                    contentDescription = stringResource(id = R.string.edit_mode)\r\n                                )\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            ) { paddingValues ->\r\n                AppNavigationHost(\r\n                    navController = navController,\r\n                    modifier = Modifier.padding(paddingValues)\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
------ a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1762358031493)
---@@ -59,7 +59,7 @@
---     val currentRoute = currentBackStackEntry?.destination?.route
--- 
---     //  Rutas inmersivas
----    val immersiveRoutes = listOf(AppRoutes.PIN_DETALLE)
---+    val immersiveRoutes = listOf(AppRoutes.PIN_DETALLE, AppRoutes.PANORAMA)
---     val isImmersive = currentRoute in immersiveRoutes
--- 
---     //  Actualizar t铆tulo
---Index: settings.gradle.kts
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>pluginManagement {\r\n    repositories {\r\n        google {\r\n            content {\r\n                includeGroupByRegex(\"com\\\\.android.*\")\r\n                includeGroupByRegex(\"com\\\\.google.*\")\r\n                includeGroupByRegex(\"androidx.*\")\r\n            }\r\n        }\r\n        mavenCentral()\r\n        gradlePluginPortal()\r\n    }\r\n}\r\ndependencyResolutionManagement {\r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n    repositories {\r\n        google()\r\n        mavenCentral( )\r\n        maven { url = uri(\"https://www.jitpack.io\") }\r\n    }\r\n}\r\n\r\nrootProject.name = \"SMOV_Monasterio\"\r\ninclude(\":app\")\r\n 
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/settings.gradle.kts b/settings.gradle.kts
------ a/settings.gradle.kts	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/settings.gradle.kts	(date 1762358031452)
---@@ -9,6 +9,7 @@
---         }
---         mavenCentral()
---         gradlePluginPortal()
---+        maven { url = uri("https://www.jitpack.io") }
---     }
--- }
--- dependencyResolutionManagement {
---Index: gradle/libs.versions.toml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>[versions]\r\nagp = \"8.11.1\" #no cambiar de la 8.11.1\r\nkotlin = \"2.0.21\"\r\ncoreKtx = \"1.17.0\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nlifecycleRuntimeKtx = \"2.9.4\"\r\nactivityCompose = \"1.11.0\"\r\ncomposeBom = \"2025.10.01\"\r\n#Practica\r\nconstraintlayoutCompose = \"1.1.1\"\r\nnavigationCompose = \"2.9.5\"\r\nfoundation = \"1.9.4\"\r\nappcompat = \"1.7.0\"\r\nmaterial = \"1.12.0\"\r\nfirebase-gservices = \"4.4.4\"\r\nfirebase-bom = \"33.1.0\"\r\n\r\n[libraries]\r\nandroidx-core-ktx = { group = \"androidx.core\", name = \"core-ktx\", version.ref = \"coreKtx\" }\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\nandroidx-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nandroidx-espresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nandroidx-lifecycle-runtime-ktx = { group = \"androidx.lifecycle\", name = \"lifecycle-runtime-ktx\", version.ref = \"lifecycleRuntimeKtx\" }\r\nandroidx-activity-compose = { group = \"androidx.activity\", name = \"activity-compose\", version.ref = \"activityCompose\" }\r\nandroidx-compose-bom = { group = \"androidx.compose\", name = \"compose-bom\", version.ref = \"composeBom\" }\r\nandroidx-ui = { group = \"androidx.compose.ui\", name = \"ui\" }\r\nandroidx-ui-graphics = { group = \"androidx.compose.ui\", name = \"ui-graphics\" }\r\nandroidx-ui-tooling = { group = \"androidx.compose.ui\", name = \"ui-tooling\" }\r\nandroidx-ui-tooling-preview = { group = \"androidx.compose.ui\", name = \"ui-tooling-preview\" }\r\nandroidx-ui-test-manifest = { group = \"androidx.compose.ui\", name = \"ui-test-manifest\" }\r\nandroidx-ui-test-junit4 = { group = \"androidx.compose.ui\", name = \"ui-test-junit4\" }\r\nandroidx-material3 = { group = \"androidx.compose.material3\", name = \"material3\" }\r\n#Practica\r\nconstraintlayout-compose = { module = \"androidx.constraintlayout:constraintlayout-compose\", version.ref = \"constraintlayoutCompose\" }\r\nnavigation-compose = { module = \"androidx.navigation:navigation-compose\", version.ref = \"navigationCompose\" }\r\nandroidx-compose-foundation = { group = \"androidx.compose.foundation\", name = \"foundation\", version.ref = \"foundation\" }\r\nandroidx-appcompat = { module = \"androidx.appcompat:appcompat\", version.ref = \"appcompat\" }\r\ngoogle-material = { module = \"com.google.android.material:material\", version.ref = \"material\" }\r\nfirebase-bom = { module = \"com.google.firebase:firebase-bom\", version.ref = \"firebase-bom\" }\r\nfirebase-firestore = { module = \"com.google.firebase:firebase-firestore-ktx\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\nkotlin-android = { id = \"org.jetbrains.kotlin.android\", version.ref = \"kotlin\" }\r\nkotlin-compose = { id = \"org.jetbrains.kotlin.plugin.compose\", version.ref = \"kotlin\" }\r\nfirebase-gservices = { id = \"com.google.gms.google-services\", version.ref = \"firebase-gservices\" }\r\n\r\n\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
------ a/gradle/libs.versions.toml	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/gradle/libs.versions.toml	(date 1762366234772)
---@@ -1,6 +1,6 @@
--- [versions]
--- agp = "8.11.1" #no cambiar de la 8.11.1
----kotlin = "2.0.21"
---+kotlin = "2.2.21"
--- coreKtx = "1.17.0"
--- junit = "4.13.2"
--- junitVersion = "1.3.0"
---@@ -16,6 +16,8 @@
--- material = "1.12.0"
--- firebase-gservices = "4.4.4"
--- firebase-bom = "33.1.0"
---+#panoramicas
---+panoramaGL = "1.11.0"
--- 
--- [libraries]
--- androidx-core-ktx = { group = "androidx.core", name = "core-ktx", version.ref = "coreKtx" }
---@@ -40,7 +42,8 @@
--- google-material = { module = "com.google.android.material:material", version.ref = "material" }
--- firebase-bom = { module = "com.google.firebase:firebase-bom", version.ref = "firebase-bom" }
--- firebase-firestore = { module = "com.google.firebase:firebase-firestore-ktx" }
----
---+#Panoramicas
---+panoramaGL = { module = "com.github.hannesa2:panoramaGL", version.ref = "panoramaGL" }
--- [plugins]
--- android-application = { id = "com.android.application", version.ref = "agp" }
--- kotlin-android = { id = "org.jetbrains.kotlin.android", version.ref = "kotlin" }
---Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.*\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.PinDetalleScreen\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    navController: NavHostController,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen() }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen() }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen() }\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n\r\n        //  Correcci贸n aqu铆: pasamos el navController principal\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController)\r\n        }\r\n\r\n        // \uD83D\uDC47 Ruta inmersiva\r\n        composable(AppRoutes.PIN_DETALLE) {\r\n            PinDetalleScreen(navController = navController)\r\n\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.title_inicio),\r\n                onClick = { navigateTo(AppRoutes.INICIO) }\r\n            )\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.menu_info),\r\n                onClick = { navigateTo(AppRoutes.INFO) }\r\n            )\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.menu_history),\r\n                onClick = { navigateTo(AppRoutes.HISTORIA) }\r\n            )\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.menu_gallery),\r\n                onClick = { navigateTo(AppRoutes.GALERIA) }\r\n            )\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.menu_profile),\r\n                onClick = { navigateTo(AppRoutes.PERFIL) }\r\n            )\r\n            DrawerMenuItem(\r\n                text = stringResource(id = R.string.menu_settings),\r\n                onClick = { navigateTo(AppRoutes.AJUSTES) }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(\r\n    text: String,\r\n    onClick: () -> Unit\r\n) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(\r\n            text = text,\r\n            color = White,\r\n            style = MaterialTheme.typography.bodyMedium\r\n        )\r\n    }\r\n}
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
------ a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1762358031480)
---@@ -11,13 +11,13 @@
--- import androidx.compose.ui.unit.dp
--- import androidx.navigation.NavGraph.Companion.findStartDestination
--- import androidx.navigation.NavHostController
----import androidx.navigation.NavType
----import androidx.navigation.navArgument
---+import androidx.navigation.NavType // <-- Aseg煤rate de que este import existe
---+import androidx.navigation.navArgument // <-- Aseg煤rate de que este import existe
--- import androidx.navigation.compose.NavHost
--- import androidx.navigation.compose.composable
--- import com.nextapp.monasterio.AppRoutes
--- import com.nextapp.monasterio.R
----import com.nextapp.monasterio.ui.screens.*
---+import com.nextapp.monasterio.ui.screens.* // <-- Aseg煤rate de importar PanoramaScreen
--- import com.nextapp.monasterio.ui.theme.MonasteryRed
--- import com.nextapp.monasterio.ui.theme.White
--- import kotlinx.coroutines.CoroutineScope
---@@ -37,9 +37,33 @@
---         composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }
---         composable(AppRoutes.INFO)     { InfoScreen() }
---         composable(AppRoutes.HISTORIA) { HistoriaScreen() }
----        composable(AppRoutes.GALERIA)  { GaleriaScreen() }
---+
---+        // --- ESTA LNEA EST CORRECTA ---
---+        // Pasa el NavController a GaleriaScreen para que su bot贸n funcione
---+        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
---+
---         composable(AppRoutes.PERFIL)   { ProfileScreen() }
---         composable(AppRoutes.AJUSTES)  { AjustesScreen() }
---+
---+        // --- ESTA ES LA MODIFICACIN FINAL ---
---+        // Reemplazamos la l铆nea simple de 'PANORAMA' por esta con argumentos
---+        composable(
---+            route = AppRoutes.PANORAMA + "/{vistaId}", // 1. La ruta espera un ID
---+            arguments = listOf(navArgument("vistaId") { type = NavType.StringType }) // 2. Definimos el ID
---+        ) { backStackEntry ->
---+            // 3. Recogemos el ID de la URL
---+            val vistaId = backStackEntry.arguments?.getString("vistaId")
---+
---+            // 4. Se lo pasamos a PanoramaScreen
---+            if (vistaId != null) {
---+                PanoramaScreen(
---+                    vistaId = vistaId,
---+                    navController = navController
---+                )
---+            }
---+        }
---+
---+        // --- RESTO DE TUS RUTAS (sin cambios) ---
---         composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }
---         composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }
---         composable(
---@@ -64,19 +88,19 @@
---             )
---         }
--- 
----        //  Correcci贸n aqu铆: pasamos el navController principal
---         composable(AppRoutes.VIRTUAL_VISIT) {
---             VirtualVisitScreen(navController = navController)
---         }
--- 
----        //  Ruta inmersiva
---         composable(AppRoutes.PIN_DETALLE) {
---             PinDetalleScreen(navController = navController)
----
---         }
---     }
--- }
--- 
---+//
---+// --- EL RESTO DEL ARCHIVO SE QUEDA EXACTAMENTE IGUAL ---
---+//
--- @OptIn(ExperimentalMaterial3Api::class)
--- @Composable
--- fun AppDrawerContent(
---Index: app/build.gradle.kts
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"io.github.chrisbanes:PhotoView:2.3.0\")\r\n\r\n\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/build.gradle.kts b/app/build.gradle.kts
------ a/app/build.gradle.kts	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/app/build.gradle.kts	(date 1762361761297)
---@@ -76,5 +76,7 @@
---     // Plano Interactivo
---     implementation("io.github.chrisbanes:PhotoView:2.3.0")
--- 
---+    // Panoramica
---+    implementation("com.github.hannesa2:panoramagl:1.14")
--- 
--- }
---Index: app/src/main/java/com/nextapp/monasterio/ui/screens/PlaceHolderScreens.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport androidx.compose.foundation.layout.Box\r\nimport androidx.compose.foundation.layout.fillMaxSize\r\nimport androidx.compose.material3.MaterialTheme\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\n\r\n//Pantallas aun vacias, borrar archivo cuando las pantallas tengan contenido\r\n\r\n@Composable\r\nfun GaleriaScreen() {\r\n    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {\r\n        Text(text = \"Contenido de Galer铆a\", style = MaterialTheme.typography.headlineMedium)\r\n    }\r\n}\r\n\r\n/*@Composable\r\nfun PerfilScreen() {\r\n    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {\r\n        Text(text = \"Contenido de Perfil\", style = MaterialTheme.typography.headlineMedium)\r\n    }\r\n}*/
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/PlaceHolderScreens.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/PlaceHolderScreens.kt
------ a/app/src/main/java/com/nextapp/monasterio/ui/screens/PlaceHolderScreens.kt	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/PlaceHolderScreens.kt	(date 1762358031411)
---@@ -1,25 +1,56 @@
---+// En: ui/screens/PlaceholderScreens.kt (o donde est茅 GaleriaScreen)
---+
--- package com.nextapp.monasterio.ui.screens
--- 
----import androidx.compose.foundation.layout.Box
---+import androidx.compose.foundation.layout.fillMaxWidth
---+import androidx.compose.foundation.layout.Arrangement
---+import androidx.compose.foundation.layout.Column
---+import androidx.compose.foundation.layout.Spacer
--- import androidx.compose.foundation.layout.fillMaxSize
----import androidx.compose.material3.MaterialTheme
---+import androidx.compose.foundation.layout.height
---+import androidx.compose.foundation.layout.padding
---+import androidx.compose.foundation.lazy.LazyColumn // 隆Importante!
---+import androidx.compose.material3.Button
--- import androidx.compose.material3.Text
--- import androidx.compose.runtime.Composable
--- import androidx.compose.ui.Alignment
--- import androidx.compose.ui.Modifier
----
----//Pantallas aun vacias, borrar archivo cuando las pantallas tengan contenido
---+import androidx.compose.ui.unit.dp
---+import androidx.navigation.NavController
---+import com.nextapp.monasterio.AppRoutes
---+import com.nextapp.monasterio.data.MonasterioMapRepository // 隆Importante!
--- 
--- @Composable
----fun GaleriaScreen() {
----    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {
----        Text(text = "Contenido de Galer铆a", style = MaterialTheme.typography.headlineMedium)
---+fun GaleriaScreen(navController: NavController) { // Recuerda que recibe NavController
---+
---+    // 1. Obtenemos la lista completa de vistas del repositorio
---+    val vistas = MonasterioMapRepository.getVistas()
---+
---+    // 2. Usamos LazyColumn para mostrar eficientemente la lista de botones
---+    LazyColumn(
---+        modifier = Modifier
---+            .fillMaxSize()
---+            .padding(horizontal = 32.dp), // A帽adimos padding
---+        verticalArrangement = Arrangement.Center,
---+        horizontalAlignment = Alignment.CenterHorizontally
---+    ) {
---+        // 3. Creamos un item (un bot贸n) por cada vista en la lista
---+        items(vistas.size) { index ->
---+            val vista = vistas[index]
---+
---+            Button(
---+                onClick = {
---+                    // 4. Al hacer clic, navega a PanoramaScreen con el ID de la vista
---+                    navController.navigate(AppRoutes.PANORAMA + "/${vista.id}")
---+                },
---+                modifier = Modifier.fillMaxWidth() // Hacemos que los botones sean anchos
---+            ) {
---+                Text(text = vista.nombre) // Mostramos el nombre descriptivo
---+            }
---+
---+            Spacer(modifier = Modifier.height(16.dp))
---+        }
---     }
--- }
--- 
----/*@Composable
----fun PerfilScreen() {
----    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {
----        Text(text = "Contenido de Perfil", style = MaterialTheme.typography.headlineMedium)
----    }
----}*/
---\ No newline at end of file
---+// ... (tus otros PlaceholderScreens como PerfilScreen, etc.)
---\ No newline at end of file
---Index: .idea/inspectionProfiles/Project_Default.xml
---===================================================================
---diff --git a/.idea/inspectionProfiles/Project_Default.xml b/.idea/inspectionProfiles/Project_Default.xml
---deleted file mode 100644
------ a/.idea/inspectionProfiles/Project_Default.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
---@@ -1,61 +0,0 @@
----<component name="InspectionProjectProfileManager">
----  <profile version="1.0">
----    <option name="myName" value="Project Default" />
----    <inspection_tool class="ComposePreviewDimensionRespectsLimit" enabled="true" level="WARNING" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="ComposePreviewMustBeTopLevelFunction" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="ComposePreviewNeedsComposableAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="ComposePreviewNotSupportedInUnitTestFiles" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="GlancePreviewDimensionRespectsLimit" enabled="true" level="WARNING" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="GlancePreviewMustBeTopLevelFunction" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="GlancePreviewNeedsComposableAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="GlancePreviewNotSupportedInUnitTestFiles" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="PreviewAnnotationInFunctionWithParameters" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="PreviewApiLevelMustBeValid" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="PreviewDeviceShouldUseNewSpec" enabled="true" level="WEAK WARNING" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="PreviewFontScaleMustBeGreaterThanZero" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="PreviewMultipleParameterProviders" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="PreviewParameterProviderOnFirstParameter" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----    <inspection_tool class="PreviewPickerAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
----      <option name="composableFile" value="true" />
----      <option name="previewFile" value="true" />
----    </inspection_tool>
----  </profile>
----</component>
---\ No newline at end of file
---Index: .idea/studiobot.xml
---===================================================================
---diff --git a/.idea/studiobot.xml b/.idea/studiobot.xml
---deleted file mode 100644
------ a/.idea/studiobot.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
---@@ -1,6 +0,0 @@
----<?xml version="1.0" encoding="UTF-8"?>
----<project version="4">
----  <component name="StudioBotProjectSettings">
----    <option name="shareContext" value="OptedIn" />
----  </component>
----</project>
---\ No newline at end of file
---Index: .idea/codeStyles/codeStyleConfig.xml
---===================================================================
---diff --git a/.idea/codeStyles/codeStyleConfig.xml b/.idea/codeStyles/codeStyleConfig.xml
---deleted file mode 100644
------ a/.idea/codeStyles/codeStyleConfig.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
---@@ -1,5 +0,0 @@
----<component name="ProjectCodeStyleConfiguration">
----  <state>
----    <option name="USE_PER_PROJECT_SETTINGS" value="true" />
----  </state>
----</component>
---\ No newline at end of file
---Index: .idea/androidTestResultsUserPreferences.xml
---===================================================================
---diff --git a/.idea/androidTestResultsUserPreferences.xml b/.idea/androidTestResultsUserPreferences.xml
---deleted file mode 100644
------ a/.idea/androidTestResultsUserPreferences.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
---@@ -1,22 +0,0 @@
----<?xml version="1.0" encoding="UTF-8"?>
----<project version="4">
----  <component name="AndroidTestResultsUserPreferences">
----    <option name="androidTestResultsTableState">
----      <map>
----        <entry key="28629151">
----          <value>
----            <AndroidTestResultsTableState>
----              <option name="preferredColumnWidths">
----                <map>
----                  <entry key="Duration" value="90" />
----                  <entry key="Medium_Phone_API_36.0" value="120" />
----                  <entry key="Tests" value="360" />
----                </map>
----              </option>
----            </AndroidTestResultsTableState>
----          </value>
----        </entry>
----      </map>
----    </option>
----  </component>
----</project>
---\ No newline at end of file
---Index: .idea/codeStyles/Project.xml
---===================================================================
---diff --git a/.idea/codeStyles/Project.xml b/.idea/codeStyles/Project.xml
---deleted file mode 100644
------ a/.idea/codeStyles/Project.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
---@@ -1,123 +0,0 @@
----<component name="ProjectCodeStyleConfiguration">
----  <code_scheme name="Project" version="173">
----    <JetCodeStyleSettings>
----      <option name="CODE_STYLE_DEFAULTS" value="KOTLIN_OFFICIAL" />
----    </JetCodeStyleSettings>
----    <codeStyleSettings language="XML">
----      <option name="FORCE_REARRANGE_MODE" value="1" />
----      <indentOptions>
----        <option name="CONTINUATION_INDENT_SIZE" value="4" />
----      </indentOptions>
----      <arrangement>
----        <rules>
----          <section>
----            <rule>
----              <match>
----                <AND>
----                  <NAME>xmlns:android</NAME>
----                  <XML_ATTRIBUTE />
----                  <XML_NAMESPACE>^$</XML_NAMESPACE>
----                </AND>
----              </match>
----            </rule>
----          </section>
----          <section>
----            <rule>
----              <match>
----                <AND>
----                  <NAME>xmlns:.*</NAME>
----                  <XML_ATTRIBUTE />
----                  <XML_NAMESPACE>^$</XML_NAMESPACE>
----                </AND>
----              </match>
----              <order>BY_NAME</order>
----            </rule>
----          </section>
----          <section>
----            <rule>
----              <match>
----                <AND>
----                  <NAME>.*:id</NAME>
----                  <XML_ATTRIBUTE />
----                  <XML_NAMESPACE>http://schemas.android.com/apk/res/android</XML_NAMESPACE>
----                </AND>
----              </match>
----            </rule>
----          </section>
----          <section>
----            <rule>
----              <match>
----                <AND>
----                  <NAME>.*:name</NAME>
----                  <XML_ATTRIBUTE />
----                  <XML_NAMESPACE>http://schemas.android.com/apk/res/android</XML_NAMESPACE>
----                </AND>
----              </match>
----            </rule>
----          </section>
----          <section>
----            <rule>
----              <match>
----                <AND>
----                  <NAME>name</NAME>
----                  <XML_ATTRIBUTE />
----                  <XML_NAMESPACE>^$</XML_NAMESPACE>
----                </AND>
----              </match>
----            </rule>
----          </section>
----          <section>
----            <rule>
----              <match>
----                <AND>
----                  <NAME>style</NAME>
----                  <XML_ATTRIBUTE />
----                  <XML_NAMESPACE>^$</XML_NAMESPACE>
----                </AND>
----              </match>
----            </rule>
----          </section>
----          <section>
----            <rule>
----              <match>
----                <AND>
----                  <NAME>.*</NAME>
----                  <XML_ATTRIBUTE />
----                  <XML_NAMESPACE>^$</XML_NAMESPACE>
----                </AND>
----              </match>
----              <order>BY_NAME</order>
----            </rule>
----          </section>
----          <section>
----            <rule>
----              <match>
----                <AND>
----                  <NAME>.*</NAME>
----                  <XML_ATTRIBUTE />
----                  <XML_NAMESPACE>http://schemas.android.com/apk/res/android</XML_NAMESPACE>
----                </AND>
----              </match>
----              <order>ANDROID_ATTRIBUTE_ORDER</order>
----            </rule>
----          </section>
----          <section>
----            <rule>
----              <match>
----                <AND>
----                  <NAME>.*</NAME>
----                  <XML_ATTRIBUTE />
----                  <XML_NAMESPACE>.*</XML_NAMESPACE>
----                </AND>
----              </match>
----              <order>BY_NAME</order>
----            </rule>
----          </section>
----        </rules>
----      </arrangement>
----    </codeStyleSettings>
----    <codeStyleSettings language="kotlin">
----      <option name="CODE_STYLE_DEFAULTS" value="KOTLIN_OFFICIAL" />
----    </codeStyleSettings>
----  </code_scheme>
----</component>
---\ No newline at end of file
---Index: .idea/.gitignore
---===================================================================
---diff --git a/.idea/.gitignore b/.idea/.gitignore
---deleted file mode 100644
------ a/.idea/.gitignore	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ /dev/null	(revision 908520697335b64df4dc786e407d3b983b76a621)
---@@ -1,3 +0,0 @@
----# Default ignored files
----/shelf/
----/workspace.xml
---Index: .idea/misc.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_21\" default=\"true\" project-jdk-name=\"jbr-21\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/misc.xml b/.idea/misc.xml
------ a/.idea/misc.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/.idea/misc.xml	(date 1762365946520)
---@@ -1,9 +1,5 @@
---+<?xml version="1.0" encoding="UTF-8"?>
--- <project version="4">
---   <component name="ExternalStorageConfigurationManager" enabled="true" />
----  <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="jbr-21" project-jdk-type="JavaSDK">
----    <output url="file://$PROJECT_DIR$/build/classes" />
----  </component>
----  <component name="ProjectType">
----    <option name="id" value="Android" />
----  </component>
---+  <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="jbr-21" project-jdk-type="JavaSDK" />
--- </project>
---\ No newline at end of file
---Index: .idea/gradle.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/gradle.xml b/.idea/gradle.xml
------ a/.idea/gradle.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/.idea/gradle.xml	(date 1762365946571)
---@@ -1,6 +1,5 @@
--- <?xml version="1.0" encoding="UTF-8"?>
--- <project version="4">
----  <component name="GradleMigrationSettings" migrationVersion="1" />
---   <component name="GradleSettings">
---     <option name="linkedExternalProjectsSettings">
---       <GradleProjectSettings>
---Index: .idea/vcs.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"VcsDirectoryMappings\">\r\n    <mapping directory=\"$PROJECT_DIR$\" vcs=\"Git\" />\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/vcs.xml b/.idea/vcs.xml
------ a/.idea/vcs.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/.idea/vcs.xml	(date 1762365792809)
---@@ -1,6 +1,6 @@
--- <?xml version="1.0" encoding="UTF-8"?>
--- <project version="4">
---   <component name="VcsDirectoryMappings">
----    <mapping directory="$PROJECT_DIR$" vcs="Git" />
---+    <mapping directory="" vcs="Git" />
---   </component>
--- </project>
---\ No newline at end of file
---Index: .idea/deploymentTargetSelector.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DROPDOWN\" />\r\n        <DropdownSelection timestamp=\"2025-11-02T21:37:26.652388500Z\">\r\n          <Target type=\"DEFAULT_BOOT\">\r\n            <handle>\r\n              <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=R52T40GVQQB\" />\r\n            </handle>\r\n          </Target>\r\n        </DropdownSelection>\r\n        <DialogSelection>\r\n          <targets>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=RZCX7216PCM\" />\r\n              </handle>\r\n            </Target>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=R52T40GVQQB\" />\r\n              </handle>\r\n            </Target>\r\n          </targets>\r\n        </DialogSelection>\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
------ a/.idea/deploymentTargetSelector.xml	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/.idea/deploymentTargetSelector.xml	(date 1762365792841)
---@@ -4,27 +4,6 @@
---     <selectionStates>
---       <SelectionState runConfigName="app">
---         <option name="selectionMode" value="DROPDOWN" />
----        <DropdownSelection timestamp="2025-11-02T21:37:26.652388500Z">
----          <Target type="DEFAULT_BOOT">
----            <handle>
----              <DeviceId pluginId="PhysicalDevice" identifier="serial=R52T40GVQQB" />
----            </handle>
----          </Target>
----        </DropdownSelection>
----        <DialogSelection>
----          <targets>
----            <Target type="DEFAULT_BOOT">
----              <handle>
----                <DeviceId pluginId="PhysicalDevice" identifier="serial=RZCX7216PCM" />
----              </handle>
----            </Target>
----            <Target type="DEFAULT_BOOT">
----              <handle>
----                <DeviceId pluginId="PhysicalDevice" identifier="serial=R52T40GVQQB" />
----              </handle>
----            </Target>
----          </targets>
----        </DialogSelection>
---       </SelectionState>
---     </selectionStates>
---   </component>
---Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci贸n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti贸n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
------ a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision 908520697335b64df4dc786e407d3b983b76a621)
---+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1762358031507)
---@@ -16,4 +16,5 @@
---     const val CONFIRMACION_RESERVA = "confirmacion_reserva"
---     const val VIRTUAL_VISIT = "virtual_visit"
---     const val PIN_DETALLE = "pin_detalle"
---+    const val PANORAMA = "panorama"
--- }
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15__Changes_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15__Changes_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15__Changes_.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ /dev/null	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--@@ -1,7 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]" date="1762366521209" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_05_11_2025_19_15_[Changes]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 05/11/2025 19:15 [Changes]" />
---  <binary>
---    <option name="BEFORE_PATH" value=".idea/.name" />
---  </binary>
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]/shelved.patch	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ /dev/null	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--@@ -1,32 +0,0 @@
---Index: .idea/misc.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_21\" default=\"true\" project-jdk-name=\"jbr-21\" project-jdk-type=\"JavaSDK\" />\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/misc.xml b/.idea/misc.xml
------ a/.idea/misc.xml	(revision 708c6a78c122aaa13d5546fe078947800d0c3b61)
---+++ b/.idea/misc.xml	(date 1762598797154)
---@@ -1,4 +1,3 @@
----<?xml version="1.0" encoding="UTF-8"?>
--- <project version="4">
---   <component name="ExternalStorageConfigurationManager" enabled="true" />
---   <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="jbr-21" project-jdk-type="JavaSDK" />
---Index: .idea/gradle.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/.idea/gradle.xml b/.idea/gradle.xml
------ a/.idea/gradle.xml	(revision 708c6a78c122aaa13d5546fe078947800d0c3b61)
---+++ b/.idea/gradle.xml	(date 1762598845132)
---@@ -1,5 +1,6 @@
--- <?xml version="1.0" encoding="UTF-8"?>
--- <project version="4">
---+  <component name="GradleMigrationSettings" migrationVersion="1" />
---   <component name="GradleSettings">
---     <option name="linkedExternalProjectsSettings">
---       <GradleProjectSettings>
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47__Changes_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47__Changes_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47__Changes_.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ /dev/null	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]" date="1762598854800" recycled="false" toDelete="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_08_11_2025_11_47_[Changes]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 08/11/2025 11:47 [Changes]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/vcs.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"VcsDirectoryMappings\">\r\n    <mapping directory=\"\" vcs=\"Git\" />\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/vcs.xml b/.idea/vcs.xml
----- a/.idea/vcs.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ b/.idea/vcs.xml	(date 1762631952646)
--@@ -1,6 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--   <component name="VcsDirectoryMappings">
---    <mapping directory="" vcs="Git" />
--+    <mapping directory="$PROJECT_DIR$" vcs="Git" />
--   </component>
-- </project>
--\ No newline at end of file
--Index: .idea/misc.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_21\" default=\"true\" project-jdk-name=\"jbr-21\" project-jdk-type=\"JavaSDK\" />\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/misc.xml b/.idea/misc.xml
----- a/.idea/misc.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ b/.idea/misc.xml	(date 1762637952730)
--@@ -1,4 +1,3 @@
---<?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--   <component name="ExternalStorageConfigurationManager" enabled="true" />
--   <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="jbr-21" project-jdk-type="JavaSDK" />
--Index: .idea/deploymentTargetSelector.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DROPDOWN\" />\r\n        <DropdownSelection timestamp=\"2025-11-07T14:58:50.699472400Z\">\r\n          <Target type=\"DEFAULT_BOOT\">\r\n            <template>\r\n              <DeviceId pluginId=\"FirebaseDirectAccess\" type=\"TEMPLATE\" identifier=\"model_id=akita/34\" />\r\n            </template>\r\n          </Target>\r\n        </DropdownSelection>\r\n        <DialogSelection>\r\n          <targets>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=RZCX7216PCM\" />\r\n              </handle>\r\n            </Target>\r\n            <Target type=\"DEFAULT_BOOT\">\r\n              <handle>\r\n                <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=R52T40GVQQB\" />\r\n              </handle>\r\n            </Target>\r\n          </targets>\r\n        </DialogSelection>\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
----- a/.idea/deploymentTargetSelector.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ b/.idea/deploymentTargetSelector.xml	(date 1762631952663)
--@@ -4,27 +4,6 @@
--     <selectionStates>
--       <SelectionState runConfigName="app">
--         <option name="selectionMode" value="DROPDOWN" />
---        <DropdownSelection timestamp="2025-11-07T14:58:50.699472400Z">
---          <Target type="DEFAULT_BOOT">
---            <template>
---              <DeviceId pluginId="FirebaseDirectAccess" type="TEMPLATE" identifier="model_id=akita/34" />
---            </template>
---          </Target>
---        </DropdownSelection>
---        <DialogSelection>
---          <targets>
---            <Target type="DEFAULT_BOOT">
---              <handle>
---                <DeviceId pluginId="PhysicalDevice" identifier="serial=RZCX7216PCM" />
---              </handle>
---            </Target>
---            <Target type="DEFAULT_BOOT">
---              <handle>
---                <DeviceId pluginId="PhysicalDevice" identifier="serial=R52T40GVQQB" />
---              </handle>
---            </Target>
---          </targets>
---        </DialogSelection>
--       </SelectionState>
--     </selectionStates>
--   </component>
--Index: .idea/gradle.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/gradle.xml b/.idea/gradle.xml
----- a/.idea/gradle.xml	(revision 1ce74093873ec1b16c413750e558114559284ef6)
--+++ b/.idea/gradle.xml	(date 1762632722244)
--@@ -1,5 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--+  <component name="GradleMigrationSettings" migrationVersion="1" />
--   <component name="GradleSettings">
--     <option name="linkedExternalProjectsSettings">
--       <GradleProjectSettings>
Index: .idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_11_59_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_11_59_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_11_59_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_11_59_[Changes]/shelved.patch	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,1012 +0,0 @@
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIOS</string>\r\n    <string name=\"child_mode_view\">Modo Ni帽os</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n    <string name=\"edit_mode\">MODO EDICIN</string>\r\n    <string name=\"location_error\">No se encontr贸 una app para abrir la ubicaci贸n.</string>\r\n    <string name=\"contact_data\">Datos de contacto</string>\r\n    <string name=\"location_data\">Ubicaci贸n</string>\r\n    <string name=\"email_data\">Correo electr贸nico</string>\r\n    <string name=\"phone_data\">Tel茅fono</string>\r\n    <string name=\"visit_schedule\">Horarios de Visita</string>\r\n    <string name=\"monday_to_friday\">Lunes a Viernes:</string>\r\n    <string name=\"play_audio\" />\r\n    <string name=\"dont_show_again\">No volver a mostrar</string>\r\n    <string name=\"understand\">Entendido</string>\r\n    <string name=\"map_tutorial_body\">Este es el cuerpo del tutorial</string>\r\n    <string name=\"map_tutorial_title\">Este es el titulo del tutorial</string>\r\n    <string name=\"map_tutorial_body2\">Este es el cuerpo del tutorial del mapa 2</string>\r\n    <string name=\"map_tutorial_title2\">Este es el titulo del tutorial del mapa 2</string>\r\n    <string name=\"pin_tutorial_body\">Este es el cuerpo del tutorial del pin</string>\r\n    <string name=\"pin_tutorial_title\">Este es el titulo del tutorial del pin</string>\r\n    <string name=\"next\">Siguiente</string>\r\n    <string name=\"map_tutorial_body1\">En la parte superior izquierda, el s铆mbolo () permite volver al inicio</string>\r\n    <string name=\"map_tutorial_body1_2\">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>\r\n    <string name=\"map_tutorial_body1_3\">Adem谩s de tocando en el mapa se puede interactuar con este a partir de los botones en la parte derecha que permiten ampliar, desampliar y centrar el mapa</string>\r\n    <string name=\"submapa_1\">Tocando en el s铆mbolo () podemos volver al mapa general</string>\r\n    <string name=\"submapa_2\">Tocando en los distintos pines podemos entrar a los puntos de inter茅s</string>\r\n    <string name=\"pin_1\">Pulsando en el s铆mbolo (), se puede volver al mapa</string>\r\n    <string name=\"pin_2\">Puedes desplazarte por las im谩genes o pulsar en ellas para ampliarlas</string>\r\n    <string name=\"pin_3\">Pulsando aqu铆 puedes escuchar el audio del texto</string>\r\n    <string name=\"pin_4\">Para acceder a la vista 360 pulse este bot贸n</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision d7dcb4ab27ab0fd1db0715ac1e30f50a6659fec7)
-+++ b/app/src/main/res/values/strings.xml	(date 1763807456722)
-@@ -108,7 +108,7 @@
-     <string name="next">Siguiente</string>
-     <string name="map_tutorial_body1">En la parte superior izquierda, el s铆mbolo () permite volver al inicio</string>
-     <string name="map_tutorial_body1_2">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>
--    <string name="map_tutorial_body1_3">Adem谩s de tocando en el mapa se puede interactuar con este a partir de los botones en la parte derecha que permiten ampliar, desampliar y centrar el mapa</string>
-+    <string name="map_tutorial_body1_3">Adem谩s, los botones de la parte derecha te permiten ampliar el mapa, reducirlo o volver a su tama帽o  voriginal</string>
-     <string name="submapa_1">Tocando en el s铆mbolo () podemos volver al mapa general</string>
-     <string name="submapa_2">Tocando en los distintos pines podemos entrar a los puntos de inter茅s</string>
-     <string name="pin_1">Pulsando en el s铆mbolo (), se puede volver al mapa</string>
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/AjustesScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.activity.compose.LocalActivity\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.layout.Arrangement\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.runtime.collectAsState\r\nimport androidx.compose.runtime.getValue\r\nimport androidx.compose.runtime.mutableStateOf\r\nimport androidx.compose.runtime.remember\r\nimport androidx.compose.runtime.setValue\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport com.nextapp.monasterio.LanguageHelper\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\n\r\n@Composable\r\nfun AjustesScreen(viewModel: AjustesViewModel) {\r\n    //  Usa LocalActivity en lugar de LocalContext\r\n    val activity = LocalActivity.current as? AppCompatActivity ?: return\r\n    val botonesVisibles by viewModel.botonesVisibles.collectAsState()\r\n\r\n    DisposableEffect(Unit) {\r\n        activity.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    Column(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .verticalScroll(rememberScrollState())\r\n            .padding(16.dp),\r\n        horizontalAlignment = Alignment.CenterHorizontally\r\n    ) {\r\n        Text(\r\n            text = stringResource(id = R.string.language_select),\r\n            style = MaterialTheme.typography.headlineMedium\r\n        )\r\n\r\n        Spacer(modifier = Modifier.height(32.dp))\r\n\r\n        // Bot贸n para Espa帽ol\r\n        Button(onClick = {\r\n            LanguageHelper.saveLocale(activity, \"es\")\r\n            activity.recreate()\r\n        }) {\r\n            Text(\"Espa帽ol\")\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(16.dp))\r\n\r\n        // Bot贸n para Ingl茅s\r\n        Button(onClick = {\r\n            LanguageHelper.saveLocale(activity, \"en\")\r\n            activity.recreate()\r\n        }) {\r\n            Text(\"English\")\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(16.dp))\r\n\r\n        // Bot贸n para Alem谩n\r\n        Button(onClick = {\r\n            LanguageHelper.saveLocale(activity, \"de\")\r\n            activity.recreate()\r\n        }) {\r\n            Text(\"Deutsch\")\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(48.dp))\r\n\r\n        Text(\r\n            text = stringResource(R.string.font_size_select),\r\n            style = MaterialTheme.typography.headlineMedium\r\n        )\r\n\r\n        Spacer(modifier = Modifier.height(32.dp))\r\n\r\n\r\n        Button(\r\n            onClick = {\r\n                FontSize.guardarFontScale(activity, 1.0f)\r\n                activity.recreate()\r\n            }\r\n        ) {\r\n            Text(\r\n                text = stringResource(R.string.font_normal),\r\n                textAlign = TextAlign.Center\r\n            )\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(16.dp))\r\n\r\n        Button(\r\n            onClick = {\r\n                FontSize.guardarFontScale(activity, 1.3f)\r\n                activity.recreate()\r\n            }\r\n        ) {\r\n            Text(\r\n                text = stringResource(R.string.font_big),\r\n                textAlign = TextAlign.Center\r\n            )\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(16.dp))\r\n\r\n        Button(\r\n            onClick = {\r\n                FontSize.guardarFontScale(activity, 1.6f)\r\n                activity.recreate()\r\n            }\r\n        ) {\r\n            Text(\r\n                text = stringResource(R.string.font_extrabig),\r\n                textAlign = TextAlign.Center\r\n            )\r\n        }\r\n\r\n        Spacer(modifier = Modifier.height(32.dp))\r\n\r\n        Row(\r\n            verticalAlignment = Alignment.CenterVertically,\r\n        ){\r\n            Text(\r\n                text=stringResource(R.string.navegation_button),\r\n                style = MaterialTheme.typography.headlineMedium,\r\n            )\r\n            Checkbox(\r\n                checked = !botonesVisibles,\r\n                onCheckedChange = {nuevoValor ->\r\n                    viewModel.setBotonesVisibles(!nuevoValor)\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/AjustesScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/AjustesScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/AjustesScreen.kt	(revision d7dcb4ab27ab0fd1db0715ac1e30f50a6659fec7)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/AjustesScreen.kt	(date 1763808586976)
-@@ -3,148 +3,297 @@
- import android.content.pm.ActivityInfo
- import androidx.activity.compose.LocalActivity
- import androidx.appcompat.app.AppCompatActivity
-+import androidx.compose.foundation.Image
-+import androidx.compose.foundation.background
-+import androidx.compose.foundation.clickable
- import androidx.compose.foundation.layout.*
--import androidx.compose.foundation.layout.Arrangement
- import androidx.compose.foundation.rememberScrollState
-+import androidx.compose.foundation.shape.RoundedCornerShape
- import androidx.compose.foundation.verticalScroll
- import androidx.compose.material3.*
--import androidx.compose.runtime.Composable
--import androidx.compose.runtime.DisposableEffect
--import androidx.compose.runtime.collectAsState
--import androidx.compose.runtime.getValue
--import androidx.compose.runtime.mutableStateOf
--import androidx.compose.runtime.remember
--import androidx.compose.runtime.setValue
-+import androidx.compose.runtime.*
- import androidx.compose.ui.Alignment
- import androidx.compose.ui.Modifier
-+import androidx.compose.ui.draw.clip
-+import androidx.compose.ui.draw.rotate
-+import androidx.compose.ui.graphics.Color
-+import androidx.compose.ui.platform.LocalConfiguration
-+import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.res.stringResource
-+import androidx.compose.ui.text.font.FontWeight
- import androidx.compose.ui.text.style.TextAlign
- import androidx.compose.ui.unit.dp
-+import androidx.compose.ui.unit.sp
- import com.nextapp.monasterio.LanguageHelper
- import com.nextapp.monasterio.R
- import com.nextapp.monasterio.utils.FontSize
- import com.nextapp.monasterio.viewModels.AjustesViewModel
-+import java.util.Locale
- 
-+@OptIn(ExperimentalMaterial3Api::class)
- @Composable
- fun AjustesScreen(viewModel: AjustesViewModel) {
--    //  Usa LocalActivity en lugar de LocalContext
-     val activity = LocalActivity.current as? AppCompatActivity ?: return
-     val botonesVisibles by viewModel.botonesVisibles.collectAsState()
- 
-+    // Configuraci贸n actual para detectar idioma y fuente inicial
-+    val configuration = LocalConfiguration.current
-+    val currentLocale = configuration.locales[0]
-+    val currentFontScale = configuration.fontScale
-+
-     DisposableEffect(Unit) {
-         activity.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
--        onDispose {
--
--        }
-+        onDispose {}
-     }
- 
-     Column(
-         modifier = Modifier
-             .fillMaxSize()
-+            .background(MaterialTheme.colorScheme.background)
-             .verticalScroll(rememberScrollState())
-             .padding(16.dp),
-         horizontalAlignment = Alignment.CenterHorizontally
-     ) {
-+        // T铆tulo Principal
-         Text(
--            text = stringResource(id = R.string.language_select),
--            style = MaterialTheme.typography.headlineMedium
-+            text = stringResource(R.string.title_settings),
-+            style = MaterialTheme.typography.headlineLarge,
-+            fontWeight = FontWeight.Bold,
-+            color = MaterialTheme.colorScheme.primary,
-+            modifier = Modifier.padding(bottom = 24.dp)
-         )
- 
--        Spacer(modifier = Modifier.height(32.dp))
--
--        // Bot贸n para Espa帽ol
--        Button(onClick = {
--            LanguageHelper.saveLocale(activity, "es")
--            activity.recreate()
--        }) {
--            Text("Espa帽ol")
--        }
--
--        Spacer(modifier = Modifier.height(16.dp))
--
--        // Bot贸n para Ingl茅s
--        Button(onClick = {
--            LanguageHelper.saveLocale(activity, "en")
--            activity.recreate()
--        }) {
--            Text("English")
-+        // ==========================================
-+        // 1. SELECTOR DE IDIOMA (DROPDOWN CON BANDERAS)
-+        // ==========================================
-+        SettingsSectionCard(title = stringResource(R.string.language_select)) {
-+            LanguageSelector(activity, currentLocale)
-         }
- 
--        Spacer(modifier = Modifier.height(16.dp))
-+        Spacer(modifier = Modifier.height(24.dp))
- 
--        // Bot贸n para Alem谩n
--        Button(onClick = {
--            LanguageHelper.saveLocale(activity, "de")
--            activity.recreate()
--        }) {
--            Text("Deutsch")
-+        // ==========================================
-+        // 2. TAMAO DE FUENTE (SLIDER)
-+        // ==========================================
-+        SettingsSectionCard(title = stringResource(R.string.font_size_select)) {
-+            FontSizeSlider(activity, currentFontScale)
-         }
- 
--        Spacer(modifier = Modifier.height(48.dp))
-+        Spacer(modifier = Modifier.height(24.dp))
- 
--        Text(
--            text = stringResource(R.string.font_size_select),
--            style = MaterialTheme.typography.headlineMedium
--        )
--
--        Spacer(modifier = Modifier.height(32.dp))
--
--
--        Button(
--            onClick = {
--                FontSize.guardarFontScale(activity, 1.0f)
--                activity.recreate()
-+        // ==========================================
-+        // 3. BOTONES DE NAVEGACIN (SWITCH)
-+        // ==========================================
-+        SettingsSectionCard(title = stringResource(R.string.navegation_button)) {
-+            Row(
-+                modifier = Modifier
-+                    .fillMaxWidth()
-+                    .padding(vertical = 8.dp),
-+                verticalAlignment = Alignment.CenterVertically,
-+                horizontalArrangement = Arrangement.SpaceBetween
-+            ) {
-+                Text(
-+                    text = if (botonesVisibles) "Visibles" else "Ocultos",
-+                    style = MaterialTheme.typography.bodyLarge
-+                )
-+                Switch(
-+                    checked = botonesVisibles,
-+                    onCheckedChange = { viewModel.setBotonesVisibles(it) },
-+                    colors = SwitchDefaults.colors(
-+                        checkedThumbColor = MaterialTheme.colorScheme.primary,
-+                        checkedTrackColor = MaterialTheme.colorScheme.primaryContainer
-+                    )
-+                )
-             }
--        ) {
-+        }
-+    }
-+}
-+
-+// --- COMPONENTE TARJETA PARA SECCIONES ---
-+@Composable
-+fun SettingsSectionCard(title: String, content: @Composable () -> Unit) {
-+    Card(
-+        modifier = Modifier.fillMaxWidth(),
-+        shape = RoundedCornerShape(16.dp),
-+        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp),
-+        colors = CardDefaults.cardColors(containerColor = MaterialTheme.colorScheme.surface)
-+    ) {
-+        Column(modifier = Modifier.padding(20.dp)) {
-             Text(
--                text = stringResource(R.string.font_normal),
--                textAlign = TextAlign.Center
-+                text = title,
-+                style = MaterialTheme.typography.titleMedium,
-+                fontWeight = FontWeight.Bold,
-+                color = MaterialTheme.colorScheme.onSurface
-             )
--        }
--
--        Spacer(modifier = Modifier.height(16.dp))
-+            Spacer(modifier = Modifier.height(16.dp))
-+            content()
-+        }
-+    }
-+}
-+
-+// --- COMPONENTE SELECTOR DE IDIOMA ---
-+@Composable
-+fun LanguageSelector(activity: AppCompatActivity, currentLocale: Locale) {
-+    var expanded by remember { mutableStateOf(false) }
-+    val languageCode = currentLocale.language
- 
--        Button(
--            onClick = {
--                FontSize.guardarFontScale(activity, 1.3f)
-+    // Mapeo de c贸digo a recurso de bandera y nombre
-+    val currentFlag = when (languageCode) {
-+        "de" -> R.drawable.alemania
-+        "en" -> R.drawable.reinounido
-+        else -> R.drawable.espanya
-+    }
-+
-+    val currentName = when (languageCode) {
-+        "de" -> "Deutsch"
-+        "en" -> "English"
-+        else -> "Espa帽ol"
-+    }
-+
-+    Box(modifier = Modifier.fillMaxWidth()) {
-+        // El bot贸n que se muestra siempre
-+        OutlinedButton(
-+            onClick = { expanded = true },
-+            modifier = Modifier.fillMaxWidth(),
-+            shape = RoundedCornerShape(12.dp),
-+            colors = ButtonDefaults.outlinedButtonColors(containerColor = Color.Transparent)
-+        ) {
-+            Row(
-+                verticalAlignment = Alignment.CenterVertically,
-+                horizontalArrangement = Arrangement.SpaceBetween,
-+                modifier = Modifier.fillMaxWidth()
-+            ) {
-+                Row(verticalAlignment = Alignment.CenterVertically) {
-+                    Image(
-+                        painter = painterResource(id = currentFlag),
-+                        contentDescription = null,
-+                        modifier = Modifier
-+                            .size(32.dp)
-+                            .clip(RoundedCornerShape(4.dp))
-+                    )
-+                    Spacer(modifier = Modifier.width(16.dp))
-+                    Text(text = currentName, style = MaterialTheme.typography.bodyLarge, color = MaterialTheme.colorScheme.onSurface)
-+                }
-+                Icon(
-+                    painter = painterResource(id = R.drawable.arrow_down),
-+                    contentDescription = null,
-+                    tint = MaterialTheme.colorScheme.onSurface,
-+                    modifier = Modifier.rotate(if (expanded) 180f else 0f)
-+                )
-+            }
-+        }
-+
-+        // El men煤 desplegable
-+        DropdownMenu(
-+            expanded = expanded,
-+            onDismissRequest = { expanded = false },
-+            modifier = Modifier.fillMaxWidth(0.85f) // Un poco menos del ancho total
-+        ) {
-+            LanguageItem(activity, "es", "Espa帽ol", R.drawable.espanya) { expanded = false }
-+            LanguageItem(activity, "en", "English", R.drawable.reinounido) { expanded = false }
-+            LanguageItem(activity, "de", "Deutsch", R.drawable.alemania) { expanded = false }
-+        }
-+    }
-+}
-+
-+@Composable
-+fun LanguageItem(
-+    activity: AppCompatActivity,
-+    code: String,
-+    name: String,
-+    flagRes: Int,
-+    onDismiss: () -> Unit
-+) {
-+    DropdownMenuItem(
-+        text = {
-+            Row(verticalAlignment = Alignment.CenterVertically) {
-+                Image(
-+                    painter = painterResource(id = flagRes),
-+                    contentDescription = null,
-+                    modifier = Modifier.size(28.dp).clip(RoundedCornerShape(4.dp))
-+                )
-+                Spacer(modifier = Modifier.width(16.dp))
-+                Text(text = name)
-+            }
-+        },
-+        onClick = {
-+            onDismiss()
-+            val currentLanguage = activity.resources.configuration.locales[0].language
-+
-+            if (currentLanguage != code) {
-+                LanguageHelper.saveLocale(activity, code)
-                 activity.recreate()
-             }
--        ) {
--            Text(
--                text = stringResource(R.string.font_big),
--                textAlign = TextAlign.Center
--            )
--        }
-+        }
-+    )
-+}
-+
-+// --- COMPONENTE SLIDER DE FUENTE ---
-+@Composable
-+fun FontSizeSlider(activity: AppCompatActivity, currentScale: Float) {
-+    // Mapeamos: 1.0f -> 0f (Slider), 1.3f -> 1f, 1.6f -> 2f
-+    val initialSliderPos = when {
-+        currentScale >= 1.5f -> 2f
-+        currentScale >= 1.2f -> 1f
-+        else -> 0f
-+    }
-+
-+    var sliderPosition by remember { mutableFloatStateOf(initialSliderPos) }
-+
-+    Column(horizontalAlignment = Alignment.CenterHorizontally) {
-+
-+        // Texto de previsualizaci贸n din谩mica
-+        // Calculamos el tama帽o de fuente base (ej. 16sp) multiplicado por la escala del slider
-+        val previewScale = when (sliderPosition.toInt()) {
-+            0 -> 1.0f
-+            1 -> 1.3f
-+            else -> 1.6f
-+        }
-+
-+        Text(
-+            text = "Texto de Ejemplo / Sample Text",
-+            fontSize = 16.sp * previewScale, // Cambia en tiempo real
-+            style = MaterialTheme.typography.bodyMedium,
-+            color = MaterialTheme.colorScheme.primary,
-+            modifier = Modifier
-+                .padding(bottom = 16.dp)
-+                .height(40.dp) // Altura fija para evitar saltos bruscos de layout
-+                .wrapContentHeight(Alignment.CenterVertically)
-+        )
- 
--        Spacer(modifier = Modifier.height(16.dp))
--
--        Button(
--            onClick = {
--                FontSize.guardarFontScale(activity, 1.6f)
--                activity.recreate()
--            }
--        ) {
--            Text(
--                text = stringResource(R.string.font_extrabig),
--                textAlign = TextAlign.Center
-+        Slider(
-+            value = sliderPosition,
-+            onValueChange = { sliderPosition = it },
-+            valueRange = 0f..2f,
-+            steps = 1, // Esto crea exactamente 3 puntos (0, 1, 2)
-+            onValueChangeFinished = {
-+                // Al soltar, guardamos y recreamos
-+                val newScale = when (java.lang.Math.round(sliderPosition)) {
-+                    0 -> 1.0f
-+                    1 -> 1.3f
-+                    else -> 1.6f
-+                }
-+                // Solo recreamos si ha cambiado
-+                if (newScale != currentScale) {
-+                    FontSize.guardarFontScale(activity, newScale)
-+                    activity.recreate()
-+                }
-+            },
-+            colors = SliderDefaults.colors(
-+                thumbColor = MaterialTheme.colorScheme.primary,
-+                activeTrackColor = MaterialTheme.colorScheme.primary,
-+                inactiveTrackColor = MaterialTheme.colorScheme.surfaceVariant
-             )
--        }
--
--        Spacer(modifier = Modifier.height(32.dp))
-+        )
- 
-+        // Etiquetas debajo del slider
-         Row(
--            verticalAlignment = Alignment.CenterVertically,
--        ){
--            Text(
--                text=stringResource(R.string.navegation_button),
--                style = MaterialTheme.typography.headlineMedium,
--            )
--            Checkbox(
--                checked = !botonesVisibles,
--                onCheckedChange = {nuevoValor ->
--                    viewModel.setBotonesVisibles(!nuevoValor)
--                }
--            )
-+            modifier = Modifier.fillMaxWidth().padding(horizontal = 8.dp),
-+            horizontalArrangement = Arrangement.SpaceBetween
-+        ) {
-+            Text(text = "A", style = MaterialTheme.typography.bodyMedium)      // Peque帽o
-+            Text(text = "A+", style = MaterialTheme.typography.titleMedium)    // Mediano
-+            Text(text = "A++", style = MaterialTheme.typography.headlineSmall) // Grande
-         }
-     }
--}
-+}
-\ No newline at end of file
-Index: app/src/main/res/values-de/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus verlassen</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">nderungen speichern</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Heute</string>\r\n    <string name=\"title_appointment\">Termin vereinbaren</string>\r\n    <string name=\"option_phone_appointment\">Buchen Sie telefonisch</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Stunde</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Datum ausw盲hlen</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail-Adresse erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig.</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden.</string>\r\n    <string name=\"hour_no_selected\">Es muss ein Zeitpunkt ausgew盲hlt werden.</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Stornieren</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte klicken Sie in der soeben ge枚ffneten E-Mail-Anwendung auf Senden, um Ihre Anfrage abzuschlieen. Wir werden Ihnen die Verf眉gbarkeit per E-Mail best盲tigen..</string>\r\n    <string name=\"email_subject\">Reservierungsanfrage ansehen - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich m枚chte hiermit eine Reservierung f眉r einen Besuch im Kloster anfragen. Bitte geben Sie folgende Daten an:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden.</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">W盲hlen Sie die Schriftgr枚e aus</string>\r\n    <string name=\"font_extrabig\">Extra gro</string>\r\n    <string name=\"font_normal\">Mittlere</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"title_entrada\">Klostereingang</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Geh zur眉ck</string>\r\n    <string name=\"see_360\">360潞-Ansicht</string>\r\n    <string name=\"contentdescription_image_pin\">Bild anpinnen (zum Vergr枚ern anklicken)</string>\r\n    <string name=\"readjust\">Zur眉cksetzen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Zunahme</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Undefiniertes Ziel</string>\r\n    <string name=\"notdefined_destinyplane\">Zielebene nicht definiert</string>\r\n    <string name=\"plane_loading\">Ladeplan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n    <string name=\"child_mode\">KINDERMODUS</string>\r\n    <string name=\"child_mode_view\">Kindermodus</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Spiel</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">SPIEL</string>\r\n    <string name=\"edit_mode\">BEARBEITUNGSMODUS</string>\r\n    <string name=\"location_error\">Es wurde keine App gefunden, mit der der Standort ge枚ffnet werden kann.</string>\r\n    <string name=\"contact_data\">Kontaktinformationen</string>\r\n    <string name=\"location_data\">Standort</string>\r\n    <string name=\"email_data\">E-Mail</string>\r\n    <string name=\"phone_data\">Telefon</string>\r\n    <string name=\"visit_schedule\">ffnungszeiten</string>\r\n    <string name=\"monday_to_friday\">Montag bis Freitag:</string>\r\n    <string name=\"play_audio\" />\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
---- a/app/src/main/res/values-de/strings.xml	(revision d7dcb4ab27ab0fd1db0715ac1e30f50a6659fec7)
-+++ b/app/src/main/res/values-de/strings.xml	(date 1763807622965)
-@@ -102,4 +102,25 @@
-     <string name="visit_schedule">ffnungszeiten</string>
-     <string name="monday_to_friday">Montag bis Freitag:</string>
-     <string name="play_audio" />
-+    <string name="dont_show_again">Nicht mehr anzeigen</string>
-+    <string name="understand">Verstanden</string>
-+    <string name="map_tutorial_body">Dies ist der Inhalt des Tutorials</string>
-+    <string name="map_tutorial_title">Dies ist der Titel des Tutorials</string>
-+    <string name="map_tutorial_body2">Dies ist der Inhalt des Kartentutorials 2</string>
-+    <string name="map_tutorial_title2">Dies ist der Titel des Kartentutorials 2</string>
-+    <string name="pin_tutorial_body">Dies ist der Inhalt des Pin-Tutorials</string>
-+    <string name="pin_tutorial_title">Dies ist der Titel des Pin-Tutorials</string>
-+    <string name="next">Weiter</string>
-+
-+    <string name="map_tutorial_body1">Oben links k枚nnen Sie 眉ber das Symbol () zum Start zur眉ckkehren.</string>
-+    <string name="map_tutorial_body1_2">Tippen Sie auf die farbigen Bereiche der Karte, um die verschiedenen Bereiche zu erkunden.</string>
-+    <string name="map_tutorial_body1_3">Mit den Tasten auf der rechten Seite k枚nnen Sie die Karte vergr枚ern, verkleinern oder zur眉cksetzen.</string>
-+
-+    <string name="submapa_1">Tippen Sie auf das Symbol (), um zur bersichtskarte zur眉ckzukehren.</string>
-+    <string name="submapa_2">Tippen Sie auf die verschiedenen Pins, um die Details aufzurufen.</string>
-+
-+    <string name="pin_1">Dr眉cken Sie das Symbol (), um zur Karte zur眉ckzukehren.</string>
-+    <string name="pin_2">Wischen Sie durch die Bilder oder tippen Sie darauf, um sie zu vergr枚ern.</string>
-+    <string name="pin_3">Tippen Sie hier, um den Audioguide anzuh枚ren.</string>
-+    <string name="pin_4">Dr眉cken Sie diesen Button, um die 360掳-Ansicht zu 枚ffnen.</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/res/values-en/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"title_entrada\">Monastery Entrance</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n    <string name=\"child_mode\">KIDS MODE</string>\r\n    <string name=\"child_mode_view\">Kids Mode</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Game</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">GAME</string>\r\n    <string name=\"edit_mode\">EDIT MODE</string>\r\n    <string name=\"location_error\">No app was found to open the location.</string>\r\n    <string name=\"contact_data\">Contact Information</string>\r\n    <string name=\"location_data\">Location</string>\r\n    <string name=\"email_data\">Email</string>\r\n    <string name=\"phone_data\">Phone</string>\r\n    <string name=\"visit_schedule\">Opening Hours</string>\r\n    <string name=\"monday_to_friday\">Monday to Friday:</string>\r\n    <string name=\"play_audio\" />\r\n\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
---- a/app/src/main/res/values-en/strings.xml	(revision d7dcb4ab27ab0fd1db0715ac1e30f50a6659fec7)
-+++ b/app/src/main/res/values-en/strings.xml	(date 1763807567550)
-@@ -101,5 +101,26 @@
-     <string name="visit_schedule">Opening Hours</string>
-     <string name="monday_to_friday">Monday to Friday:</string>
-     <string name="play_audio" />
-+    <string name="dont_show_again">Don\'t show again</string>
-+    <string name="understand">Got it</string>
-+    <string name="map_tutorial_body">This is the tutorial body</string>
-+    <string name="map_tutorial_title">This is the tutorial title</string>
-+    <string name="map_tutorial_body2">This is the map tutorial body 2</string>
-+    <string name="map_tutorial_title2">This is the map tutorial title 2</string>
-+    <string name="pin_tutorial_body">This is the pin tutorial body</string>
-+    <string name="pin_tutorial_title">This is the pin tutorial title</string>
-+    <string name="next">Next</string>
-+
-+    <string name="map_tutorial_body1">The () symbol in the top left allows you to return to the start.</string>
-+    <string name="map_tutorial_body1_2">Tap the colored zones on the map to enter the different viewable areas.</string>
-+    <string name="map_tutorial_body1_3">Additionally, the buttons on the right allow you to zoom in, zoom out, or reset the map size.</string>
-+
-+    <string name="submapa_1">Tap the () symbol to return to the main map.</string>
-+    <string name="submapa_2">Tap the different pins to access the points of interest.</string>
-+
-+    <string name="pin_1">Press the () symbol to return to the map.</string>
-+    <string name="pin_2">Swipe through the images or tap to enlarge them.</string>
-+    <string name="pin_3">Tap here to listen to the audio narration.</string>
-+    <string name="pin_4">Press this button to access the 360掳 view.</string>
- 
- </resources>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04__Changes_.xml	(revision d7dcb4ab27ab0fd1db0715ac1e30f50a6659fec7)
-+++ /dev/null	(revision d7dcb4ab27ab0fd1db0715ac1e30f50a6659fec7)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]" date="1763157937923" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 14/11/2025 23:04 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_23_04_[Changes]/shelved.patch	(revision d7dcb4ab27ab0fd1db0715ac1e30f50a6659fec7)
-+++ /dev/null	(revision d7dcb4ab27ab0fd1db0715ac1e30f50a6659fec7)
-@@ -1,496 +0,0 @@
--Index: app/src/main/res/values-de/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus verlassen</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">nderungen speichern</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Heute</string>\r\n    <string name=\"title_appointment\">Termin vereinbaren</string>\r\n    <string name=\"option_phone_appointment\">Buchen Sie telefonisch</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Stunde</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Datum ausw盲hlen</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail-Adresse erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig.</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden.</string>\r\n    <string name=\"hour_no_selected\">Es muss ein Zeitpunkt ausgew盲hlt werden.</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Stornieren</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte klicken Sie in der soeben ge枚ffneten E-Mail-Anwendung auf Senden, um Ihre Anfrage abzuschlieen. Wir werden Ihnen die Verf眉gbarkeit per E-Mail best盲tigen..</string>\r\n    <string name=\"email_subject\">Reservierungsanfrage ansehen - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich m枚chte hiermit eine Reservierung f眉r einen Besuch im Kloster anfragen. Bitte geben Sie folgende Daten an:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden.</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">W盲hlen Sie die Schriftgr枚e aus</string>\r\n    <string name=\"font_extrabig\">Extra gro</string>\r\n    <string name=\"font_normal\">Mittlere</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"title_entrada\">Klostereingang</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Geh zur眉ck</string>\r\n    <string name=\"see_360\">360潞-Ansicht</string>\r\n    <string name=\"contentdescription_image_pin\">Bild anpinnen (zum Vergr枚ern anklicken)</string>\r\n    <string name=\"readjust\">Zur眉cksetzen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Zunahme</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Undefiniertes Ziel</string>\r\n    <string name=\"notdefined_destinyplane\">Zielebene nicht definiert</string>\r\n    <string name=\"plane_loading\">Ladeplan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n    <string name=\"child_mode\">KINDERMODUS</string>\r\n    <string name=\"child_mode_view\">Kindermodus</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Spiel</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">SPIEL</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
----- a/app/src/main/res/values-de/strings.xml	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/res/values-de/strings.xml	(date 1763142930387)
--@@ -93,4 +93,5 @@
--     <string name="game_view">Spiel</string>
--     <string name="video_child">VIDEO</string>
--     <string name="game_child">SPIEL</string>
--+    <string name="play_audio" />
-- </resources>
--\ No newline at end of file
--Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport androidx.compose.foundation.*\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.pager.HorizontalPager\r\nimport androidx.compose.foundation.pager.rememberPagerState\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalView\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.compose.ui.window.Dialog\r\nimport androidx.compose.ui.window.DialogProperties\r\nimport androidx.core.view.WindowCompat\r\nimport coil.compose.AsyncImage\r\nimport coil.load\r\nimport com.github.chrisbanes.photoview.PhotoView\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.models.Ubicacion\r\nimport java.util.Locale\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.res.stringResource\r\n\r\n@OptIn(ExperimentalFoundationApi::class)\r\n@Composable\r\nfun PinDetalleScreen(\r\n    pin: PinData,\r\n    onBack: () -> Unit,\r\n    onVer360: (() -> Unit)? = null\r\n) {\r\n    val view = LocalView.current\r\n    LaunchedEffect(Unit) {\r\n        val window = (view.context as? Activity)?.window\r\n        window?.let { WindowCompat.setDecorFitsSystemWindows(it, false) }\r\n    }\r\n\r\n    val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()\r\n\r\n    val pagerState = rememberPagerState(pageCount = { imagenes.size })\r\n    var selectedImageUrl by remember { mutableStateOf<String?>(null) }\r\n    var selectedImageTitle by remember { mutableStateOf<String?>(null) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val locale: Locale = configuration.locales[0]\r\n    val language = locale.language\r\n\r\n    val titulo_pin: String\r\n    val descripcion_pin: String?\r\n    val ubicacion_pin: Ubicacion?\r\n\r\n    when (language) {\r\n        \"es\" -> {\r\n            titulo_pin = pin.titulo\r\n            descripcion_pin = pin.descripcion\r\n            ubicacion_pin = pin.ubicacion\r\n        }\r\n        \"de\" -> {\r\n            titulo_pin = pin.tituloAleman\r\n            descripcion_pin = pin.descripcionAleman\r\n            ubicacion_pin = pin.ubicacionAleman\r\n        }\r\n        else -> {\r\n            titulo_pin = pin.tituloIngles\r\n            descripcion_pin = pin.descripcionIngles\r\n            ubicacion_pin = pin.ubicacionIngles\r\n        }\r\n    }\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.White)\r\n            .statusBarsPadding()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(horizontal = 16.dp)\r\n                .padding(bottom = 40.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // \uD83D\uDD19 Bot贸n atr谩s\r\n            Box(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 16.dp),\r\n                contentAlignment = Alignment.CenterStart\r\n            ) {\r\n                Image(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.go_back),\r\n                    modifier = Modifier\r\n                        .size(28.dp)\r\n                        .clickable { onBack() }\r\n                )\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            // \uD83C\uDFF7\uFE0F T铆tulo principal\r\n            Text(\r\n                text = buildString {\r\n                    append(titulo_pin)\r\n                    ubicacion_pin?.let { append(\" (${it.displayName})\") }\r\n                },\r\n                fontSize = 26.sp,\r\n                fontWeight = FontWeight.Bold,\r\n                color = Color.Black,\r\n                textAlign = TextAlign.Center,\r\n                modifier = Modifier.fillMaxWidth()\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(20.dp))\r\n\r\n            // \uD83D\uDDBC\uFE0F Carrusel con etiqueta (solo aqu铆)\r\n            if (imagenes.isNotEmpty()) {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(250.dp)\r\n                        .clip(RoundedCornerShape(16.dp))\r\n                        .border(3.dp, Color.Black, RoundedCornerShape(16.dp))\r\n                ) {\r\n                    HorizontalPager(state = pagerState) { page ->\r\n                        val imagen = imagenes[page]\r\n                        Box(modifier = Modifier.fillMaxSize()) {\r\n                            AsyncImage(\r\n                                model = imagen.url,\r\n                                contentDescription = imagen.etiqueta,\r\n                                contentScale = ContentScale.Crop,\r\n                                modifier = Modifier\r\n                                    .fillMaxSize()\r\n                                    .clickable {\r\n                                        selectedImageUrl = imagen.url\r\n                                        // \uD83D\uDC47 t铆tulo seg煤n idioma actual\r\n                                        selectedImageTitle = when (language) {\r\n                                            \"es\" -> imagen.titulo\r\n                                            \"de\" -> imagen.tituloAleman\r\n                                            else -> imagen.tituloIngles\r\n                                        }\r\n                                    }\r\n                            )\r\n\r\n                            // \uD83D\uDD39 Etiqueta abajo a la izquierda (solo carrusel)\r\n                            Text(\r\n                                text = imagen.etiqueta,\r\n                                color = Color.White,\r\n                                fontSize = 14.sp,\r\n                                modifier = Modifier\r\n                                    .align(Alignment.BottomStart)\r\n                                    .background(Color.Black.copy(alpha = 0.6f))\r\n                                    .padding(horizontal = 10.dp, vertical = 6.dp)\r\n                            )\r\n                        }\r\n                    }\r\n\r\n                    // \uD83D\uDD38 Indicadores inferiores\r\n                    Row(\r\n                        Modifier\r\n                            .align(Alignment.BottomCenter)\r\n                            .padding(bottom = 6.dp)\r\n                    ) {\r\n                        repeat(imagenes.size) { index ->\r\n                            val selected = pagerState.currentPage == index\r\n                            Box(\r\n                                Modifier\r\n                                    .padding(3.dp)\r\n                                    .size(if (selected) 8.dp else 6.dp)\r\n                                    .background(\r\n                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),\r\n                                        shape = CircleShape\r\n                                    )\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n                Spacer(modifier = Modifier.height(24.dp))\r\n            }\r\n\r\n            // \uD83D\uDCDD Descripci贸n\r\n            val descripcion = descripcion_pin ?: \"\"\r\n            if (descripcion.isNotBlank()) {\r\n                val textScrollState = rememberScrollState()\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .weight(1f)\r\n                        .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))\r\n                        .clip(RoundedCornerShape(8.dp))\r\n                ) {\r\n                    Text(\r\n                        text = descripcion,\r\n                        fontSize = 16.sp,\r\n                        color = Color.DarkGray,\r\n                        lineHeight = 22.sp,\r\n                        modifier = Modifier\r\n                            .fillMaxSize()\r\n                            .padding(horizontal = 12.dp, vertical = 8.dp)\r\n                            .verticalScroll(textScrollState)\r\n                    )\r\n                }\r\n            }\r\n\r\n            Spacer(modifier=Modifier.height(24.dp))\r\n\r\n            // \uD83D\uDD18 Bot贸n 360\r\n            onVer360?.let {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .background(Color.White)\r\n                        .navigationBarsPadding()\r\n                        .padding(horizontal = 16.dp, vertical = 2.dp)\r\n                ) {\r\n                    Button(\r\n                        onClick = it,\r\n                        modifier = Modifier\r\n                            .fillMaxWidth()\r\n                            .height(56.dp),\r\n                        colors = ButtonDefaults.buttonColors(containerColor = Color.Black),\r\n                        shape = RoundedCornerShape(12.dp)\r\n                    ) {\r\n                        Text(\r\n                            text = stringResource(R.string.see_360),\r\n                            color = Color.White,\r\n                            fontSize = 18.sp,\r\n                            fontWeight = FontWeight.Bold,\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD0D Zoom con t铆tulo traducido\r\n        if (selectedImageUrl != null) {\r\n            ZoomableImageDialog(\r\n                imageUrl = selectedImageUrl!!,\r\n                label = selectedImageTitle ?: \"\",\r\n                onDismiss = {\r\n                    selectedImageUrl = null\r\n                    selectedImageTitle = null\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// \uD83D\uDD0D Di谩logo de zoom\r\n@Composable\r\nprivate fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {\r\n    Dialog(\r\n        onDismissRequest = onDismiss,\r\n        properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)\r\n    ) {\r\n        Box(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .background(Color.Black.copy(alpha = 0.95f))\r\n        ) {\r\n            AndroidView(\r\n                factory = { context ->\r\n                    PhotoView(context).apply {\r\n                        load(imageUrl) { crossfade(true) }\r\n                    }\r\n                },\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n\r\n            // \uD83D\uDD39 T铆tulo (ya traducido seg煤n idioma)\r\n            Text(\r\n                text = label,\r\n                color = Color.White,\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Medium,\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomStart)\r\n                    .background(Color.Black.copy(alpha = 0.7f))\r\n                    .padding(horizontal = 12.dp, vertical = 8.dp)\r\n            )\r\n\r\n            //  Bot贸n cerrar\r\n            IconButton(\r\n                onClick = onDismiss,\r\n                modifier = Modifier\r\n                    .align(Alignment.TopEnd)\r\n                    .statusBarsPadding()\r\n                    .padding(16.dp)\r\n                    .background(Color.Black.copy(alpha = 0.5f), CircleShape)\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.close),\r\n                    tint = Color.White\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(date 1763157645700)
--@@ -14,6 +14,7 @@
-- import androidx.compose.ui.draw.clip
-- import androidx.compose.ui.graphics.Color
-- import androidx.compose.ui.layout.ContentScale
--+import androidx.compose.ui.platform.LocalContext // <-- 隆NUEVO IMPORT!
-- import androidx.compose.ui.platform.LocalView
-- import androidx.compose.ui.res.painterResource
-- import androidx.compose.ui.text.font.FontWeight
--@@ -35,6 +36,12 @@
-- import androidx.compose.foundation.verticalScroll
-- import androidx.compose.ui.platform.LocalConfiguration
-- import androidx.compose.ui.res.stringResource
--+// Imports de Media3 (ExoPlayer)
--+import androidx.media3.common.MediaItem
--+import androidx.media3.common.Player
--+import androidx.media3.exoplayer.ExoPlayer
--+import android.util.Log
--+import androidx.compose.foundation.layout.Arrangement
-- 
-- @OptIn(ExperimentalFoundationApi::class)
-- @Composable
--@@ -59,6 +66,7 @@
--     val locale: Locale = configuration.locales[0]
--     val language = locale.language
-- 
--+    // --- L贸gica de Texto Multiling眉e (Tu c贸digo) ---
--     val titulo_pin: String
--     val descripcion_pin: String?
--     val ubicacion_pin: Ubicacion?
--@@ -81,6 +89,64 @@
--         }
--     }
-- 
--+    // --- 隆隆NUEVA LGICA DE AUDIO!! ---
--+    val context = LocalContext.current
--+
--+    // 1. Selecciona la URL de audio correcta
--+    val audioUrl = when (language) {
--+        "es" -> pin.audioUrl_es
--+        "en" -> pin.audioUrl_en
--+        "de" -> pin.audioUrl_ge
--+        else -> pin.audioUrl_es
--+    }
--+
--+    Log.d(
--+        "AudioDebug",
--+        "Pin: '${pin.titulo}', Idioma: $language, URL de Audio Seleccionada: [$audioUrl]"
--+    )
--+
--+    // 2. Configura el ExoPlayer
--+    val exoPlayer = remember { ExoPlayer.Builder(context).build() }
--+    var isPlaying by remember { mutableStateOf(false) }
--+    var playbackState by remember { mutableStateOf(Player.STATE_IDLE) }
--+    var hasUserInteracted by remember { mutableStateOf(false) }
--+
--+    // 3. Prepara el player si la URL cambia (y no es nula)
--+    DisposableEffect(audioUrl) {
--+        if (!audioUrl.isNullOrBlank()) {
--+            val mediaItem = MediaItem.fromUri(audioUrl)
--+            exoPlayer.setMediaItem(mediaItem)
--+            exoPlayer.prepare()
--+        }
--+        // (No necesitamos onDispose aqu铆, se libera abajo)
--+        onDispose { }
--+    }
--+
--+    // 4. Listener para actualizar el bot贸n Play/Pause y rebobinar
--+    LaunchedEffect(exoPlayer) {
--+        exoPlayer.addListener(object : Player.Listener {
--+            override fun onIsPlayingChanged(isPlayingValue: Boolean) {
--+                isPlaying = isPlayingValue
--+            }
--+            override fun onPlaybackStateChanged(state: Int) {
--+                playbackState = state
--+
--+                if (state == Player.STATE_ENDED) {
--+                    isPlaying = false
--+                    exoPlayer.seekTo(0)
--+                }
--+            }
--+        })
--+    }
--+
--+    // 5. Libera el player al salir de la pantalla
--+    DisposableEffect(Unit) {
--+        onDispose {
--+            exoPlayer.release()
--+        }
--+    }
--+    // --- FIN LGICA DE AUDIO ---
--+
--     Box(
--         modifier = Modifier
--             .fillMaxSize()
--@@ -110,9 +176,8 @@
--                 )
--             }
-- 
---            Spacer(modifier = Modifier.height(16.dp))
--+            Spacer(modifier = Modifier.height(8.dp))
-- 
---            // 凤 T铆tulo principal
--             Text(
--                 text = buildString {
--                     append(titulo_pin)
--@@ -125,9 +190,9 @@
--                 modifier = Modifier.fillMaxWidth()
--             )
-- 
---            Spacer(modifier = Modifier.height(20.dp))
--+            Spacer(modifier = Modifier.height(16.dp))
-- 
---            // 硷 Carrusel con etiqueta (solo aqu铆)
--+            // 硷 Carrusel con etiqueta (se queda igual)
--             if (imagenes.isNotEmpty()) {
--                 Box(
--                     modifier = Modifier
--@@ -137,62 +202,141 @@
--                         .border(3.dp, Color.Black, RoundedCornerShape(16.dp))
--                 ) {
--                     HorizontalPager(state = pagerState) { page ->
--+
--                         val imagen = imagenes[page]
--+
--                         Box(modifier = Modifier.fillMaxSize()) {
--+
--                             AsyncImage(
--+
--                                 model = imagen.url,
--+
--                                 contentDescription = imagen.etiqueta,
--+
--                                 contentScale = ContentScale.Crop,
--+
--                                 modifier = Modifier
--+
--                                     .fillMaxSize()
--+
--                                     .clickable {
--+
--                                         selectedImageUrl = imagen.url
---                                        //  t铆tulo seg煤n idioma actual
--+
--+//  t铆tulo seg煤n idioma actual
--+
--                                         selectedImageTitle = when (language) {
--+
--                                             "es" -> imagen.titulo
--+
--                                             "de" -> imagen.tituloAleman
--+
--                                             else -> imagen.tituloIngles
--+
--                                         }
--+
--                                     }
---                            )
-- 
---                            //  Etiqueta abajo a la izquierda (solo carrusel)
--+                            )
--                             Text(
--+
--                                 text = imagen.etiqueta,
--+
--                                 color = Color.White,
--+
--                                 fontSize = 14.sp,
--+
--                                 modifier = Modifier
--+
--                                     .align(Alignment.BottomStart)
--+
--                                     .background(Color.Black.copy(alpha = 0.6f))
--+
--                                     .padding(horizontal = 10.dp, vertical = 6.dp)
--+
--                             )
--+
--                         }
---                    }
-- 
---                    //  Indicadores inferiores
--+                    }
--                     Row(
--                         Modifier
--                             .align(Alignment.BottomCenter)
--                             .padding(bottom = 6.dp)
--                     ) {
--                         repeat(imagenes.size) { index ->
--+
--                             val selected = pagerState.currentPage == index
--+
--                             Box(
--+
--                                 Modifier
--+
--                                     .padding(3.dp)
--+
--                                     .size(if (selected) 8.dp else 6.dp)
--+
--                                     .background(
--+
--                                         Color.White.copy(alpha = if (selected) 1f else 0.6f),
--+
--                                         shape = CircleShape
--+
--                                     )
--+
--                             )
--+
--                         }
--                     }
--                 }
---                Spacer(modifier = Modifier.height(24.dp))
--+                Spacer(modifier = Modifier.height(12.dp))
--             }
-- 
---            //  Descripci贸n
--+
--+            Row(
--+                modifier = Modifier.fillMaxWidth(),
--+                verticalAlignment = Alignment.CenterVertically
--+            ) {
--+                // Bot贸n de Audio (solo si hay URL)
--+                if (!audioUrl.isNullOrBlank()) {
--+                    // 1. Determina el icono correcto
--+                    val iconRes = when {
--+                        isPlaying -> R.drawable.pause
--+                        !hasUserInteracted -> R.drawable.microphone
--+                        else -> R.drawable.play_arrow
--+                    }
--+
--+                    // 2. Bot贸n de audio con redondel, alineado a la derecha del t铆tulo
--+                    Row(
--+                        modifier = Modifier
--+                            .fillMaxWidth()
--+                            .padding(top = 8.dp), // Espacio entre el t铆tulo y el bot贸n
--+                        horizontalArrangement = Arrangement.Start // Alinea a la derecha
--+                    ) {
--+                        IconButton(onClick = {
--+                            hasUserInteracted = true
--+                            if (isPlaying) exoPlayer.pause() else exoPlayer.play()
--+                        }) {
--+                            Box(
--+                                modifier = Modifier
--+                                    .size(48.dp) // Tama帽o del redondel
--+                                    .clip(CircleShape) // Forma redonda
--+                                    .background(Color.Gray.copy(alpha = 0.3f)), // Color de fondo del redondel (ej. gris suave)
--+                                contentAlignment = Alignment.Center // Centra el icono dentro del redondel
--+                            ) {
--+                                Icon(
--+                                    painter = painterResource(id = iconRes),
--+                                    contentDescription = stringResource(R.string.play_audio),
--+                                    tint = Color.Black, // Color del icono
--+                                    modifier = Modifier.size(28.dp) // Tama帽o del icono dentro del redondel
--+                                )
--+                            }
--+                        }
--+                    }
--+                }
--+            }
--+
--+            //  Descripci贸n (se queda igual)
--             val descripcion = descripcion_pin ?: ""
--             if (descripcion.isNotBlank()) {
--                 val textScrollState = rememberScrollState()
--@@ -218,7 +362,7 @@
-- 
--             Spacer(modifier=Modifier.height(24.dp))
-- 
---            //  Bot贸n 360
--+            //  Bot贸n 360 (se queda igual)
--             onVer360?.let {
--                 Box(
--                     modifier = Modifier
--@@ -245,7 +389,7 @@
--             }
--         }
-- 
---        //  Zoom con t铆tulo traducido
--+        //  Zoom con t铆tulo traducido (se queda igual)
--         if (selectedImageUrl != null) {
--             ZoomableImageDialog(
--                 imageUrl = selectedImageUrl!!,
--@@ -259,7 +403,7 @@
--     }
-- }
-- 
---//  Di谩logo de zoom
--+//  Di谩logo de zoom (se queda igual)
-- @Composable
-- private fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {
--     Dialog(
--@@ -309,4 +453,4 @@
--             }
--         }
--     }
---}
--+}
--\ No newline at end of file
--Index: gradle/libs.versions.toml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>[versions]\r\nagp = \"8.11.1\" #no cambiar de la 8.11.1\r\nkotlin = \"2.2.0\"\r\ncoreKtx = \"1.17.0\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nlifecycleRuntimeKtx = \"2.9.4\"\r\nactivityCompose = \"1.11.0\"\r\ncomposeBom = \"2025.10.01\"\r\n#Practica\r\nconstraintlayoutCompose = \"1.1.1\"\r\nnavigationCompose = \"2.9.5\"\r\nfoundation = \"1.9.4\"\r\nappcompat = \"1.7.0\"\r\nmaterial = \"1.12.0\"\r\nfirebase-gservices = \"4.4.4\"\r\nfirebase-bom = \"33.1.0\"\r\n#panoramicas\r\npanoramaGL = \"1.11.0\"\r\nfirebaseFirestore = \"26.0.2\"\r\n\r\n[libraries]\r\nandroidx-core-ktx = { group = \"androidx.core\", name = \"core-ktx\", version.ref = \"coreKtx\" }\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\nandroidx-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nandroidx-espresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nandroidx-lifecycle-runtime-ktx = { group = \"androidx.lifecycle\", name = \"lifecycle-runtime-ktx\", version.ref = \"lifecycleRuntimeKtx\" }\r\nandroidx-activity-compose = { group = \"androidx.activity\", name = \"activity-compose\", version.ref = \"activityCompose\" }\r\nandroidx-compose-bom = { group = \"androidx.compose\", name = \"compose-bom\", version.ref = \"composeBom\" }\r\nandroidx-ui = { group = \"androidx.compose.ui\", name = \"ui\" }\r\nandroidx-ui-graphics = { group = \"androidx.compose.ui\", name = \"ui-graphics\" }\r\nandroidx-ui-tooling = { group = \"androidx.compose.ui\", name = \"ui-tooling\" }\r\nandroidx-ui-tooling-preview = { group = \"androidx.compose.ui\", name = \"ui-tooling-preview\" }\r\nandroidx-ui-test-manifest = { group = \"androidx.compose.ui\", name = \"ui-test-manifest\" }\r\nandroidx-ui-test-junit4 = { group = \"androidx.compose.ui\", name = \"ui-test-junit4\" }\r\nandroidx-material3 = { group = \"androidx.compose.material3\", name = \"material3\" }\r\n#Practica\r\nconstraintlayout-compose = { module = \"androidx.constraintlayout:constraintlayout-compose\", version.ref = \"constraintlayoutCompose\" }\r\nnavigation-compose = { module = \"androidx.navigation:navigation-compose\", version.ref = \"navigationCompose\" }\r\nandroidx-compose-foundation = { group = \"androidx.compose.foundation\", name = \"foundation\", version.ref = \"foundation\" }\r\nandroidx-appcompat = { module = \"androidx.appcompat:appcompat\", version.ref = \"appcompat\" }\r\ngoogle-material = { module = \"com.google.android.material:material\", version.ref = \"material\" }\r\nfirebase-bom = { module = \"com.google.firebase:firebase-bom\", version.ref = \"firebase-bom\" }\r\nfirebase-firestore = { module = \"com.google.firebase:firebase-firestore-ktx\" }\r\n#Panoramicas\r\npanoramaGL = { module = \"com.github.hannesa2:panoramaGL\", version.ref = \"panoramaGL\" }\r\ngoogle-firebase-firestore = { group = \"com.google.firebase\", name = \"firebase-firestore\", version.ref = \"firebaseFirestore\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\nkotlin-android = { id = \"org.jetbrains.kotlin.android\", version.ref = \"kotlin\" }\r\nkotlin-compose = { id = \"org.jetbrains.kotlin.plugin.compose\", version.ref = \"kotlin\" }\r\nfirebase-gservices = { id = \"com.google.gms.google-services\", version.ref = \"firebase-gservices\" }\r\n\r\n\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
----- a/gradle/libs.versions.toml	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/gradle/libs.versions.toml	(date 1763140616731)
--@@ -19,6 +19,7 @@
-- #panoramicas
-- panoramaGL = "1.11.0"
-- firebaseFirestore = "26.0.2"
--+media3 = "1.3.1"
-- 
-- [libraries]
-- androidx-core-ktx = { group = "androidx.core", name = "core-ktx", version.ref = "coreKtx" }
--@@ -46,6 +47,7 @@
-- #Panoramicas
-- panoramaGL = { module = "com.github.hannesa2:panoramaGL", version.ref = "panoramaGL" }
-- google-firebase-firestore = { group = "com.google.firebase", name = "firebase-firestore", version.ref = "firebaseFirestore" }
--+androidx-media3-exoplayer = { module = "androidx.media3:media3-exoplayer", version.ref = "media3" }
-- 
-- [plugins]
-- android-application = { id = "com.android.application", version.ref = "agp" }
--Index: app/src/main/res/values-en/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"title_entrada\">Monastery Entrance</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n    <string name=\"child_mode\">KIDS MODE</string>\r\n    <string name=\"child_mode_view\">Kids Mode</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Game</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">GAME</string>\r\n\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
----- a/app/src/main/res/values-en/strings.xml	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/res/values-en/strings.xml	(date 1763142930046)
--@@ -92,5 +92,6 @@
--     <string name="game_view">Game</string>
--     <string name="video_child">VIDEO</string>
--     <string name="game_child">GAME</string>
--+    <string name="play_audio" />
-- 
-- </resources>
--\ No newline at end of file
--Index: app/src/main/java/com/nextapp/monasterio/models/PinData.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.models\r\n\r\nimport androidx.compose.ui.graphics.Color\r\n\r\ndata class PinData(\r\n    val id: String,\r\n    val titulo: String,\r\n    val tituloIngles: String,\r\n    val tituloAleman: String,\r\n    val ubicacion: Ubicacion? = null,\r\n    val ubicacionIngles: Ubicacion? = null,\r\n    val ubicacionAleman: Ubicacion? = null,\r\n    val x: Float,\r\n    val y: Float,\r\n    val tema: Tema,\r\n    val color: Color? = null,\r\n    val iconRes: Int? = null,\r\n    val imagenes: List<String> = emptyList(),\r\n    val imagenesDetalladas: List<ImagenData> = emptyList(),\r\n    val descripcion: String? = null,\r\n    val descripcionIngles: String? = null,\r\n    val descripcionAleman: String? = null,\r\n\r\n    // \uD83D\uDD39 Nuevo: destino din谩mico le铆do de Firebase\r\n    val tipoDestino: String? = null,\r\n    val valorDestino: String? = null,\r\n    val destino: DestinoPin = DestinoPin.Detalle(\"pin_detalle\"),\r\n\r\n    val tapRadius: Float = 0.04f,\r\n    val vista360Url: String? = null\r\n)\r\n\r\nsealed class DestinoPin {\r\n    data class Detalle(val idDetalle: String) : DestinoPin()\r\n    data class Ruta(val nombreRuta: String) : DestinoPin()\r\n    data class Popup(val mensaje: String) : DestinoPin()\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/models/PinData.kt b/app/src/main/java/com/nextapp/monasterio/models/PinData.kt
----- a/app/src/main/java/com/nextapp/monasterio/models/PinData.kt	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/java/com/nextapp/monasterio/models/PinData.kt	(date 1763157570731)
--@@ -27,7 +27,11 @@
--     val destino: DestinoPin = DestinoPin.Detalle("pin_detalle"),
-- 
--     val tapRadius: Float = 0.04f,
---    val vista360Url: String? = null
--+    val vista360Url: String? = null,
--+
--+    val audioUrl_es: String? = null,
--+    val audioUrl_en: String? = null,
--+    val audioUrl_ge: String? = null
-- )
-- 
-- sealed class DestinoPin {
--Index: app/src/main/java/com/nextapp/monasterio/repository/PinRepository.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.repository\r\n\r\nimport android.util.Log\r\nimport com.google.firebase.firestore.DocumentReference\r\nimport com.google.firebase.firestore.FirebaseFirestore\r\nimport com.google.firebase.firestore.SetOptions\r\nimport com.nextapp.monasterio.models.*\r\nimport kotlinx.coroutines.tasks.await\r\n\r\nobject PinRepository {\r\n    private val firestore = FirebaseFirestore.getInstance()\r\n    private val collection = firestore.collection(\"pines\")\r\n\r\n    // -----------------------\r\n    // CREATE\r\n    // -----------------------\r\n    suspend fun createPinAutoId(pinPayload: Map<String, Any?>): String {\r\n        val docRef = collection.add(pinPayload).await()\r\n        val generatedId = docRef.id\r\n        docRef.set(mapOf(\"id\" to generatedId), SetOptions.merge()).await()\r\n        return generatedId\r\n    }\r\n\r\n    suspend fun createPin(pin: PinData): String {\r\n        val payload = mapOf(\r\n            \"titulo\" to pin.titulo,\r\n            \"ubicacion\" to pin.ubicacion?.name,\r\n            \"x\" to pin.x.toDouble(),\r\n            \"y\" to pin.y.toDouble(),\r\n            \"tema\" to pin.tema.name,\r\n            \"imagenes\" to pin.imagenes,\r\n            \"descripcion\" to pin.descripcion,\r\n            \"tapRadius\" to pin.tapRadius.toDouble(),\r\n            \"vista360Url\" to pin.vista360Url\r\n        )\r\n        return createPinAutoId(payload)\r\n    }\r\n\r\n    // -----------------------\r\n    // READ: todos los pines\r\n    // -----------------------\r\n    suspend fun getAllPins(): List<PinData> {\r\n        val snapshot = collection.get().await()\r\n        Log.d(\"PinRepository\", \"\uD83D\uDCE6 getAllPins()  ${snapshot.size()} documentos\")\r\n        return snapshot.documents.mapNotNull { doc ->\r\n            mapDocToPinData(doc.id, doc.data)\r\n        }\r\n    }\r\n\r\n    // -----------------------\r\n    // READ: pin individual\r\n    // -----------------------\r\n    suspend fun getPinById(id: String): PinData? {\r\n        Log.d(\"PinRepository\", \"\uD83D\uDD0D getPinById($id)\")\r\n        val doc = collection.document(id).get().await()\r\n\r\n        if (!doc.exists()) {\r\n            Log.e(\"PinRepository\", \" Documento de pin no encontrado: $id\")\r\n            return null\r\n        }\r\n\r\n        val data = doc.data\r\n        Log.d(\"PinRepository\", \"\uD83D\uDCC4 Datos del pin recuperados: ${data?.keys}\")\r\n\r\n        val basePin = mapDocToPinData(doc.id, data)\r\n        if (basePin == null) {\r\n            Log.e(\"PinRepository\", \" Fallo al mapear el pin $id\")\r\n            return null\r\n        }\r\n\r\n        if (basePin.imagenes.isEmpty()) {\r\n            Log.w(\"PinRepository\", \"\uFE0F El pin $id no tiene referencias de im谩genes\")\r\n        } else {\r\n            Log.d(\"PinRepository\", \"\uD83D\uDD17 Referencias detectadas: ${basePin.imagenes}\")\r\n        }\r\n\r\n        val imagenesDetalladas = mutableListOf<ImagenData>()\r\n\r\n        for (ref in basePin.imagenes) {\r\n            try {\r\n                val imageId = ref.substringAfterLast(\"/\")\r\n                val imageDoc = firestore.collection(\"imagenes\").document(imageId).get().await()\r\n                if (imageDoc.exists()) {\r\n                    val url = imageDoc.getString(\"url\") ?: \"\"\r\n                    val etiqueta = imageDoc.getString(\"etiqueta\") ?: \"\"\r\n                    val titulo = imageDoc.getString(\"titulo\") ?: \"\"\r\n                    val tituloIngles = imageDoc.getString(\"tituloIngles\") ?: \"\"\r\n                    val tituloAleman = imageDoc.getString(\"tituloAleman\") ?: \"\"\r\n\r\n                    Log.d(\r\n                        \"PinRepository\",\r\n                        \" Imagen encontrada '$imageId'  etiqueta='$etiqueta', titulo='$titulo', url='$url'\"\r\n                    )\r\n\r\n                    if (url.isNotBlank()) {\r\n                        imagenesDetalladas.add(\r\n                            ImagenData(\r\n                                id = imageId,\r\n                                url = url,\r\n                                etiqueta = etiqueta,\r\n                                titulo = titulo,\r\n                                tituloIngles = tituloIngles,\r\n                                tituloAleman = tituloAleman\r\n                            )\r\n                        )\r\n                    }\r\n                } else {\r\n                    Log.w(\"PinRepository\", \"\uFE0F Documento no encontrado en /imagenes/: $imageId\")\r\n                }\r\n            } catch (e: Exception) {\r\n                Log.e(\"PinRepository\", \" Error al obtener imagen referenciada para $ref\", e)\r\n            }\r\n        }\r\n\r\n\r\n        Log.d(\"PinRepository\", \"\uD83D\uDCCA Resultado final para pin $id  ${imagenesDetalladas.size} im谩genes cargadas\")\r\n\r\n        return basePin.copy(imagenesDetalladas = imagenesDetalladas)\r\n    }\r\n\r\n    // -----------------------\r\n    // Helper: mapear doc -> PinData\r\n    // -----------------------\r\n    private fun mapDocToPinData(docId: String, data: Map<String, Any>?): PinData? {\r\n        if (data == null) return null\r\n\r\n        return try {\r\n            val titulo = data[\"titulo\"] as? String ?: \"\"\r\n            val tituloIngles = data[\"tituloIngles\"] as? String ?: \"\"\r\n            val tituloAleman = data[\"tituloAleman\"] as? String ?: \"\"\r\n\r\n            val ubicacion = (data[\"ubicacion\"] as? String)?.let { safeUbicacionOf(it) }\r\n            val ubicacionIngles = (data[\"ubicacionIngles\"] as? String)?.let { safeUbicacionOf(it) }\r\n            val ubicacionAleman = (data[\"ubicacionAleman\"] as? String)?.let { safeUbicacionOf(it) }\r\n\r\n            val x = (data[\"x\"] as? Number)?.toFloat() ?: 0f\r\n            val y = (data[\"y\"] as? Number)?.toFloat() ?: 0f\r\n            val temaStr = data[\"tema\"] as? String\r\n            val tema = temaStr?.let { safeTemaOf(it) } ?: Tema.PINTURA_Y_ARTE_VISUAL\r\n\r\n            // \uD83E\uDDE9 Referencias de im谩genes\r\n            val imagenes: List<String> = when (val raw = data[\"imagenes\"]) {\r\n                is List<*> -> raw.mapNotNull {\r\n                    when (it) {\r\n                        is String -> it\r\n                        is DocumentReference -> it.path\r\n                        else -> null\r\n                    }\r\n                }\r\n                else -> emptyList()\r\n            }\r\n\r\n            val descripcion = data[\"descripcion\"] as? String\r\n            val descripcionIngles = data[\"descripcionIngles\"] as? String\r\n            val descripcionAleman = data[\"descripcionAleman\"] as? String\r\n            val tapRadius = (data[\"tapRadius\"] as? Number)?.toFloat() ?: 0.04f\r\n            val vista360Url = data[\"vista360Url\"] as? String\r\n\r\n            // \uD83D\uDD39 NUEVO: leer los campos de destino\r\n            val tipoDestino = data[\"tipoDestino\"] as? String\r\n            val valorDestino = data[\"valorDestino\"] as? String\r\n\r\n            // \uD83D\uDD39 Crear el destino din谩micamente\r\n            val destino = when (tipoDestino?.lowercase()) {\r\n                \"ruta\" -> DestinoPin.Ruta(valorDestino ?: \"\")\r\n                \"detalle\" -> DestinoPin.Detalle(valorDestino ?: docId)\r\n                \"popup\" -> DestinoPin.Popup(valorDestino ?: \"Sin mensaje\")\r\n                else -> DestinoPin.Detalle(docId)\r\n            }\r\n\r\n            Log.d(\"PinRepository\", \"\uD83D\uDCCD Mapeando pin '$titulo' ($docId)  tipoDestino=$tipoDestino, valor=$valorDestino\")\r\n\r\n            PinData(\r\n                id = docId,\r\n                titulo = titulo,\r\n                tituloIngles = tituloIngles,\r\n                tituloAleman = tituloAleman,\r\n                ubicacion = ubicacion,\r\n                ubicacionIngles = ubicacionIngles,\r\n                ubicacionAleman = ubicacionAleman,\r\n                x = x,\r\n                y = y,\r\n                tema = tema,\r\n                color = null,\r\n                iconRes = null,\r\n                imagenes = imagenes,\r\n                imagenesDetalladas = emptyList(),\r\n                descripcion = descripcion,\r\n                descripcionIngles = descripcionIngles,\r\n                descripcionAleman = descripcionAleman,\r\n                tipoDestino = tipoDestino,\r\n                valorDestino = valorDestino,\r\n                destino = destino,\r\n                tapRadius = tapRadius,\r\n                vista360Url = vista360Url\r\n            )\r\n        } catch (e: Exception) {\r\n            Log.e(\"PinRepository\", \" Error mapeando pin $docId\", e)\r\n            null\r\n        }\r\n    }\r\n\r\n\r\n    private fun safeTemaOf(name: String): Tema {\r\n        return try {\r\n            Tema.valueOf(name)\r\n        } catch (_: Exception) {\r\n            Tema.PINTURA_Y_ARTE_VISUAL\r\n        }\r\n    }\r\n\r\n    private fun safeUbicacionOf(name: String): Ubicacion? {\r\n        return try {\r\n            Ubicacion.valueOf(name)\r\n        } catch (_: Exception) {\r\n            null\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/repository/PinRepository.kt b/app/src/main/java/com/nextapp/monasterio/repository/PinRepository.kt
----- a/app/src/main/java/com/nextapp/monasterio/repository/PinRepository.kt	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/java/com/nextapp/monasterio/repository/PinRepository.kt	(date 1763157570755)
--@@ -31,7 +31,10 @@
--             "imagenes" to pin.imagenes,
--             "descripcion" to pin.descripcion,
--             "tapRadius" to pin.tapRadius.toDouble(),
---            "vista360Url" to pin.vista360Url
--+            "vista360Url" to pin.vista360Url,
--+            "audioUrl_es" to pin.audioUrl_es,
--+            "audioUrl_en" to pin.audioUrl_en,
--+            "audioUrl_ge" to pin.audioUrl_ge
--         )
--         return createPinAutoId(payload)
--     }
--@@ -156,6 +159,10 @@
--             val tapRadius = (data["tapRadius"] as? Number)?.toFloat() ?: 0.04f
--             val vista360Url = data["vista360Url"] as? String
-- 
--+            val audioUrl_es = data["audioUrl_es"] as? String
--+            val audioUrl_en = data["audioUrl_en"] as? String
--+            val audioUrl_ge = data["audioUrl_ge"] as? String
--+
--             //  NUEVO: leer los campos de destino
--             val tipoDestino = data["tipoDestino"] as? String
--             val valorDestino = data["valorDestino"] as? String
--@@ -192,7 +199,10 @@
--                 valorDestino = valorDestino,
--                 destino = destino,
--                 tapRadius = tapRadius,
---                vista360Url = vista360Url
--+                vista360Url = vista360Url,
--+                audioUrl_es = audioUrl_es,
--+                audioUrl_en = audioUrl_en,
--+                audioUrl_ge = audioUrl_ge
--             )
--         } catch (e: Exception) {
--             Log.e("PinRepository", " Error mapeando pin $docId", e)
--Index: app/src/main/res/drawable/pause.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/drawable/pause.xml b/app/src/main/res/drawable/pause.xml
--new file mode 100644
----- /dev/null	(date 1763141624380)
--+++ b/app/src/main/res/drawable/pause.xml	(date 1763141624380)
--@@ -0,0 +1,10 @@
--+<vector xmlns:android="http://schemas.android.com/apk/res/android"
--+    android:width="24dp"
--+    android:height="24dp"
--+    android:viewportWidth="960"
--+    android:viewportHeight="960"
--+    android:tint="?attr/colorControlNormal">
--+  <path
--+      android:fillColor="@android:color/white"
--+      android:pathData="M520,760L520,200L760,200L760,760L520,760ZM200,760L200,200L440,200L440,760L200,760ZM600,680L680,680L680,280L600,280L600,680ZM280,680L360,680L360,280L280,280L280,680ZM280,280L280,280L280,680L280,680L280,280ZM600,280L600,280L600,680L600,680L600,280Z"/>
--+</vector>
--Index: app/build.gradle.kts
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    implementation(libs.google.firebase.firestore)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"io.github.chrisbanes:PhotoView:2.3.0\")\r\n    implementation(\"com.github.bumptech.glide:glide:4.16.0\")\r\n\r\n    // Panoramica\r\n    implementation(\"com.github.hannesa2:panoramagl:1.14\")\r\n    // Cloudinary\r\n    implementation(\"io.coil-kt:coil-compose:2.7.0\")\r\n\r\n\r\n\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/build.gradle.kts b/app/build.gradle.kts
----- a/app/build.gradle.kts	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/build.gradle.kts	(date 1763140934065)
--@@ -83,6 +83,9 @@
--     // Cloudinary
--     implementation("io.coil-kt:coil-compose:2.7.0")
-- 
--+    //media
--+    implementation(libs.androidx.media3.exoplayer)
--+
-- 
-- 
-- }
--Index: app/src/main/res/values/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIOS</string>\r\n    <string name=\"child_mode_view\">Modo Ni帽os</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
----- a/app/src/main/res/values/strings.xml	(revision 2c2602b0b7f634932197af9cdaed4f72f776f668)
--+++ b/app/src/main/res/values/strings.xml	(date 1763142930062)
--@@ -88,4 +88,5 @@
--     <string name="game_view">Juego</string>
--     <string name="video_child">VIDEO</string>
--     <string name="game_child">JUEGO</string>
--+    <string name="play_audio" />
-- </resources>
--\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_11_56__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_11_56__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_11_56__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_11_56__Changes_.xml	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_21_11_2025_11_56_[Changes]" date="1763722567073" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_11_56_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 21/11/2025 11:56 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_21_11_2025_21_56_[Changes]/shelved.patch	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,1235 +0,0 @@
-Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.EntradaMonasterioFirestoreScreen\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    authViewModel: AuthViewModel = viewModel(),\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    isEditing: Boolean = false,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }\r\n        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyos()}\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // --- 隆隆AQU EST LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // --- Pantalla de Entrada del Monasterio (desde Firebase Pin)\r\n        composable(\r\n            route = AppRoutes.PIN_ENTRADA_MONASTERIO + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            EntradaMonasterioFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- FIN DE LA MODIFICACIN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu铆, 隆est谩 bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763719928494)
-@@ -18,6 +18,8 @@
- import androidx.navigation.compose.composable
- import com.nextapp.monasterio.AppRoutes
- import com.nextapp.monasterio.R
-+import com.nextapp.monasterio.models.PuzzleData
-+import com.nextapp.monasterio.models.PuzzleSize
- import com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen
- import com.nextapp.monasterio.ui.theme.MonasteryRed
- import com.nextapp.monasterio.ui.theme.White
-@@ -29,11 +31,11 @@
- 
- @Composable
- fun AppNavigationHost(
-+    modifier: Modifier = Modifier,
-     authViewModel: AuthViewModel = viewModel(),
-     ajustesViewModel: AjustesViewModel = viewModel(),
-     navController: NavHostController,
-     isEditing: Boolean = false,
--    modifier: Modifier = Modifier
- ) {
-     NavHost(
-         navController = navController,
-@@ -45,7 +47,12 @@
-         composable(AppRoutes.HISTORIA) { HistoriaScreen() }
-         composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
-         composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }
--        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyos()}
-+        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyosScreen()}
-+        composable(AppRoutes.PUZZLENIVEL1){PuzzleScreen(tama帽o = PuzzleSize(2,2),imagenes= PuzzleData.IMAGENES_NIVEL1)}
-+        composable(AppRoutes.PUZZLENIVEL2){PuzzleScreen(tama帽o = PuzzleSize(3,3),imagenes= PuzzleData.IMAGENES_NIVEL2)}
-+        composable(AppRoutes.PUZZLENIVEL3){PuzzleScreen(tama帽o = PuzzleSize(4,4),imagenes= PuzzleData.IMAGENES_NIVEL3)}
-+        composable(AppRoutes.PUZZLENIVEL4){PuzzleScreen(tama帽o= PuzzleSize(5,5),imagenes= PuzzleData.IMAGENES_NIVEL4)}
-+        composable(AppRoutes.JUEGO_NINYOS){JuegoNinyosScreen(navController=navController)}
-         composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }
-         composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }
- 
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23__Changes_.xml	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ /dev/null	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]" date="1762878199117" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/11/2025 17:23 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07__Changes_.xml	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ /dev/null	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]" date="1763075316945" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 14/11/2025 0:07 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ /dev/null	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-@@ -1,401 +0,0 @@
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.nextapp.monasterio\"> <application\r\n    android:name=\".MonasteryApplication\"\r\n    android:allowBackup=\"true\"\r\n    android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n    android:fullBackupContent=\"@xml/backup_rules\"\r\n    android:icon=\"@drawable/escudo\"\r\n    android:label=\"@string/app_name\"\r\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n    android:supportsRtl=\"true\"\r\n    android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n    <activity\r\n        android:name=\".MainActivity\"\r\n        android:exported=\"true\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n        <intent-filter>\r\n            <action android:name=\"android.intent.action.MAIN\" />\r\n            <category android:name=\"android.intent.category.LAUNCHER\" />\r\n        </intent-filter>\r\n    </activity>\r\n</application>\r\n\r\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
----- a/app/src/main/AndroidManifest.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/AndroidManifest.xml	(date 1763063995443)
--@@ -1,6 +1,8 @@
-- <?xml version="1.0" encoding="utf-8"?>
-- <manifest xmlns:android="http://schemas.android.com/apk/res/android"
---    package="com.nextapp.monasterio"> <application
--+    package="com.nextapp.monasterio">
--+    <uses-permission android:name="android.permission.INTERNET"/>
--+    <application
--     android:name=".MonasteryApplication"
--     android:allowBackup="true"
--     android:dataExtractionRules="@xml/data_extraction_rules"
--@@ -9,7 +11,8 @@
--     android:label="@string/app_name"
--     android:roundIcon="@mipmap/ic_launcher_round"
--     android:supportsRtl="true"
---    android:theme="@style/Theme.SMOV_Monasterio">
--+    android:theme="@style/Theme.SMOV_Monasterio"
--+        android:usesCleartextTraffic="true">
--     <activity
--         android:name=".MainActivity"
--         android:exported="true"
--Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val newDensity= Density(\r\n                density= currentDensity.density,\r\n                fontScale = currentDensity.fontScale*appFontScale\r\n            )\r\n            CompositionLocalProvider(LocalDensity provides newDensity) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    // ... (Tu l贸gica de idioma se queda igual)\r\n    val stringEspanyol= \"Espa帽ol\"\r\n    val stringAleman= \"Deutsch\"\r\n    val stringIngles= \"English\"\r\n    var mostrarIdioma by remember { mutableStateOf(false) }\r\n    val configuration = LocalConfiguration.current\r\n    val currentLanguageCode = configuration.locales[0].language\r\n    var idioma by remember { mutableStateOf(currentLanguageCode) }\r\n    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    //  Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n\r\n    // Comprueba si la ruta ES \"virtual_visit\" (esto cubre el mapa Y los pines anidados)\r\n    val isVirtualVisit = currentRoute == AppRoutes.VIRTUAL_VISIT\r\n\r\n    // Comprueba si la ruta EMPIEZA POR \"pin_360\" (la nueva vista 360)\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n\r\n    // La vista es inmersiva si es CUALQUIERA de las tres\r\n    val isImmersive = isPanorama || isVirtualVisit || isPin360\r\n\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    //  Actualizar t铆tulo (Tu l贸gica se queda igual)\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    // --- 隆隆2. ESTRUCTURA REFACTORIZADA (UN SOLO NAVHOST)!! ---\r\n    // (Hemos eliminado el 'if (isImmersive)' que duplicaba el NavHost)\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        // Desactivamos gestos en el mapa Y en pantallas inmersivas\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                // Solo mostramos la barra roja si NO estamos en una ruta inmersiva\r\n                if (!isImmersive) {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            // ... (Tu l贸gica de idioma y Toast se queda igual)\r\n                            Box {\r\n                                OutlinedIconButton(onClick = {\r\n                                    mostrarIdioma = true\r\n                                }) {\r\n                                    val iconRes =\r\n                                        if (idioma == \"es\" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == \"de\" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido\r\n                                    Image(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = if (idioma == \"es\" || idioma == stringEspanyol ) stringEspanyol\r\n                                        else if (idioma == \"de\" || idioma == stringAleman) stringAleman else stringIngles,\r\n                                        contentScale = ContentScale.Crop\r\n                                    )\r\n                                }\r\n                                DropdownMenu(\r\n                                    expanded = mostrarIdioma,\r\n                                    onDismissRequest = { mostrarIdioma = false },\r\n                                    modifier = Modifier.fillMaxWidth(0.8f),\r\n                                ) {\r\n                                    idiomasDisponibles.forEach { idiomaSlot ->\r\n                                        DropdownMenuItem(\r\n                                            text = { Text(idiomaSlot) },\r\n                                            onClick = {\r\n                                                idioma = idiomaSlot\r\n                                                mostrarIdioma = false\r\n                                                if(idiomaSlot == stringEspanyol)\r\n                                                    LanguageHelper.saveLocale(context, \"es\")\r\n                                                else if(idiomaSlot == stringAleman){\r\n                                                    LanguageHelper.saveLocale(context, \"de\")\r\n                                                } else LanguageHelper.saveLocale(context, \"en\")\r\n                                            }\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n                            IconButton(onClick = {\r\n                                Toast.makeText(\r\n                                    context,\r\n                                    \"Modo edici贸n (pr贸ximamente)\",\r\n                                    Toast.LENGTH_SHORT\r\n                                ).show()\r\n                            }) {\r\n                                Icon(\r\n                                    painter = painterResource(id = R.drawable.lapiz),\r\n                                    contentDescription = stringResource(id = R.string.edit_mode)\r\n                                )\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            // 隆隆UN SOLO AppNavigationHost!!\r\n            // (Si es inmersiva, paddingValues ser谩 cero porque no hay TopBar)\r\n            AppNavigationHost(\r\n                navController = navController,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
----- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1763062898144)
--@@ -110,6 +110,9 @@
--                 AppRoutes.RESERVA,
--                 AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)
--                 AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)
--+                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)
--+                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)
--+                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)
--                 else -> context.getString(R.string.title_inicio)
--             }
--         }
--Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen() }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // --- 隆隆AQU EST LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n        // --- FIN DE LA MODIFICACIN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu铆, 隆est谩 bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763062855767)
--@@ -41,6 +41,8 @@
--         composable(AppRoutes.HISTORIA) { HistoriaScreen() }
--         composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
--         composable(AppRoutes.PERFIL)   { ProfileScreen() }
--+        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }
--+        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyos()}
--         composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }
-- 
--         // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)
--Index: app/src/main/res/values/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode\">Modo edici贸n</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
----- a/app/src/main/res/values/strings.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/res/values/strings.xml	(date 1763060335813)
--@@ -73,4 +73,10 @@
--     <string name="notdefined_destinyplane">Plano destino no definido</string>
--     <string name="plane_loading">Cargando plano...</string>
--     <string name="error_loading_plane">Error cargando datos del plano</string>
--+    <string name="child_mode">MODO NIOS</string>
--+    <string name="child_mode_view">Modo Ni帽os</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Juego</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">JUEGO</string>
-- </resources>
--\ No newline at end of file
--Index: app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun HomeScreenContent(navController:NavController, modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {\r\n        val (background, crest, title, btnVisit, btnBook) = createRefs()\r\n        Image(\r\n            painter = painterResource(id = R.drawable.monastery_background),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop,\r\n            modifier = Modifier.constrainAs(background) {\r\n                top.linkTo(parent.top)\r\n                bottom.linkTo(parent.bottom)\r\n                start.linkTo(parent.start)\r\n                end.linkTo(parent.end)\r\n                width = Dimension.fillToConstraints\r\n                height = Dimension.fillToConstraints\r\n\r\n                centerVerticallyTo(parent)\r\n            }\r\n        )\r\n        Image(\r\n            painter = painterResource(id = R.drawable.huelgas_inicio),\r\n            contentDescription = \"Escudo\",\r\n            contentScale = ContentScale.FillWidth,\r\n            modifier = Modifier\r\n                .constrainAs(crest) {\r\n                    top.linkTo(parent.top, margin = 24.dp)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.wrapContent\r\n                }\r\n        )\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIRTUAL_VISIT)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVisit) {\r\n                    bottom.linkTo(btnBook.top, margin = 72.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_map_24),\r\n                contentDescription = null,\r\n                modifier = Modifier\r\n                    .padding(end = 16.dp)\r\n                    .size(48.dp)\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.virtual_visit),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.OPCIONES_RESERVA)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnBook) {\r\n                    bottom.linkTo(parent.bottom, margin = 186.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_time_24),\r\n                contentDescription = null,\r\n                modifier = Modifier.padding(end = 16.dp).size(48.dp)\r\n\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.book_appointment),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(date 1763059354437)
--@@ -13,12 +13,15 @@
-- import androidx.compose.material3.Text
-- import androidx.compose.runtime.Composable
-- import androidx.compose.runtime.DisposableEffect
--+import androidx.compose.ui.Alignment
-- import androidx.compose.ui.Modifier
--+import androidx.compose.ui.graphics.Color
-- import androidx.compose.ui.layout.ContentScale
-- import androidx.compose.ui.platform.LocalConfiguration
-- import androidx.compose.ui.platform.LocalContext
-- import androidx.compose.ui.res.painterResource
-- import androidx.compose.ui.res.stringResource
--+import androidx.compose.ui.text.style.TextAlign
-- import androidx.compose.ui.tooling.preview.Preview
-- import androidx.compose.ui.unit.dp
-- import androidx.compose.ui.unit.sp
--@@ -47,7 +50,7 @@
--     }
-- 
--     ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {
---        val (background, crest, title, btnVisit, btnBook) = createRefs()
--+        val (background, crest, title, btnVisit, btnChild,btnBook) = createRefs()
--         Image(
--             painter = painterResource(id = R.drawable.monastery_background),
--             contentDescription = null,
--@@ -84,24 +87,63 @@
--             shape = RoundedCornerShape(20.dp),
--             modifier = Modifier
--                 .constrainAs(btnVisit) {
---                    bottom.linkTo(btnBook.top, margin = 72.dp)
--+                    bottom.linkTo(btnChild.top, margin = 48.dp)
--                     start.linkTo(parent.start, margin = 40.dp)
--                     end.linkTo(parent.end, margin = 40.dp)
---                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
--+                    width = Dimension.fillToConstraints
--                 }
---                .height(60.dp)
--         ) {
---            Icon(
---                painter = painterResource(id = R.drawable.ic_map_24),
---                contentDescription = null,
---                modifier = Modifier
---                    .padding(end = 16.dp)
---                    .size(48.dp)
---            )
---            Text(
---                stringResource(id = R.string.virtual_visit),
---                fontSize = 22.sp
---            )
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            )  {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.ic_map_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
--+                )
--+                Text(
--+                    stringResource(id = R.string.virtual_visit),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center
--+                )
--+            }
--+        }
--+        Button(
--+            onClick = {
--+                navController.navigate(AppRoutes.MODO_NINYOS)
--+            },
--+            colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF6EB017)),
--+            shape = RoundedCornerShape(20.dp),
--+            modifier = Modifier
--+                .constrainAs(btnChild) {
--+                    bottom.linkTo(btnBook.top, margin = 48.dp)
--+                    start.linkTo(parent.start, margin = 40.dp)
--+                    end.linkTo(parent.end, margin = 40.dp)
--+                    width = Dimension.fillToConstraints
--+                }
--+        ) {
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            )  {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.outline_account_child_invert_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
--+                )
--+                Text(
--+                    stringResource(id = R.string.child_mode),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center
--+                )
--+            }
--         }
--         Button(
--             onClick = {
--@@ -114,20 +156,28 @@
--                     bottom.linkTo(parent.bottom, margin = 186.dp)
--                     start.linkTo(parent.start, margin = 40.dp)
--                     end.linkTo(parent.end, margin = 40.dp)
---                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
--+                    width = Dimension.fillToConstraints
--                 }
---                .height(60.dp)
--         ) {
---            Icon(
---                painter = painterResource(id = R.drawable.ic_time_24),
---                contentDescription = null,
---                modifier = Modifier.padding(end = 16.dp).size(48.dp)
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            ) {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.ic_time_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
-- 
---            )
---            Text(
---                stringResource(id = R.string.book_appointment),
---                fontSize = 22.sp
---            )
--+                )
--+                Text(
--+                    stringResource(id = R.string.book_appointment),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center
--+                )
--+            }
--         }
--     }
-- }
--Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport androidx.compose.foundation.*\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.pager.HorizontalPager\r\nimport androidx.compose.foundation.pager.rememberPagerState\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalView\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.compose.ui.window.Dialog\r\nimport androidx.compose.ui.window.DialogProperties\r\nimport androidx.core.view.WindowCompat\r\nimport coil.compose.AsyncImage\r\nimport coil.load\r\nimport com.github.chrisbanes.photoview.PhotoView\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.models.Ubicacion\r\nimport java.util.Locale\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.res.stringResource\r\n\r\n@OptIn(ExperimentalFoundationApi::class)\r\n@Composable\r\nfun PinDetalleScreen(\r\n    pin: PinData,\r\n    onBack: () -> Unit,\r\n    onVer360: (() -> Unit)? = null\r\n) {\r\n    val view = LocalView.current\r\n    LaunchedEffect(Unit) {\r\n        val window = (view.context as? Activity)?.window\r\n        window?.let { WindowCompat.setDecorFitsSystemWindows(it, false) }\r\n    }\r\n\r\n    val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()\r\n\r\n    val pagerState = rememberPagerState(pageCount = { imagenes.size })\r\n    var selectedImageUrl by remember { mutableStateOf<String?>(null) }\r\n    var selectedImageTitle by remember { mutableStateOf<String?>(null) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val locale: Locale = configuration.locales[0]\r\n    val language = locale.language\r\n\r\n    val titulo_pin: String\r\n    val descripcion_pin: String?\r\n    val ubicacion_pin: Ubicacion?\r\n\r\n    when (language) {\r\n        \"es\" -> {\r\n            titulo_pin = pin.titulo\r\n            descripcion_pin = pin.descripcion\r\n            ubicacion_pin = pin.ubicacion\r\n        }\r\n        \"de\" -> {\r\n            titulo_pin = pin.tituloAleman\r\n            descripcion_pin = pin.descripcionAleman\r\n            ubicacion_pin = pin.ubicacionAleman\r\n        }\r\n        else -> {\r\n            titulo_pin = pin.tituloIngles\r\n            descripcion_pin = pin.descripcionIngles\r\n            ubicacion_pin = pin.ubicacionIngles\r\n        }\r\n    }\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.White)\r\n            .statusBarsPadding()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(horizontal = 16.dp)\r\n                .padding(bottom = 90.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // \uD83D\uDD19 Bot贸n atr谩s\r\n            Box(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 16.dp),\r\n                contentAlignment = Alignment.CenterStart\r\n            ) {\r\n                Image(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.go_back),\r\n                    modifier = Modifier\r\n                        .size(28.dp)\r\n                        .clickable { onBack() }\r\n                )\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            // \uD83C\uDFF7\uFE0F T铆tulo principal\r\n            Text(\r\n                text = buildString {\r\n                    append(titulo_pin)\r\n                    ubicacion_pin?.let { append(\" (${it.displayName})\") }\r\n                },\r\n                fontSize = 26.sp,\r\n                fontWeight = FontWeight.Bold,\r\n                color = Color.Black,\r\n                textAlign = TextAlign.Center,\r\n                modifier = Modifier.fillMaxWidth()\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(20.dp))\r\n\r\n            // \uD83D\uDDBC\uFE0F Carrusel con etiqueta (solo aqu铆)\r\n            if (imagenes.isNotEmpty()) {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(250.dp)\r\n                        .clip(RoundedCornerShape(16.dp))\r\n                        .border(3.dp, Color.Black, RoundedCornerShape(16.dp))\r\n                ) {\r\n                    HorizontalPager(state = pagerState) { page ->\r\n                        val imagen = imagenes[page]\r\n                        Box(modifier = Modifier.fillMaxSize()) {\r\n                            AsyncImage(\r\n                                model = imagen.url,\r\n                                contentDescription = imagen.etiqueta,\r\n                                contentScale = ContentScale.Crop,\r\n                                modifier = Modifier\r\n                                    .fillMaxSize()\r\n                                    .clickable {\r\n                                        selectedImageUrl = imagen.url\r\n                                        // \uD83D\uDC47 t铆tulo seg煤n idioma actual\r\n                                        selectedImageTitle = when (language) {\r\n                                            \"es\" -> imagen.titulo\r\n                                            \"de\" -> imagen.tituloAleman\r\n                                            else -> imagen.tituloIngles\r\n                                        }\r\n                                    }\r\n                            )\r\n\r\n                            // \uD83D\uDD39 Etiqueta abajo a la izquierda (solo carrusel)\r\n                            Text(\r\n                                text = imagen.etiqueta,\r\n                                color = Color.White,\r\n                                fontSize = 14.sp,\r\n                                modifier = Modifier\r\n                                    .align(Alignment.BottomStart)\r\n                                    .background(Color.Black.copy(alpha = 0.6f))\r\n                                    .padding(horizontal = 10.dp, vertical = 6.dp)\r\n                            )\r\n                        }\r\n                    }\r\n\r\n                    // \uD83D\uDD38 Indicadores inferiores\r\n                    Row(\r\n                        Modifier\r\n                            .align(Alignment.BottomCenter)\r\n                            .padding(bottom = 6.dp)\r\n                    ) {\r\n                        repeat(imagenes.size) { index ->\r\n                            val selected = pagerState.currentPage == index\r\n                            Box(\r\n                                Modifier\r\n                                    .padding(3.dp)\r\n                                    .size(if (selected) 8.dp else 6.dp)\r\n                                    .background(\r\n                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),\r\n                                        shape = CircleShape\r\n                                    )\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n                Spacer(modifier = Modifier.height(24.dp))\r\n            }\r\n\r\n            // \uD83D\uDCDD Descripci贸n\r\n            val descripcion = descripcion_pin ?: \"\"\r\n            if (descripcion.isNotBlank()) {\r\n                val textScrollState = rememberScrollState()\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .weight(1f)\r\n                        .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))\r\n                        .clip(RoundedCornerShape(8.dp))\r\n                ) {\r\n                    Text(\r\n                        text = descripcion,\r\n                        fontSize = 16.sp,\r\n                        color = Color.DarkGray,\r\n                        lineHeight = 22.sp,\r\n                        modifier = Modifier\r\n                            .fillMaxSize()\r\n                            .padding(horizontal = 12.dp, vertical = 8.dp)\r\n                            .verticalScroll(textScrollState)\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD18 Bot贸n 360\r\n        onVer360?.let {\r\n            Box(\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomCenter)\r\n                    .fillMaxWidth()\r\n                    .background(Color.White)\r\n                    .navigationBarsPadding()\r\n                    .padding(horizontal = 16.dp, vertical = 12.dp)\r\n            ) {\r\n                Button(\r\n                    onClick = it,\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(56.dp),\r\n                    colors = ButtonDefaults.buttonColors(containerColor = Color.Black),\r\n                    shape = RoundedCornerShape(12.dp)\r\n                ) {\r\n                    Text(\r\n                        text = stringResource(R.string.see_360),\r\n                        color = Color.White,\r\n                        fontSize = 18.sp,\r\n                        fontWeight = FontWeight.Bold,\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD0D Zoom con t铆tulo traducido\r\n        if (selectedImageUrl != null) {\r\n            ZoomableImageDialog(\r\n                imageUrl = selectedImageUrl!!,\r\n                label = selectedImageTitle ?: \"\",\r\n                onDismiss = {\r\n                    selectedImageUrl = null\r\n                    selectedImageTitle = null\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// \uD83D\uDD0D Di谩logo de zoom\r\n@Composable\r\nprivate fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {\r\n    Dialog(\r\n        onDismissRequest = onDismiss,\r\n        properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)\r\n    ) {\r\n        Box(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .background(Color.Black.copy(alpha = 0.95f))\r\n        ) {\r\n            AndroidView(\r\n                factory = { context ->\r\n                    PhotoView(context).apply {\r\n                        load(imageUrl) { crossfade(true) }\r\n                    }\r\n                },\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n\r\n            // \uD83D\uDD39 T铆tulo (ya traducido seg煤n idioma)\r\n            Text(\r\n                text = label,\r\n                color = Color.White,\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Medium,\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomStart)\r\n                    .background(Color.Black.copy(alpha = 0.7f))\r\n                    .padding(horizontal = 12.dp, vertical = 8.dp)\r\n            )\r\n\r\n            //  Bot贸n cerrar\r\n            IconButton(\r\n                onClick = onDismiss,\r\n                modifier = Modifier\r\n                    .align(Alignment.TopEnd)\r\n                    .statusBarsPadding()\r\n                    .padding(16.dp)\r\n                    .background(Color.Black.copy(alpha = 0.5f), CircleShape)\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.close),\r\n                    tint = Color.White\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(date 1763054038537)
--@@ -189,7 +189,6 @@
--                         }
--                     }
--                 }
---                Spacer(modifier = Modifier.height(24.dp))
--             }
-- 
--             //  Descripci贸n
--@@ -216,7 +215,7 @@
--                 }
--             }
--         }
---
--+        Spacer(modifier = Modifier.height(24.dp))
--         //  Bot贸n 360
--         onVer360?.let {
--             Box(
--Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci贸n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti贸n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
----- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763058434043)
--@@ -18,5 +18,11 @@
--     const val PIN_DETALLE = "pin_detalle"
--     const val PANORAMA = "panorama"
-- 
--+    const val MODO_NINYOS = "modo_ni帽os"
--+
--+    const val VIDEO_NINYOS = "video_modo_ni帽os"
--+
--+    const val JUEGO_NINYOS = "juego_modo_ni帽os"
--+
--     const val PIN_360 = "pin_360"
-- }
--Index: app/src/main/res/values-de/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode\">Bearbeiten</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Heute</string>\r\n    <string name=\"title_appointment\">Termin vereinbaren</string>\r\n    <string name=\"option_phone_appointment\">Buchen Sie telefonisch</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Stunde</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Datum ausw盲hlen</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail-Adresse erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig.</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden.</string>\r\n    <string name=\"hour_no_selected\">Es muss ein Zeitpunkt ausgew盲hlt werden.</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Stornieren</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte klicken Sie in der soeben ge枚ffneten E-Mail-Anwendung auf Senden, um Ihre Anfrage abzuschlieen. Wir werden Ihnen die Verf眉gbarkeit per E-Mail best盲tigen..</string>\r\n    <string name=\"email_subject\">Reservierungsanfrage ansehen - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich m枚chte hiermit eine Reservierung f眉r einen Besuch im Kloster anfragen. Bitte geben Sie folgende Daten an:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden.</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">W盲hlen Sie die Schriftgr枚e aus</string>\r\n    <string name=\"font_extrabig\">Extra gro</string>\r\n    <string name=\"font_normal\">Mittlere</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Geh zur眉ck</string>\r\n    <string name=\"see_360\">360潞-Ansicht</string>\r\n    <string name=\"contentdescription_image_pin\">Bild anpinnen (zum Vergr枚ern anklicken)</string>\r\n    <string name=\"readjust\">Zur眉cksetzen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Zunahme</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Undefiniertes Ziel</string>\r\n    <string name=\"notdefined_destinyplane\">Zielebene nicht definiert</string>\r\n    <string name=\"plane_loading\">Ladeplan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
----- a/app/src/main/res/values-de/strings.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/res/values-de/strings.xml	(date 1763060335818)
--@@ -78,4 +78,10 @@
--     <string name="notdefined_destinyplane">Zielebene nicht definiert</string>
--     <string name="plane_loading">Ladeplan...</string>
--     <string name="error_loading_plane">Fehler beim Laden der Plandaten</string>
--+    <string name="child_mode">KINDERMODUS</string>
--+    <string name="child_mode_view">Kindermodus</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Spiel</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">SPIEL</string>
-- </resources>
--\ No newline at end of file
--Index: .idea/inspectionProfiles/Project_Default.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><component name=\"InspectionProjectProfileManager\">\r\n  <profile version=\"1.0\">\r\n    <option name=\"myName\" value=\"Project Default\" />\r\n    <inspection_tool class=\"ComposePreviewDimensionRespectsLimit\" enabled=\"true\" level=\"WARNING\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"ComposePreviewMustBeTopLevelFunction\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"ComposePreviewNeedsComposableAnnotation\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"ComposePreviewNotSupportedInUnitTestFiles\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewDimensionRespectsLimit\" enabled=\"true\" level=\"WARNING\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewMustBeTopLevelFunction\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewNeedsComposableAnnotation\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"GlancePreviewNotSupportedInUnitTestFiles\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewAnnotationInFunctionWithParameters\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewApiLevelMustBeValid\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewDeviceShouldUseNewSpec\" enabled=\"true\" level=\"WEAK WARNING\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewFontScaleMustBeGreaterThanZero\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewMultipleParameterProviders\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewParameterProviderOnFirstParameter\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n    <inspection_tool class=\"PreviewPickerAnnotation\" enabled=\"true\" level=\"ERROR\" enabled_by_default=\"true\">\r\n      <option name=\"composableFile\" value=\"true\" />\r\n    </inspection_tool>\r\n  </profile>\r\n</component>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/inspectionProfiles/Project_Default.xml b/.idea/inspectionProfiles/Project_Default.xml
----- a/.idea/inspectionProfiles/Project_Default.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/.idea/inspectionProfiles/Project_Default.xml	(date 1763052230945)
--@@ -3,15 +3,19 @@
--     <option name="myName" value="Project Default" />
--     <inspection_tool class="ComposePreviewDimensionRespectsLimit" enabled="true" level="WARNING" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="ComposePreviewMustBeTopLevelFunction" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="ComposePreviewNeedsComposableAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="ComposePreviewNotSupportedInUnitTestFiles" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="GlancePreviewDimensionRespectsLimit" enabled="true" level="WARNING" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--@@ -27,24 +31,31 @@
--     </inspection_tool>
--     <inspection_tool class="PreviewAnnotationInFunctionWithParameters" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewApiLevelMustBeValid" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewDeviceShouldUseNewSpec" enabled="true" level="WEAK WARNING" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewFontScaleMustBeGreaterThanZero" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewMultipleParameterProviders" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewParameterProviderOnFirstParameter" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--     <inspection_tool class="PreviewPickerAnnotation" enabled="true" level="ERROR" enabled_by_default="true">
--       <option name="composableFile" value="true" />
--+      <option name="previewFile" value="true" />
--     </inspection_tool>
--   </profile>
-- </component>
--\ No newline at end of file
--Index: app/src/main/res/values-en/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode\">Edit mode</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
----- a/app/src/main/res/values-en/strings.xml	(revision ffc5c81e9acc1ff710ce9471c71fe6f91bbc8b68)
--+++ b/app/src/main/res/values-en/strings.xml	(date 1763060335806)
--@@ -77,5 +77,11 @@
--     <string name="notdefined_destinyplane">Destination plane not defined</string>
--     <string name="plane_loading">Loading plane...</string>
--     <string name="error_loading_plane">Error loading plan data</string>
--+    <string name="child_mode">KIDS MODE</string>
--+    <string name="child_mode_view">Kids Mode</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Game</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">GAME</string>
-- 
-- </resources>
--\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_11_2025_17_23_[Changes]/shelved.patch	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ /dev/null	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-@@ -1,76 +0,0 @@
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59__Changes_.xml	(revision 749e348327723e32182d8232c1f468717dd07de8)
--+++ /dev/null	(revision 749e348327723e32182d8232c1f468717dd07de8)
--@@ -1,4 +0,0 @@
---<changelist name="Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]" date="1762203554276" recycled="true" deleted="true">
---  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch" />
---  <option name="DESCRIPTION" value="Uncommitted changes before Update at 03/11/2025 21:59 [Changes]" />
---</changelist>
--\ No newline at end of file
--Index: .idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch
--===================================================================
--diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch
--deleted file mode 100644
----- a/.idea/shelf/Uncommitted_changes_before_Update_at_03_11_2025_21_59_[Changes]/shelved.patch	(revision 749e348327723e32182d8232c1f468717dd07de8)
--+++ /dev/null	(revision 749e348327723e32182d8232c1f468717dd07de8)
--@@ -1,40 +0,0 @@
---Index: app/build.gradle.kts
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"com.github.chrisbanes:PhotoView:2.3.0\")\r\n\r\n\r\n}\r\n
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/build.gradle.kts b/app/build.gradle.kts
------ a/app/build.gradle.kts	(revision 5de2861fc1fa7434418f05b9799750836a56e25d)
---+++ b/app/build.gradle.kts	(date 1762107218284)
---@@ -74,7 +74,7 @@
---     implementation("com.google.android.material:material:1.10.0")
--- 
---     // Plano Interactivo
----    implementation("com.github.chrisbanes:PhotoView:2.3.0")
---+    implementation("io.github.chrisbanes:PhotoView:2.3.0")
--- 
--- 
--- }
---Index: app/src/main/AndroidManifest.xml
---IDEA additional info:
---Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
---<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.nextapp.monasterio\"> <application\r\n    android:name=\".MonasteryApplication\"\r\n    android:allowBackup=\"true\"\r\n    android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n    android:fullBackupContent=\"@xml/backup_rules\"\r\n    android:icon=\"@drawable/escudo\"\r\n    android:label=\"@string/app_name\"\r\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n    android:supportsRtl=\"true\"\r\n    android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n    <activity\r\n        android:name=\".MainActivity\"\r\n        android:exported=\"true\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n        <intent-filter>\r\n            <action android:name=\"android.intent.action.MAIN\" />\r\n            <category android:name=\"android.intent.category.LAUNCHER\" />\r\n        </intent-filter>\r\n    </activity>\r\n    <activity\r\n        android:name=\"com.nextapp.monasterio.ui.virtualvisit.VirtualVisitActivity\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\" />\r\n</application>\r\n\r\n</manifest>
---Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
---<+>UTF-8
---===================================================================
---diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
------ a/app/src/main/AndroidManifest.xml	(revision 5de2861fc1fa7434418f05b9799750836a56e25d)
---+++ b/app/src/main/AndroidManifest.xml	(date 1762106092917)
---@@ -19,9 +19,6 @@
---             <category android:name="android.intent.category.LAUNCHER" />
---         </intent-filter>
---     </activity>
----    <activity
----        android:name="com.nextapp.monasterio.ui.virtualvisit.VirtualVisitActivity"
----        android:theme="@style/Theme.SMOV_Monasterio" />
--- </application>
--- 
--- </manifest>
---\ No newline at end of file
--Index: .idea/gradle.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"CHOOSE_PER_TEST\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#GRADLE_LOCAL_JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/gradle.xml b/.idea/gradle.xml
----- a/.idea/gradle.xml	(revision 749e348327723e32182d8232c1f468717dd07de8)
--+++ b/.idea/gradle.xml	(date 1762878195656)
--@@ -1,5 +1,6 @@
-- <?xml version="1.0" encoding="UTF-8"?>
-- <project version="4">
--+  <component name="GradleMigrationSettings" migrationVersion="1" />
--   <component name="GradleSettings">
--     <option name="linkedExternalProjectsSettings">
--       <GradleProjectSettings>
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35__Changes_.xml	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ /dev/null	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]" date="1763066246225" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_13_11_2025_21_35_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 13/11/2025 21:35 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_14_11_2025_0_07_[Changes]/shelved.patch	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ /dev/null	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-@@ -1,470 +0,0 @@
--Index: app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun HomeScreenContent(navController:NavController, modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {\r\n        val (background, crest, title, btnVisit, btnBook) = createRefs()\r\n        Image(\r\n            painter = painterResource(id = R.drawable.monastery_background),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop,\r\n            modifier = Modifier.constrainAs(background) {\r\n                top.linkTo(parent.top)\r\n                bottom.linkTo(parent.bottom)\r\n                start.linkTo(parent.start)\r\n                end.linkTo(parent.end)\r\n                width = Dimension.fillToConstraints\r\n                height = Dimension.fillToConstraints\r\n\r\n                centerVerticallyTo(parent)\r\n            }\r\n        )\r\n        Image(\r\n            painter = painterResource(id = R.drawable.huelgas_inicio),\r\n            contentDescription = \"Escudo\",\r\n            contentScale = ContentScale.FillWidth,\r\n            modifier = Modifier\r\n                .constrainAs(crest) {\r\n                    top.linkTo(parent.top, margin = 24.dp)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.wrapContent\r\n                }\r\n        )\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIRTUAL_VISIT)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVisit) {\r\n                    bottom.linkTo(btnBook.top, margin = 72.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_map_24),\r\n                contentDescription = null,\r\n                modifier = Modifier\r\n                    .padding(end = 16.dp)\r\n                    .size(48.dp)\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.virtual_visit),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.OPCIONES_RESERVA)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnBook) {\r\n                    bottom.linkTo(parent.bottom, margin = 186.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints\r\n                }\r\n                .height(60.dp)\r\n        ) {\r\n            Icon(\r\n                painter = painterResource(id = R.drawable.ic_time_24),\r\n                contentDescription = null,\r\n                modifier = Modifier.padding(end = 16.dp).size(48.dp)\r\n\r\n            )\r\n            Text(\r\n                stringResource(id = R.string.book_appointment),\r\n                fontSize = 22.sp\r\n            )\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(date 1763074982128)
--@@ -13,12 +13,15 @@
-- import androidx.compose.material3.Text
-- import androidx.compose.runtime.Composable
-- import androidx.compose.runtime.DisposableEffect
--+import androidx.compose.ui.Alignment
-- import androidx.compose.ui.Modifier
--+import androidx.compose.ui.graphics.Color
-- import androidx.compose.ui.layout.ContentScale
-- import androidx.compose.ui.platform.LocalConfiguration
-- import androidx.compose.ui.platform.LocalContext
-- import androidx.compose.ui.res.painterResource
-- import androidx.compose.ui.res.stringResource
--+import androidx.compose.ui.text.style.TextAlign
-- import androidx.compose.ui.tooling.preview.Preview
-- import androidx.compose.ui.unit.dp
-- import androidx.compose.ui.unit.sp
--@@ -47,7 +50,7 @@
--     }
-- 
--     ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {
---        val (background, crest, title, btnVisit, btnBook) = createRefs()
--+        val (background, crest, title, btnVisit, btnChild,btnBook) = createRefs()
--         Image(
--             painter = painterResource(id = R.drawable.monastery_background),
--             contentDescription = null,
--@@ -84,24 +87,63 @@
--             shape = RoundedCornerShape(20.dp),
--             modifier = Modifier
--                 .constrainAs(btnVisit) {
---                    bottom.linkTo(btnBook.top, margin = 72.dp)
---                    start.linkTo(parent.start, margin = 40.dp)
---                    end.linkTo(parent.end, margin = 40.dp)
---                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
--+                    bottom.linkTo(btnChild.top, margin = 48.dp)
--+                    start.linkTo(parent.start, margin = 20.dp)
--+                    end.linkTo(parent.end, margin = 20.dp)
--+                    width = Dimension.fillToConstraints
--                 }
---                .height(60.dp)
--         ) {
---            Icon(
---                painter = painterResource(id = R.drawable.ic_map_24),
---                contentDescription = null,
---                modifier = Modifier
---                    .padding(end = 16.dp)
---                    .size(48.dp)
---            )
---            Text(
---                stringResource(id = R.string.virtual_visit),
---                fontSize = 22.sp
---            )
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            )  {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.ic_map_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
--+                )
--+                Text(
--+                    stringResource(id = R.string.virtual_visit),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center
--+                )
--+            }
--+        }
--+        Button(
--+            onClick = {
--+                navController.navigate(AppRoutes.MODO_NINYOS)
--+            },
--+            colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF6EB017)),
--+            shape = RoundedCornerShape(20.dp),
--+            modifier = Modifier
--+                .constrainAs(btnChild) {
--+                    bottom.linkTo(btnBook.top, margin = 48.dp)
--+                    start.linkTo(parent.start, margin = 20.dp)
--+                    end.linkTo(parent.end, margin = 20.dp)
--+                    width = Dimension.fillToConstraints
--+                }
--+        ) {
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            )  {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.outline_account_child_invert_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
--+                )
--+                Text(
--+                    stringResource(id = R.string.child_mode),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center
--+                )
--+            }
--         }
--         Button(
--             onClick = {
--@@ -112,22 +154,30 @@
--             modifier = Modifier
--                 .constrainAs(btnBook) {
--                     bottom.linkTo(parent.bottom, margin = 186.dp)
---                    start.linkTo(parent.start, margin = 40.dp)
---                    end.linkTo(parent.end, margin = 40.dp)
---                    width = androidx.constraintlayout.compose.Dimension.fillToConstraints
--+                    start.linkTo(parent.start, margin = 20.dp)
--+                    end.linkTo(parent.end, margin = 20.dp)
--+                    width = Dimension.fillToConstraints
--                 }
---                .height(60.dp)
--         ) {
---            Icon(
---                painter = painterResource(id = R.drawable.ic_time_24),
---                contentDescription = null,
---                modifier = Modifier.padding(end = 16.dp).size(48.dp)
--+            Row(
--+                modifier=Modifier
--+                    .padding(horizontal = 20.dp),
--+                verticalAlignment = Alignment.CenterVertically
--+            ) {
--+                Icon(
--+                    painter = painterResource(id = R.drawable.ic_time_24),
--+                    contentDescription = null,
--+                    modifier = Modifier
--+                        .padding(end = 16.dp)
--+                        .size(48.dp)
-- 
---            )
---            Text(
---                stringResource(id = R.string.book_appointment),
---                fontSize = 22.sp
---            )
--+                )
--+                Text(
--+                    stringResource(id = R.string.book_appointment),
--+                    fontSize = 22.sp,
--+                    textAlign = TextAlign.Center,
--+                )
--+            }
--         }
--     }
-- }
--Index: app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.virtualvisit.screens\r\n\r\nimport android.app.Activity\r\nimport androidx.compose.foundation.*\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.pager.HorizontalPager\r\nimport androidx.compose.foundation.pager.rememberPagerState\r\nimport androidx.compose.foundation.shape.CircleShape\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalView\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.compose.ui.window.Dialog\r\nimport androidx.compose.ui.window.DialogProperties\r\nimport androidx.core.view.WindowCompat\r\nimport coil.compose.AsyncImage\r\nimport coil.load\r\nimport com.github.chrisbanes.photoview.PhotoView\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PinData\r\nimport com.nextapp.monasterio.models.Ubicacion\r\nimport java.util.Locale\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.res.stringResource\r\n\r\n@OptIn(ExperimentalFoundationApi::class)\r\n@Composable\r\nfun PinDetalleScreen(\r\n    pin: PinData,\r\n    onBack: () -> Unit,\r\n    onVer360: (() -> Unit)? = null\r\n) {\r\n    val view = LocalView.current\r\n    LaunchedEffect(Unit) {\r\n        val window = (view.context as? Activity)?.window\r\n        window?.let { WindowCompat.setDecorFitsSystemWindows(it, false) }\r\n    }\r\n\r\n    val imagenes = if (pin.imagenesDetalladas.isNotEmpty()) pin.imagenesDetalladas else emptyList()\r\n\r\n    val pagerState = rememberPagerState(pageCount = { imagenes.size })\r\n    var selectedImageUrl by remember { mutableStateOf<String?>(null) }\r\n    var selectedImageTitle by remember { mutableStateOf<String?>(null) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val locale: Locale = configuration.locales[0]\r\n    val language = locale.language\r\n\r\n    val titulo_pin: String\r\n    val descripcion_pin: String?\r\n    val ubicacion_pin: Ubicacion?\r\n\r\n    when (language) {\r\n        \"es\" -> {\r\n            titulo_pin = pin.titulo\r\n            descripcion_pin = pin.descripcion\r\n            ubicacion_pin = pin.ubicacion\r\n        }\r\n        \"de\" -> {\r\n            titulo_pin = pin.tituloAleman\r\n            descripcion_pin = pin.descripcionAleman\r\n            ubicacion_pin = pin.ubicacionAleman\r\n        }\r\n        else -> {\r\n            titulo_pin = pin.tituloIngles\r\n            descripcion_pin = pin.descripcionIngles\r\n            ubicacion_pin = pin.ubicacionIngles\r\n        }\r\n    }\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(Color.White)\r\n            .statusBarsPadding()\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(horizontal = 16.dp)\r\n                .padding(bottom = 90.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // \uD83D\uDD19 Bot贸n atr谩s\r\n            Box(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 16.dp),\r\n                contentAlignment = Alignment.CenterStart\r\n            ) {\r\n                Image(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.go_back),\r\n                    modifier = Modifier\r\n                        .size(28.dp)\r\n                        .clickable { onBack() }\r\n                )\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            // \uD83C\uDFF7\uFE0F T铆tulo principal\r\n            Text(\r\n                text = buildString {\r\n                    append(titulo_pin)\r\n                    ubicacion_pin?.let { append(\" (${it.displayName})\") }\r\n                },\r\n                fontSize = 26.sp,\r\n                fontWeight = FontWeight.Bold,\r\n                color = Color.Black,\r\n                textAlign = TextAlign.Center,\r\n                modifier = Modifier.fillMaxWidth()\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(20.dp))\r\n\r\n            // \uD83D\uDDBC\uFE0F Carrusel con etiqueta (solo aqu铆)\r\n            if (imagenes.isNotEmpty()) {\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(250.dp)\r\n                        .clip(RoundedCornerShape(16.dp))\r\n                        .border(3.dp, Color.Black, RoundedCornerShape(16.dp))\r\n                ) {\r\n                    HorizontalPager(state = pagerState) { page ->\r\n                        val imagen = imagenes[page]\r\n                        Box(modifier = Modifier.fillMaxSize()) {\r\n                            AsyncImage(\r\n                                model = imagen.url,\r\n                                contentDescription = imagen.etiqueta,\r\n                                contentScale = ContentScale.Crop,\r\n                                modifier = Modifier\r\n                                    .fillMaxSize()\r\n                                    .clickable {\r\n                                        selectedImageUrl = imagen.url\r\n                                        // \uD83D\uDC47 t铆tulo seg煤n idioma actual\r\n                                        selectedImageTitle = when (language) {\r\n                                            \"es\" -> imagen.titulo\r\n                                            \"de\" -> imagen.tituloAleman\r\n                                            else -> imagen.tituloIngles\r\n                                        }\r\n                                    }\r\n                            )\r\n\r\n                            // \uD83D\uDD39 Etiqueta abajo a la izquierda (solo carrusel)\r\n                            Text(\r\n                                text = imagen.etiqueta,\r\n                                color = Color.White,\r\n                                fontSize = 14.sp,\r\n                                modifier = Modifier\r\n                                    .align(Alignment.BottomStart)\r\n                                    .background(Color.Black.copy(alpha = 0.6f))\r\n                                    .padding(horizontal = 10.dp, vertical = 6.dp)\r\n                            )\r\n                        }\r\n                    }\r\n\r\n                    // \uD83D\uDD38 Indicadores inferiores\r\n                    Row(\r\n                        Modifier\r\n                            .align(Alignment.BottomCenter)\r\n                            .padding(bottom = 6.dp)\r\n                    ) {\r\n                        repeat(imagenes.size) { index ->\r\n                            val selected = pagerState.currentPage == index\r\n                            Box(\r\n                                Modifier\r\n                                    .padding(3.dp)\r\n                                    .size(if (selected) 8.dp else 6.dp)\r\n                                    .background(\r\n                                        Color.White.copy(alpha = if (selected) 1f else 0.6f),\r\n                                        shape = CircleShape\r\n                                    )\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n                Spacer(modifier = Modifier.height(24.dp))\r\n            }\r\n\r\n            // \uD83D\uDCDD Descripci贸n\r\n            val descripcion = descripcion_pin ?: \"\"\r\n            if (descripcion.isNotBlank()) {\r\n                val textScrollState = rememberScrollState()\r\n                Box(\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .weight(1f)\r\n                        .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))\r\n                        .clip(RoundedCornerShape(8.dp))\r\n                ) {\r\n                    Text(\r\n                        text = descripcion,\r\n                        fontSize = 16.sp,\r\n                        color = Color.DarkGray,\r\n                        lineHeight = 22.sp,\r\n                        modifier = Modifier\r\n                            .fillMaxSize()\r\n                            .padding(horizontal = 12.dp, vertical = 8.dp)\r\n                            .verticalScroll(textScrollState)\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD18 Bot贸n 360\r\n        onVer360?.let {\r\n            Box(\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomCenter)\r\n                    .fillMaxWidth()\r\n                    .background(Color.White)\r\n                    .navigationBarsPadding()\r\n                    .padding(horizontal = 16.dp, vertical = 12.dp)\r\n            ) {\r\n                Button(\r\n                    onClick = it,\r\n                    modifier = Modifier\r\n                        .fillMaxWidth()\r\n                        .height(56.dp),\r\n                    colors = ButtonDefaults.buttonColors(containerColor = Color.Black),\r\n                    shape = RoundedCornerShape(12.dp)\r\n                ) {\r\n                    Text(\r\n                        text = stringResource(R.string.see_360),\r\n                        color = Color.White,\r\n                        fontSize = 18.sp,\r\n                        fontWeight = FontWeight.Bold,\r\n                    )\r\n                }\r\n            }\r\n        }\r\n\r\n        // \uD83D\uDD0D Zoom con t铆tulo traducido\r\n        if (selectedImageUrl != null) {\r\n            ZoomableImageDialog(\r\n                imageUrl = selectedImageUrl!!,\r\n                label = selectedImageTitle ?: \"\",\r\n                onDismiss = {\r\n                    selectedImageUrl = null\r\n                    selectedImageTitle = null\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// \uD83D\uDD0D Di谩logo de zoom\r\n@Composable\r\nprivate fun ZoomableImageDialog(imageUrl: String, label: String, onDismiss: () -> Unit) {\r\n    Dialog(\r\n        onDismissRequest = onDismiss,\r\n        properties = DialogProperties(usePlatformDefaultWidth = false, dismissOnClickOutside = true)\r\n    ) {\r\n        Box(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .background(Color.Black.copy(alpha = 0.95f))\r\n        ) {\r\n            AndroidView(\r\n                factory = { context ->\r\n                    PhotoView(context).apply {\r\n                        load(imageUrl) { crossfade(true) }\r\n                    }\r\n                },\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n\r\n            // \uD83D\uDD39 T铆tulo (ya traducido seg煤n idioma)\r\n            Text(\r\n                text = label,\r\n                color = Color.White,\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Medium,\r\n                modifier = Modifier\r\n                    .align(Alignment.BottomStart)\r\n                    .background(Color.Black.copy(alpha = 0.7f))\r\n                    .padding(horizontal = 12.dp, vertical = 8.dp)\r\n            )\r\n\r\n            //  Bot贸n cerrar\r\n            IconButton(\r\n                onClick = onDismiss,\r\n                modifier = Modifier\r\n                    .align(Alignment.TopEnd)\r\n                    .statusBarsPadding()\r\n                    .padding(16.dp)\r\n                    .background(Color.Black.copy(alpha = 0.5f), CircleShape)\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.arrow_back),\r\n                    contentDescription = stringResource(R.string.close),\r\n                    tint = Color.White\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/virtualvisit/screens/PinDetalleScreen.kt	(date 1763075243695)
--@@ -89,25 +89,31 @@
--     ) {
--         Column(
--             modifier = Modifier
---                .fillMaxSize()
---                .padding(horizontal = 16.dp)
---                .padding(bottom = 90.dp),
--+                .fillMaxWidth()
--+                .verticalScroll(rememberScrollState())
--+                .padding(horizontal = 16.dp),
--             horizontalAlignment = Alignment.CenterHorizontally
--         ) {
---            //  Bot贸n atr谩s
---            Box(
---                modifier = Modifier
---                    .fillMaxWidth()
---                    .padding(top = 16.dp),
---                contentAlignment = Alignment.CenterStart
---            ) {
---                Image(
---                    painter = painterResource(id = R.drawable.arrow_back),
---                    contentDescription = stringResource(R.string.go_back),
---                    modifier = Modifier
---                        .size(28.dp)
---                        .clickable { onBack() }
---                )
--+            Column(
--+                modifier = Modifier
--+                    .padding(horizontal = 16.dp),
--+                horizontalAlignment = Alignment.CenterHorizontally
--+            ) {
--+                //  Bot贸n atr谩s
--+                Box(
--+                    modifier = Modifier
--+                        .fillMaxWidth()
--+                        .padding(top = 16.dp),
--+                    contentAlignment = Alignment.CenterStart
--+                ) {
--+                    Image(
--+                        painter = painterResource(id = R.drawable.arrow_back),
--+                        contentDescription = stringResource(R.string.go_back),
--+                        modifier = Modifier
--+                            .size(28.dp)
--+                            .clickable { onBack() }
--+                    )
--+                }
--             }
-- 
--             Spacer(modifier = Modifier.height(16.dp))
--@@ -189,8 +195,9 @@
--                         }
--                     }
--                 }
---                Spacer(modifier = Modifier.height(24.dp))
---            }
--+            }
--+
--+            Spacer(modifier = Modifier.height(24.dp))
-- 
--             //  Descripci贸n
--             val descripcion = descripcion_pin ?: ""
--@@ -199,7 +206,6 @@
--                 Box(
--                     modifier = Modifier
--                         .fillMaxWidth()
---                        .weight(1f)
--                         .border(1.dp, Color.LightGray.copy(alpha = 0.5f), RoundedCornerShape(8.dp))
--                         .clip(RoundedCornerShape(8.dp))
--                 ) {
--@@ -215,32 +221,32 @@
--                     )
--                 }
--             }
---        }
--+
-- 
---        //  Bot贸n 360
---        onVer360?.let {
---            Box(
---                modifier = Modifier
---                    .align(Alignment.BottomCenter)
---                    .fillMaxWidth()
---                    .background(Color.White)
---                    .navigationBarsPadding()
---                    .padding(horizontal = 16.dp, vertical = 12.dp)
---            ) {
---                Button(
---                    onClick = it,
---                    modifier = Modifier
---                        .fillMaxWidth()
---                        .height(56.dp),
---                    colors = ButtonDefaults.buttonColors(containerColor = Color.Black),
---                    shape = RoundedCornerShape(12.dp)
---                ) {
---                    Text(
---                        text = stringResource(R.string.see_360),
---                        color = Color.White,
---                        fontSize = 18.sp,
---                        fontWeight = FontWeight.Bold,
---                    )
--+            //  Bot贸n 360
--+            onVer360?.let {
--+                Box(
--+                    modifier = Modifier
--+                        .fillMaxWidth()
--+                        .background(Color.White)
--+                        .navigationBarsPadding()
--+                        .padding(horizontal = 16.dp, vertical = 12.dp)
--+                ) {
--+                    Button(
--+                        onClick = it,
--+                        modifier = Modifier
--+                            .fillMaxWidth()
--+                            .height(56.dp),
--+                        colors = ButtonDefaults.buttonColors(containerColor = Color.Black),
--+                        shape = RoundedCornerShape(12.dp)
--+                    ) {
--+                        Text(
--+                            text = stringResource(R.string.see_360),
--+                            color = Color.White,
--+                            fontSize = 18.sp,
--+                            fontWeight = FontWeight.Bold,
--+                        )
--+                    }
--                 }
--             }
--         }
--Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val newDensity= Density(\r\n                density= currentDensity.density,\r\n                fontScale = currentDensity.fontScale*appFontScale\r\n            )\r\n            CompositionLocalProvider(LocalDensity provides newDensity) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    //ViewModel para tener el estado del usuario autenticado\r\n    val authViewModel: AuthViewModel = viewModel()\r\n    val currentUser by authViewModel.currentUser.collectAsState(initial = null)\r\n    // Estado global para el modo edici贸n\r\n    var isEditing by remember { mutableStateOf(false) }\r\n\r\n    // ... (Tu l贸gica de idioma se queda igual)\r\n    val stringEspanyol= \"Espa帽ol\"\r\n    val stringAleman= \"Deutsch\"\r\n    val stringIngles= \"English\"\r\n    var mostrarIdioma by remember { mutableStateOf(false) }\r\n    val configuration = LocalConfiguration.current\r\n    val currentLanguageCode = configuration.locales[0].language\r\n    var idioma by remember { mutableStateOf(currentLanguageCode) }\r\n    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    //  Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n\r\n    // Comprueba si la ruta ES \"virtual_visit\" (esto cubre el mapa Y los pines anidados)\r\n    val isVirtualVisit = currentRoute == AppRoutes.VIRTUAL_VISIT\r\n\r\n    // Comprueba si la ruta EMPIEZA POR \"pin_360\" (la nueva vista 360)\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n\r\n    // La vista es inmersiva si es CUALQUIERA de las tres\r\n    val isImmersive = isPanorama || isVirtualVisit || isPin360\r\n\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    //  Actualizar t铆tulo (Tu l贸gica se queda igual)\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    // --- 隆隆2. ESTRUCTURA REFACTORIZADA (UN SOLO NAVHOST)!! ---\r\n    // (Hemos eliminado el 'if (isImmersive)' que duplicaba el NavHost)\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        // Desactivamos gestos en el mapa Y en pantallas inmersivas\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                // Solo mostramos la barra roja si NO estamos en una ruta inmersiva\r\n                if (!isImmersive) {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            // ... (Tu l贸gica de idioma y Toast se queda igual)\r\n                            Box {\r\n                                OutlinedIconButton(onClick = {\r\n                                    mostrarIdioma = true\r\n                                }) {\r\n                                    val iconRes =\r\n                                        if (idioma == \"es\" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == \"de\" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido\r\n                                    Image(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = if (idioma == \"es\" || idioma == stringEspanyol ) stringEspanyol\r\n                                        else if (idioma == \"de\" || idioma == stringAleman) stringAleman else stringIngles,\r\n                                        contentScale = ContentScale.Crop\r\n                                    )\r\n                                }\r\n                                DropdownMenu(\r\n                                    expanded = mostrarIdioma,\r\n                                    onDismissRequest = { mostrarIdioma = false },\r\n                                    modifier = Modifier.fillMaxWidth(0.8f),\r\n                                ) {\r\n                                    idiomasDisponibles.forEach { idiomaSlot ->\r\n                                        DropdownMenuItem(\r\n                                            text = { Text(idiomaSlot) },\r\n                                            onClick = {\r\n                                                idioma = idiomaSlot\r\n                                                mostrarIdioma = false\r\n                                                if(idiomaSlot == stringEspanyol)\r\n                                                    LanguageHelper.saveLocale(context, \"es\")\r\n                                                else if(idiomaSlot == stringAleman){\r\n                                                    LanguageHelper.saveLocale(context, \"de\")\r\n                                                } else LanguageHelper.saveLocale(context, \"en\")\r\n                                            }\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            // Icono Editar: solo disponible para un usuario autenticado\r\n                            if (currentUser != null) {\r\n                                IconButton(onClick = {\r\n                                    isEditing = !isEditing // Toggle del modo edici贸n\r\n                                    val message = if (isEditing) context.getString(R.string.edit_mode_activate_message) else context.getString(R.string.edit_mode_deactivate_message)\r\n                                    Toast.makeText(context, message, Toast.LENGTH_SHORT).show()\r\n                                }) {\r\n                                    Icon(\r\n                                        painter = painterResource(id = if (isEditing) R.drawable.baseline_done_24 else R.drawable.lapiz),\r\n                                        contentDescription = if (isEditing) stringResource(id = R.string.edit_mode_deactivate_icon) else  stringResource(id = R.string.edit_mode_activate_icon)\r\n                                    )\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            // 隆隆UN SOLO AppNavigationHost!!\r\n            // (Si es inmersiva, paddingValues ser谩 cero porque no hay TopBar)\r\n            AppNavigationHost(\r\n                authViewModel = authViewModel,\r\n                navController = navController,\r\n                isEditing = isEditing,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
----- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1763070828153)
--@@ -116,6 +116,9 @@
--                 AppRoutes.RESERVA,
--                 AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)
--                 AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)
--+                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)
--+                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)
--+                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)
--                 else -> context.getString(R.string.title_inicio)
--             }
--         }
--@@ -208,7 +211,7 @@
--                                     Toast.makeText(context, message, Toast.LENGTH_SHORT).show()
--                                 }) {
--                                     Icon(
---                                        painter = painterResource(id = if (isEditing) R.drawable.baseline_done_24 else R.drawable.lapiz),
--+                                        painter = painterResource(id = if (isEditing) R.drawable.lapiz else R.drawable.lapiz),
--                                         contentDescription = if (isEditing) stringResource(id = R.string.edit_mode_deactivate_icon) else  stringResource(id = R.string.edit_mode_activate_icon)
--                                     )
--                                 }
--Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.EntradaMonasterioFirestoreScreen\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    authViewModel: AuthViewModel = viewModel(),\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    isEditing: Boolean = false,\r\n    modifier: Modifier = Modifier\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen() }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // --- 隆隆AQU EST LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // --- Pantalla de Entrada del Monasterio (desde Firebase Pin)\r\n        composable(\r\n            route = AppRoutes.PIN_ENTRADA_MONASTERIO + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            EntradaMonasterioFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- FIN DE LA MODIFICACIN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu铆, 隆est谩 bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
----- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763066246026)
--@@ -44,6 +44,8 @@
--         composable(AppRoutes.INFO)     { InfoScreen() }
--         composable(AppRoutes.HISTORIA) { HistoriaScreen() }
--         composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
--+        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }
--+        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyos()}
--         composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }
--         composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }
-- 
--Index: app/src/main/res/values/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
----- a/app/src/main/res/values/strings.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/res/values/strings.xml	(date 1763066246062)
--@@ -81,4 +81,10 @@
--     <string name="notdefined_destinyplane">Plano destino no definido</string>
--     <string name="plane_loading">Cargando plano...</string>
--     <string name="error_loading_plane">Error cargando datos del plano</string>
--+    <string name="child_mode">MODO NIOS</string>
--+    <string name="child_mode_view">Modo Ni帽os</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Juego</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">JUEGO</string>
-- </resources>
--\ No newline at end of file
--Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci贸n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti贸n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n    const val PIN_ENTRADA_MONASTERIO = \"entrada_monasterio\"\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
----- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763066246086)
--@@ -18,6 +18,12 @@
--     const val PIN_DETALLE = "pin_detalle"
--     const val PANORAMA = "panorama"
-- 
--+    const val MODO_NINYOS = "modo_ni帽os"
--+
--+    const val VIDEO_NINYOS = "video_modo_ni帽os"
--+
--+    const val JUEGO_NINYOS = "juego_modo_ni帽os"
--+
--     const val PIN_360 = "pin_360"
--     const val PIN_ENTRADA_MONASTERIO = "entrada_monasterio"
-- }
--Index: app/src/main/res/values-de/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus verlassen</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">nderungen speichern</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Heute</string>\r\n    <string name=\"title_appointment\">Termin vereinbaren</string>\r\n    <string name=\"option_phone_appointment\">Buchen Sie telefonisch</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Stunde</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Datum ausw盲hlen</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail-Adresse erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig.</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden.</string>\r\n    <string name=\"hour_no_selected\">Es muss ein Zeitpunkt ausgew盲hlt werden.</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Stornieren</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte klicken Sie in der soeben ge枚ffneten E-Mail-Anwendung auf Senden, um Ihre Anfrage abzuschlieen. Wir werden Ihnen die Verf眉gbarkeit per E-Mail best盲tigen..</string>\r\n    <string name=\"email_subject\">Reservierungsanfrage ansehen - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich m枚chte hiermit eine Reservierung f眉r einen Besuch im Kloster anfragen. Bitte geben Sie folgende Daten an:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden.</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">W盲hlen Sie die Schriftgr枚e aus</string>\r\n    <string name=\"font_extrabig\">Extra gro</string>\r\n    <string name=\"font_normal\">Mittlere</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Geh zur眉ck</string>\r\n    <string name=\"see_360\">360潞-Ansicht</string>\r\n    <string name=\"contentdescription_image_pin\">Bild anpinnen (zum Vergr枚ern anklicken)</string>\r\n    <string name=\"readjust\">Zur眉cksetzen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Zunahme</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Undefiniertes Ziel</string>\r\n    <string name=\"notdefined_destinyplane\">Zielebene nicht definiert</string>\r\n    <string name=\"plane_loading\">Ladeplan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
----- a/app/src/main/res/values-de/strings.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/res/values-de/strings.xml	(date 1763066246094)
--@@ -86,4 +86,10 @@
--     <string name="notdefined_destinyplane">Zielebene nicht definiert</string>
--     <string name="plane_loading">Ladeplan...</string>
--     <string name="error_loading_plane">Fehler beim Laden der Plandaten</string>
--+    <string name="child_mode">KINDERMODUS</string>
--+    <string name="child_mode_view">Kindermodus</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Spiel</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">SPIEL</string>
-- </resources>
--\ No newline at end of file
--Index: app/src/main/res/values-en/strings.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n\r\n</resources>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
----- a/app/src/main/res/values-en/strings.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/res/values-en/strings.xml	(date 1763066246105)
--@@ -85,5 +85,11 @@
--     <string name="notdefined_destinyplane">Destination plane not defined</string>
--     <string name="plane_loading">Loading plane...</string>
--     <string name="error_loading_plane">Error loading plan data</string>
--+    <string name="child_mode">KIDS MODE</string>
--+    <string name="child_mode_view">Kids Mode</string>
--+    <string name="video_view">Video</string>
--+    <string name="game_view">Game</string>
--+    <string name="video_child">VIDEO</string>
--+    <string name="game_child">GAME</string>
-- 
-- </resources>
--\ No newline at end of file
--Index: app/src/main/AndroidManifest.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.nextapp.monasterio\"> <application\r\n    android:name=\".MonasteryApplication\"\r\n    android:allowBackup=\"true\"\r\n    android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n    android:fullBackupContent=\"@xml/backup_rules\"\r\n    android:icon=\"@drawable/escudo\"\r\n    android:label=\"@string/app_name\"\r\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n    android:supportsRtl=\"true\"\r\n    android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n    <activity\r\n        android:name=\".MainActivity\"\r\n        android:exported=\"true\"\r\n        android:theme=\"@style/Theme.SMOV_Monasterio\">\r\n        <intent-filter>\r\n            <action android:name=\"android.intent.action.MAIN\" />\r\n            <category android:name=\"android.intent.category.LAUNCHER\" />\r\n        </intent-filter>\r\n    </activity>\r\n</application>\r\n\r\n</manifest>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
----- a/app/src/main/AndroidManifest.xml	(revision 563626a1962cc5c0efe18dca48dd0a306acabc2f)
--+++ b/app/src/main/AndroidManifest.xml	(date 1763071551234)
--@@ -1,6 +1,8 @@
-- <?xml version="1.0" encoding="utf-8"?>
-- <manifest xmlns:android="http://schemas.android.com/apk/res/android"
---    package="com.nextapp.monasterio"> <application
--+    package="com.nextapp.monasterio">
--+    <uses-permission android:name="android.permission.INTERNET"/>
--+    <application
--     android:name=".MonasteryApplication"
--     android:allowBackup="true"
--     android:dataExtractionRules="@xml/data_extraction_rules"
--@@ -9,11 +11,13 @@
--     android:label="@string/app_name"
--     android:roundIcon="@mipmap/ic_launcher_round"
--     android:supportsRtl="true"
---    android:theme="@style/Theme.SMOV_Monasterio">
--+    android:theme="@style/Theme.SMOV_Monasterio"
--+        android:usesCleartextTraffic="true">
--     <activity
--         android:name=".MainActivity"
--         android:exported="true"
---        android:theme="@style/Theme.SMOV_Monasterio">
--+        android:theme="@style/Theme.SMOV_Monasterio"
--+        android:configChanges="orientation|screenSize|keyboardHidden">
--         <intent-filter>
--             <action android:name="android.intent.action.MAIN" />
--             <category android:name="android.intent.category.LAUNCHER" />
-Index: .idea/deploymentTargetSelector.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DROPDOWN\" />\r\n        <DropdownSelection timestamp=\"2025-11-09T23:21:47.034176400Z\">\r\n          <Target type=\"DEFAULT_BOOT\">\r\n            <handle>\r\n              <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=RF8N40Q1NBZ\" />\r\n            </handle>\r\n          </Target>\r\n        </DropdownSelection>\r\n        <DialogSelection />\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
---- a/.idea/deploymentTargetSelector.xml	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ b/.idea/deploymentTargetSelector.xml	(date 1763654169503)
-@@ -4,10 +4,10 @@
-     <selectionStates>
-       <SelectionState runConfigName="app">
-         <option name="selectionMode" value="DROPDOWN" />
--        <DropdownSelection timestamp="2025-11-09T23:21:47.034176400Z">
-+        <DropdownSelection timestamp="2025-11-20T15:54:25.882570500Z">
-           <Target type="DEFAULT_BOOT">
-             <handle>
--              <DeviceId pluginId="PhysicalDevice" identifier="serial=RF8N40Q1NBZ" />
-+              <DeviceId pluginId="LocalEmulator" identifier="path=C:\Users\frinc\.android\avd\Medium_Phone.avd" />
-             </handle>
-           </Target>
-         </DropdownSelection>
-Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci贸n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti贸n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val MODO_NINYOS = \"modo_ni帽os\"\r\n\r\n    const val VIDEO_NINYOS = \"video_modo_ni帽os\"\r\n\r\n    const val JUEGO_NINYOS = \"juego_modo_ni帽os\"\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n    const val PIN_ENTRADA_MONASTERIO = \"entrada_monasterio\"\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
---- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763555584590)
-@@ -21,6 +21,10 @@
-     const val MODO_NINYOS = "modo_ni帽os"
- 
-     const val VIDEO_NINYOS = "video_modo_ni帽os"
-+    const val PUZZLENIVEL1 ="puzzle_nivel_1"
-+    const val PUZZLENIVEL2 ="puzzle_nivel_2"
-+    const val PUZZLENIVEL3 ="puzzle_nivel_3"
-+    const val PUZZLENIVEL4 ="puzzle_nivel_4"
- 
-     const val JUEGO_NINYOS = "juego_modo_ni帽os"
- 
-Index: app/build.gradle.kts
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    alias(libs.plugins.kotlin.android)\r\n    alias(libs.plugins.kotlin.compose)\r\n    alias(libs.plugins.firebase.gservices)\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.nextapp.monasterio\"\r\n    compileSdk = 36\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.nextapp.monasterio\"\r\n        minSdk = 24\r\n        targetSdk = 36\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(\r\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\r\n                \"proguard-rules.pro\"\r\n            )\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = \"11\"\r\n    }\r\n    buildFeatures {\r\n        compose = true\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(libs.androidx.core.ktx)\r\n    implementation(libs.androidx.lifecycle.runtime.ktx)\r\n    implementation(libs.androidx.activity.compose)\r\n    implementation(platform(libs.androidx.compose.bom))\r\n    implementation(libs.androidx.ui)\r\n    implementation(libs.androidx.ui.graphics)\r\n    implementation(libs.androidx.ui.tooling.preview)\r\n    implementation(libs.androidx.material3)\r\n    implementation(libs.androidx.compose.foundation)\r\n    implementation(libs.google.firebase.firestore)\r\n    testImplementation(libs.junit)\r\n    androidTestImplementation(libs.androidx.junit)\r\n    androidTestImplementation(libs.androidx.espresso.core)\r\n    androidTestImplementation(platform(libs.androidx.compose.bom))\r\n    androidTestImplementation(libs.androidx.ui.test.junit4)\r\n    debugImplementation(libs.androidx.ui.tooling)\r\n    debugImplementation(libs.androidx.ui.test.manifest)\r\n    //Practica\r\n    implementation(libs.constraintlayout.compose)\r\n    implementation(libs.navigation.compose)\r\n    implementation (libs.androidx.appcompat)\r\n    implementation (libs.google.material)\r\n\r\n    // Firebase\r\n    implementation(platform(libs.firebase.bom))\r\n    implementation(libs.firebase.firestore)\r\n    implementation(\"com.google.firebase:firebase-auth-ktx\")\r\n\r\n    implementation(\"com.caverock:androidsvg:1.4\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"com.google.android.material:material:1.10.0\")\r\n\r\n    // Plano Interactivo\r\n    implementation(\"io.github.chrisbanes:PhotoView:2.3.0\")\r\n    implementation(\"com.github.bumptech.glide:glide:4.16.0\")\r\n\r\n    // Panoramica\r\n    implementation(\"com.github.hannesa2:panoramagl:1.14\")\r\n    // Cloudinary\r\n    implementation(\"io.coil-kt:coil-compose:2.7.0\")\r\n\r\n    //media\r\n    implementation(libs.androidx.media3.exoplayer)\r\n    implementation(libs.androidx.media3.ui)\r\n\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/build.gradle.kts b/app/build.gradle.kts
---- a/app/build.gradle.kts	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ b/app/build.gradle.kts	(date 1763579160329)
-@@ -87,6 +87,8 @@
-     implementation(libs.androidx.media3.exoplayer)
-     implementation(libs.androidx.media3.ui)
- 
-+    implementation("com.google.accompanist:accompanist-flowlayout:0.34.0")
-+
- 
- 
- }
-Index: app/src/main/res/values-en/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"title_entrada\">Monastery Entrance</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n    <string name=\"child_mode\">KIDS MODE</string>\r\n    <string name=\"child_mode_view\">Kids Mode</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Game</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">GAME</string>\r\n    <string name=\"location_error\">No app was found to open the location.</string>\r\n    <string name=\"contact_data\">Contact Information</string>\r\n    <string name=\"location_data\">Location</string>\r\n    <string name=\"email_data\">Email</string>\r\n    <string name=\"phone_data\">Phone</string>\r\n    <string name=\"visit_schedule\">Opening Hours</string>\r\n    <string name=\"monday_to_friday\">Monday to Friday:</string>\r\n    <string name=\"play_audio\" />\r\n\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
---- a/app/src/main/res/values-en/strings.xml	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ b/app/src/main/res/values-en/strings.xml	(date 1763555300762)
-@@ -100,5 +100,9 @@
-     <string name="visit_schedule">Opening Hours</string>
-     <string name="monday_to_friday">Monday to Friday:</string>
-     <string name="play_audio" />
-+    <string name="four_pieces">4 pieces</string>
-+    <string name="nine_pieces">9 pieces</string>
-+    <string name="sixteen_pieces">16 pieces</string>
-+    <string name="twentyfive_pieces">25 pieces</string>
- 
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/VideoNinyos.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.layout.fillMaxSize\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.CircularProgressIndicator\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.runtime.getValue\r\nimport androidx.compose.runtime.mutableStateOf\r\nimport androidx.compose.runtime.remember\r\nimport androidx.compose.runtime.setValue\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.viewinterop.AndroidView\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.core.net.toUri\r\nimport androidx.media3.exoplayer.ExoPlayer\r\nimport androidx.media3.common.MediaItem\r\nimport androidx.media3.common.Player\r\nimport androidx.media3.ui.PlayerView\r\n\r\n\r\n@Composable\r\nfun VideoNinyos(modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    val videoEspanyol = \"https://res.cloudinary.com/drx7mujrv/video/upload/f_auto,q_auto:low,w_auto:1000/v1763317610/videoespa%C3%B1ol_agayqb.mp4\"\r\n    val videoIngles = \"https://res.cloudinary.com/drx7mujrv/video/upload/f_auto,q_auto:low,w_auto:1000/v1763317613/videoingles_h8ejvc.mp4\"\r\n    val videoAleman = \"https://res.cloudinary.com/drx7mujrv/video/upload/f_auto,q_auto:low,w_auto:1000/v1763317621/videoaleman_x5he9w.mp4\"\r\n\r\n    var isLoading by remember { mutableStateOf(true) }\r\n\r\n    val configuration = LocalConfiguration.current\r\n    val language = configuration.locales[0].language\r\n\r\n    val exoPlayer = remember {\r\n        ExoPlayer.Builder(context).build().apply {\r\n           addListener(object : Player.Listener{\r\n               override fun onPlaybackStateChanged(playbackState: Int) {\r\n                   isLoading = when(playbackState){\r\n                        Player.STATE_BUFFERING -> true\r\n                        Player.STATE_READY -> false\r\n                        else -> false\r\n                   }\r\n               }\r\n           })\r\n            when(language){\r\n                \"es\" -> {\r\n                    setMediaItem(MediaItem.fromUri(videoEspanyol))\r\n                    prepare()\r\n                    playWhenReady = true\r\n                }\r\n                \"de\" -> {\r\n                    setMediaItem(MediaItem.fromUri(videoAleman))\r\n                    prepare()\r\n                    playWhenReady = true\r\n                }\r\n                else -> {\r\n                    setMediaItem(MediaItem.fromUri(videoIngles))\r\n                    prepare()\r\n                    playWhenReady = true\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n\r\n        onDispose {\r\n            exoPlayer.release()\r\n            activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().background(Color.Black)) {\r\n        val(videoPlayer,loadingSpinner) = createRefs()\r\n\r\n        AndroidView(\r\n            factory = {\r\n                PlayerView(context).apply {\r\n                    player = exoPlayer\r\n                    useController = true\r\n                }\r\n            },\r\n            modifier = Modifier\r\n                .constrainAs(videoPlayer){\r\n                    top.linkTo(parent.top)\r\n                    bottom.linkTo(parent.bottom)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.fillToConstraints\r\n                }\r\n        )\r\n\r\n        if (isLoading) {\r\n            CircularProgressIndicator(\r\n                modifier = Modifier.constrainAs(loadingSpinner) {\r\n                    // Lo centramos encima del reproductor\r\n                    top.linkTo(videoPlayer.top)\r\n                    bottom.linkTo(videoPlayer.bottom)\r\n                    start.linkTo(videoPlayer.start)\r\n                    end.linkTo(videoPlayer.end)\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/VideoNinyos.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/VideoNinyos.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/VideoNinyos.kt	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/VideoNinyos.kt	(date 1763554850905)
-@@ -29,7 +29,7 @@
- 
- 
- @Composable
--fun VideoNinyos(modifier: Modifier = Modifier) {
-+fun VideoNinyosScreen(modifier: Modifier = Modifier) {
-     val context = LocalContext.current
- 
-     val activity = (context as? Activity)
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun OpcionesModoNi帽o(navController:NavController,modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().background(Color.White).verticalScroll(rememberScrollState())) {\r\n        val (btnVisit,btnBook) = createRefs()\r\n        val centerGuide = createGuidelineFromTop(0.5f)\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIDEO_NINYOS)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVisit) {\r\n                    bottom.linkTo(centerGuide, margin = 24.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier\r\n                    .padding(horizontal = 20.dp),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            )  {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.youtube),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 18.dp)\r\n                        .size(48.dp)\r\n                )\r\n                Text(\r\n                    stringResource(id = R.string.video_child),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n            }\r\n        }\r\n        Button(\r\n            onClick = {\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnBook) {\r\n                    top.linkTo(centerGuide, margin = 24.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier\r\n                    .padding(horizontal = 20.dp),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.console),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 16.dp)\r\n                        .size(48.dp)\r\n\r\n                )\r\n                Text(\r\n                    stringResource(id = R.string.game_child),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt	(date 1763557045450)
-@@ -51,7 +51,7 @@
-     }
- 
-     ConstraintLayout(modifier = modifier.fillMaxSize().background(Color.White).verticalScroll(rememberScrollState())) {
--        val (btnVisit,btnBook) = createRefs()
-+        val (btnVideo,btnJuego) = createRefs()
-         val centerGuide = createGuidelineFromTop(0.5f)
-         Button(
-             onClick = {
-@@ -60,7 +60,7 @@
-             colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),
-             shape = RoundedCornerShape(20.dp),
-             modifier = Modifier
--                .constrainAs(btnVisit) {
-+                .constrainAs(btnVideo) {
-                     bottom.linkTo(centerGuide, margin = 24.dp)
-                     start.linkTo(parent.start, margin = 40.dp)
-                     end.linkTo(parent.end, margin = 40.dp)
-@@ -88,11 +88,12 @@
-         }
-         Button(
-             onClick = {
-+                navController.navigate(AppRoutes.JUEGO_NINYOS)
-             },
-             colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),
-             shape = RoundedCornerShape(20.dp),
-             modifier = Modifier
--                .constrainAs(btnBook) {
-+                .constrainAs(btnJuego) {
-                     top.linkTo(centerGuide, margin = 24.dp)
-                     start.linkTo(parent.start, margin = 40.dp)
-                     end.linkTo(parent.end, margin = 40.dp)
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIOS</string>\r\n    <string name=\"child_mode_view\">Modo Ni帽os</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n    <string name=\"location_error\">No se encontr贸 una app para abrir la ubicaci贸n.</string>\r\n    <string name=\"contact_data\">Datos de contacto</string>\r\n    <string name=\"location_data\">Ubicaci贸n</string>\r\n    <string name=\"email_data\">Correo electr贸nico</string>\r\n    <string name=\"phone_data\">Tel茅fono</string>\r\n    <string name=\"visit_schedule\">Horarios de Visita</string>\r\n    <string name=\"monday_to_friday\">Lunes a Viernes:</string>\r\n    <string name=\"play_audio\" />\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ b/app/src/main/res/values/strings.xml	(date 1763555229854)
-@@ -96,4 +96,8 @@
-     <string name="visit_schedule">Horarios de Visita</string>
-     <string name="monday_to_friday">Lunes a Viernes:</string>
-     <string name="play_audio" />
-+    <string name="four_pieces">4 piezas</string>
-+    <string name="nine_pieces">9 piezas</string>
-+    <string name="sixteen_pieces">16 piezas</string>
-+    <string name="twentyfive_pieces">25 piezas</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/res/values-de/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus verlassen</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">nderungen speichern</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Heute</string>\r\n    <string name=\"title_appointment\">Termin vereinbaren</string>\r\n    <string name=\"option_phone_appointment\">Buchen Sie telefonisch</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Stunde</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">Datum ausw盲hlen</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail-Adresse erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig.</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden.</string>\r\n    <string name=\"hour_no_selected\">Es muss ein Zeitpunkt ausgew盲hlt werden.</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Stornieren</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist fertig. Bitte klicken Sie in der soeben ge枚ffneten E-Mail-Anwendung auf Senden, um Ihre Anfrage abzuschlieen. Wir werden Ihnen die Verf眉gbarkeit per E-Mail best盲tigen..</string>\r\n    <string name=\"email_subject\">Reservierungsanfrage ansehen - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nich m枚chte hiermit eine Reservierung f眉r einen Besuch im Kloster anfragen. Bitte geben Sie folgende Daten an:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden.</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">W盲hlen Sie die Schriftgr枚e aus</string>\r\n    <string name=\"font_extrabig\">Extra gro</string>\r\n    <string name=\"font_normal\">Mittlere</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"title_entrada\">Klostereingang</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Geh zur眉ck</string>\r\n    <string name=\"see_360\">360潞-Ansicht</string>\r\n    <string name=\"contentdescription_image_pin\">Bild anpinnen (zum Vergr枚ern anklicken)</string>\r\n    <string name=\"readjust\">Zur眉cksetzen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Zunahme</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Undefiniertes Ziel</string>\r\n    <string name=\"notdefined_destinyplane\">Zielebene nicht definiert</string>\r\n    <string name=\"plane_loading\">Ladeplan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n    <string name=\"child_mode\">KINDERMODUS</string>\r\n    <string name=\"child_mode_view\">Kindermodus</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Spiel</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">SPIEL</string>\r\n    <string name=\"location_error\">Es wurde keine App gefunden, mit der der Standort ge枚ffnet werden kann.</string>\r\n    <string name=\"contact_data\">Kontaktinformationen</string>\r\n    <string name=\"location_data\">Standort</string>\r\n    <string name=\"email_data\">E-Mail</string>\r\n    <string name=\"phone_data\">Telefon</string>\r\n    <string name=\"visit_schedule\">ffnungszeiten</string>\r\n    <string name=\"monday_to_friday\">Montag bis Freitag:</string>\r\n    <string name=\"play_audio\" />\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
---- a/app/src/main/res/values-de/strings.xml	(revision d80ed939a99dc91d81b59e1beeccf01b605e09e2)
-+++ b/app/src/main/res/values-de/strings.xml	(date 1763555281482)
-@@ -101,4 +101,8 @@
-     <string name="visit_schedule">ffnungszeiten</string>
-     <string name="monday_to_friday">Montag bis Freitag:</string>
-     <string name="play_audio" />
-+    <string name="four_pieces">4 St眉ck</string>
-+    <string name="nine_pieces">9 St眉ck</string>
-+    <string name="sixteen_pieces">16 St眉ck</string>
-+    <string name="twentyfive_pieces">25 St眉ck</string>
- </resources>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_17_25_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_17_25_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_17_25_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_23_11_2025_17_25_[Changes]/shelved.patch	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,462 +0,0 @@
-Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.PuzzleData\r\nimport com.nextapp.monasterio.models.PuzzleSize\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.EntradaMonasterioFirestoreScreen\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.HistoriaViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    modifier: Modifier = Modifier,\r\n    authViewModel: AuthViewModel = viewModel(),\r\n    historiaViewModel: HistoriaViewModel = viewModel(),\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    isEditing: Boolean = false,\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen() }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen(isEditing = isEditing, viewModel = historiaViewModel) }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }\r\n        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyosScreen()}\r\n        composable(AppRoutes.PUZZLENIVEL1){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(2,2),imagenes= PuzzleData.IMAGENES_NIVEL1,imagenCompleta=R.drawable.p1)}\r\n        composable(AppRoutes.PUZZLENIVEL2){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(3,3),imagenes= PuzzleData.IMAGENES_NIVEL2, imagenCompleta = R.drawable.p2)}\r\n        composable(AppRoutes.PUZZLENIVEL3){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(4,4),imagenes= PuzzleData.IMAGENES_NIVEL3,imagenCompleta = R.drawable.p3)}\r\n        composable(AppRoutes.PUZZLENIVEL4){PuzzleScreen(navController=navController,tama帽o= PuzzleSize(5,5),imagenes= PuzzleData.IMAGENES_NIVEL4,imagenCompleta = R.drawable.p4)}\r\n        composable(AppRoutes.JUEGO_NINYOS){JuegoNinyosScreen(navController=navController)}\r\n        composable(route=AppRoutes.MODO_EDICION) { OpcionesModoEdicion(navController = navController)}\r\n        composable(AppRoutes.EDICION_FONDO_INICIO) {EdicionFondoInicio(navController = navController)}\r\n        composable(AppRoutes.EDICION_PINES) { EdicionPines(navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // Ruta al Edici贸n Pines Host\r\n        composable(AppRoutes.EDICION_PINES) {\r\n            EdicionPinesHost(navController)\r\n        }\r\n\r\n\r\n        // --- 隆隆AQU EST LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // --- Pantalla de Entrada del Monasterio (desde Firebase Pin)\r\n        composable(\r\n            route = AppRoutes.PIN_ENTRADA_MONASTERIO + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            EntradaMonasterioFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- FIN DE LA MODIFICACIN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu铆, 隆est谩 bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1763913200714)
-@@ -18,8 +18,9 @@
- import androidx.navigation.compose.composable
- import com.nextapp.monasterio.AppRoutes
- import com.nextapp.monasterio.R
--import com.nextapp.monasterio.models.PuzzleData
-+import com.nextapp.monasterio.models.ParejasData
- import com.nextapp.monasterio.models.PuzzleSize
-+import com.nextapp.monasterio.models.PuzzleData
- import com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen
- import com.nextapp.monasterio.ui.theme.MonasteryRed
- import com.nextapp.monasterio.ui.theme.White
-@@ -54,12 +55,18 @@
-         composable(AppRoutes.PUZZLENIVEL2){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(3,3),imagenes= PuzzleData.IMAGENES_NIVEL2, imagenCompleta = R.drawable.p2)}
-         composable(AppRoutes.PUZZLENIVEL3){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(4,4),imagenes= PuzzleData.IMAGENES_NIVEL3,imagenCompleta = R.drawable.p3)}
-         composable(AppRoutes.PUZZLENIVEL4){PuzzleScreen(navController=navController,tama帽o= PuzzleSize(5,5),imagenes= PuzzleData.IMAGENES_NIVEL4,imagenCompleta = R.drawable.p4)}
--        composable(AppRoutes.JUEGO_NINYOS){JuegoNinyosScreen(navController=navController)}
-+        composable(AppRoutes.JUEGO_NINYOS){OpcionesJuegoNinyos(navController=navController)}
-         composable(route=AppRoutes.MODO_EDICION) { OpcionesModoEdicion(navController = navController)}
-         composable(AppRoutes.EDICION_FONDO_INICIO) {EdicionFondoInicio(navController = navController)}
-         composable(AppRoutes.EDICION_PINES) { EdicionPines(navController) }
-         composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }
-         composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }
-+        composable (AppRoutes.JUEGO_PUZZLE) {JuegoPuzzleScreen(navController = navController)}
-+        composable(AppRoutes.JUEGO_PAREJAS) {JuegoParejasScreen(navController = navController)}
-+        composable(AppRoutes.PAREJASNIVEL1){ParejasScreen(navController=navController, size = 2,imagenes= ParejasData.IMAGENES_NIVEL1)}
-+        composable(AppRoutes.PAREJASNIVEL2){ParejasScreen(navController=navController,size = 3,imagenes= ParejasData.IMAGENES_NIVEL2)}
-+        composable(AppRoutes.PAREJASNIVEL3){ParejasScreen(navController=navController,size = 4,imagenes= ParejasData.IMAGENES_NIVEL3)}
-+        composable(AppRoutes.PAREJASNIVEL4){ParejasScreen(navController=navController,size= 5,imagenes= ParejasData.IMAGENES_NIVEL4)}
- 
-         // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)
-         composable(
-Index: app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt b/app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt
-deleted file mode 100644
---- a/app/src/main/java/com/nextapp/monasterio/viewModels/PuzzleViewModel.kt	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ /dev/null	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-@@ -1,87 +0,0 @@
--package com.nextapp.monasterio.viewModels
--
--import androidx.lifecycle.ViewModel
--import androidx.lifecycle.ViewModelProvider
--import com.nextapp.monasterio.models.GridPosicion
--import com.nextapp.monasterio.models.PuzzleManager
--import com.nextapp.monasterio.models.PiezaPuzzle
--import com.nextapp.monasterio.models.PuzzleSize
--import kotlinx.coroutines.flow.MutableStateFlow
--import kotlinx.coroutines.flow.StateFlow
--import kotlinx.coroutines.flow.update
--
--
--
--data class puzzleUiState(
--    val piezas : List<PiezaPuzzle> = emptyList(),
--    val size: PuzzleSize,
--    val solucionado: Boolean = false,
--)
--
--class PuzzleViewModel(
--    private val tama帽oPuzzle: PuzzleSize,
--    private val imagenId: List<Int>) : ViewModel() {
--
--    private val piezas = List(25){it}
--
--    private val _uiState = MutableStateFlow(puzzleUiState(size=tama帽oPuzzle))
--    val uiState: StateFlow<puzzleUiState> = _uiState
--    private val gameManager = PuzzleManager(tama帽oPuzzle)
--
--    init{
--        resetGame()
--    }
--
--    private fun resetGame(){
--        val piezasIniciales = gameManager.inicializarPiezas(imagenId)
--        if (piezasIniciales.isNotEmpty()) {
--            println("DEBUG: Pieza 0 posici贸n inicial: R${piezasIniciales[0].posicionActual.row} C${piezasIniciales[0].posicionActual.column}")
--        }
--        _uiState.value = puzzleUiState(
--            piezas = piezasIniciales,
--            size = tama帽oPuzzle,
--            solucionado = false,
--        )
--    }
--
--    fun soltarPieza(piezaId: Int, newGridPosicion: GridPosicion){
--        _uiState.update{currentUiState->
--            val piezasActualizadas = currentUiState.piezas.map{pieza->
--                if(pieza.id == piezaId){
--                    val esCorrecta = newGridPosicion == pieza.posicionCorrecta
--                    val posicionFinal = if (esCorrecta) {
--                        newGridPosicion
--                    }
--                    else {
--                        pieza.posicionActual
--                    }
--                    pieza.copy(
--                        posicionActual = posicionFinal,
--                        encajada = esCorrecta
--                    )
--                }else{
--                    pieza
--                }
--            }
--            val solved = piezasActualizadas.all{it.encajada}
--            currentUiState.copy(
--                piezas=piezasActualizadas,
--                solucionado = solved
--            )
--        }
--    }
--
--}
--
--class PuzzleViewModelFactory(
--    private val tama帽oPuzzle: PuzzleSize,
--    private val imagenesIds: List<Int>
--) : ViewModelProvider.Factory{
--    @Suppress("UNCHECKED_CAST")
--    override fun <T : ViewModel> create(modelClass: Class<T>): T {
--        if (modelClass.isAssignableFrom(PuzzleViewModel::class.java)) {
--            return PuzzleViewModel(tama帽oPuzzle, imagenesIds) as T
--        }
--        throw IllegalArgumentException("Unknown ViewModel class")
--    }
--}
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n        setContent {\r\n            // 1. Leemos el tama帽o guardado en preferencias (ej. 1.3f)\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n\r\n            val currentDensity = LocalDensity.current\r\n            val currentConfig = LocalConfiguration.current\r\n\r\n            // 2. Calculamos la nueva Densidad (Para que el texto SE VEA grande)\r\n            // Nota: Si 'appFontScale' ya es el valor absoluto (ej 1.3), 煤salo directamente.\r\n            // Si es un multiplicador, se multiplica. Asumo que FontSize devuelve 1.0, 1.3, 1.6...\r\n            val newDensity = Density(\r\n                density = currentDensity.density,\r\n                fontScale = appFontScale\r\n            )\r\n\r\n            // 3. (NUEVO) Actualizamos la Configuraci贸n (Para que el RadioButton SEPA que es grande)\r\n            val newConfiguration = android.content.res.Configuration(currentConfig).apply {\r\n                fontScale = appFontScale\r\n            }\r\n\r\n            // 4. Inyectamos AMBOS valores a toda la app\r\n            CompositionLocalProvider(\r\n                LocalDensity provides newDensity,\r\n                LocalConfiguration provides newConfiguration // <--- ESTO FALTABA\r\n            ) {\r\n                Smov_monasterioTheme {\r\n                    MonasteryAppScreen()\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen() {\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    //ViewModel para tener el estado del usuario autenticado\r\n    val authViewModel: AuthViewModel = viewModel()\r\n    val currentUser by authViewModel.currentUser.collectAsState(initial = null)\r\n    // Estado global para el modo edici贸n\r\n    var isEditing by remember { mutableStateOf(false) }\r\n\r\n    // ... (Tu l贸gica de idioma se queda igual)\r\n    val stringEspanyol= \"Espa帽ol\"\r\n    val stringAleman= \"Deutsch\"\r\n    val stringIngles= \"English\"\r\n    var mostrarIdioma by remember { mutableStateOf(false) }\r\n    val configuration = LocalConfiguration.current\r\n    val currentLanguageCode = configuration.locales[0].language\r\n    var idioma by remember { mutableStateOf(currentLanguageCode) }\r\n    var idiomasDisponibles = listOf(stringEspanyol,stringIngles,stringAleman)\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    //  Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n\r\n    // Comprueba si la ruta ES \"virtual_visit\" (esto cubre el mapa Y los pines anidados)\r\n    val isVirtualVisit = currentRoute == AppRoutes.VIRTUAL_VISIT\r\n\r\n    // Comprueba si la ruta EMPIEZA POR \"pin_360\" (la nueva vista 360)\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n\r\n    val isEdicion = currentRoute == AppRoutes.EDICION_PINES\r\n\r\n    // La vista es inmersiva si es CUALQUIERA de las tres\r\n    val isImmersive = isPanorama || isVirtualVisit || isPin360 || isEdicion\r\n\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n\r\n    //  Actualizar t铆tulo (Tu l贸gica se queda igual)\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)\r\n                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)\r\n                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)\r\n                AppRoutes.MODO_EDICION -> \"Modo Edici贸n\"\r\n                AppRoutes.PIN_ENTRADA_MONASTERIO -> context.getString(R.string.title_entrada)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    // --- 隆隆2. ESTRUCTURA REFACTORIZADA (UN SOLO NAVHOST)!! ---\r\n    // (Hemos eliminado el 'if (isImmersive)' que duplicaba el NavHost)\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        // Desactivamos gestos en el mapa Y en pantallas inmersivas\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                // Solo mostramos la barra roja si NO estamos en una ruta inmersiva\r\n                if (!isImmersive) {\r\n                    CenterAlignedTopAppBar(\r\n                        title = { Text(currentTitle.value) },\r\n                        colors = TopAppBarDefaults.topAppBarColors(\r\n                            containerColor = MonasteryRed,\r\n                            titleContentColor = White,\r\n                            navigationIconContentColor = White,\r\n                            actionIconContentColor = White\r\n                        ),\r\n                        navigationIcon = {\r\n                            IconButton(onClick = {\r\n                                scope.launch {\r\n                                    drawerState.apply {\r\n                                        if (isClosed) open() else close()\r\n                                    }\r\n                                }\r\n                            }) {\r\n                                val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                Icon(\r\n                                    painter = painterResource(id = iconRes),\r\n                                    contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                )\r\n                            }\r\n                        },\r\n                        actions = {\r\n                            // ... (Tu l贸gica de idioma y Toast se queda igual)\r\n                            Box {\r\n                                OutlinedIconButton(onClick = {\r\n                                    mostrarIdioma = true\r\n                                }) {\r\n                                    val iconRes =\r\n                                        if (idioma == \"es\" || idioma == stringEspanyol) R.drawable.espanya else if (idioma == \"de\" || idioma == stringAleman) R.drawable.alemania else R.drawable.reinounido\r\n                                    Image(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = if (idioma == \"es\" || idioma == stringEspanyol ) stringEspanyol\r\n                                        else if (idioma == \"de\" || idioma == stringAleman) stringAleman else stringIngles,\r\n                                        contentScale = ContentScale.Crop\r\n                                    )\r\n                                }\r\n                                DropdownMenu(\r\n                                    expanded = mostrarIdioma,\r\n                                    onDismissRequest = { mostrarIdioma = false },\r\n                                    modifier = Modifier.fillMaxWidth(0.8f),\r\n                                ) {\r\n                                    idiomasDisponibles.forEach { idiomaSlot ->\r\n                                        DropdownMenuItem(\r\n                                            text = { Text(idiomaSlot) },\r\n                                            onClick = {\r\n                                                idioma = idiomaSlot\r\n                                                mostrarIdioma = false\r\n                                                if(idiomaSlot == stringEspanyol)\r\n                                                    LanguageHelper.saveLocale(context, \"es\")\r\n                                                else if(idiomaSlot == stringAleman){\r\n                                                    LanguageHelper.saveLocale(context, \"de\")\r\n                                                } else LanguageHelper.saveLocale(context, \"en\")\r\n                                            }\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            // Icono Editar: solo disponible para un usuario autenticado\r\n                            if (currentUser != null) {\r\n                                IconButton(onClick = {\r\n                                    isEditing = !isEditing // Toggle del modo edici贸n\r\n                                    val message = if (isEditing) context.getString(R.string.edit_mode_activate_message) else context.getString(R.string.edit_mode_deactivate_message)\r\n                                    Toast.makeText(context, message, Toast.LENGTH_SHORT).show()\r\n                                }) {\r\n                                    Icon(\r\n                                        painter = painterResource(id = if (isEditing) R.drawable.lapiz else R.drawable.lapiz),\r\n                                        contentDescription = if (isEditing) stringResource(id = R.string.edit_mode_deactivate_icon) else  stringResource(id = R.string.edit_mode_activate_icon)\r\n                                    )\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            // 隆隆UN SOLO AppNavigationHost!!\r\n            // (Si es inmersiva, paddingValues ser谩 cero porque no hay TopBar)\r\n            AppNavigationHost(\r\n                authViewModel = authViewModel,\r\n                navController = navController,\r\n                isEditing = isEditing,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
---- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1763855195903)
-@@ -140,6 +140,8 @@
-                 AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)
-                 AppRoutes.MODO_EDICION -> "Modo Edici贸n"
-                 AppRoutes.PIN_ENTRADA_MONASTERIO -> context.getString(R.string.title_entrada)
-+                AppRoutes.JUEGO_PUZZLE -> context.getString(R.string.puzzle_screen)
-+                AppRoutes.JUEGO_PAREJAS -> context.getString(R.string.memory_screen)
-                 else -> context.getString(R.string.title_inicio)
-             }
-         }
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoPuzzleScreen.kt
-rename from app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt
-rename to app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoPuzzleScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoNinyosScreen.kt	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/JuegoPuzzleScreen.kt	(date 1763851812767)
-@@ -2,7 +2,6 @@
- 
- import android.app.Activity
- import android.content.pm.ActivityInfo
--import androidx.compose.foundation.Image
- import androidx.compose.foundation.background
- import androidx.compose.foundation.layout.*
- import androidx.compose.foundation.rememberScrollState
-@@ -10,41 +9,35 @@
- import androidx.compose.foundation.verticalScroll
- import androidx.compose.material3.Button
- import androidx.compose.material3.ButtonDefaults
--import androidx.compose.material3.Icon
- import androidx.compose.material3.Text
- import androidx.compose.runtime.Composable
- import androidx.compose.runtime.DisposableEffect
- import androidx.compose.ui.Alignment
- import androidx.compose.ui.Modifier
- import androidx.compose.ui.graphics.Color
--import androidx.compose.ui.layout.ContentScale
--import androidx.compose.ui.platform.LocalConfiguration
- import androidx.compose.ui.platform.LocalContext
--import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.res.stringResource
- import androidx.compose.ui.text.style.TextAlign
--import androidx.compose.ui.tooling.preview.Preview
- import androidx.compose.ui.unit.dp
- import androidx.compose.ui.unit.sp
- import androidx.constraintlayout.compose.ChainStyle
- import androidx.constraintlayout.compose.ConstraintLayout
- import androidx.constraintlayout.compose.Dimension
- import androidx.navigation.NavController
--import androidx.navigation.compose.rememberNavController
- import com.nextapp.monasterio.AppRoutes
- import com.nextapp.monasterio.R
- import com.nextapp.monasterio.ui.theme.MonasteryBlue
--import com.nextapp.monasterio.ui.theme.MonasteryOrange
-+
- 
- 
- @Composable
--fun JuegoNinyosScreen(navController:NavController,modifier: Modifier = Modifier) {
-+fun JuegoPuzzleScreen(navController:NavController,modifier: Modifier = Modifier) {
-     val context = LocalContext.current
- 
-     val activity = (context as? Activity)
- 
-     DisposableEffect(Unit) {
--        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-+        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
- 
-         onDispose {
- 
-Index: .idea/deploymentTargetSelector.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DROPDOWN\" />\r\n        <DropdownSelection timestamp=\"2025-11-22T12:00:41.740401200Z\">\r\n          <Target type=\"DEFAULT_BOOT\">\r\n            <handle>\r\n              <DeviceId pluginId=\"PhysicalDevice\" identifier=\"serial=5fafe3ae\" />\r\n            </handle>\r\n          </Target>\r\n        </DropdownSelection>\r\n        <DialogSelection />\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
---- a/.idea/deploymentTargetSelector.xml	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ b/.idea/deploymentTargetSelector.xml	(date 1763910890637)
-@@ -4,7 +4,7 @@
-     <selectionStates>
-       <SelectionState runConfigName="app">
-         <option name="selectionMode" value="DROPDOWN" />
--        <DropdownSelection timestamp="2025-11-22T12:00:41.740401200Z">
-+        <DropdownSelection timestamp="2025-11-23T15:10:55.559987800Z">
-           <Target type="DEFAULT_BOOT">
-             <handle>
-               <DeviceId pluginId="PhysicalDevice" identifier="serial=5fafe3ae" />
-Index: app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio\r\n\r\n/**\r\n * Define todas las rutas (llaves) de navegaci贸n en un solo lugar\r\n * para evitar errores de escritura y centralizar la gesti贸n.\r\n */\r\nobject AppRoutes {\r\n    const val INICIO = \"inicio\"\r\n    const val INFO = \"info\"\r\n    const val HISTORIA = \"historia\"\r\n    const val GALERIA = \"galeria\"\r\n    const val PERFIL = \"perfil\"\r\n    const val AJUSTES = \"ajustes\"\r\n    const val OPCIONES_RESERVA = \"opciones_reserva\"\r\n    const val RESERVA = \"reserva\"\r\n    const val CONFIRMACION_RESERVA = \"confirmacion_reserva\"\r\n    const val VIRTUAL_VISIT = \"virtual_visit\"\r\n    const val PIN_DETALLE = \"pin_detalle\"\r\n    const val PANORAMA = \"panorama\"\r\n\r\n    const val MODO_NINYOS = \"modo_ni帽os\"\r\n\r\n    const val VIDEO_NINYOS = \"video_modo_ni帽os\"\r\n    const val PUZZLENIVEL1 =\"puzzle_nivel_1\"\r\n    const val PUZZLENIVEL2 =\"puzzle_nivel_2\"\r\n    const val PUZZLENIVEL3 =\"puzzle_nivel_3\"\r\n    const val PUZZLENIVEL4 =\"puzzle_nivel_4\"\r\n\r\n    const val JUEGO_NINYOS = \"juego_modo_ni帽os\"\r\n    const val MODO_EDICION = \"modo_edicion\"\r\n    const val EDICION_FONDO_INICIO = \"edicion_fondo_inicio\"\r\n    const val EDICION_PINES = \"edicion_pines\"\r\n\r\n\r\n\r\n    const val PIN_360 = \"pin_360\"\r\n    const val PIN_ENTRADA_MONASTERIO = \"entrada_monasterio\"\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt
---- a/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ b/app/src/main/java/com/nextapp/monasterio/AppRoutes.kt	(date 1763913175077)
-@@ -21,10 +21,18 @@
-     const val MODO_NINYOS = "modo_ni帽os"
- 
-     const val VIDEO_NINYOS = "video_modo_ni帽os"
-+
-+    const val JUEGO_PUZZLE = "juego_puzzle"
-+
-+    const val JUEGO_PAREJAS = "juego_parejas"
-     const val PUZZLENIVEL1 ="puzzle_nivel_1"
-     const val PUZZLENIVEL2 ="puzzle_nivel_2"
-     const val PUZZLENIVEL3 ="puzzle_nivel_3"
-     const val PUZZLENIVEL4 ="puzzle_nivel_4"
-+    const val PAREJASNIVEL1 ="parejas_nivel_1"
-+    const val PAREJASNIVEL2 ="parejas_nivel_2"
-+    const val PAREJASNIVEL3 ="parejas_nivel_3"
-+    const val PAREJASNIVEL4 ="parejas_nivel_4"
- 
-     const val JUEGO_NINYOS = "juego_modo_ni帽os"
-     const val MODO_EDICION = "modo_edicion"
-Index: app/src/main/res/values-de/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Startseite</string>\r\n    <string name=\"virtual_visit\">VIRTUELLER BESUCH</string>\r\n    <string name=\"book_appointment\">TERMIN BUCHEN</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Bearbeitungsmodus</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Bearbeitungsmodus beenden</string>\r\n    <string name=\"edit_mode_activate_message\">Bearbeitungsmodus aktiviert</string>\r\n    <string name=\"edit_mode_deactivate_message\">Bearbeitungsmodus deaktiviert</string>\r\n    <string name=\"edit_save_changes\">nderungen speichern</string>\r\n    <string name=\"profile_login\">Anmelden</string>\r\n    <string name=\"profile_logout\">Abmelden</string>\r\n    <string name=\"profile_email\">E-Mail</string>\r\n    <string name=\"profile_password\">Passwort</string>\r\n    <string name=\"navigation_drawer_open\">Men眉 枚ffnen</string>\r\n    <string name=\"navigation_drawer_close\">Men眉 schlieen</string>\r\n    <string name=\"menu_info\">Klosterinformationen</string>\r\n    <string name=\"menu_history\">Geschichte</string>\r\n    <string name=\"menu_gallery\">Galerie</string>\r\n    <string name=\"menu_profile\">Profil</string>\r\n    <string name=\"menu_settings\">Einstellungen</string>\r\n    <string name=\"title_info_general\">Allgemeine Informationen</string>\r\n    <string name=\"title_history\">Geschichte</string>\r\n    <string name=\"title_gallery\">Galerie</string>\r\n    <string name=\"title_profile\">Profil</string>\r\n    <string name=\"title_settings\">Einstellungen</string>\r\n\r\n\r\n    <string name=\"info_location\">Strae: </string>\r\n\r\n    <string name=\"info_hours\">ffnungszeiten: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Allgemeine Informationen:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Gegenwart</string>\r\n    <string name=\"title_appointment\">Termin buchen</string>\r\n    <string name=\"option_phone_appointment\">Telefonisch buchen</string>\r\n    <string name=\"option_online_appointment\">Online buchen</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">E-Mail</string>\r\n    <string name=\"date_appointment\">Datum</string>\r\n    <string name=\"hour_appointment\">Uhrzeit</string>\r\n    <string name=\"placeholdername_appointment\">Geben Sie Ihren vollst盲ndigen Namen ein</string>\r\n    <string name=\"placeholderemail_appointment\">Geben Sie Ihre E-Mail-Adresse ein</string>\r\n    <string name=\"placeholderdate_appointment\">W盲hlen Sie ein Datum</string>\r\n    <string name=\"placeholderhour_appointment\">W盲hlen Sie eine Uhrzeit</string>\r\n    <string name=\"compulsory_name\">Name ist erforderlich</string>\r\n    <string name=\"valid_name\">Der Name enth盲lt ein ung眉ltiges Symbol</string>\r\n    <string name=\"compulsory_email\">E-Mail ist erforderlich</string>\r\n    <string name=\"valid_email\">Das E-Mail-Format ist ung眉ltig</string>\r\n    <string name=\"date_no_selected\">Ein Datum muss ausgew盲hlt werden</string>\r\n    <string name=\"hour_no_selected\">Eine Uhrzeit muss ausgew盲hlt werden</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Abbrechen</string>\r\n    <string name=\"confirm_button\">BESTTIGEN</string>\r\n    <string name=\"contentimage_confirmation\">Best盲tigt</string>\r\n    <string name=\"confirmation_appointment\">FAST FERTIG!!</string>\r\n    <string name=\"details_appointment\">Ihre Buchungsanfrage ist bereit. Bitte klicken Sie auf \\'Senden\\' in der gerade ge枚ffneten E-Mail-Anwendung, um Ihre Anfrage abzuschlieen. Wir werden auf diese E-Mail antworten, um die Verf眉gbarkeit zu best盲tigen.</string>\r\n    <string name=\"email_subject\">Anfrage f眉r Besuchsreservierung - %1$s</string>\r\n    <string name=\"email_message\">Hallo,\\n\\nIch m枚chte eine Reservierung f眉r einen Besuch des Klosters mit den folgenden Details anfordern:\\n\\n* Name: %1$s\\n* E-Mail: %2$s\\n* Besuchsdatum: %3$s\\n* Besuchszeit: %4$s\\n\\nIch freue mich auf Ihre freundliche Best盲tigung.\\n\\nVielen Dank,\\nMit freundlichen Gr眉en,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">Es wurde keine E-Mail-App gefunden</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Sprache ausw盲hlen</string>\r\n    <string name=\"font_size_select\">Schriftgr枚e ausw盲hlen</string>\r\n    <string name=\"font_extrabig\">Extra Gro</string>\r\n    <string name=\"font_normal\">Mittel</string>\r\n    <string name=\"font_big\">Gro</string>\r\n    <string name=\"title_monasterio\">Kloster</string>\r\n    <string name=\"title_entrada\">Klostereingang</string>\r\n    <string name=\"spanish_language\">Spanisch</string>\r\n    <string name=\"german_language\">Deutsch</string>\r\n    <string name=\"english_language\">Englisch</string>\r\n    <string name=\"navegation_button\">Navigationsschaltfl盲chen ausblenden</string>\r\n    <string name=\"close\">Schlieen</string>\r\n    <string name=\"go_back\">Zur眉ck</string>\r\n    <string name=\"see_360\">360潞 ansehen</string>\r\n    <string name=\"contentdescription_image_pin\">Pin-Bild (zum Vergr枚ern klicken)</string>\r\n    <string name=\"readjust\">Neu anpassen</string>\r\n    <string name=\"decrease\">Verringern</string>\r\n    <string name=\"increase\">Erh枚hen</string>\r\n    <string name=\"out_interactive_area\">Auerhalb des interaktiven Bereichs</string>\r\n    <string name=\"notdefined_destiny\">Ziel nicht definiert</string>\r\n    <string name=\"notdefined_destinyplane\">Zielplan nicht definiert</string>\r\n    <string name=\"plane_loading\">Lade Plan...</string>\r\n    <string name=\"error_loading_plane\">Fehler beim Laden der Plandaten</string>\r\n    <string name=\"child_mode\">KINDERMODUS</string>\r\n    <string name=\"child_mode_view\">Kindermodus</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Spiel</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">SPIEL</string>\r\n    <string name=\"edit_mode\">BEARBEITUNGSMODUS</string>\r\n    <string name=\"edit_home_background\">Startseiten-Hintergrund bearbeiten</string>\r\n    <string name=\"edit_pins\">Pins bearbeiten</string>\r\n    <string name=\"location_error\">Es wurde keine App gefunden, mit der der Standort ge枚ffnet werden kann.</string>\r\n    <string name=\"contact_data\">Kontaktinformationen</string>\r\n    <string name=\"location_data\">Standort</string>\r\n    <string name=\"email_data\">E-Mail</string>\r\n    <string name=\"phone_data\">Telefon</string>\r\n    <string name=\"visit_schedule\">ffnungszeiten</string>\r\n    <string name=\"monday_to_friday\">Montag bis Freitag:</string>\r\n    <string name=\"play_audio\" />\r\n    <string name=\"confirm_save_title\">nderungen speichern?</string>\r\n    <string name=\"confirm_save_message\">Sind Sie sicher, dass Sie die nderungen speichern m枚chten?</string>\r\n    <string name=\"confirm_save_button\">Speichern</string>\r\n    <string name=\"confirm_cancel_button\">Abbrechen</string>\r\n    <string name=\"edit_cancel_changes\">Abbrechen</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Bild hinzuf眉gen</string>\r\n    <string name=\"image_delete\">L枚schen</string>\r\n    <string name=\"image_delete_confirm_title\">Bild l枚schen?</string>\r\n    <string name=\"image_delete_confirm_message\">Diese Aktion kann nicht r眉ckg盲ngig gemacht werden</string>\r\n    <string name=\"image_uploading\">Bild wird hochgeladen...</string>\r\n    <string name=\"image_upload_success\">Bild erfolgreich hochgeladen</string>\r\n    <string name=\"image_upload_error\">Fehler beim Hochladen des Bildes</string>\r\n    <string name=\"image_select_error\">Fehler beim Ausw盲hlen des Bildes</string>\r\n    <string name=\"four_pieces\">4 St眉ck</string>\r\n    <string name=\"nine_pieces\">9 St眉ck</string>\r\n    <string name=\"sixteen_pieces\">16 St眉ck</string>\r\n    <string name=\"twentyfive_pieces\">25 St眉ck</string>\r\n    <string name=\"congratulations\">Gl眉ckwunsch!</string>\r\n    <string name=\"message_puzzle_completed\">Du hast das R盲tsel gel枚st! Bereit f眉r die n盲chste Herausforderung?</string>\r\n    <string name=\"original_image\">Bild ansehen</string>\r\n    <string name=\"ready\">Bereit</string>\r\n    <string name=\"dont_show_again\">Nicht mehr anzeigen</string>\r\n    <string name=\"understand\">Verstanden</string>\r\n    <string name=\"map_tutorial_body\">Dies ist der Inhalt des Tutorials</string>\r\n    <string name=\"map_tutorial_title\">Dies ist der Titel des Tutorials</string>\r\n    <string name=\"map_tutorial_body2\">Dies ist der Inhalt des Kartentutorials 2</string>\r\n    <string name=\"map_tutorial_title2\">Dies ist der Titel des Kartentutorials 2</string>\r\n    <string name=\"pin_tutorial_body\">Dies ist der Inhalt des Pin-Tutorials</string>\r\n    <string name=\"pin_tutorial_title\">Dies ist der Titel des Pin-Tutorials</string>\r\n    <string name=\"next\">Weiter</string>\r\n\r\n    <string name=\"map_tutorial_body1\">Oben links k枚nnen Sie 眉ber das Symbol () zum Start zur眉ckkehren.</string>\r\n    <string name=\"map_tutorial_body1_2\">Tippen Sie auf die farbigen Bereiche der Karte, um die verschiedenen Bereiche zu erkunden.</string>\r\n    <string name=\"map_tutorial_body1_3\">Mit den Tasten auf der rechten Seite k枚nnen Sie die Karte vergr枚ern, verkleinern oder zur眉cksetzen.</string>\r\n\r\n    <string name=\"submapa_1\">Tippen Sie auf das Symbol (), um zur bersichtskarte zur眉ckzukehren.</string>\r\n    <string name=\"submapa_2\">Tippen Sie auf die verschiedenen Pins, um die Details aufzurufen.</string>\r\n\r\n    <string name=\"pin_1\">Dr眉cken Sie das Symbol (), um zur Karte zur眉ckzukehren.</string>\r\n    <string name=\"pin_2\">Wischen Sie durch die Bilder oder tippen Sie darauf, um sie zu vergr枚ern.</string>\r\n    <string name=\"pin_3\">Tippen Sie hier, um den Audioguide anzuh枚ren.</string>\r\n    <string name=\"pin_4\">Dr眉cken Sie diesen Button, um die 360掳-Ansicht zu 枚ffnen.</string>\r\n    <string name=\"image_gallery_title\">Bilder</string>\r\n    <string name=\"visible\">sichtbar</string>\r\n    <string name=\"hidden\">versteckt</string>\r\n    <string name=\"lang_en\">English</string>\r\n    <string name=\"lang_es\">Espa帽ol</string>\r\n    <string name=\"sample_text\">Beispiel</string>\r\n    <string name=\"lang_de\">Deutsch</string>\r\n    <string name=\"font_small\">Klein</string>\r\n    <string name=\"font_medium\">Mittel</string>\r\n    <string name=\"font_large\">Gro</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-de/strings.xml b/app/src/main/res/values-de/strings.xml
---- a/app/src/main/res/values-de/strings.xml	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ b/app/src/main/res/values-de/strings.xml	(date 1763853324962)
-@@ -90,9 +90,9 @@
-     <string name="child_mode">KINDERMODUS</string>
-     <string name="child_mode_view">Kindermodus</string>
-     <string name="video_view">Video</string>
--    <string name="game_view">Spiel</string>
-+    <string name="game_view">Spiele</string>
-     <string name="video_child">VIDEO</string>
--    <string name="game_child">SPIEL</string>
-+    <string name="game_child">SPIELE</string>
-     <string name="edit_mode">BEARBEITUNGSMODUS</string>
-     <string name="edit_home_background">Startseiten-Hintergrund bearbeiten</string>
-     <string name="edit_pins">Pins bearbeiten</string>
-@@ -157,4 +157,8 @@
-     <string name="font_small">Klein</string>
-     <string name="font_medium">Mittel</string>
-     <string name="font_large">Gro</string>
-+    <string name="puzzle_screen">Puzzle</string>
-+    <string name="puzzle_option">PUZZLE</string>
-+    <string name="memory_screen">Memory</string>
-+    <string name="memory_option">MEMORY</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.util.Log\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.foundation.gestures.detectDragGestures\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.lazy.LazyRow\r\nimport androidx.compose.foundation.lazy.grid.GridCells\r\nimport androidx.compose.foundation.lazy.grid.LazyVerticalGrid\r\nimport androidx.compose.foundation.lazy.grid.items\r\nimport androidx.compose.foundation.lazy.items\r\nimport androidx.compose.material3.AlertDialog\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.Divider\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.geometry.Offset\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.input.pointer.pointerInput\r\nimport androidx.compose.ui.layout.onGloballyPositioned\r\nimport androidx.compose.ui.layout.positionInWindow\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.Dp\r\nimport androidx.compose.ui.unit.IntOffset\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.zIndex\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavController\r\nimport com.nextapp.monasterio.models.GridPosicion\r\nimport com.nextapp.monasterio.models.PiezaPuzzle\r\nimport com.nextapp.monasterio.models.PuzzleSize\r\nimport com.nextapp.monasterio.viewModels.PuzzleViewModel\r\nimport com.nextapp.monasterio.viewModels.PuzzleViewModelFactory\r\nimport kotlin.math.round\r\nimport com.nextapp.monasterio.R\r\n\r\n@Composable\r\nfun PuzzleScreen(\r\n    navController: NavController,\r\n    tama帽o: PuzzleSize,\r\n    imagenes: List<Int>,\r\n    imagenCompleta: Int\r\n) {\r\n    val factory = remember { PuzzleViewModelFactory(tama帽o, imagenes) }\r\n    val viewModel: PuzzleViewModel = viewModel(factory = factory)\r\n    val state by viewModel.uiState.collectAsState()\r\n    val density = LocalDensity.current\r\n\r\n    // Estado del Grid y la celda\r\n    var tama帽oCelda by remember { mutableStateOf(0.dp) }\r\n    var gridOriginOffset by remember { mutableStateOf(Offset.Zero) }\r\n\r\n    // Estado de Drag and Drop (flotante)\r\n    var piezaArrastradaId by remember { mutableStateOf<Int?>(null) }\r\n    var desplazamientoPiezaArrastrada by remember { mutableStateOf<Offset>(Offset.Zero) }\r\n\r\n    // Mapa de posiciones iniciales de las piezas SUELTAS en la bandeja (llenado por LazyRow)\r\n    val trayPositionsMap = remember { mutableStateMapOf<Int, Offset>() }\r\n    var showImagePreviewDialog by remember { mutableStateOf(false) }\r\n    // El Box principal act煤a como la capa de superposici贸n (Overlay) para la pieza arrastrada.\r\n    Box(modifier = Modifier.fillMaxSize()) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp),\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            // --- 1. PUZZLE GRID (Drop Targets y Piezas Encajadas) ---\r\n            LazyVerticalGrid(\r\n                columns = GridCells.Fixed(tama帽o.columns),\r\n                // ... (Arreglos y Paddings)\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .wrapContentWidth(Alignment.CenterHorizontally)\r\n                    .background(Color.LightGray.copy(0.5f))\r\n                    .onGloballyPositioned { coordinates ->\r\n                        val gridWith = coordinates.size.width\r\n                        if (gridWith > 0) {\r\n                            tama帽oCelda = with(density) { (gridWith / state.size.columns).toDp() }\r\n                            gridOriginOffset = coordinates.positionInWindow()\r\n                        }\r\n                    },\r\n                userScrollEnabled = false\r\n            ) {\r\n                items(tama帽o.rows * tama帽o.columns) { index ->\r\n                    val row = index / tama帽o.columns\r\n                    val col = index % tama帽o.columns\r\n                    val gridPosicion = GridPosicion(row, col)\r\n                    val piezaEnPosicion = state.piezas.find { it.posicionCorrecta == gridPosicion }\r\n                    GridCell(pieza = piezaEnPosicion)\r\n                }\r\n            }\r\n            Button(\r\n                onClick = { showImagePreviewDialog = true }, // Cambia el estado a true\r\n                modifier = Modifier.padding(top = 16.dp, bottom = 8.dp)\r\n            ) {\r\n                Text(text = stringResource(R.string.original_image)) // \"Mostrar Imagen Original\"\r\n            }\r\n\r\n            Spacer(modifier = Modifier.height(16.dp))\r\n\r\n            if (tama帽oCelda > 0.dp) {\r\n                val shuffledLoosePieces by remember(state.piezas) { // Clave: N煤mero de piezas sueltas\r\n                    mutableStateOf(state.piezas.filter { !it.encajada }.shuffled())\r\n                }\r\n                PuzzleTray(\r\n                    piezas = shuffledLoosePieces,\r\n                    tama帽oPieza = tama帽oCelda,\r\n                    isDragInProgress = piezaArrastradaId != null,\r\n                    onPiecePositioned = { id, offset ->\r\n                        // Llenar el mapa de posiciones iniciales para el Drag & Drop\r\n                        trayPositionsMap[id] = offset\r\n                    },\r\n                    onDragStart = { p, _ ->\r\n                        // INICIO DEL DRAG: Activar la pieza flotante\r\n                        piezaArrastradaId = p.id\r\n                        desplazamientoPiezaArrastrada = Offset.Zero\r\n                    }\r\n                )\r\n            }\r\n\r\n            // --- 3. DILOGO DE SOLUCIONADO ---\r\n            if (state.solucionado) {\r\n                PuzzleDialog(onDismiss = {}, onConfirm = { navController.popBackStack() })\r\n            }\r\n            if (showImagePreviewDialog) {\r\n                ImagePreviewDialog(\r\n                    imageResId = imagenCompleta,\r\n                    onDismiss = { showImagePreviewDialog = false }\r\n                )\r\n            }\r\n        } // Fin Column\r\n\r\n        // --- 4. PIEZA ARRASTRADA (OVERLAY) ---\r\n        // Este Box solo dibuja la pieza que se est谩 arrastrando (piezaArrastradaId != null)\r\n        piezaArrastradaId?.let { id ->\r\n            val piezaFlotante = state.piezas.find { it.id == id }!!\r\n            val startOffset = trayPositionsMap[id] ?: Offset.Zero\r\n\r\n            DraggableFloatingPiece(\r\n                pieza = piezaFlotante,\r\n                tama帽oCelda = tama帽oCelda,\r\n                startOffset = startOffset,\r\n                gridOriginOffset = gridOriginOffset,\r\n                desplazamientoActual = desplazamientoPiezaArrastrada,\r\n                onDrag = { dragAmount ->\r\n                    // MOVIMIENTO: Actualizar el desplazamiento\r\n                    desplazamientoPiezaArrastrada += dragAmount\r\n                },\r\n                onDragEnd = {\r\n                    // FIN DEL DRAG: Calcular la nueva posici贸n y llamar al ViewModel\r\n                    if (piezaArrastradaId != null) {\r\n                        val piezaSize = with(density) { tama帽oCelda.toPx() }\r\n                        val piezaActual = state.piezas.find { it.id == piezaArrastradaId }!!\r\n\r\n                        // Calcular la posici贸n final de la pieza respecto al origen del Grid\r\n                        val finalX = startOffset.x + desplazamientoPiezaArrastrada.x\r\n                        val finalY = startOffset.y + desplazamientoPiezaArrastrada.y\r\n\r\n                        val relativeX = finalX - gridOriginOffset.x\r\n                        val relativeY = finalY - gridOriginOffset.y\r\n\r\n                        val centroRelativeX = relativeX + (piezaSize / 2f)\r\n                        val centroRelativeY = relativeY + (piezaSize / 2f)\r\n\r\n                        val Y_Compensado = centroRelativeY + piezaSize * 1.0f\r\n\r\n                        val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tama帽o.columns - 1)\r\n                        val newRow = (Y_Compensado / piezaSize).toInt().coerceIn(0, tama帽o.rows - 1)\r\n\r\n                        Log.d(\"PUZZLE_DROP\", \"Pieza ${piezaArrastradaId} destino: R$newRow C$newColumn\")\r\n                        Log.d(\"PUZZLE_DROP_2\", \"Pieza ${piezaArrastradaId} posicion correcta: R${piezaActual.posicionCorrecta.row} C${piezaActual.posicionCorrecta.column}\")\r\n                        viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))\r\n                    }\r\n                    piezaArrastradaId = null\r\n                    desplazamientoPiezaArrastrada = Offset.Zero\r\n                }\r\n            )\r\n        }\r\n    } // Fin Box\r\n}\r\n\r\n// ... (El resto de composables en el siguiente bloque)\r\n\r\n// Este Composable dibuja una celda en el Grid (vac铆a o con pieza encajada)\r\n@Composable\r\nfun GridCell(pieza: PiezaPuzzle?) {\r\n    val isEncajada = pieza?.encajada ?: false\r\n    Box(\r\n        modifier = Modifier\r\n            .aspectRatio(1f)\r\n            .padding(1.dp)\r\n            .background(Color.LightGray.copy(alpha = 0.1f)),\r\n        contentAlignment = Alignment.Center\r\n    ) {\r\n        if (isEncajada) {\r\n            Image(\r\n                painter = painterResource(id = pieza!!.imagen),\r\n                contentDescription = \"Pieza encajada ${pieza.id}\",\r\n                modifier = Modifier.fillMaxSize()\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// --- BANDEJA (LAZY ROW) ---\r\n@Composable\r\nfun PuzzleTray(\r\n    piezas: List<PiezaPuzzle>,\r\n    tama帽oPieza: Dp,\r\n    isDragInProgress: Boolean,\r\n    onPiecePositioned: (Int, Offset) -> Unit,\r\n    onDragStart: (PiezaPuzzle, Offset) -> Unit\r\n) {\r\n    Column(\r\n        modifier = Modifier.fillMaxWidth(),\r\n        horizontalAlignment = Alignment.CenterHorizontally\r\n    ) {\r\n        Text(\r\n            text = \"Piezas Faltantes (${piezas.size})\",\r\n            style = androidx.compose.material3.MaterialTheme.typography.titleMedium,\r\n            modifier = Modifier.padding(bottom = 8.dp)\r\n        )\r\n        LazyRow(\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .height(tama帽oPieza + 16.dp), // Altura fija para el LazyRow\r\n            horizontalArrangement = Arrangement.spacedBy(8.dp),\r\n            contentPadding = PaddingValues(horizontal = 8.dp)\r\n        ) {\r\n            items(piezas, key = { it.id }) { pieza ->\r\n                // Este Box representa la pieza en la bandeja, que inicia el arrastre.\r\n                Box(\r\n                    modifier = Modifier\r\n                        .size(tama帽oPieza)\r\n                        .onGloballyPositioned { coordinates ->\r\n                            // 1. CAPTURAR LA POSICIN DE INICIO EN LA BANDEJA\r\n                            onPiecePositioned(pieza.id, coordinates.positionInWindow())\r\n                        }\r\n                        .pointerInput(isDragInProgress) {\r\n                            if (isDragInProgress) return@pointerInput\r\n                            detectDragGestures(\r\n                                onDragStart = { offset ->\r\n                                    // 2. INICIAR EL DRAG: Avisar a PuzzleScreen para activar la pieza flotante\r\n                                    onDragStart(pieza, offset)\r\n                                },\r\n                                onDrag = { _, _ -> /* El movimiento lo gestiona la pieza flotante */ },\r\n                                onDragEnd = { /* El fin lo gestiona la pieza flotante */ }\r\n                            )\r\n                        }\r\n                ) {\r\n                    Image(\r\n                        painter = painterResource(id = pieza.imagen),\r\n                        contentDescription = \"Pieza ${pieza.id}\",\r\n                        modifier = Modifier.fillMaxSize()\r\n                    )\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// --- PIEZA FLOTANTE (OVERLAY) ---\r\n// Este componente se dibuja en el Box principal y sigue el dedo.\r\n@Composable\r\nfun DraggableFloatingPiece(\r\n    pieza: PiezaPuzzle,\r\n    tama帽oCelda: Dp,\r\n    startOffset: Offset,\r\n    gridOriginOffset: Offset,\r\n    desplazamientoActual: Offset,\r\n    onDrag: (Offset) -> Unit,\r\n    onDragEnd: () -> Unit\r\n) {\r\n    // Calcular la posici贸n absoluta en la pantalla (Base de la Bandeja + Movimiento del dedo)\r\n    val totalOffsetX = startOffset.x + desplazamientoActual.x\r\n    val totalOffsetY = startOffset.y + desplazamientoActual.y\r\n\r\n    Box(\r\n        modifier = Modifier\r\n            .offset {\r\n                // Aplicar el desplazamiento total\r\n                IntOffset(\r\n                    x = totalOffsetX.toInt(),\r\n                    y = totalOffsetY.toInt()\r\n                )\r\n            }\r\n            .zIndex(10f) // Asegura que est茅 por encima de todo\r\n            .size(tama帽oCelda)\r\n            .pointerInput(Unit) {\r\n                // DETECCIN DE MOVIMIENTO Y FIN DE ARRASTRE\r\n                detectDragGestures(\r\n                    onDragStart = { /* Ya se inici贸 en la bandeja */ },\r\n                    onDrag = { change, dragAmount ->\r\n                        onDrag(dragAmount)\r\n                        change.consume()\r\n                    },\r\n                    onDragEnd = onDragEnd // Llamar al fin para la l贸gica de soltar\r\n                )\r\n            }\r\n            .border(2.dp, Color.Red) // Indicador visual de que se est谩 arrastrando\r\n    ) {\r\n        Image(\r\n            painter = painterResource(id = pieza.imagen),\r\n            contentDescription = \"Pieza flotante ${pieza.id}\",\r\n            modifier = Modifier.fillMaxSize()\r\n        )\r\n    }\r\n}\r\n\r\n// (Asumimos que PuzzleDialog est谩 definido en tu archivo)\r\n// ...\r\n@Composable\r\nfun PuzzleDialog(\r\n    onDismiss: () -> Unit,\r\n    onConfirm : () -> Unit\r\n){\r\n    AlertDialog(\r\n        onDismissRequest=onDismiss,\r\n        title = {\r\n            Text(stringResource(R.string.congratulations))\r\n        },\r\n        text = {\r\n            Text(stringResource(R.string.message_puzzle_completed))\r\n        },\r\n        confirmButton = {\r\n            Button(\r\n                onClick = onConfirm\r\n            ) {\r\n                Text(stringResource(R.string.ready))\r\n            }\r\n        },\r\n    )\r\n}\r\n\r\n@Composable\r\nfun ImagePreviewDialog(\r\n    imageResId: Int, // Recibe el ID del recurso de la imagen completa\r\n    onDismiss: () -> Unit // Funci贸n para cerrar el di谩logo\r\n) {\r\n    AlertDialog(\r\n        onDismissRequest = onDismiss,\r\n        text = {\r\n            // Muestra la imagen completa\r\n            Image(\r\n                painter = painterResource(id = imageResId),\r\n                contentDescription = stringResource(R.string.original_image),\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .aspectRatio(1f) // Mantener la proporci贸n de la imagen\r\n            )\r\n        },\r\n        confirmButton = {\r\n            Button(onClick = onDismiss) {\r\n                Text(stringResource(R.string.close)) // \"Cerrar\"\r\n            }\r\n        }\r\n    )\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/PuzzleScreen.kt	(date 1763910264931)
-@@ -23,6 +23,7 @@
- import androidx.compose.ui.input.pointer.pointerInput
- import androidx.compose.ui.layout.onGloballyPositioned
- import androidx.compose.ui.layout.positionInWindow
-+import androidx.compose.ui.platform.LocalConfiguration
- import androidx.compose.ui.platform.LocalDensity
- import androidx.compose.ui.res.painterResource
- import androidx.compose.ui.res.stringResource
-@@ -63,6 +64,9 @@
-     // Mapa de posiciones iniciales de las piezas SUELTAS en la bandeja (llenado por LazyRow)
-     val trayPositionsMap = remember { mutableStateMapOf<Int, Offset>() }
-     var showImagePreviewDialog by remember { mutableStateOf(false) }
-+
-+    val screenWidth = LocalConfiguration.current.screenWidthDp
-+    val isTablet = screenWidth > 600
-     // El Box principal act煤a como la capa de superposici贸n (Overlay) para la pieza arrastrada.
-     Box(modifier = Modifier.fillMaxSize()) {
-         Column(
-@@ -169,14 +173,24 @@
-                         val centroRelativeX = relativeX + (piezaSize / 2f)
-                         val centroRelativeY = relativeY + (piezaSize / 2f)
- 
--                        val Y_Compensado = centroRelativeY + piezaSize * 1.0f
-+
-+                        if((tama帽o.columns==2 || tama帽o.columns == 3) && isTablet) {
-+                            val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tama帽o.columns - 1)
-+                            val newRow = (centroRelativeY / piezaSize).toInt().coerceIn(0, tama帽o.rows - 1)
-+                            viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))
-+                            Log.d("PUZZLE_DROP", "Pieza ${piezaArrastradaId} destino: R$newRow C$newColumn")
-+                            Log.d("PUZZLE_DROP_2", "Pieza ${piezaArrastradaId} posicion correcta: R${piezaActual.posicionCorrecta.row} C${piezaActual.posicionCorrecta.column}")
-+                        }
-+                        else{
-+                            val Y_Compensado = centroRelativeY + piezaSize * 1.0f
- 
--                        val newColumn = (centroRelativeX / piezaSize).toInt().coerceIn(0, tama帽o.columns - 1)
--                        val newRow = (Y_Compensado / piezaSize).toInt().coerceIn(0, tama帽o.rows - 1)
--
--                        Log.d("PUZZLE_DROP", "Pieza ${piezaArrastradaId} destino: R$newRow C$newColumn")
--                        Log.d("PUZZLE_DROP_2", "Pieza ${piezaArrastradaId} posicion correcta: R${piezaActual.posicionCorrecta.row} C${piezaActual.posicionCorrecta.column}")
--                        viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))
-+                            val newColumn = (centroRelativeX / piezaSize).toInt()
-+                                .coerceIn(0, tama帽o.columns - 1)
-+                            val newRow = (Y_Compensado / piezaSize).toInt().coerceIn(0, tama帽o.rows - 1)
-+                            viewModel.soltarPieza(piezaArrastradaId!!, GridPosicion(newRow, newColumn))
-+                            Log.d("PUZZLE_DROP", "Pieza ${piezaArrastradaId} destino: R$newRow C$newColumn")
-+                            Log.d("PUZZLE_DROP_2", "Pieza ${piezaArrastradaId} posicion correcta: R${piezaActual.posicionCorrecta.row} C${piezaActual.posicionCorrecta.column}")
-+                        }
-                     }
-                     piezaArrastradaId = null
-                     desplazamientoPiezaArrastrada = Offset.Zero
-@@ -244,7 +258,6 @@
-                             onPiecePositioned(pieza.id, coordinates.positionInWindow())
-                         }
-                         .pointerInput(isDragInProgress) {
--                            if (isDragInProgress) return@pointerInput
-                             detectDragGestures(
-                                 onDragStart = { offset ->
-                                     // 2. INICIAR EL DRAG: Avisar a PuzzleScreen para activar la pieza flotante
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">Santa Mar铆a la Real de Huelgas</string>\r\n    <string name=\"title_inicio\">Inicio</string>\r\n    <string name=\"virtual_visit\">VISITA VIRTUAL</string>\r\n    <string name=\"book_appointment\">RESERVA CITA</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Modo edici贸n</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Salir del modo edici贸n</string>\r\n    <string name=\"edit_mode_activate_message\">Modo edici贸n activado</string>\r\n    <string name=\"edit_mode_deactivate_message\">Modo edici贸n desactivado</string>\r\n    <string name=\"edit_save_changes\">Guardar cambios</string>\r\n    <string name=\"profile_login\">Iniciar Sesi贸n</string>\r\n    <string name=\"profile_logout\">Cerrar Sesi贸n</string>\r\n    <string name=\"profile_email\">Correo Electr贸nico</string>\r\n    <string name=\"profile_password\">Contrase帽a</string>\r\n    <string name=\"navigation_drawer_open\">Abrir men煤</string>\r\n    <string name=\"navigation_drawer_close\">Cerrar men煤</string>\r\n    <string name=\"menu_info\">Informaci贸n monasterio</string>\r\n    <string name=\"menu_history\">Historia</string>\r\n    <string name=\"menu_gallery\">Galer铆a</string>\r\n    <string name=\"menu_profile\">Perfil</string>\r\n    <string name=\"menu_settings\">Ajustes</string>\r\n    <string name=\"title_info_general\">Informaci贸n General</string>\r\n    <string name=\"title_history\">Historia</string>\r\n    <string name=\"title_gallery\">Galer铆a</string>\r\n    <string name=\"title_profile\">Perfil</string>\r\n    <string name=\"title_settings\">Ajustes</string>\r\n    <string name=\"info_location\">C/</string>\r\n    <string name=\"info_hours\">C/XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">Informaci贸n general:</string>\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Actualidad</string>\r\n    <string name=\"title_appointment\">Reservar Cita</string>\r\n    <string name=\"option_phone_appointment\">Reservar por tel茅fono</string>\r\n    <string name=\"option_online_appointment\">Reservar online</string>\r\n    <string name=\"name_appointment\">Nombre y apellidos</string>\r\n    <string name=\"email_appointment\">Correo electr贸nico</string>\r\n    <string name=\"date_appointment\">Fecha</string>\r\n    <string name=\"hour_appointment\">Hora</string>\r\n    <string name=\"placeholdername_appointment\">Introduce tu nombre y apellidos</string>\r\n    <string name=\"placeholderemail_appointment\">Introduce tu correo electr贸nico</string>\r\n    <string name=\"placeholderdate_appointment\">Selecciona una fecha</string>\r\n    <string name=\"placeholderhour_appointment\">Selecciona una hora</string>\r\n    <string name=\"compulsory_name\">El nombre es obligatorio</string>\r\n    <string name=\"valid_name\">El nombre contiene alg煤n simbolo no v谩lido</string>\r\n    <string name=\"compulsory_email\">El email es obligatorio</string>\r\n    <string name=\"valid_email\">El formato del email no es v谩lido</string>\r\n    <string name=\"date_no_selected\">Se debe seleccionar una fecha</string>\r\n    <string name=\"hour_no_selected\">Se debe seleccionar una hora</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancelar</string>\r\n    <string name=\"confirm_button\">CONFIRMAR</string>\r\n    <string name=\"contentimage_confirmation\">Confirmado</string>\r\n    <string name=\"confirmation_appointment\">隆CASI LISTO!</string>\r\n    <string name=\"details_appointment\">Tu solicitud de reserva est谩 preparada. Por favor, pulsa \\'enviar\\' en la aplicaci贸n de correo que se acaba de abrir para finalizar tu solicitud. Te responderemos a ese correo para confirmar la disponibilidad.</string>\r\n    <string name=\"email_subject\">Solicitud de Reserva de Vista - %1$s</string>\r\n    <string name=\"email_message\">Hola,\\n\\nMe gustar铆a solicitar una reserva para una visita al monasterio con los siguientes datos:\\n\\n* Nombre: %1$s\\n* Email: %2$s\\n* Fecha de la visita: %3$s\\n* Hora de la visita: %4$s\\n\\nQuedo a la espera de su amable confirmaci贸n.\\n\\nMuchas gracias,\\nAtentamente,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No se encontr贸 ninguna app de correo</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Seleccionar Idioma</string>\r\n    <string name=\"font_size_select\">Selecciona el tama帽o de la letra</string>\r\n    <string name=\"font_extrabig\">Extra Grande</string>\r\n    <string name=\"font_normal\">Mediana</string>\r\n    <string name=\"font_big\">Grande</string>\r\n    <string name=\"title_monasterio\">Monasterio</string>\r\n    <string name=\"title_entrada\">Entrada Monasterio</string>\r\n    <string name=\"spanish_language\">Espa帽ol</string>\r\n    <string name=\"german_language\">Alem谩n</string>\r\n    <string name=\"english_language\">Ingl茅s</string>\r\n    <string name=\"navegation_button\">Ocultar botones de navegaci贸n</string>\r\n    <string name=\"close\">Cerrar</string>\r\n    <string name=\"go_back\">Volver</string>\r\n    <string name=\"see_360\">Ver 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Imagen del pin (pulsar para ampliar)</string>\r\n    <string name=\"readjust\">Reajustar</string>\r\n    <string name=\"decrease\">Disminuir</string>\r\n    <string name=\"increase\">Aumentar</string>\r\n    <string name=\"out_interactive_area\">Fuera del 谩rea interactiva</string>\r\n    <string name=\"notdefined_destiny\">Destino no definido</string>\r\n    <string name=\"notdefined_destinyplane\">Plano destino no definido</string>\r\n    <string name=\"plane_loading\">Cargando plano...</string>\r\n    <string name=\"error_loading_plane\">Error cargando datos del plano</string>\r\n    <string name=\"child_mode\">MODO NIOS</string>\r\n    <string name=\"child_mode_view\">Modo Ni帽os</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Juego</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">JUEGO</string>\r\n    <string name=\"edit_mode\">MODO EDICIN</string>\r\n    <string name=\"edit_home_background\">Edici贸n fondo inicio</string>\r\n    <string name=\"edit_pins\">Edici贸n pines</string>\r\n    <string name=\"location_error\">No se encontr贸 una app para abrir la ubicaci贸n.</string>\r\n    <string name=\"contact_data\">Datos de contacto</string>\r\n    <string name=\"location_data\">Ubicaci贸n</string>\r\n    <string name=\"email_data\">Correo electr贸nico</string>\r\n    <string name=\"phone_data\">Tel茅fono</string>\r\n    <string name=\"visit_schedule\">Horarios de Visita</string>\r\n    <string name=\"monday_to_friday\">Lunes a Viernes:</string>\r\n    <string name=\"play_audio\" />\r\n    <string name=\"four_pieces\">4 piezas</string>\r\n    <string name=\"nine_pieces\">9 piezas</string>\r\n    <string name=\"sixteen_pieces\">16 piezas</string>\r\n    <string name=\"twentyfive_pieces\">25 piezas</string>\r\n    <string name=\"dont_show_again\">No volver a mostrar</string>\r\n    <string name=\"understand\">Entendido</string>\r\n    <string name=\"map_tutorial_body\">Este es el cuerpo del tutorial</string>\r\n    <string name=\"map_tutorial_title\">Este es el titulo del tutorial</string>\r\n    <string name=\"map_tutorial_body2\">Este es el cuerpo del tutorial del mapa 2</string>\r\n    <string name=\"map_tutorial_title2\">Este es el titulo del tutorial del mapa 2</string>\r\n    <string name=\"pin_tutorial_body\">Este es el cuerpo del tutorial del pin</string>\r\n    <string name=\"pin_tutorial_title\">Este es el titulo del tutorial del pin</string>\r\n    <string name=\"next\">Siguiente</string>\r\n    <string name=\"map_tutorial_body1\">En la parte superior izquierda, el s铆mbolo () permite volver al inicio</string>\r\n    <string name=\"map_tutorial_body1_2\">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>\r\n    <string name=\"map_tutorial_body1_3\">Adem谩s, los botones de la parte derecha te permiten ampliar el mapa, reducirlo o volver a su tama帽o   original</string>\r\n    <string name=\"submapa_1\">Tocando en el s铆mbolo () podemos volver al mapa general</string>\r\n    <string name=\"submapa_2\">Tocando en los distintos pines podemos entrar a los puntos de inter茅s</string>\r\n    <string name=\"pin_1\">Pulsando en el s铆mbolo (), se puede volver al mapa</string>\r\n    <string name=\"pin_2\">Puedes desplazarte por las im谩genes o pulsar en ellas para ampliarlas</string>\r\n    <string name=\"pin_3\">Pulsando aqu铆 puedes escuchar el audio del texto</string>\r\n    <string name=\"pin_4\">Para acceder a la vista 360 pulse este bot贸n</string>\r\n    <string name=\"confirm_save_title\">驴Guardar cambios?</string>\r\n    <string name=\"confirm_save_message\">驴Est谩s seguro de que quieres guardar los cambios realizados?</string>\r\n    <string name=\"confirm_save_button\">Guardar</string>\r\n    <string name=\"confirm_cancel_button\">Cancelar</string>\r\n    <string name=\"edit_cancel_changes\">Cancelar</string>\r\n    <string name=\"profile_name\">Nombre</string>\r\n    <string name=\"image_add\">A帽adir imagen</string>\r\n    <string name=\"image_delete\">Borrar</string>\r\n    <string name=\"image_delete_confirm_title\">驴Borrar imagen?</string>\r\n    <string name=\"image_delete_confirm_message\">驴Seguro que quieres borrar la imagen?</string>\r\n    <string name=\"image_uploading\">Subiendo imagen...</string>\r\n    <string name=\"image_upload_success\">Imagen subida correctamente</string>\r\n    <string name=\"image_upload_error\">Error al subir la imagen</string>\r\n    <string name=\"image_select_error\">Error al cargar la imagen</string>\r\n    <string name=\"congratulations\">隆Felicidades!</string>\r\n    <string name=\"message_puzzle_completed\">隆Has resuelto el puzzle! 驴Listo para el siguiente desaf铆o?</string>\r\n    <string name=\"ready\">Listo</string>\r\n    <string name=\"original_image\">Ver imagen</string>\r\n    <string name=\"image_gallery_title\">Im谩genes</string>\r\n    <string name=\"visible\">Visibles</string>\r\n    <string name=\"hidden\">Ocultos</string>\r\n    <string name=\"lang_en\">Engish</string>\r\n    <string name=\"lang_es\">Espa帽ol</string>\r\n    <string name=\"sample_text\">Ejemplo</string>\r\n    <string name=\"lang_de\">Deutsch</string>\r\n    <string name=\"font_small\">Peque帽a</string>\r\n    <string name=\"font_medium\">Mediana</string>\r\n    <string name=\"font_large\">Grande</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ b/app/src/main/res/values/strings.xml	(date 1763853225666)
-@@ -85,9 +85,9 @@
-     <string name="child_mode">MODO NIOS</string>
-     <string name="child_mode_view">Modo Ni帽os</string>
-     <string name="video_view">Video</string>
--    <string name="game_view">Juego</string>
-+    <string name="game_view">Juegos</string>
-     <string name="video_child">VIDEO</string>
--    <string name="game_child">JUEGO</string>
-+    <string name="game_child">JUEGOS</string>
-     <string name="edit_mode">MODO EDICIN</string>
-     <string name="edit_home_background">Edici贸n fondo inicio</string>
-     <string name="edit_pins">Edici贸n pines</string>
-@@ -110,7 +110,7 @@
-     <string name="map_tutorial_body2">Este es el cuerpo del tutorial del mapa 2</string>
-     <string name="map_tutorial_title2">Este es el titulo del tutorial del mapa 2</string>
-     <string name="pin_tutorial_body">Este es el cuerpo del tutorial del pin</string>
--    <string name="pin_tutorial_title">Este es el titulo del tutorial del pin</string>
-+    <string name="pine潞潞_tutorial_title">Este es el titulo del tutorial del pin</string>
-     <string name="next">Siguiente</string>
-     <string name="map_tutorial_body1">En la parte superior izquierda, el s铆mbolo () permite volver al inicio</string>
-     <string name="map_tutorial_body1_2">Tocando en las zonas con color del mapa podemos entrar a las distintas partes visualizables</string>
-@@ -149,4 +149,9 @@
-     <string name="font_small">Peque帽a</string>
-     <string name="font_medium">Mediana</string>
-     <string name="font_large">Grande</string>
-+    <string name="puzzle_screen">Puzle</string>
-+    <string name="puzzle_option">PUZLE</string>
-+    <string name="memory_screen">Parejas</string>
-+    <string name="memory_option">PAREJAS</string>
-+
- </resources>
-\ No newline at end of file
-Index: app/src/main/res/values-en/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">Museum360</string>\r\n    <string name=\"title_inicio\">Home</string>\r\n    <string name=\"virtual_visit\">VIRTUAL VISIT</string>\r\n    <string name=\"book_appointment\">BOOK APPOINTMENT</string>\r\n    <string name=\"monastery_name\">Santa Mar铆a\\nla Real de Huelgas</string>\r\n    <string name=\"edit_mode_activate_icon\">Editor mode</string>\r\n    <string name=\"edit_mode_deactivate_icon\">Exit from editor mode</string>\r\n    <string name=\"edit_mode_activate_message\">Editor mode activated</string>\r\n    <string name=\"edit_mode_deactivate_message\">Editor mode deactivated</string>\r\n    <string name=\"edit_save_changes\">Save changes</string>\r\n    <string name=\"profile_login\">Login</string>\r\n    <string name=\"profile_logout\">Logout</string>\r\n    <string name=\"profile_email\">Email</string>\r\n    <string name=\"profile_password\">Password</string>\r\n    <string name=\"navigation_drawer_open\">Open menu</string>\r\n    <string name=\"navigation_drawer_close\">Close menu</string>\r\n    <string name=\"menu_info\">Monastery information</string>\r\n    <string name=\"menu_history\">History</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_profile\">Profile</string>\r\n    <string name=\"menu_settings\">Settings</string>\r\n    <string name=\"title_info_general\">General Information</string>\r\n    <string name=\"title_history\">History</string>\r\n    <string name=\"title_gallery\">Gallery</string>\r\n    <string name=\"title_profile\">Profile</string>\r\n    <string name=\"title_settings\">Settings</string>\r\n\r\n    <string name=\"info_location\">Street: </string>\r\n\r\n    <string name=\"info_hours\">Hours: XX:XX - YY:YY</string>\r\n    <string name=\"general_info\">General information:</string>\r\n\r\n    <string name=\"history_1800\">1800</string>\r\n    <string name=\"history_1900\">1900-1950</string>\r\n    <string name=\"history_1950\">1950-2000</string>\r\n    <string name=\"history_actualidad\">Present Day</string>\r\n    <string name=\"title_appointment\">Book Appointment</string>\r\n    <string name=\"option_phone_appointment\">Book by phone</string>\r\n    <string name=\"option_online_appointment\">Book online</string>\r\n    <string name=\"name_appointment\">Name</string>\r\n    <string name=\"email_appointment\">Email</string>\r\n    <string name=\"date_appointment\">Date</string>\r\n    <string name=\"hour_appointment\">Time</string>\r\n    <string name=\"placeholdername_appointment\">Enter your full name</string>\r\n    <string name=\"placeholderemail_appointment\">Enter your email address</string>\r\n    <string name=\"placeholderdate_appointment\">Select a date</string>\r\n    <string name=\"placeholderhour_appointment\">Select a time</string>\r\n    <string name=\"compulsory_name\">Name is required</string>\r\n    <string name=\"valid_name\">The name contains an invalid symbol</string>\r\n    <string name=\"compulsory_email\">Email is required</string>\r\n    <string name=\"valid_email\">The email format is invalid</string>\r\n    <string name=\"date_no_selected\">A date must be selected</string>\r\n    <string name=\"hour_no_selected\">A time must be selected</string>\r\n    <string name=\"datepicker_ok\">Ok</string>\r\n    <string name=\"datepicker_cancel\">Cancel</string>\r\n    <string name=\"confirm_button\">CONFIRM</string>\r\n    <string name=\"contentimage_confirmation\">Confirmed</string>\r\n    <string name=\"confirmation_appointment\">ALMOST READY!!</string>\r\n    <string name=\"details_appointment\">Your booking request is ready. Please click \\'send\\' in the email application that just opened to finalize your request. We will reply to that email to confirm availability..</string>\r\n    <string name=\"email_subject\">View Reservation Request - %1$s</string>\r\n    <string name=\"email_message\">Hello,\\n\\nI would like to request a reservation for a visit to the monastery with the following details:\\n\\n* Name: %1$s\\n* Email: %2$s\\n* Date of visit: %3$s\\n* Time of visit: %4$s\\n\\nI look forward to your kind confirmation.\\n\\nThank you very much,\\nSincerely,\\n\\n%1$s</string>\r\n    <string name=\"email_error\">No email app was found</string>\r\n    <string name=\"history_content_placeholder\">Mauris vel nisi id metus vestibulum vehicula nec ac orci. Curabitur massa diam, fermentum sit amet augue sit, volutpat efficitur enim. Phasellus a cursus orci, id laoreet dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</string>\r\n    <string name=\"language_select\">Select language</string>\r\n    <string name=\"font_size_select\">Select the font size</string>\r\n    <string name=\"font_extrabig\">Extra Big</string>\r\n    <string name=\"font_normal\">Medium</string>\r\n    <string name=\"font_big\">Big</string>\r\n    <string name=\"title_monasterio\">Monastery</string>\r\n    <string name=\"title_entrada\">Monastery Entrance</string>\r\n    <string name=\"spanish_language\">Spanish</string>\r\n    <string name=\"german_language\">German</string>\r\n    <string name=\"english_language\">English</string>\r\n    <string name=\"navegation_button\">Hide navigation buttons</string>\r\n    <string name=\"close\">Close</string>\r\n    <string name=\"go_back\">Go Back</string>\r\n    <string name=\"see_360\">View 360潞</string>\r\n    <string name=\"contentdescription_image_pin\">Pin image (click to enlarge)</string>\r\n    <string name=\"readjust\">Readjust</string>\r\n    <string name=\"decrease\">Decrease</string>\r\n    <string name=\"increase\">Increase</string>\r\n    <string name=\"out_interactive_area\">Outside the interactive area</string>\r\n    <string name=\"notdefined_destiny\">Undefined destination</string>\r\n    <string name=\"notdefined_destinyplane\">Destination plane not defined</string>\r\n    <string name=\"plane_loading\">Loading plane...</string>\r\n    <string name=\"error_loading_plane\">Error loading plan data</string>\r\n    <string name=\"child_mode\">KIDS MODE</string>\r\n    <string name=\"child_mode_view\">Kids Mode</string>\r\n    <string name=\"video_view\">Video</string>\r\n    <string name=\"game_view\">Game</string>\r\n    <string name=\"video_child\">VIDEO</string>\r\n    <string name=\"game_child\">GAME</string>\r\n    <string name=\"edit_mode\">EDIT MODE</string>\r\n    <string name=\"edit_home_background\">Edit home background</string>\r\n    <string name=\"edit_pins\">Edit pins</string>\r\n    <string name=\"location_error\">No app was found to open the location.</string>\r\n    <string name=\"contact_data\">Contact Information</string>\r\n    <string name=\"location_data\">Location</string>\r\n    <string name=\"email_data\">Email</string>\r\n    <string name=\"phone_data\">Phone</string>\r\n    <string name=\"visit_schedule\">Opening Hours</string>\r\n    <string name=\"monday_to_friday\">Monday to Friday:</string>\r\n    <string name=\"play_audio\" />\r\n    <string name=\"four_pieces\">4 pieces</string>\r\n    <string name=\"nine_pieces\">9 pieces</string>\r\n    <string name=\"sixteen_pieces\">16 pieces</string>\r\n    <string name=\"twentyfive_pieces\">25 pieces</string>\r\n\r\n    <string name=\"confirm_save_title\">Save changes?</string>\r\n    <string name=\"confirm_save_message\">Are you sure you want to save the changes?</string>\r\n    <string name=\"confirm_save_button\">Save</string>\r\n    <string name=\"confirm_cancel_button\">Cancel</string>\r\n    <string name=\"edit_cancel_changes\">Cancel</string>\r\n    <string name=\"profile_name\">Name</string>\r\n    <string name=\"image_add\">Add image</string>\r\n    <string name=\"image_delete\">Delete</string>\r\n    <string name=\"image_delete_confirm_title\">Delete image?</string>\r\n    <string name=\"image_delete_confirm_message\">Are you sure you want to delete this image?</string>\r\n    <string name=\"image_uploading\">Uploading image...</string>\r\n    <string name=\"image_upload_success\">Image uploaded successfully</string>\r\n    <string name=\"image_upload_error\">Error uploading image</string>\r\n    <string name=\"image_select_error\">Error selecting image</string>\r\n    <string name=\"image_gallery_title\">Images</string>\r\n    <string name=\"congratulations\">Congratulations!</string>\r\n    <string name=\"message_puzzle_completed\">You\\'ve solved the puzzle! Ready for the next challenge?</string>\r\n    <string name=\"original_image\">View image</string>\r\n    <string name=\"ready\">Ready</string>\r\n    <string name=\"font_small\">Small</string>\r\n    <string name=\"font_medium\">Medium</string>\r\n    <string name=\"font_large\">Large</string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
---- a/app/src/main/res/values-en/strings.xml	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ b/app/src/main/res/values-en/strings.xml	(date 1763853225650)
-@@ -89,9 +89,9 @@
-     <string name="child_mode">KIDS MODE</string>
-     <string name="child_mode_view">Kids Mode</string>
-     <string name="video_view">Video</string>
--    <string name="game_view">Game</string>
-+    <string name="game_view">Games</string>
-     <string name="video_child">VIDEO</string>
--    <string name="game_child">GAME</string>
-+    <string name="game_child">GAMES</string>
-     <string name="edit_mode">EDIT MODE</string>
-     <string name="edit_home_background">Edit home background</string>
-     <string name="edit_pins">Edit pins</string>
-@@ -130,4 +130,8 @@
-     <string name="font_small">Small</string>
-     <string name="font_medium">Medium</string>
-     <string name="font_large">Large</string>
-+    <string name="puzzle_screen">Puzzle</string>
-+    <string name="puzzle_option">PUZZLE</string>
-+    <string name="memory_screen">Memory</string>
-+    <string name="memory_option">MEMORY</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\n\r\n\r\n@Composable\r\nfun OpcionesModoNi帽o(navController:NavController,modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n\r\n    val activity = (context as? Activity)\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().background(Color.White).verticalScroll(rememberScrollState())) {\r\n        val (btnVideo,btnJuego) = createRefs()\r\n        val centerGuide = createGuidelineFromTop(0.5f)\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIDEO_NINYOS)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVideo) {\r\n                    bottom.linkTo(centerGuide, margin = 24.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier\r\n                    .padding(horizontal = 20.dp),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            )  {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.youtube),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 18.dp)\r\n                        .size(48.dp)\r\n                )\r\n                Text(\r\n                    stringResource(id = R.string.video_child),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n            }\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.JUEGO_NINYOS)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnJuego) {\r\n                    top.linkTo(centerGuide, margin = 24.dp)\r\n                    start.linkTo(parent.start, margin = 40.dp)\r\n                    end.linkTo(parent.end, margin = 40.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier\r\n                    .padding(horizontal = 20.dp),\r\n                verticalAlignment = Alignment.CenterVertically\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.console),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 16.dp)\r\n                        .size(48.dp)\r\n\r\n                )\r\n                Text(\r\n                    stringResource(id = R.string.game_child),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n            }\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt
---- a/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt	(revision f0ffc6a864d8a17509ea24c1aa3771d2eb916d37)
-+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/OpcionesModoNi帽o.kt	(date 1763849862958)
-@@ -43,7 +43,7 @@
-     val activity = (context as? Activity)
- 
-     DisposableEffect(Unit) {
--        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-+        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
- 
-         onDispose {
- 
Index: .idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_01_12__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_01_12__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_01_12__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_01_12__Changes_.xml	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_22_11_2025_01_12_[Changes]" date="1763770384361" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_01_12_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 22/11/2025 01:12 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_12_17__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_12_17__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_12_17__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_12_17__Changes_.xml	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ /dev/null	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_22_11_2025_12_17_[Changes]" date="1763810281814" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_22_11_2025_12_17_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 22/11/2025 12:17 [Changes]" />
-</changelist>
\ No newline at end of file
Index: app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.ui.navigation\r\n\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.NavGraph.Companion.findStartDestination\r\nimport androidx.navigation.NavHostController\r\nimport androidx.navigation.NavType\r\nimport androidx.navigation.navArgument\r\nimport androidx.navigation.compose.NavHost\r\nimport androidx.navigation.compose.composable\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.models.ParejasData\r\nimport com.nextapp.monasterio.models.ParejasSize\r\n/*import com.nextapp.monasterio.models.ParejasData*/\r\nimport com.nextapp.monasterio.models.PuzzleSize\r\nimport com.nextapp.monasterio.models.PuzzleData\r\nimport com.nextapp.monasterio.ui.screens.* // Aseg煤rate de importar PanoramaScreen y GaleriaScreen\r\nimport com.nextapp.monasterio.ui.screens.pinEdition.EdicionFondoInicio\r\nimport com.nextapp.monasterio.ui.screens.pinEdition.EdicionPines\r\nimport com.nextapp.monasterio.ui.screens.pinEdition.EdicionPinesHost\r\nimport com.nextapp.monasterio.ui.theme.MonasteryRed\r\nimport com.nextapp.monasterio.ui.theme.White\r\nimport com.nextapp.monasterio.ui.virtualvisit.screens.EntradaMonasterioFirestoreScreen\r\nimport com.nextapp.monasterio.viewModels.AjustesViewModel\r\nimport com.nextapp.monasterio.viewModels.InfoViewModel\r\nimport com.nextapp.monasterio.viewModels.HistoriaViewModel\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport kotlinx.coroutines.CoroutineScope\r\nimport kotlinx.coroutines.launch\r\n\r\n@Composable\r\nfun AppNavigationHost(\r\n    modifier: Modifier = Modifier,\r\n    authViewModel: AuthViewModel = viewModel(),\r\n    historiaViewModel: HistoriaViewModel = viewModel(),\r\n    ajustesViewModel: AjustesViewModel = viewModel(),\r\n    infoViewModel: InfoViewModel = viewModel(),\r\n    navController: NavHostController,\r\n    isEditing: Boolean = false,\r\n) {\r\n    NavHost(\r\n        navController = navController,\r\n        startDestination = AppRoutes.INICIO,\r\n        modifier = modifier\r\n    ) {\r\n        composable(AppRoutes.INICIO)   { HomeScreenContent(isEditing = isEditing,navController = navController) }\r\n        composable(AppRoutes.INFO)     { InfoScreen(isEditing = isEditing, viewModel = infoViewModel) }\r\n        composable(AppRoutes.HISTORIA) { HistoriaScreen(isEditing = isEditing, viewModel = historiaViewModel) }\r\n        composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }\r\n        composable(AppRoutes.MODO_NINYOS)   { OpcionesModoNi帽o(navController = navController) }\r\n        composable(AppRoutes.VIDEO_NINYOS)   { VideoNinyosScreen()}\r\n        composable(AppRoutes.PUZZLENIVEL1){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(2,2),imagenes= PuzzleData.IMAGENES_NIVEL1,imagenCompleta=R.drawable.p1)}\r\n        composable(AppRoutes.PUZZLENIVEL2){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(3,3),imagenes= PuzzleData.IMAGENES_NIVEL2, imagenCompleta = R.drawable.p2)}\r\n        composable(AppRoutes.PUZZLENIVEL3){PuzzleScreen(navController=navController,tama帽o = PuzzleSize(4,4),imagenes= PuzzleData.IMAGENES_NIVEL3,imagenCompleta = R.drawable.p3)}\r\n        composable(AppRoutes.PUZZLENIVEL4){PuzzleScreen(navController=navController,tama帽o= PuzzleSize(5,5),imagenes= PuzzleData.IMAGENES_NIVEL4,imagenCompleta = R.drawable.p4)}\r\n        composable(AppRoutes.JUEGO_NINYOS){OpcionesJuegoNinyos(navController=navController)}\r\n        composable(route=AppRoutes.MODO_EDICION) { OpcionesModoEdicion(navController = navController)}\r\n        composable(AppRoutes.EDICION_FONDO_INICIO) { EdicionFondoInicio(navController = navController) }\r\n        composable(AppRoutes.EDICION_PINES) { EdicionPines(navController) }\r\n        composable(AppRoutes.PERFIL)   { ProfileScreen(isEditing = isEditing, viewModel = authViewModel ) }\r\n        composable(AppRoutes.AJUSTES)  { AjustesScreen(viewModel = ajustesViewModel) }\r\n        composable (AppRoutes.JUEGO_PUZZLE) {JuegoPuzzleScreen(navController = navController)}\r\n        composable(AppRoutes.JUEGO_PAREJAS) {JuegoParejasScreen(navController = navController)}\r\n        composable(AppRoutes.PAREJASNIVEL1){ParejasScreen(navController=navController, size = ParejasSize(3,2),imagenes= ParejasData.IMAGENES_NIVEL1)}\r\n        composable(AppRoutes.PAREJASNIVEL2){ParejasScreen(navController=navController,size = ParejasSize(4,2),imagenes= ParejasData.IMAGENES_NIVEL2)}\r\n        composable(AppRoutes.PAREJASNIVEL3){ParejasScreen(navController=navController,size = ParejasSize(5,2),imagenes= ParejasData.IMAGENES_NIVEL3)}\r\n        composable(AppRoutes.PAREJASNIVEL4){ParejasScreen(navController=navController,size= ParejasSize(4,3),imagenes= ParejasData.IMAGENES_NIVEL4)}\r\n\r\n        // Ruta de Panorama 360 (Inmersiva, desde Galer铆a / res/raw)\r\n        composable(\r\n            route = AppRoutes.PANORAMA + \"/{vistaId}\",\r\n            arguments = listOf(navArgument(\"vistaId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val vistaId = backStackEntry.arguments?.getString(\"vistaId\")\r\n            if (vistaId != null) {\r\n                PanoramaScreen(\r\n                    vistaId = vistaId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // Ruta de Visita Virtual (Mapa)\r\n        composable(AppRoutes.VIRTUAL_VISIT) {\r\n            VirtualVisitScreen(navController = navController,viewModel = ajustesViewModel)\r\n        }\r\n\r\n        // Ruta al Edici贸n Pines Host\r\n        composable(AppRoutes.EDICION_PINES) {\r\n            EdicionPinesHost(navController)\r\n        }\r\n\r\n\r\n        // --- 隆隆AQU EST LA NUEVA RUTA!! ---\r\n        // Ruta inmersiva para el 360 de un Pin (desde Firebase URL)\r\n        composable(\r\n            route = AppRoutes.PIN_360 + \"/{pinId}\", // Recibe el ID del Pin\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\")\r\n            if (pinId != null) {\r\n                // Llama a la NUEVA pantalla 360\r\n                Pin360Screen(\r\n                    pinId = pinId,\r\n                    navController = navController\r\n                )\r\n            }\r\n        }\r\n\r\n        // --- Pantalla de Entrada del Monasterio (desde Firebase Pin)\r\n        composable(\r\n            route = AppRoutes.PIN_ENTRADA_MONASTERIO + \"/{pinId}\",\r\n            arguments = listOf(navArgument(\"pinId\") { type = NavType.StringType })\r\n        ) { backStackEntry ->\r\n            val pinId = backStackEntry.arguments?.getString(\"pinId\") ?: \"\"\r\n            EntradaMonasterioFirestoreScreen(\r\n                pinId = pinId,\r\n                navController = navController,\r\n                rootNavController = navController\r\n            )\r\n        }\r\n\r\n        // --- FIN DE LA MODIFICACIN ---\r\n\r\n        // (La ruta PIN_DETALLE se queda eliminada de aqu铆, 隆est谩 bien!)\r\n\r\n        // --- RESTO DE TUS RUTAS ---\r\n        composable(AppRoutes.OPCIONES_RESERVA) { OpcionesReservaScreen(navController = navController) }\r\n        composable(AppRoutes.RESERVA) { ReservaScreen(navController = navController) }\r\n        composable(\r\n            route = AppRoutes.CONFIRMACION_RESERVA + \"/{nombre}/{email}/{fecha}/{hora}\",\r\n            arguments = listOf(\r\n                navArgument(\"nombre\") { type = NavType.StringType },\r\n                navArgument(\"email\") { type = NavType.StringType },\r\n                navArgument(\"fecha\") { type = NavType.StringType },\r\n                navArgument(\"hora\") { type = NavType.StringType }\r\n            )\r\n        ) { backStackEntry ->\r\n            val nombre = backStackEntry.arguments?.getString(\"nombre\") ?: \"\"\r\n            val email = backStackEntry.arguments?.getString(\"email\") ?: \"\"\r\n            val fecha = backStackEntry.arguments?.getString(\"fecha\") ?: \"\"\r\n            val hora = backStackEntry.arguments?.getString(\"hora\") ?: \"\"\r\n            ConfirmacionReservaScreen(\r\n                navController = navController,\r\n                nombre = nombre,\r\n                email = email,\r\n                fecha = fecha,\r\n                hora = hora\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//\r\n// --- EL RESTO DEL ARCHIVO (AppDrawerContent y DrawerMenuItem) SE QUEDA IGUAL ---\r\n//\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AppDrawerContent(\r\n    navController: NavHostController,\r\n    scope: CoroutineScope,\r\n    drawerState: DrawerState\r\n) {\r\n    val navigateTo: (String) -> Unit = { route ->\r\n        navController.navigate(route) {\r\n            popUpTo(navController.graph.findStartDestination().id)\r\n            launchSingleTop = true\r\n        }\r\n        scope.launch { drawerState.close() }\r\n    }\r\n\r\n    ModalDrawerSheet(\r\n        modifier = Modifier.fillMaxHeight(),\r\n        drawerContainerColor = MonasteryRed,\r\n        drawerContentColor = White\r\n    ) {\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(16.dp)\r\n        ) {\r\n            IconButton(onClick = { scope.launch { drawerState.close() } }) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_menu_24),\r\n                    contentDescription = stringResource(id = R.string.navigation_drawer_close)\r\n                )\r\n            }\r\n            Spacer(modifier = Modifier.height(32.dp))\r\n\r\n            DrawerMenuItem(text = stringResource(id = R.string.title_inicio)) { navigateTo(AppRoutes.INICIO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_info)) { navigateTo(AppRoutes.INFO) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_history)) { navigateTo(AppRoutes.HISTORIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_gallery)) { navigateTo(AppRoutes.GALERIA) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_profile)) { navigateTo(AppRoutes.PERFIL) }\r\n            DrawerMenuItem(text = stringResource(id = R.string.menu_settings)) { navigateTo(AppRoutes.AJUSTES) }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun DrawerMenuItem(text: String, onClick: () -> Unit) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable(onClick = onClick)\r\n            .padding(vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            painter = painterResource(id = R.drawable.arrow_right),\r\n            contentDescription = null,\r\n            modifier = Modifier.size(20.dp)\r\n        )\r\n        Spacer(modifier = Modifier.width(16.dp))\r\n        Text(text = text, color = White, style = MaterialTheme.typography.bodyMedium)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt
--- a/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ b/app/src/main/java/com/nextapp/monasterio/ui/navigation/AppNavigation.kt	(date 1764528965437)
@@ -46,13 +46,14 @@
     infoViewModel: InfoViewModel = viewModel(),
     navController: NavHostController,
     isEditing: Boolean = false,
+    scaffoldPadding: PaddingValues = PaddingValues(0.dp)
 ) {
     NavHost(
         navController = navController,
         startDestination = AppRoutes.INICIO,
         modifier = modifier
     ) {
-        composable(AppRoutes.INICIO)   { HomeScreenContent(isEditing = isEditing,navController = navController) }
+        composable(AppRoutes.INICIO)   { HomeScreenContent(isEditing = isEditing, navController = navController, topPadding = scaffoldPadding) }
         composable(AppRoutes.INFO)     { InfoScreen(isEditing = isEditing, viewModel = infoViewModel) }
         composable(AppRoutes.HISTORIA) { HistoriaScreen(isEditing = isEditing, viewModel = historiaViewModel) }
         composable(AppRoutes.GALERIA)  { GaleriaScreen(navController = navController) }
Index: app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio.ui.screens\r\n\r\nimport android.app.Activity\r\nimport android.content.pm.ActivityInfo\r\nimport android.util.Log\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.layout.Arrangement\r\nimport androidx.compose.foundation.rememberScrollState\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.verticalScroll\r\nimport androidx.compose.material3.Button\r\nimport androidx.compose.material3.ButtonDefaults\r\nimport androidx.compose.material3.Icon\r\nimport androidx.compose.material3.Text\r\nimport androidx.compose.runtime.Composable\r\nimport androidx.compose.runtime.DisposableEffect\r\nimport androidx.compose.runtime.LaunchedEffect\r\nimport androidx.compose.runtime.mutableStateOf\r\nimport androidx.compose.runtime.remember\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.tooling.preview.Preview\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.constraintlayout.compose.ConstraintLayout\r\nimport androidx.constraintlayout.compose.Dimension\r\nimport androidx.navigation.NavController\r\nimport androidx.navigation.compose.rememberNavController\r\nimport coil.compose.AsyncImage\r\nimport com.nextapp.monasterio.AppRoutes\r\nimport com.nextapp.monasterio.R\r\nimport com.nextapp.monasterio.data.ImagenRepository\r\nimport com.nextapp.monasterio.ui.theme.MonasteryBlue\r\nimport com.nextapp.monasterio.ui.theme.MonasteryOrange\r\nimport androidx.compose.runtime.getValue\r\nimport androidx.compose.runtime.setValue\r\n\r\n\r\n\r\n@Composable\r\nfun HomeScreenContent(isEditing: Boolean,navController:NavController, modifier: Modifier = Modifier) {\r\n    val context = LocalContext.current\r\n    val activity = (context as? Activity)\r\n    val repo = ImagenRepository()\r\n    var imagenFondoInicio by remember { mutableStateOf<String?>(null) }\r\n\r\n    LaunchedEffect(Unit) {\r\n        val data = repo.getImagenFondoInicio()   //  trae 'imagen_fondo_inicio'\r\n        imagenFondoInicio = data?.url\r\n    }\r\n\r\n\r\n    DisposableEffect(Unit) {\r\n        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT\r\n\r\n        onDispose {\r\n\r\n        }\r\n    }\r\n\r\n    ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {\r\n        val (background, crest, title, btnVisit, btnChild,btnBook, btnEdit) = createRefs()\r\n        if (imagenFondoInicio != null) {\r\n            AsyncImage(\r\n                model = imagenFondoInicio,\r\n                contentDescription = null,\r\n                contentScale = ContentScale.Crop,\r\n                modifier = Modifier.constrainAs(background) {\r\n                    top.linkTo(parent.top)\r\n                    bottom.linkTo(parent.bottom)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.fillToConstraints\r\n                }\r\n            )\r\n        } else {\r\n            Image(\r\n                painter = painterResource(id = R.drawable.monastery_background),\r\n                contentDescription = null,\r\n                contentScale = ContentScale.Crop,\r\n                modifier = Modifier.constrainAs(background) {\r\n                    top.linkTo(parent.top)\r\n                    bottom.linkTo(parent.bottom)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.fillToConstraints\r\n                }\r\n            )\r\n        }\r\n\r\n        Image(\r\n            painter = painterResource(id = R.drawable.huelgas_inicio),\r\n            contentDescription = \"Escudo\",\r\n            contentScale = ContentScale.FillWidth,\r\n            modifier = Modifier\r\n                .constrainAs(crest) {\r\n                    top.linkTo(parent.top, margin = 24.dp)\r\n                    start.linkTo(parent.start)\r\n                    end.linkTo(parent.end)\r\n                    width = Dimension.fillToConstraints\r\n                    height = Dimension.wrapContent\r\n                }\r\n        )\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.VIRTUAL_VISIT)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnVisit) {\r\n                    bottom.linkTo(btnChild.top, margin = 48.dp)\r\n                    start.linkTo(parent.start, margin = 20.dp)\r\n                    end.linkTo(parent.end, margin = 20.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier.fillMaxWidth(),\r\n                verticalAlignment = Alignment.CenterVertically,\r\n                horizontalArrangement = Arrangement.Start\r\n            )  {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_map_24),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 16.dp)\r\n                        .size(48.dp)\r\n                )\r\n                Spacer(modifier = Modifier.weight(1f))\r\n                Text(\r\n                    stringResource(id = R.string.virtual_visit),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n                Spacer(modifier = Modifier.width(64.dp).weight(1f))\r\n            }\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.MODO_NINYOS)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF6EB017)),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnChild) {\r\n                    bottom.linkTo(btnBook.top, margin = 48.dp)\r\n                    start.linkTo(parent.start, margin = 20.dp)\r\n                    end.linkTo(parent.end, margin = 20.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier.fillMaxWidth(),\r\n                verticalAlignment = Alignment.CenterVertically,\r\n                horizontalArrangement = Arrangement.Start\r\n            )  {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.outline_account_child_invert_24),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 16.dp)\r\n                        .size(48.dp)\r\n                )\r\n                Spacer(modifier = Modifier.weight(1f))\r\n                Text(\r\n                    stringResource(id = R.string.child_mode),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center\r\n                )\r\n                Spacer(modifier = Modifier.width(64.dp).weight(1f))\r\n            }\r\n        }\r\n        Button(\r\n            onClick = {\r\n                navController.navigate(AppRoutes.OPCIONES_RESERVA)\r\n            },\r\n            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),\r\n            shape = RoundedCornerShape(20.dp),\r\n            modifier = Modifier\r\n                .constrainAs(btnBook) {\r\n                    if(isEditing) {\r\n                        bottom.linkTo(btnEdit.top, margin = 48.dp)\r\n                    }else{\r\n                        bottom.linkTo(parent.bottom,margin=240.dp)\r\n                    }\r\n                    start.linkTo(parent.start, margin = 20.dp)\r\n                    end.linkTo(parent.end, margin = 20.dp)\r\n                    width = Dimension.fillToConstraints\r\n                }\r\n        ) {\r\n            Row(\r\n                modifier=Modifier.fillMaxWidth(),\r\n                verticalAlignment = Alignment.CenterVertically,\r\n                horizontalArrangement = Arrangement.Start\r\n            ) {\r\n                Icon(\r\n                    painter = painterResource(id = R.drawable.ic_time_24),\r\n                    contentDescription = null,\r\n                    modifier = Modifier\r\n                        .padding(end = 16.dp)\r\n                        .size(48.dp)\r\n\r\n                )\r\n                Spacer(modifier = Modifier.weight(1f))\r\n                Text(\r\n                    stringResource(id = R.string.book_appointment),\r\n                    fontSize = 22.sp,\r\n                    textAlign = TextAlign.Center,\r\n                )\r\n                Spacer(modifier = Modifier.width(64.dp).weight(1f))\r\n            }\r\n        }\r\n        if(!isEditing) {\r\n            Button(\r\n                onClick = {\r\n                    navController.navigate(AppRoutes.MODO_EDICION)\r\n                },\r\n                colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF9C27B0)), // P煤rpura de ejemplo\r\n                shape = RoundedCornerShape(20.dp),\r\n                modifier = Modifier\r\n                    .constrainAs(btnEdit) {\r\n                        bottom.linkTo(parent.bottom, margin = 120.dp)\r\n                        start.linkTo(parent.start, margin = 20.dp)\r\n                        end.linkTo(parent.end, margin = 20.dp)\r\n                        width = Dimension.fillToConstraints\r\n                    }\r\n\r\n            ) {\r\n                Row(\r\n                    modifier = Modifier.fillMaxWidth(),\r\n                    verticalAlignment = Alignment.CenterVertically,\r\n                    horizontalArrangement = Arrangement.Start\r\n                ) {\r\n\r\n                    Icon(\r\n                        painter = painterResource(id = R.drawable.lapiz), // cono provisional\r\n                        contentDescription = null,\r\n                        modifier = Modifier\r\n                            .padding(end = 16.dp)\r\n                            .size(48.dp)\r\n                    )\r\n                    Spacer(modifier = Modifier.weight(1f))\r\n                    Text(\r\n                        stringResource(id = R.string.edit_mode),\r\n                        fontSize = 22.sp,\r\n                        textAlign = TextAlign.Center\r\n                    )\r\n                    Spacer(modifier = Modifier.width(64.dp).weight(1f))\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt
--- a/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ b/app/src/main/java/com/nextapp/monasterio/ui/screens/HomeScreen.kt	(date 1764532875099)
@@ -2,263 +2,368 @@
 
 import android.app.Activity
 import android.content.pm.ActivityInfo
-import android.util.Log
+import android.content.res.Configuration
 import androidx.compose.foundation.Image
+import androidx.compose.foundation.clickable
 import androidx.compose.foundation.layout.*
-import androidx.compose.foundation.layout.Arrangement
 import androidx.compose.foundation.rememberScrollState
 import androidx.compose.foundation.shape.RoundedCornerShape
 import androidx.compose.foundation.verticalScroll
-import androidx.compose.material3.Button
-import androidx.compose.material3.ButtonDefaults
-import androidx.compose.material3.Icon
-import androidx.compose.material3.Text
-import androidx.compose.runtime.Composable
-import androidx.compose.runtime.DisposableEffect
-import androidx.compose.runtime.LaunchedEffect
-import androidx.compose.runtime.mutableStateOf
-import androidx.compose.runtime.remember
+import androidx.compose.material3.*
+import androidx.compose.runtime.*
 import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
+import androidx.compose.ui.draw.clip
+import androidx.compose.ui.draw.scale
+import androidx.compose.ui.draw.shadow
 import androidx.compose.ui.graphics.Color
 import androidx.compose.ui.layout.ContentScale
 import androidx.compose.ui.platform.LocalConfiguration
 import androidx.compose.ui.platform.LocalContext
 import androidx.compose.ui.res.painterResource
 import androidx.compose.ui.res.stringResource
+import androidx.compose.ui.text.font.FontWeight
 import androidx.compose.ui.text.style.TextAlign
-import androidx.compose.ui.tooling.preview.Preview
+import androidx.compose.ui.text.style.TextOverflow
 import androidx.compose.ui.unit.dp
 import androidx.compose.ui.unit.sp
-import androidx.constraintlayout.compose.ConstraintLayout
-import androidx.constraintlayout.compose.Dimension
 import androidx.navigation.NavController
-import androidx.navigation.compose.rememberNavController
 import coil.compose.AsyncImage
+import com.google.firebase.auth.FirebaseUser
 import com.nextapp.monasterio.AppRoutes
 import com.nextapp.monasterio.R
 import com.nextapp.monasterio.data.ImagenRepository
 import com.nextapp.monasterio.ui.theme.MonasteryBlue
 import com.nextapp.monasterio.ui.theme.MonasteryOrange
-import androidx.compose.runtime.getValue
-import androidx.compose.runtime.setValue
-
-
 
 @Composable
-fun HomeScreenContent(isEditing: Boolean,navController:NavController, modifier: Modifier = Modifier) {
+fun HomeScreenContent(
+    isEditing: Boolean,
+    navController: NavController,
+    currentUser: FirebaseUser? = null,
+    topPadding: PaddingValues = PaddingValues(0.dp)
+) {
     val context = LocalContext.current
     val activity = (context as? Activity)
     val repo = ImagenRepository()
     var imagenFondoInicio by remember { mutableStateOf<String?>(null) }
 
+    val configuration = LocalConfiguration.current
+    val isLandscape = configuration.orientation == Configuration.ORIENTATION_LANDSCAPE
+
     LaunchedEffect(Unit) {
-        val data = repo.getImagenFondoInicio()   //  trae 'imagen_fondo_inicio'
+        val data = repo.getImagenFondoInicio()
         imagenFondoInicio = data?.url
     }
 
-
     DisposableEffect(Unit) {
-        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
-
-        onDispose {
-
-        }
+        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
+        onDispose {}
     }
 
-    ConstraintLayout(modifier = modifier.fillMaxSize().verticalScroll(rememberScrollState())) {
-        val (background, crest, title, btnVisit, btnChild,btnBook, btnEdit) = createRefs()
+    Box(modifier = Modifier.fillMaxSize()) {
+        // 1. FONDO
         if (imagenFondoInicio != null) {
             AsyncImage(
                 model = imagenFondoInicio,
                 contentDescription = null,
                 contentScale = ContentScale.Crop,
-                modifier = Modifier.constrainAs(background) {
-                    top.linkTo(parent.top)
-                    bottom.linkTo(parent.bottom)
-                    start.linkTo(parent.start)
-                    end.linkTo(parent.end)
-                    width = Dimension.fillToConstraints
-                    height = Dimension.fillToConstraints
-                }
+                modifier = Modifier.fillMaxSize()
             )
         } else {
             Image(
                 painter = painterResource(id = R.drawable.monastery_background),
                 contentDescription = null,
                 contentScale = ContentScale.Crop,
-                modifier = Modifier.constrainAs(background) {
-                    top.linkTo(parent.top)
-                    bottom.linkTo(parent.bottom)
-                    start.linkTo(parent.start)
-                    end.linkTo(parent.end)
-                    width = Dimension.fillToConstraints
-                    height = Dimension.fillToConstraints
-                }
-            )
+                modifier = Modifier.fillMaxSize()
+            )
+        }
+
+        // 2. CONTENIDO
+        Box(
+            modifier = Modifier
+                .fillMaxSize()
+                .padding(topPadding)
+        ) {
+            if (isLandscape) {
+                LandscapeLayout(isEditing, navController, currentUser)
+            } else {
+                PortraitLayout(isEditing, navController, currentUser)
+            }
         }
+    }
+}
 
+// =============================================================================
+// DISEO VERTICAL (PORTRAIT)
+// =============================================================================
+@Composable
+fun PortraitLayout(
+    isEditing: Boolean,
+    navController: NavController,
+    currentUser: FirebaseUser?
+) {
+    Column(
+        modifier = Modifier
+            .fillMaxSize()
+            .verticalScroll(rememberScrollState())
+            .padding(24.dp),
+        horizontalAlignment = Alignment.CenterHorizontally, // Centrado general
+        verticalArrangement = Arrangement.Center
+    ) {
+        // Logo Superior
         Image(
             painter = painterResource(id = R.drawable.huelgas_inicio),
-            contentDescription = "Escudo",
+            contentDescription = "Logo",
             contentScale = ContentScale.FillWidth,
             modifier = Modifier
-                .constrainAs(crest) {
-                    top.linkTo(parent.top, margin = 24.dp)
-                    start.linkTo(parent.start)
-                    end.linkTo(parent.end)
-                    width = Dimension.fillToConstraints
-                    height = Dimension.wrapContent
-                }
+                .fillMaxWidth()
+                .scale(1.1f) // Un poco m谩s grande visualmente
+                .padding(bottom = 48.dp)
+        )
+
+        if (currentUser != null) {
+            Text(
+                text = "Hola, ${currentUser.displayName ?: "Usuario"}",
+                style = MaterialTheme.typography.titleMedium,
+                color = Color.White,
+                modifier = Modifier.padding(bottom = 16.dp)
+            )
+        }
+
+        val buttonModifier = Modifier
+            .fillMaxWidth()
+            .height(80.dp)
+
+        // 1. Visita
+        HomeListButton(
+            text = stringResource(R.string.virtual_visit),
+            iconRes = R.drawable.ic_map_24,
+            backgroundColor = MonasteryOrange,
+            modifier = buttonModifier,
+            onClick = { navController.navigate(AppRoutes.VIRTUAL_VISIT) }
+        )
+
+        Spacer(modifier = Modifier.height(24.dp))
+
+        // 2. Ni帽os
+        HomeListButton(
+            text = stringResource(R.string.child_mode),
+            iconRes = R.drawable.outline_account_child_invert_24,
+            backgroundColor = Color(0xFF6EB017),
+            modifier = buttonModifier,
+            onClick = { navController.navigate(AppRoutes.MODO_NINYOS) }
         )
-        Button(
-            onClick = {
-                navController.navigate(AppRoutes.VIRTUAL_VISIT)
-            },
-            colors = ButtonDefaults.buttonColors(containerColor = MonasteryOrange),
-            shape = RoundedCornerShape(20.dp),
-            modifier = Modifier
-                .constrainAs(btnVisit) {
-                    bottom.linkTo(btnChild.top, margin = 48.dp)
-                    start.linkTo(parent.start, margin = 20.dp)
-                    end.linkTo(parent.end, margin = 20.dp)
-                    width = Dimension.fillToConstraints
-                }
-        ) {
-            Row(
-                modifier=Modifier.fillMaxWidth(),
-                verticalAlignment = Alignment.CenterVertically,
-                horizontalArrangement = Arrangement.Start
-            )  {
-                Icon(
-                    painter = painterResource(id = R.drawable.ic_map_24),
-                    contentDescription = null,
-                    modifier = Modifier
-                        .padding(end = 16.dp)
-                        .size(48.dp)
-                )
-                Spacer(modifier = Modifier.weight(1f))
-                Text(
-                    stringResource(id = R.string.virtual_visit),
-                    fontSize = 22.sp,
-                    textAlign = TextAlign.Center
-                )
-                Spacer(modifier = Modifier.width(64.dp).weight(1f))
-            }
+
+        Spacer(modifier = Modifier.height(24.dp))
+
+        // 3. Reserva
+        HomeListButton(
+            text = stringResource(R.string.book_appointment),
+            iconRes = R.drawable.ic_time_24,
+            backgroundColor = MonasteryBlue,
+            modifier = buttonModifier,
+            onClick = { navController.navigate(AppRoutes.OPCIONES_RESERVA) }
+        )
+
+        // 4. Edici贸n
+        if (!isEditing) {
+            Spacer(modifier = Modifier.height(24.dp))
+            HomeListButton(
+                text = stringResource(R.string.edit_mode),
+                iconRes = R.drawable.lapiz,
+                backgroundColor = Color(0xFF9C27B0),
+                modifier = buttonModifier,
+                onClick = { navController.navigate(AppRoutes.MODO_EDICION) }
+            )
+        }
+        Spacer(modifier = Modifier.height(40.dp))
+    }
+}
+
+// =============================================================================
+// DISEO HORIZONTAL (LANDSCAPE)
+// =============================================================================
+@Composable
+fun LandscapeLayout(
+    isEditing: Boolean,
+    navController: NavController,
+    currentUser: FirebaseUser?
+) {
+    Row(
+        modifier = Modifier
+            .fillMaxSize()
+            .padding(16.dp)
+            .statusBarsPadding()
+    ) {
+        // IZQUIERDA: Logo (40% ancho)
+        Box(
+            modifier = Modifier
+                .weight(0.4f)
+                .fillMaxHeight(),
+            contentAlignment = Alignment.Center
+        ) {
+            Image(
+                painter = painterResource(id = R.drawable.huelgas_inicio),
+                contentDescription = "Logo",
+                contentScale = ContentScale.Fit,
+                modifier = Modifier
+                    .fillMaxSize()
+                    .scale(1.1f)
+            )
         }
-        Button(
-            onClick = {
-                navController.navigate(AppRoutes.MODO_NINYOS)
-            },
-            colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF6EB017)),
-            shape = RoundedCornerShape(20.dp),
+
+        Spacer(modifier = Modifier.width(16.dp))
+
+        // DERECHA: Cuadr铆cula (60% ancho)
+        Column(
             modifier = Modifier
-                .constrainAs(btnChild) {
-                    bottom.linkTo(btnBook.top, margin = 48.dp)
-                    start.linkTo(parent.start, margin = 20.dp)
-                    end.linkTo(parent.end, margin = 20.dp)
-                    width = Dimension.fillToConstraints
-                }
-        ) {
+                .weight(0.6f)
+                .fillMaxHeight(),
+            verticalArrangement = Arrangement.spacedBy(12.dp),
+            horizontalAlignment = Alignment.CenterHorizontally // Alineados a la derecha si sobra espacio
+        ) {
+            // FILA 1
+            Row(
+                modifier = Modifier.weight(1f),
+                horizontalArrangement = Arrangement.spacedBy(12.dp)
+            ) {
+                HomeGridButton(
+                    text = stringResource(R.string.virtual_visit),
+                    iconRes = R.drawable.ic_map_24,
+                    backgroundColor = MonasteryOrange,
+                    modifier = Modifier.weight(1f),
+                    onClick = { navController.navigate(AppRoutes.VIRTUAL_VISIT) }
+                )
+                HomeGridButton(
+                    text = stringResource(R.string.child_mode),
+                    iconRes = R.drawable.outline_account_child_invert_24,
+                    backgroundColor = Color(0xFF6EB017),
+                    modifier = Modifier.weight(1f),
+                    onClick = { navController.navigate(AppRoutes.MODO_NINYOS) }
+                )
+            }
+
+            // FILA 2
             Row(
-                modifier=Modifier.fillMaxWidth(),
-                verticalAlignment = Alignment.CenterVertically,
-                horizontalArrangement = Arrangement.Start
-            )  {
-                Icon(
-                    painter = painterResource(id = R.drawable.outline_account_child_invert_24),
-                    contentDescription = null,
-                    modifier = Modifier
-                        .padding(end = 16.dp)
-                        .size(48.dp)
+                modifier = Modifier.weight(1f),
+                horizontalArrangement = Arrangement.spacedBy(12.dp)
+            ) {
+                HomeGridButton(
+                    text = stringResource(R.string.book_appointment),
+                    iconRes = R.drawable.ic_time_24,
+                    backgroundColor = MonasteryBlue,
+                    modifier = Modifier.weight(1f),
+                    onClick = { navController.navigate(AppRoutes.OPCIONES_RESERVA) }
                 )
-                Spacer(modifier = Modifier.weight(1f))
-                Text(
-                    stringResource(id = R.string.child_mode),
-                    fontSize = 22.sp,
-                    textAlign = TextAlign.Center
-                )
-                Spacer(modifier = Modifier.width(64.dp).weight(1f))
+
+                if (!isEditing) {
+                    HomeGridButton(
+                        text = stringResource(R.string.edit_mode),
+                        iconRes = R.drawable.lapiz,
+                        backgroundColor = Color(0xFF9C27B0),
+                        modifier = Modifier.weight(1f),
+                        onClick = { navController.navigate(AppRoutes.MODO_EDICION) }
+                    )
+                } else {
+                    Spacer(modifier = Modifier.weight(1f))
+                }
             }
         }
-        Button(
-            onClick = {
-                navController.navigate(AppRoutes.OPCIONES_RESERVA)
-            },
-            colors = ButtonDefaults.buttonColors(containerColor = MonasteryBlue),
-            shape = RoundedCornerShape(20.dp),
-            modifier = Modifier
-                .constrainAs(btnBook) {
-                    if(isEditing) {
-                        bottom.linkTo(btnEdit.top, margin = 48.dp)
-                    }else{
-                        bottom.linkTo(parent.bottom,margin=240.dp)
-                    }
-                    start.linkTo(parent.start, margin = 20.dp)
-                    end.linkTo(parent.end, margin = 20.dp)
-                    width = Dimension.fillToConstraints
-                }
-        ) {
-            Row(
-                modifier=Modifier.fillMaxWidth(),
-                verticalAlignment = Alignment.CenterVertically,
-                horizontalArrangement = Arrangement.Start
-            ) {
-                Icon(
-                    painter = painterResource(id = R.drawable.ic_time_24),
-                    contentDescription = null,
-                    modifier = Modifier
-                        .padding(end = 16.dp)
-                        .size(48.dp)
-
-                )
-                Spacer(modifier = Modifier.weight(1f))
-                Text(
-                    stringResource(id = R.string.book_appointment),
-                    fontSize = 22.sp,
-                    textAlign = TextAlign.Center,
-                )
-                Spacer(modifier = Modifier.width(64.dp).weight(1f))
-            }
-        }
-        if(!isEditing) {
-            Button(
-                onClick = {
-                    navController.navigate(AppRoutes.MODO_EDICION)
-                },
-                colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF9C27B0)), // P煤rpura de ejemplo
-                shape = RoundedCornerShape(20.dp),
-                modifier = Modifier
-                    .constrainAs(btnEdit) {
-                        bottom.linkTo(parent.bottom, margin = 120.dp)
-                        start.linkTo(parent.start, margin = 20.dp)
-                        end.linkTo(parent.end, margin = 20.dp)
-                        width = Dimension.fillToConstraints
-                    }
+    }
+}
+
+// =============================================================================
+// COMPONENTES
+// =============================================================================
+
+@Composable
+fun HomeListButton(
+    text: String,
+    iconRes: Int,
+    backgroundColor: Color,
+    modifier: Modifier = Modifier,
+    onClick: () -> Unit
+) {
+    Button(
+        onClick = onClick,
+        colors = ButtonDefaults.buttonColors(containerColor = backgroundColor),
+        shape = RoundedCornerShape(20.dp),
+        modifier = modifier,
+        elevation = ButtonDefaults.buttonElevation(8.dp)
+    ) {
+        Row(
+            modifier = Modifier.fillMaxWidth(),
+            verticalAlignment = Alignment.CenterVertically,
+            horizontalArrangement = Arrangement.Start
+        ) {
+            Icon(
+                painter = painterResource(id = iconRes),
+                contentDescription = null,
+                modifier = Modifier.size(32.dp)
+            )
+            Spacer(modifier = Modifier.weight(1f))
+            Text(
+                text = text,
+                fontSize = 20.sp,
+                fontWeight = FontWeight.Bold,
+                textAlign = TextAlign.End,
+                maxLines = 1, // Evita saltos de l铆nea feos en lista
+                overflow = TextOverflow.Ellipsis
+            )
+            Spacer(modifier = Modifier.weight(1f))
+            Spacer(modifier = Modifier.width(10.dp))
+        }
+    }
+}
 
-            ) {
-                Row(
-                    modifier = Modifier.fillMaxWidth(),
-                    verticalAlignment = Alignment.CenterVertically,
-                    horizontalArrangement = Arrangement.Start
-                ) {
+@Composable
+fun HomeGridButton(
+    text: String,
+    iconRes: Int,
+    backgroundColor: Color,
+    modifier: Modifier = Modifier,
+    onClick: () -> Unit
+) {
+    Card(
+        modifier = modifier
+            .fillMaxHeight()
+            .clip(RoundedCornerShape(16.dp))
+            .clickable { onClick() },
+        colors = CardDefaults.cardColors(containerColor = backgroundColor),
+        elevation = CardDefaults.cardElevation(8.dp)
+    ) {
+        BoxWithConstraints(
+            modifier = Modifier.fillMaxSize().padding(8.dp),
+            contentAlignment = Alignment.Center
+        ) {
+            // Autoajuste de tama帽o seg煤n espacio disponible
+            val availableHeight = maxHeight
+            val iconSize = if (availableHeight < 100.dp) 24.dp else 40.dp
+            val textSize = if (availableHeight < 100.dp) 14.sp else 18.sp
 
-                    Icon(
-                        painter = painterResource(id = R.drawable.lapiz), // cono provisional
-                        contentDescription = null,
-                        modifier = Modifier
-                            .padding(end = 16.dp)
-                            .size(48.dp)
-                    )
-                    Spacer(modifier = Modifier.weight(1f))
-                    Text(
-                        stringResource(id = R.string.edit_mode),
-                        fontSize = 22.sp,
-                        textAlign = TextAlign.Center
-                    )
-                    Spacer(modifier = Modifier.width(64.dp).weight(1f))
-                }
+            Column(
+                horizontalAlignment = Alignment.CenterHorizontally,
+                verticalArrangement = Arrangement.Center
+            ) {
+                Icon(
+                    painter = painterResource(id = iconRes),
+                    contentDescription = null,
+                    modifier = Modifier.size(iconSize),
+                    tint = Color.White
+                )
+                Spacer(modifier = Modifier.height(8.dp))
+                Text(
+                    text = text,
+                    fontSize = textSize,
+                    fontWeight = FontWeight.Bold,
+                    color = Color.White,
+                    textAlign = TextAlign.Center,
+                    lineHeight = textSize * 1.1,
+                    maxLines = 2, // Permite 2 l铆neas
+                    overflow = TextOverflow.Ellipsis // Puntos suspensivos si no cabe
+                )
             }
         }
     }
-}
+}
\ No newline at end of file
Index: app/src/main/java/com/nextapp/monasterio/MainActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nextapp.monasterio\r\n\r\nimport android.R.attr.text\r\nimport android.app.Activity\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.setContent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.appcompat.app.AppCompatDelegate\r\nimport androidx.compose.animation.AnimatedVisibility\r\nimport androidx.compose.animation.fadeIn\r\nimport androidx.compose.animation.fadeOut\r\nimport androidx.compose.foundation.Image\r\nimport androidx.compose.foundation.border\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.res.painterResource\r\nimport androidx.compose.ui.res.stringResource\r\nimport androidx.navigation.compose.rememberNavController\r\nimport com.nextapp.monasterio.ui.navigation.AppDrawerContent\r\nimport com.nextapp.monasterio.ui.navigation.AppNavigationHost\r\nimport com.nextapp.monasterio.ui.theme.*\r\nimport kotlinx.coroutines.launch\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.layout.ContentScale\r\nimport androidx.compose.ui.platform.LocalConfiguration\r\nimport androidx.compose.ui.platform.LocalDensity\r\nimport androidx.compose.ui.unit.Density\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport androidx.navigation.compose.currentBackStackEntryAsState\r\nimport com.nextapp.monasterio.utils.FontSize\r\nimport com.nextapp.monasterio.viewModels.AuthViewModel\r\nimport com.nextapp.monasterio.ui.screens.pinEdition.components.AppStatus\r\n\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)\r\n        super.onCreate(savedInstanceState)\r\n        LanguageHelper.loadLocale(this)\r\n\r\n        setContent {\r\n            // 1. Leemos el tama帽o guardado\r\n            val appFontScale = FontSize.devolverFontScale(this)\r\n            val currentDensity = LocalDensity.current\r\n            val currentConfig = LocalConfiguration.current\r\n\r\n            // 2. Calculamos la nueva Densidad\r\n            val newDensity = Density(\r\n                density = currentDensity.density,\r\n                fontScale = appFontScale\r\n            )\r\n\r\n            // 3. Actualizamos la Configuraci贸n\r\n            val newConfiguration = android.content.res.Configuration(currentConfig).apply {\r\n                fontScale = appFontScale\r\n            }\r\n\r\n            // 4. Inyectamos AMBOS valores\r\n            CompositionLocalProvider(\r\n                LocalDensity provides newDensity,\r\n                LocalConfiguration provides newConfiguration\r\n            ) {\r\n                Smov_monasterioTheme {\r\n                    // \uD83D\uDC47 PASAMOS 'this' (la actividad)\r\n                    MonasteryAppScreen(activity = this@MainActivity)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun MonasteryAppScreen(activity: AppCompatActivity) { // \uD83D\uDC48 Recibimos la actividad\r\n    val context = LocalContext.current\r\n    val navController = rememberNavController()\r\n    val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)\r\n    val scope = rememberCoroutineScope()\r\n\r\n    // ViewModel Auth\r\n    val authViewModel: AuthViewModel = viewModel()\r\n    val currentUser by authViewModel.currentUser.collectAsState(initial = null)\r\n\r\n    // Estado global edici贸n\r\n    var isEditing by remember { mutableStateOf(false) }\r\n\r\n    val currentTitle = remember { mutableStateOf(context.getString(R.string.title_inicio)) }\r\n\r\n    // Detectar ruta actual\r\n    val currentBackStackEntry by navController.currentBackStackEntryAsState()\r\n    val currentRoute = currentBackStackEntry?.destination?.route\r\n\r\n    // --- LGICA DE MODO INMERSIVO (CORREGIDA) ---\r\n\r\n    // 1. Pantallas de 360 y Edici贸n\r\n    val isPanorama = currentRoute?.startsWith(AppRoutes.PANORAMA) == true\r\n    val isPin360 = currentRoute?.startsWith(AppRoutes.PIN_360) == true\r\n    val isEdicion = currentRoute == AppRoutes.EDICION_PINES\r\n    val isEdicionFondo = currentRoute == AppRoutes.EDICION_FONDO_INICIO\r\n\r\n    // 2. Visita Virtual (Mapa General, Submapas y Pines)\r\n    // Usamos 'contains' en lugar de '==' para cubrir todas las variaciones\r\n    // y sub-rutas que puedan generarse al navegar.\r\n    val isMapSection = currentRoute?.let { route ->\r\n        route.startsWith(AppRoutes.VIRTUAL_VISIT) || // Cubre la entrada principal\r\n                route.contains(\"pin_detalle\") ||             // Cubre los detalles de los pines\r\n                route.contains(\"plano\")                      // Cubre los submapas (claustro, iglesia...)\r\n    } ?: false\r\n\r\n    // La vista es inmersiva si cumple CUALQUIERA de estas condiciones\r\n    val isImmersive = isPanorama || isPin360 || isEdicion || isEdicionFondo || isMapSection\r\n\r\n    val gesturesEnabled = when(currentRoute){\r\n        AppRoutes.VIRTUAL_VISIT -> false\r\n        else -> true\r\n    }\r\n    LaunchedEffect(navController) {\r\n        navController.currentBackStackEntryFlow.collect { backStackEntry ->\r\n            val route = backStackEntry.destination.route\r\n            val routeBase = route?.split(\"/\")?.firstOrNull() ?: route\r\n\r\n            currentTitle.value = when (routeBase) { // <-- Usamos routeBase\r\n                AppRoutes.INFO -> context.getString(R.string.title_info_general)\r\n                AppRoutes.HISTORIA -> context.getString(R.string.title_history)\r\n                AppRoutes.GALERIA -> context.getString(R.string.title_gallery)\r\n                AppRoutes.PERFIL -> context.getString(R.string.title_profile)\r\n                AppRoutes.AJUSTES -> context.getString(R.string.title_settings)\r\n                AppRoutes.OPCIONES_RESERVA,\r\n                AppRoutes.RESERVA,\r\n                AppRoutes.CONFIRMACION_RESERVA -> context.getString(R.string.title_appointment)\r\n                AppRoutes.VIRTUAL_VISIT -> context.getString(R.string.title_monasterio)\r\n                AppRoutes.MODO_NINYOS -> context.getString(R.string.child_mode_view)\r\n                AppRoutes.VIDEO_NINYOS -> context.getString(R.string.video_view)\r\n                AppRoutes.JUEGO_NINYOS -> context.getString(R.string.game_view)\r\n                AppRoutes.MODO_EDICION -> context.getString(R.string.edit_mode)\r\n                AppRoutes.PIN_ENTRADA_MONASTERIO -> context.getString(R.string.title_entrada)\r\n                AppRoutes.JUEGO_PUZZLE -> context.getString(R.string.puzzle_screen)\r\n                AppRoutes.JUEGO_PAREJAS -> context.getString(R.string.memory_screen)\r\n                AppRoutes.PUZZLENIVEL1 -> context.getString(R.string.puzzle_screen)\r\n                AppRoutes.PUZZLENIVEL2 -> context.getString(R.string.puzzle_screen)\r\n                AppRoutes.PUZZLENIVEL3 -> context.getString(R.string.puzzle_screen)\r\n                AppRoutes.PUZZLENIVEL4 -> context.getString(R.string.puzzle_screen)\r\n                AppRoutes.PAREJASNIVEL1 -> context.getString(R.string.memory_screen)\r\n                AppRoutes.PAREJASNIVEL2 -> context.getString(R.string.memory_screen)\r\n                AppRoutes.PAREJASNIVEL3 -> context.getString(R.string.memory_screen)\r\n                AppRoutes.PAREJASNIVEL4 -> context.getString(R.string.memory_screen)\r\n                AppRoutes.EDICION_FONDO_INICIO -> context.getString(R.string.background_edit_screen)\r\n                AppRoutes.EDICION_PINES -> context.getString(R.string.pin_edit_screen)\r\n                else -> context.getString(R.string.title_inicio)\r\n            }\r\n        }\r\n    }\r\n\r\n    ModalNavigationDrawer(\r\n        drawerState = drawerState,\r\n        drawerContent = {\r\n            AppDrawerContent(\r\n                navController = navController,\r\n                scope = scope,\r\n                drawerState = drawerState\r\n            )\r\n        },\r\n        gesturesEnabled = gesturesEnabled && !isImmersive\r\n    ) {\r\n        Scaffold(\r\n            topBar = {\r\n                if (!isImmersive) {\r\n                    Column {\r\n                        CenterAlignedTopAppBar(\r\n                            title = { Text(currentTitle.value) },\r\n                            colors = TopAppBarDefaults.topAppBarColors(\r\n                                containerColor = MonasteryRed,\r\n                                titleContentColor = White,\r\n                                navigationIconContentColor = White,\r\n                                actionIconContentColor = White\r\n                            ),\r\n                            navigationIcon = {\r\n                                IconButton(onClick = {\r\n                                    scope.launch {\r\n                                        if (drawerState.isClosed) drawerState.open() else drawerState.close()\r\n                                    }\r\n                                }) {\r\n                                    val iconRes = if (drawerState.isOpen) R.drawable.menu_close else R.drawable.ic_menu_24\r\n                                    Icon(\r\n                                        painter = painterResource(id = iconRes),\r\n                                        contentDescription = stringResource(id = R.string.navigation_drawer_open)\r\n                                    )\r\n                                }\r\n                            },\r\n                            actions = {\r\n                                // SELECTOR DE IDIOMA\r\n                                MainLanguageSelector(activity)\r\n\r\n                                // Icono Editar (solo si hay usuario)\r\n                                if (currentUser != null) {\r\n                                    IconButton(onClick = {\r\n                                        isEditing = !isEditing\r\n                                        val message = if (isEditing)\r\n                                            context.getString(R.string.edit_mode_activate_message)\r\n                                        else\r\n                                            context.getString(R.string.edit_mode_deactivate_message)\r\n                                        Toast.makeText(context, message, Toast.LENGTH_SHORT).show()\r\n                                    }) {\r\n                                        Icon(\r\n                                            painter = painterResource(id = R.drawable.lapiz),\r\n                                            contentDescription = if (isEditing)\r\n                                                stringResource(id = R.string.edit_mode_deactivate_icon)\r\n                                            else\r\n                                                stringResource(id = R.string.edit_mode_activate_icon),\r\n                                            tint = White\r\n                                        )\r\n                                    }\r\n                                }\r\n                            }\r\n                        )\r\n\r\n                        // Barra de progreso global (Subida de im谩genes, etc.)\r\n                        val isGlobalLoading by AppStatus.isUploading.collectAsState()\r\n                        AnimatedVisibility(\r\n                            visible = isGlobalLoading,\r\n                            enter = fadeIn(),\r\n                            exit = fadeOut()\r\n                        ) {\r\n                            LinearProgressIndicator(\r\n                                modifier = Modifier.fillMaxWidth(),\r\n                                color = MonasteryBlue\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        ) { paddingValues ->\r\n            AppNavigationHost(\r\n                authViewModel = authViewModel,\r\n                navController = navController,\r\n                isEditing = isEditing,\r\n                modifier = Modifier.padding(paddingValues)\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n// --- COMPONENTES DE IDIOMA PARA LA BARRA ---\r\n\r\n@Composable\r\nfun MainLanguageSelector(activity: AppCompatActivity) {\r\n    var expanded by remember { mutableStateOf(false) }\r\n\r\n    // Obtenemos idioma actual\r\n    val currentLanguageCode = activity.resources.configuration.locales[0].language\r\n\r\n    // Determinamos bandera actual\r\n    val currentFlag = when (currentLanguageCode) {\r\n        \"de\" -> R.drawable.alemania\r\n        \"en\" -> R.drawable.reinounido\r\n        \"fr\" -> R.drawable.francia\r\n        else -> R.drawable.espanya\r\n\r\n    }\r\n\r\n    Box {\r\n        // Bot贸n de la bandera\r\n        IconButton(onClick = { expanded = true }) {\r\n            Image(\r\n                painter = painterResource(id = currentFlag),\r\n                contentDescription = \"Cambiar idioma\",\r\n                contentScale = ContentScale.Crop,\r\n                modifier = Modifier\r\n                    .size(28.dp)\r\n                    .clip(RoundedCornerShape(4.dp))\r\n                    .border(1.dp, Color.White.copy(alpha = 0.5f), RoundedCornerShape(4.dp))\r\n            )\r\n        }\r\n\r\n        // Men煤 desplegable\r\n        DropdownMenu(\r\n            expanded = expanded,\r\n            onDismissRequest = { expanded = false },\r\n            modifier = Modifier.width(150.dp)\r\n        ) {\r\n            MainLanguageItem(activity, \"es\", stringResource(R.string.lang_es), R.drawable.espanya) { expanded = false }\r\n            MainLanguageItem(activity, \"en\", stringResource(R.string.lang_en), R.drawable.reinounido) { expanded = false }\r\n            MainLanguageItem(activity, \"de\", stringResource(R.string.lang_de), R.drawable.alemania) { expanded = false }\r\n            MainLanguageItem(activity, \"fr\", stringResource(R.string.lang_fr), R.drawable.francia) { expanded = false }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nfun MainLanguageItem(\r\n    activity: AppCompatActivity,\r\n    code: String,\r\n    name: String,\r\n    flagRes: Int,\r\n    onDismiss: () -> Unit\r\n) {\r\n    DropdownMenuItem(\r\n        text = {\r\n            Row(verticalAlignment = Alignment.CenterVertically) {\r\n                Image(\r\n                    painter = painterResource(id = flagRes),\r\n                    contentDescription = null,\r\n                    modifier = Modifier.size(24.dp).clip(RoundedCornerShape(2.dp))\r\n                )\r\n                Spacer(modifier = Modifier.width(12.dp))\r\n                Text(text = name, style = MaterialTheme.typography.bodyMedium)\r\n            }\r\n        },\r\n        onClick = {\r\n            onDismiss()\r\n            val currentLanguage = activity.resources.configuration.locales[0].language\r\n            if (currentLanguage != code) {\r\n                LanguageHelper.saveLocale(activity, code)\r\n                activity.recreate()\r\n            }\r\n        }\r\n    )\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt
--- a/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(revision abe1b7b60ad45f15ce10d79238751072dbc07ba7)
+++ b/app/src/main/java/com/nextapp/monasterio/MainActivity.kt	(date 1764528853574)
@@ -238,11 +238,17 @@
                 }
             }
         ) { paddingValues ->
+            val isHome = currentRoute == AppRoutes.INICIO
+
             AppNavigationHost(
                 authViewModel = authViewModel,
                 navController = navController,
                 isEditing = isEditing,
-                modifier = Modifier.padding(paddingValues)
+                // TRUCO: Si es Home, NO ponemos padding al contenedor (para que el fondo se estire).
+                // Si es otra pantalla, S ponemos padding.
+                modifier = if (isHome) Modifier else Modifier.padding(paddingValues),
+                // Pasamos el padding adentro para usarlo solo en los botones del Home
+                scaffoldPadding = paddingValues
             )
         }
     }
